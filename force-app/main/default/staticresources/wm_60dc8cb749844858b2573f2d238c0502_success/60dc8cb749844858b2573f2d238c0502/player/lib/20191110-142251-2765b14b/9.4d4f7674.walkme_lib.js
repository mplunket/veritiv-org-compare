window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[9],{760:function(e,r,i){(function(){"use strict";r.__esModule=!0;var e=i(761);function t(){i(762),i(763),i(765),i(766),i(767),i(768),i(769)}r.init=function n(){t(),e.privateCtx.get("UserCentricPerformance").start()},r.registers=t}).call(window)},761:function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},762:function(e,t,n){(function(){"use strict";t.__esModule=!0,n(761).privateCtx.register("UserCentricPerformance").asFunction(function s(e,t,n,r,i){function o(){r.untrack(),i.untrack()}return{start:function a(){n.track(),t.handlePerfRecords(e.__tti&&e.__tti.e),i.track(),r.track(),e.on("removeWalkMe",function(){o()})},stop:o}}).dependencies("WmInternals,UCPUtils,UCPTracker,TTITracker,AbandonTracker")}).call(window)},763:function(e,t,d){(function(){"use strict";t.__esModule=!0,d(761).privateCtx.register("TTITracker").asFunction(function u(e,r,t,n,i){function o(){e.__tti&&e.__tti.o&&(t.handlePerfRecords(e.__tti.o.takeRecords()),e.__tti.o.disconnect())}var a={track:function s(){if(!("PerformanceLongTaskTiming"in window))return i.fallbackNoTTI(),void o();(0,a.__getTTIPolyfill().getFirstConsistentlyInteractive)({minValue:undefined,searchStartGetter:function(){var e=t.getLastLCP();if(e)return e.startTime+e.duration},useMutationObserver:!0,__tti:e.__tti,setTimeout:n.setWalkmeTimeout,clearTimeout:function(e){e&&e.clear&&e.clear()}}).then(function(e){var t=e.tti,n=e.searchStart;i.untrack(),r.send({key:"TTI",time:Math.round(n),total:Math.round(t),duration:Math.round(t-n)})})},untrack:o,__getTTIPolyfill:function c(){return d(764)}};return a}).dependencies("WmInternals,UCPEventSender,UCPUtils,TimerManager,AbandonTracker")}).call(window)},764:function(r,e,t){(function(k){!function(){function s(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(e)}}function c(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var d,l,e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,u=0,f={};var h,p="img script iframe link audio video source".split(" ");function m(e,t){for(var n=(e=s(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||n.children&&m(n.children,t))return!0;return!1}function v(e){return 1e3*(4*Math.pow(Math.E,e/1e3*-.045)+1)}function g(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=s(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=s(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function w(){}function t(e){var t=this;h=(e=void 0===e?{}:e).log||w,this.setTimeout=e.setTimeout||setTimeout,this.clearTimeout=e.clearTimeout||clearTimeout,this.G=!!e.useMutationObserver,this.A=e.minValue||null,this.B=e.searchStartGetter||null;var n=e.__tti&&e.__tti.e;e=e.__tti&&e.__tti.o,this.a=[],this.b=[],n&&(h("Consuming the long task & network entries already recorded."),n.forEach(function(e){"longtask"===e.entryType?T(t,e):"resource"===e.entryType&&t.b.push({start:e.fetchStart,end:e.responseEnd})})),e&&e.disconnect(),this.c=new Map,this.v=null,this.u=-Infinity,this.s=!1,this.m=this.i=this.w=null,this.f={l:this.D.bind(this),g:this.C.bind(this)},function r(o){f.send=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=d=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var r=this,i=u++;return o.l(i),this.addEventListener("readystatechange",function(){4===r.readyState&&o.g(i)}),f.send.apply(this,t)}}(this.f),function i(o){f.fetch=fetch,fetch=l=function(e){for(var i=[],t=0;t<arguments.length;++t)i[t]=arguments[t];return new k(function(t,n){var r=u++;o.l(r),f.fetch.apply(f,c(i)).then(function(e){o.g(r),t(e)},function(e){o.g(r,e),n(e)})})}}(this.f),function o(r){r.i=new PerformanceObserver(function(e){for(var t=(e=s(e=e.getEntries())).next();!t.done;t=e.next()){if("resource"===(t=t.value).entryType){var n=t;h("Network request finished",n),r.b.push({start:n.fetchStart,end:n.responseEnd}),y(r,g(r.h,r.b)+r.j)}"longtask"===t.entryType&&(h("Long task finished",t),t=T(r,t),y(r,t.end+r.j))}}),r.i.observe({entryTypes:["longtask","resource"]})}(this),this.G&&(this.m=function a(n){var e=new MutationObserver(function(e){for(var t=(e=s(e)).next();!t.done;t=e.next())"childList"==(t=t.value).type&&m(t.addedNodes,p)?n(t):"attributes"==t.type&&p.includes(t.target.tagName.toLowerCase())&&n(t)});return e.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),e}(this.F.bind(this)))}function n(e){h("Enabling FirstConsistentlyInteractiveDetector"),e.s=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=g(e.h,e.b);y(e,Math.max(n+5e3,t))}function y(i,e){i.s?(h("Attempting to reschedule FirstConsistentlyInteractive check to "+e),h("Previous timer activation time: "+i.u),i.u>e?h("Current activation time is greater than attempted reschedule time. No need to postpone."):(i.clearTimeout(i.v),i.v=i.setTimeout(function(){h("Checking if First Consistently Interactive was reached...");var e,t=g(i.h,i.b);i.B&&(e=i.B())||(e=performance.timing.navigationStart,e=(window.a&&window.a.H?1e3*window.a.H().I-e:0)||performance.timing.domContentLoadedEventEnd-e);var n=o(i),r=performance.now();null===n&&(h("No usable minimum value yet. Postponing check."),y(i,Math.max(t+i.j,r+1e3))),h("Parameter values:"),h("NavigationStart",performance.timing.navigationStart),h("lastKnownNetwork2Busy",t),h("Search Start",e),h("Min Value",n),h("Last busy",t),h("Current time",r),h("Long tasks",i.a),h("Incomplete JS Request Start Times",i.h),h("Network requests",i.b),(t=r-t<5e3?null:r-(t=function u(e,t){function n(){250<s.end-s.start&&(o=Math.max(o,s.end),a=v(o-e))}var r=e+5e3,i=t.filter(function(e){return e.start>r}),o=0===(t=t.filter(function(e){return e.start<=r})).length?e:t[t.length-1].end;if(0===i.length)return o;var a,s={start:o-1e3,end:o};for(n(),t=0;t<i.length;t++){var c=i[t];if(c.start<s.end+1e3)s.end=c.end,n();else{if(c.start>o+a)break;s={start:c.start,end:c.end},n()}}return o}(e,i.a))<v(t)?null:Math.max(t,n))?(i.w({tti:t,searchStart:e}),h("Disabling FirstConsistentlyInteractiveDetector"),i.clearTimeout(i.v),i.s=!1,i.i&&i.i.disconnect(),i.m&&i.m.disconnect(),f.send&&XMLHttpRequest.prototype.send===d&&(XMLHttpRequest.prototype.send=f.send),f.fetch&&fetch===l&&(fetch=f.fetch),i.f&&(i.f.l=w,i.f.g=w),i.a=[],i.b=[],i.c=new Map):(h("Could not detect First Consistently Interactive. Retrying in 1 second."),y(i,performance.now()+1e3))},e-performance.now()),i.u=e,h("Rescheduled firstConsistentlyInteractive check at "+e))):h("startSchedulingTimerTasks must be called before calling rescheduleTimer")}function T(e,t){return t={start:t.startTime,end:t.startTime+t.duration},e.a.push(t),t}function o(e){return e.A?e.A:performance.timing.domContentLoadedEventEnd?(e=performance.timing).domContentLoadedEventEnd-e.navigationStart:null}t.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new k(function(e){t.w=e,"complete"==document.readyState?n(t):window.addEventListener("load",function(){n(t)})})},t.prototype.D=function(e){h("Starting JS initiated request. Request ID: "+e),this.c.set(e,performance.now()),h("Active XHRs: "+this.c.size)},t.prototype.C=function(e){h("Completed JS initiated request with request ID: "+e),this.c["delete"](e),h("Active XHRs: "+this.c.size)},t.prototype.F=function(e){h("Potentially network resource fetching mutation detected",e),h("Pushing back FirstConsistentlyInteractive check by 5 seconds."),y(this,performance.now()+this.j)},e.Object.defineProperties(t.prototype,{h:{configurable:!0,enumerable:!0,get:function(){return[].concat(c(this.c.values()))}},j:{configurable:!0,enumerable:!0,get:function(){var e=o(this);return v(null!==e?performance.now()-e:0)}}}),r.exports={getFirstConsistentlyInteractive:function(e){return e=void 0===e?{}:e,"PerformanceLongTaskTiming"in window?new t(e).getFirstConsistentlyInteractive():k.resolve(null)}}}()}).call(this,t(29))},765:function(e,t,n){(function(){"use strict";t.__esModule=!0,n(761).privateCtx.register("AbandonTracker").asFunction(function a(e,t){function n(){document.removeEventListener&&document.removeEventListener("visibilitychange",r)}function r(){n(),e.send({key:"abandon",time:Math.round(performance.now())})}return{track:function i(){document.addEventListener&&document.addEventListener("visibilitychange",r)},untrack:n,fallbackNoTTI:function o(){t.setWalkmeTimeout(n,5e3)}}}).dependencies("UCPEventSender,TimerManager")}).call(window)},766:function(e,n,r){(function(){"use strict";n.__esModule=!0,r(761).privateCtx.register("UCPUtils").asFunction(function t(d,l,f,h){var o;function p(e){if(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push({type:i.containerType,src:i.containerSrc,id:i.containerId,name:i.containerName})}return t}}function m(e){var t=e.startTime,n=e.entryType,r=e.duration,i=e.size;"largest-contentful-paint"===n&&(!o||o.size<i)&&(o={startTime:t,entryType:n,duration:r,size:i})}return{handlePerfRecords:function v(e){void 0===e&&(e=[]);for(var t=0,n=e=function u(e){return void 0===e&&(e=[]),e.filter(function(e){var t=e.entryType,n=(e.initiatorType,e.name),r=void 0===n?"":n;if(!h.isAllowed(t))return!1;if("resource"!==t)return!0;var i=l.getSettingsFile();return!(i&&(-1!==r.indexOf(i.EventServer)||-1!==r.indexOf(i.PlayerServer)))})}(e);t<n.length;t++){var r=n[t],i=r.name,o=r.startTime,a=r.duration,s=r.attribution,c=r.entryType;m(r),f.send({time:Math.round(o),duration:Math.round(a),type:c,key:i,total:Math.round(o+a),reason:d.toJSON(p(s))})}},getLastLCP:function e(){return o}}}).dependencies("JsonUtils,SettingsFile,UCPEventSender,UCPTrackingTypes")}).call(window)},767:function(e,t,n){(function(){"use strict";t.__esModule=!0,n(761).privateCtx.register("UCPEventSender").asFunction(function i(e,t){var n=e.wrapCustomerLog("UserCentricPerf");return{send:function r(e){e.name="UserCentricPerf",n(e),t.send("feperf",e)}}}).dependencies("Logger,SessionThrottledBIBeaconLogger")}).call(window)},768:function(e,t,n){(function(){"use strict";t.__esModule=!0,n(761).privateCtx.register("UCPTracker").asFunction(function e(t,n,r){var i;function o(){n.handlePerfRecords(i&&i.takeRecords()),i&&i.disconnect()}return{track:function a(){if("PerformanceObserver"in window){var e=[];if("PerformanceResourceTiming"in window&&r.isAllowed("resource")&&e.push("resource"),"PerformancePaintTiming"in window&&r.isAllowed("paint")&&e.push("paint"),"PerformanceLongTaskTiming"in window&&r.isAllowed("longtask")&&e.push("longtask"),"LargestContentfulPaint"in window&&r.isAllowed("largest-contentful-paint")&&e.push("largest-contentful-paint"),0===e.length)return;(i=new PerformanceObserver(function(e){n.handlePerfRecords(e.getEntries())})).observe({entryTypes:e}),t.perf=t.perf||{},t.perf.observer=i,t.on("removeWalkMe",function(){o()})}},untrack:o}}).dependencies("WmInternals,UCPUtils,UCPTrackingTypes")}).call(window)},769:function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(761),r=["paint","largest-contentful-paint"];e.privateCtx.register("UCPTrackingTypes").asFunction(function i(t){return{isAllowed:function n(e){return-1!==r.indexOf(e)||(t.isFeatureEnabled("ucp-"+e)||t.isFeatureEnabled("ucp-measure-all"))}}}).dependencies("FeaturesManager")}).call(window)}}]);
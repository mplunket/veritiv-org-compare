!function(s){function t(){return c(29)}function u(e){return new(t())(e)}function e(e){for(var t,n,r=e[0],i=e[1],o=0,a=[];o<r.length;o++)n=r[o],l[n]&&a.push(l[n][0]),l[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(s[t]=i[t]);for(d&&d(e);a.length;)a.shift()()}u.resolve=function(e){return t().resolve(e)},u.reject=function(e){return t().reject(e)},u.all=function(e){return t().all(e)};var n={},l={0:0};function c(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(o){var e=[],n=l[o];if(0!==n)if(n)e.push(n[2]);else{var t=new u(function(e,t){n=l[o]=[e,t]});e.push(n[2]=t);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.src=function i(e){return c.p+""+({20:"webComponentDrawableCreator"}[e]||e)+"."+{1:"8061f8ff",2:"6854a64d",3:"84a0b56e",4:"d926ad24",5:"8d6a478c",6:"33137387",7:"d08eccef",8:"c8c2e163",9:"4d4f7674",10:"ee616cfa",11:"32b67db2",12:"ceb2fed0",13:"df9ed250",14:"3ce772de",15:"36aa7c30",16:"a6df6d37",17:"e1911813",18:"e85fba59",19:"80f7990c",20:"e9cca815",21:"f911da5e",22:"b7cd41c4",23:"13e0e8ae",24:"9036ba18",25:"df1557bf",26:"84c43c09",27:"383f8873",28:"c64f55ff",29:"41e82b4a",30:"ac278876",31:"23de780f",32:"d2e3650a",33:"f5b97c16",34:"a452224a",35:"11a2b3c5",36:"0cb72880",37:"3b421719",38:"9556c1d3",39:"1f9efbf6",40:"b9432c15",41:"f774c298",42:"872eb7ae",43:"d9194cfc",44:"f701da10",45:"235bfc8c"}[e]+".walkme_lib.js"}(o),r=function(e){a.onerror=a.onload=null,clearTimeout(s);var t=l[o];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,i=new Error("Loading chunk "+o+" failed.\n("+n+": "+r+")");i.type=n,i.request=r,t[1](i)}l[o]=undefined}};var s=setTimeout(function(){r({type:"timeout",target:a})},12e4);a.onerror=a.onload=r,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}return u.all(e)},c.m=s,c.c=n,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return function(){return t[e]}}(r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var r=window._walkmeWebpackJP=window._walkmeWebpackJP||[];r.push=e,r=r.slice();for(var i=0;i<r.length;i++)e(r[i]);var d=function(){r.push.apply(r,arguments)};c(c.s=0)}([function(module,exports,__webpack_require__){(function(__extends){(function(){var ma,Eb,Fb,rf,Of,Pf,Qf;function ClassMakeTutorial(Tr,lt){this.MTVersion="1.0",this.SVNRevision="$MasterRev: 2765b14b $",this.LibVersion="20191110-142251-2765b14b",this.SpecialRevision="no",__webpack_require__(2);var r=lt.di,Cr=lt.ctx;!function(e){var t=__webpack_require__(4);e.register("SimpleNLP").asInstance(t);var n=__webpack_require__(5)();e.register("ObjectMapper").asInstance(n.objectMapper),e.register("ObjectJpath").asInstance(n.objectJpath);var r=__webpack_require__(8);e.register("FlowNodeExtensions").asInstance(r.bizFlowExtensions),e.register("BaseGraphDfsService").asInstance(r.baseGraphDfsService);var i=__webpack_require__(16)();e.register("DeployableConsts").asInstance(i);var o=__webpack_require__(17)(e);e.register("UIComponentsClasses").asInstance(o);var a=__webpack_require__(24);e.register("NewToOldConditionConverter").asInstance(a.newToOldConditionConverter),e.register("OldToNewConditionConverter").asInstance(a.oldToNewConditionConverter);var s=__webpack_require__(28);if(e.register("Base64").asInstance(s),!e.has("PromiseManager")){var u=__webpack_require__(29).Promise;e.register("PromiseManager").asInstance(u)}var l=__webpack_require__(30);e.register("SharedConsts").asInstance(l);var c=__webpack_require__(58);e.register("BalloonTemplatesProvider").asInstance(c);var d=__webpack_require__(63);e.register("StorageKeysConfigurations").asInstance(d);var f=__webpack_require__(65),p=__webpack_require__(66)(f.decode);e.register("JsonHtmlDecoder").asInstance(p),__webpack_require__(67)}(window._walkmeInternals.ctx);var ct=Cr.get("PromiseManager").Promise;Cr.register("DeployableTypes").dependencies("Consts").asFunction(function(e){return e.DEPLOYABLE_TYPE}),Cr.register("Consts").asCtor(function Ke(e,t){var n=this;n.SURVEY_ANSWER_FREE_TEXT={MAX_LENGTH:1e3,EXTENDED_LENGTH:1500},n.ELEMENT_OWNER_TYPE_NAMES={TRIGGER:"trigger",SMART_TIP:"smartTip",SWT:"swt",WT:"wt",STEP:"step",CONDITION:"condition",LAUNCHER:"launcher",SMART_TIPSET:"smartTipSet",START_POINT:"startPoint",ACTION:"action"},n.COOKIE_LIFE_10_YEARS=31536e4,n.COOKIE_LIFE_2_YEARS=63072e3,n.ONE_DAY_SECONDS=86400,n.ONE_YEAR_SECONDS=31536e3,n.CSS_RESET={display:"block",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0,marginRight:0,verticalAlign:"baseline",borderCollapse:"inherit",backgroundImage:"none",backgroundColor:"transparent",orderSpacing:"1px 1px",lineHeight:"normal",height:"auto",textIndent:"inherit",letterSpacing:"normal",textTransform:"none",outline:"invert none medium",width:"auto",boxShadow:"none",textShadow:"none",borderTopStyle:"none",borderTopWidth:"medium",borderRightStyle:"none",borderRightWidth:"medium",borderBottomStyle:"none",borderBottomWidth:"medium",borderLeftStyle:"none",borderLeftWidth:"medium",position:"static",top:"auto",left:"auto",transition:"none",boxSizing:"content-box",color:"#EB15E2"},n.DEBUGGER={STATE_NAME:"wm-ftr",STATE:{Deactive:0,Active:1,ActiveAndReset:2}},n.IS_DISPLAY_POWERED_BY={Show:"txt",Hide:"no"},n.ANALYTICS_CUSTOM_VARS={MaxVarLength:100,MaxCustomFields:5},n.AJAX_PROVIDERS={wmjQueryAjaxProvider:1,ajaxProxyProvider:2},n.STEP_STATUS={SupposedToShow:0,Shown:1,Performed:2,SkippedNotFound:3,SkippedByCondition:4,MovedBack:5,Exited:6,FakeFound:7,SkippedByTutorialCondition:8,SkippedStartedFromBiggerStep:9,NonValidActionStep:10,SkippedByActionStep:11,Completed:12},n.LOG_FEATURES={AUDIT_STEPS:"auditSteps",BALLOON:"balloon",UI_CHANGE_TRACKER:"changeTracker",EXTERNAL_CONDITIONS_HANDLERS:"externalConditionHandlers"},n.STEP_ACTION={Redirect:"redirect",PlayStep:"playStep",WaitForCondition:"waitForCond",Branch:"branchWt",StopWt:"stopWt",Delay:"delay",Refresh:"refresh",OpenPlayerMenu:"openPlayerMenu",SetWalkMeData:"setWalkMeData",PassOwnership:"passOwnership"},n.STEP_TYPE={Normal:0,Popup:1,Action:2},n.SOURCES={production:0,preview:1,play:2,test:3,success:32},n.TIME_PERIODS={DaySeconds:86400},n.STORAGE_KEYS={lastGetDataTime:"wm-lgt",remindMeLater:"wm-RML",customAuditVarDictionary:"wm-cavd",WALKTHRU_PERSISTENCE_DATA:"wm-prsst"},n.STORAGE_TYPE={Cookie:"cookie",CrossDomain:"crossdomain",JStorage:"jstorage",CrossDomainLocalStorage:"crossdomain_ls",CrossDomainCookies:"crossdomain_ck",Extension:"extension",ProxyIframe:"proxy"},n.PLATFORM={Web:1,MobileWeb:3,Desktop:6},n.STEP_PLAY_INITIATOR_ENUM={NONE:0,WIDGET:1,API:2,LAUNCHER:3,TASK:4,BRANCHING:5,AUTOSTART:6,PERMALINK:7,BBCODE:8,CHAT_AGENT:9,SHOUTOUT:10,WALKTHRU:11,STEP:12,ATTENTION_GRABBER:13,FLOW_STEP:14,COURSE:15,CUSTOMIZATION:16,RESTART_SWT:17},n.AUDIT_TYPE={OPEN_TICKET:100},n.PLAY_MODE={Widget:0,LightBox:1,NewTab:2,SameTab:3},n.ELEMENT_INTERACTION_TYPES={Visible:0,NotVisible:1},n.SHOUTOUT_TYPES={snackbar:10,popup:20,fullScreen:30,customView:40},n.SPOTLIGHT_TYPES={arrow:1,django:2},n.MOBILE_COMMANDS={ACTION:{libAction:2003}},n.EVENT_SENDER_EVENT_TYPES={Close:"close",Open:"open",Play:"play",PlayFailed:"playFailed",Click:"click",Search:"search",Complete:"complete",GoalReached:"goalReach",ProgressUpdate:"progressUpdate",Submitted:"submitted",Loaded:"loaded",Visible:"visible",Draw:"draw",MouseEnter:"mouseenter",Focus:"focus",Blur:"blur",Passed:"passed",Failed:"failed",TeachMeStepCompletion:"teachMeStepCompletion",TeachMeCourseCompletion:"teachMeCourseCompletion",TeachMeCompletionUpdate:"teachMeCompletionUpdate",TeachMeStepStarted:"teachMeStepStarted",SessionPing:"sessionPing",ActionClicked:"click",Custom:"custom"},n.CUSTOM_EVENTS={WINDOW_MAXIMAL_MESSAGE_NUM:20,WINDOW_LENGTH:6e4,EVENT_NAME:"Custom Event",KEY_MAX_LENGTH:500,VALUE_MAX_LENGTH:500,DEFAULT_DATA_KEY:"default"},n.TeachMe={QUIZ_RESULT_STORAGE_KEY_PREFIX:"wm-lms-quiz-res-",QUIZ_STATUS_CLASS:{PASSED:"passed",FAILED:"failed",NOT_TESTED:"not-tested"},QUIZ_STATUS_TEXT:{PASSED:"Quiz Passed",FAILED:"Quiz Failed",NOT_TESTED:"Not Tested"},QUIZ_STATUS:{PASSED:1,FAILED:0,NOT_TESTED:undefined}},n.EVENT_SENDER_STEP_ACTION_NAMES={Redirect:0,PlayStep:1,WaitForCondition:2,Branch:3,StopWt:4,Delay:5,Refresh:6,OpenPlayerMenu:7,SetWalkMeData:8,PassOwnership:9,ErrorHandling:10,Split:11,OnPageActionClick:12,OnPageActionHover:13,OnPageActionFocus:14,OnPageActionFillText:15,OnPageActionSelectListValue:16,Style:17,RestartSwt:18},n.EVENT_SENDER_ACTIONS={None:"none",OpenMenu:"menu",OpenCoursesMenu:"coursesMenu",PlayWalkthru:"wt",PlayShuttle:"shuttle",PlaySurvey:"survey",PlayShoutOut:"shoutout",PlayResource:"resource",PlayContent:"resource",SurveyQuestionAnswered:"answer",PlayBizFlow:"bizFlow",PlaySmartTipSet:"smartTip",Close:"close"},n.EVENT_SENDER_MOBILE_ACTION_TYPES={None:"none",RateApp:"rateApp",OpenSettings:"openSettings",BrowseToPage:"browseToPage",PlayVideo:"playVideo",SendEmail:"sendEmail",OpenApp:"openApp",OpenAppStore:"openAppStore"},n.EVENT_SENDER_EVENT_APPS={None:"none",Player:"player",Walkthru:"wt",Step:"step",ShoutOut:"shoutout",Shuttle:"shuttle",Survey:"survey",Question:"question",SurveyQuestionAnswer:"answer",Content:"resource",Launcher:"launcher",Task:"task",Course:"course",WidgetSearch:"widgetSearch",Ticket:"openTicket",Walkme:"walkme",TeachMe:"teachMe",AbTesting:"abTesting",TrackedElement:"trackedElement",TrackedPage:"trackedElementsSet",SmartTip:"smartTip",SmartTipSet:"smartTipSet",SmartTipUiComponent:"smartTipUiComponent",BizFlow:"bizFlow",BizFlowStep:"bizFlowStep",LiveChat:"liveChat",Quiz:"quiz",QuizQuestion:"quizQuestion",QuizAnswer:"quizAnswer",Action:"action",UIAction:"uiAction"},n.EVENT_SENDER_AB_TESTING_DRAW_REASONS={Draw:0,ActivationRule:1},n.EVENT_SENDER_CANCEL_REASONS={Xclick:"X Clicked"},n.DEPLOYABLE_TYPE=e.DEPLOYABLE_TYPE,delete n.DEPLOYABLE_TYPE.Walkthru,n.DEPLOYABLE_TYPE.Tutorial=0,n.DEPLOYABLE_ACTION_TYPES={Action:0,Close:1,RemindMeLater:2},n.SAFESTART_ACTION={ErrorShown:0,PopupShown:1,AutoRedirect:2,StayClicked:3,RedirectClicked:4,FailOnUrl:5},n.FEATURES={DisableWidgetOpenFullUrl:"disableWidgetOpenFullUrl",EventSenderDontSendPageUrl:"dontSendPageUrl",EventSenderDontSendPageTitle:"dontSendPageTitle",EventSenderForceSendReferrerUrl:"forceSendReferrerUrl",EventSenderDisableSendReferrerUrl:"disableSendReferrerUrl",StickyCustomVars:"stickyCustomVars",StrongStickyCustomVars:"strongStickyCustomVars",DisableEventCollection:"disableEventCollection",JSP:"jsp",ForceEmbedInOwnerDocument:"embedInOwnerDocument",OldIsInIframeIndication:"oldIsInIframeIndication",DontMaskEndUserAddress:"dmeua",CalculateElementBoundsBeforeRedraw:"calculateElementBoundsBeforeRedraw",ExternalConditions:"externalConditions",EmbedInContainer:"embedInContainer",PositionCheckByChangeThreshold:"positionCheckByChangeThreshold",SWTConsecutivePopups:"SWTConsecutivePopups",DisableReturnWhenFontLoadFailed:"disableReturnWhenFontLoadFailed",ForceFindScrollable:"forceFindScrollable",AvoidCheckInIframe:"avoidCheckInIframe",FixIframeViewport:"fixIframeViewport",ShadowRootsInspector:"shadowRootsInspector",IconExecutionAdditionalSp:"iconExecutionAdditionalSp",CleanElementMemory:"cleanElementMemory",ClickTriggerWithKeyboard:"clickTriggerWithKeyboard",BalloonShowDestroySync:"balloonShowDestroySync",FixArrowsOutsideElement:"fixArrowsOutsideElement",EmbedInClosestCanEmbed:"embedInClosestCanEmbed",EmbedInElementDontWrapText:"embedInElementDontWrapText",ObserveScroll:"observeScroll",NoScrollTop:"noScrollTop",WmAccessibility:"wmAccessibility"},n.GOALS={LOG_FEATURE:"goals"},n.TASKS={LOG_FEATURE:"tasks"},n.RESOURCES={LOG_FEATURE_CONTENT_ACTIVATOR:"content"},n.HIGHLIGHTER={LOG_FEATURE:"hl"},n.AUTOSTART={LOG_FEATURE:"autostart",STOP_CONDITIONS:{XButton:"x",Action:"action",Cancel:"close"},STOP_CONDITION_KEY:"wm-stpcond-",DEPLOYABLE_RUNNING_STATE:{NOT_RUNNING:0,RUNNING:1}},n.EVENTS={DICreated:"DICreated",WalkMeTotalLoadingTime:"WalkMeTotalLoadingTime",MainStart:"mainCreationStart",WalkmeApiStarted:"walkMeApiCreationStart",WalkmePlayerApiStarted:"walkMePlayerApiCreationStart",BeforeWalkmeRemoved:"removeWalkMe",AfterWalkmeRemoved:"afterRemoveWalkMe",WalkmeLoaded:"wm_walkmeLibLoaded",BeforeWalkmeReady:"BeforeWalkmeReady",WalkmeReady:"WalkMeReady",ElementsTrackingReady:"ElementsTrackingReady",ReleaseAllElementsCalled:"releaseAllElementsCalled",CallReleaseElementsFromBalloons:"callReleaseElementsFromBalloons",LanguageChanged:"languageChanged",BeforeLanguageSet:"beforeLanguageSet",PlayerClicked:"wmPlayerClicked",ApiWasCalled:"wmApiCalled",PermalinkClicked:"wmPermalinkClicked",WidgetLoad:"WidgetLoad",WidgetOpening:"wmWidgetOpening",EndUserSettingsSet:"endUserSettingsSet",AbExperimentLinkedGoalReached:"wmLinkedGoalReached",AbTasksBlocked:"AbTasksBlocked",SalesForceVarsExposed:"SfVarsExposed",TimerManagerCreationStarted:"timerManagerCreationStart",DeployableCreated:"DeployableCreated",DeployableDestroyed:"DeployableDestroyed",DeployableNotShowing:"DeployableNotShowing",DeployableHandleStarting:"DeployableHandleStarting",UIComponentDestroyed:"UIComponentDestroyed",UIObjectsTreeCreated:"UIObjectsTreeCreated",BeforeDataFileLoaded:"BeforeDataFileLoaded",BalloonInitialized:"BalloonInitialized",BalloonCreated:"BalloonCreated",BalloonShown:"BalloonShown",BeforeUsingUrl:"BeforeUsingUrl",SmartTips:{SmartTipElementShown:"SmartTipElementShown",SmartTipElementRemoved:"SmartTipElementRemoved",ValidationFailed:"SmartTipValidationFailed",ValidationPassed:"SmartTipValidationPassed",TooltipShown:"SmartTipTooltipShown",SmartTipSegmented:"SmartTipSegmented",SetTurnedOn:"SmartTipSetTurnedOn",SetTurnedOff:"SmartTipSetTurnedOff",SmartTipIconShown:"SmartTipIconShown",SmartTipIconHovered:"SmartTipIconHovered",SmartTipTooltipDestroyed:"SmartTipTooltipDestroyed",SmartTipIconDestroyed:"SmartTipIconDestroyed"},TaskCompleted:"TaskCompleted",TasksLoaded:"TasksLoaded",Flows:{AfterCompletingFlowStage:"AfterCompletingFlowStage",BeforeExecutingFlowStage:"BeforeExecutingFlowStage",FlowStageSkipped:"FlowStageSkipped",UIFlowStageShown:"UIFlowStageShown",FailedToStart:"FlowFailedToStart",BeforeFlowStarted:"BeforeFlowStarted",FlowStarted:"FlowStarted",FlowBranched:"FlowBranched",FlowStopped:"FlowStopped",FlowAborted:"FlowAborted",RestoringFlow:"RestoringFlow",FlowCompleted:"FlowCompleted",FlowBranchReturned:"FlowBranchReturned",LookingForElement:"LookingForElement",UiElementFound:"UiElementFound",WaitForConditionEvaluated:"WaitForConditionEvaluated",SafeStartStatusChanged:"SafeStartStatusChanged"},Walkthrus:{WalkthruGuidGenerated:"WalkthruGuid",WalkthruStarted:"StartNewWt",WalkthruStopped:"TutorialStopped",WalkthruLoaded:"LoadWt",WalkthruCompleted:"WalkthruCompleted",StepSkipped:"StepWasSkipped",StepElementFound:"ElementFound",StepElementNotFound:"ElementNotFound",LookingForStepElement:"LookingForElement",WaitingForStickyStep:"StickyStepWaiting",StepStarted:"NewStepStarted",StepExecuting:"StepPlayNum",StepPerforming:"StepPerforming",StepAdditionalTriggerSet:"StepAdditionalTriggerCBSet",StepAdditionalTriggersInitialized:"StepAdditionalTriggered",FakeStep:"StepIsFaked",StepShown:"NewStepShown",StepHasPlayCondition:"PlayStepCondition",StepCompleted:"StepCompleted",StepTriggered:"StepWasTriggered",InputGeneratedClick:"InputGeneratedClick",ShowStepBalloon:"showStepBalloon",DestroyStepBalloon:"destroyStepBalloon",NewSkippedStep:"NewSkippedStep",CheckNewStep:"CheckNewStep",WtConditionEvaluated:"WtConditionEvaluated",CanShowWt:"CanShowWt",CannotShowWt:"CannotShowWt",BeforeBalloonRedraw:"BeforeBalloonRedraw",AfterBalloonRedraw:"AfterBalloonRedraw"},Launchers:{LauncherIsInsecure:"LauncherInsecure",LauncherClicked:"wmLauncherClicked",LauncherIsShown:"LauncherIsShown",LauncherIsHovered:"LauncherIsHovered",DisplayLauncher:"DisplayLauncher",HideLauncher:"HideLauncher"},Surveys:{StartSurvey:"StartSurvey",SurveyPlayed:"SurveyPlayed",SurveyCompleted:"SurveyCompleted",SurveyExited:"SurveyExited",SurveyFailedShowing:"SurveyFailedShowing",SurveyBalloonActionsSet:"SurveyBalloonActionsSet",SurveyBackQuestion:"SurveyBackQuestion",SurveyNextQuestion:"SurveyNextQuestion",SurveyQuestionCountSet:"SurveyQuestionCountSet",SurveyFreeTextAnswerValidated:"SurveyFreeTextAnswerValidated",SuveyBeforeRadioButtonAppended:"SuveyBeforeRadioButtonAppended",SurveyBalloonDisplayed:"SurveyBalloonDisplayed",SurveyClosed:"SurveyClosed"},Shuttles:{ActivatingShuttle:"ActivatingShuttle"},Contents:{ActivatingContent:"ActivatingContent"},PassOwnership:{PriorityInitialized:"priorityInitialized",PORegisterPriority:"PORegisterPriority"},Widget:{WidgetAPICreated:"WidgetAPICreated",TeachMeWidgetAPICreated:"TeachMeWidgetAPICreated",WidgetDisplayerClass:"WidgetDisplayerClass",WidgetInitInstances:"WidgetInitInstances",WidgetPlayerClass:"WidgetPlayerClass",WidgetMenuClass:"WidgetMenuClass",WidgetLanguageChanged:"WidgetLanguageChanged",WidgetDestroyAll:"WidgetDestroyAll",WidgetRefreshUI:"WidgetRefreshUI",SearchResultsReady:"SearchResultsReady",CreateSearchEngines:"CreateSearchEngines",SearchTermChanged:"SearchTermChanged",SearchCanceled:"SearchCanceled",SearchResultsAppended:"SearchResultsAppended",BeforeSearchResultsAppended:"BeforeSearchResultsAppended",AfterSearchResult:"AfterSearchResult",SearchEnded:"SearchEnded",WidgetConditionEvaluated:"WidgetConditionEvaluated"},WidgetMenu:{MenuHtml:"MenuHtml",MenuBuilt:"MenuBuilt",MenuShow:"MenuShow",MenuHide:"MenuHide",MenuLanguageChanged:"MenuLanguageChanged",CreateActivatable:"createActivatable",AccessibilityMenuBuilt:"AccessibilityMenuBuilt",MenuSearchResults:"MenuSearchResults",RefreshTabsBar:"RefreshTabsBar",MenuTabSelected:"MenuTabSelected",CenterMenuEvent:"CenterMenuEvent"},WidgetPlayer:{PlayerShow:"PlayerShow",PlayerBuilt:"PlayerBuilt",PlayerHtml:"PlayerHtml",PlayerHide:"PlayerHide",PlayerLanguageChanged:"PlayerLanguageChanged"},SearchResultParse:"SearchResultParse",AppendingServerSearchResults:"AppendingServerSearchResults",SearchResultConverted:"SearchResultConverted",TrackedElementBeforeSendEvent:"trackedElementBeforeSendEvent",ContentRemoved:"ContentRemoved",AttentionGrabberInsecure:"AGDataInsecure",TasksConditionEvaluated:"TasksConditionEvaluated",LightBoxDivCreated:"lightBoxDivCreated",LightBoxCreated:"lightBoxCreated",LightBoxDivCentered:"LightBoxDivCentered",LightBoxClosed:"LightBoxClosed",ShouldChangeBalloonPosition:"ShouldChangeBalloonPosition",FirstStepNotAvailable:"FirstStepNotAvailable",FirstStepNotAvailableBalloonClosed:"FirstStepNotAvailableBalloonClosed",ShoutOutClosed:"ShoutOutClosed",AutoStart:{Activated:"wmAutoStartActivated",ConditionEvaluated:"WtAutoStartConditionEvaluated"},LoadingContent:"LoadingContent",LoadingContentFromTeachMe:"LoadingContentFromTeachMe",LoadingContentInNewTab:"LoadingContentInNewTab",StorageLoaded:"StorageLoaded",BeforeStorageLoadedCallback:"BeforeStorageLoadedCallback",CustomAuditVar:"CustomAuditVar",Goals:{ConditionEvaluated:"GoalConditionEvaluated",GoalReached:"GoalCompleted"},ActionConditionEvaluated:"ActionConditionEvaluated",Scrolls:{ScrollFired:"scrollFired"},Quizzes:{QuizSubmitted:"QuizSubmitted",QuizPlay:"QuizPlay",QuizFail:"QuizFail",QuizPass:"QuizPass",QuizAnswerSubmitted:"QuizAnswerSubmitted",QuizSummarySuccessButtonClicked:"QuizSummarySuccessButtonClicked",QuizSummaryFailureButtonClicked:"QuizSummaryFailureButtonClicked",QuizXButtonClicked:"QuizXButtonClicked",QuizResultsActionButtonClicked:"QuizResultsActionButtonClicked"},NewSession:"NewSession",WalkmeReadyNewSession:"WalkmeReadyNewSession",ConditionTreeResult:"ConditionTreeResult",BeforeSettingCustomCss:"BeforeSettingCustomCss",SettingsFileNewPublish:"SettingsFileNewPublish",BBCodeStartActionClicked:{Walkthru:"bbcodeWtClicked",Bizflow:"bbcodeBfClicked",Resource:"bbcodeResourceClicked",Survey:"bbcodeSurveyClicked"},RegisterBBCodeDeployableClick:"RegisterBBCodeDeployableClick",ElementLocationChanged:"ElementLocationChanged",AnalyticsEventSent:"AnalyticsEventSent",BalloonLogs:{BalloonPopLocationCalculated:"BalloonPopLocationCalculated",BalloonIsFullyVisibleCalculated:"BalloonIsFullyVisibleCalculated",ClosestCanEmbedReturnsTop:"ClosestCanEmbedReturnsTop",ClosestCanEmbedSkipsElement:"ClosestCanEmbedSkipsElement",CalculateBalloonWidthCalled:"CalculateBalloonWidthCalled"},SpotlightCreated:"SpotlightCreated",SafeStartRedirect:"SafeStartRedirect",DATA_FILES_LOADED:"dataFilesLoaded",PageVisitIdUpdated:"PageVisitIdUpdated",PropagationStoppedSuffix:"PropagationStopped",LiveChat:{LiveChatClicked:"LiveChatClicked"},Drawables:{ActionClicked:"action-clicked",XButtonClicked:"XButtonClicked",Keypress:"keypress",KeypressEsc:"keypress-esc"}},n.EVENTS_PARAMS={WalkmeRemovedErrorCodes:{missingUserIdentifyer:1,cannotHaveBothUniqueUserAndServerStorage:2}},n.SMART_TIP_INNER_EVENTS={CheckValidations:"wmCheckValidations",EventPropogationPrefix:"wmSmartTipInternalEvent",SmartTipElementRepositioned:"SmartTipElementRepositioned"},n.WINDOW_EVENTS={Resize:"resize"},n.PASS_OWNERSHIP={EvaluateOwnership:{CantBeDetermined:"CANT_BE_DETERMINED",Owner:"OWNER",NotOwner:"NOT_OWNER"},PassOwnershipEntity:{BizFlow:0,Walkthru:1},NEW_WINDOW_TIME_KEY:"wm-cond-win",LOG_FEATURE:"passOwnership",PASS_OWNERSHIP_COOKIE:"wm-cdplay"},n.FLOW_BEFORE_PLAY_KEY="wm-flw-preplay",n.FLOW_PLAY_MODES={PLAY:"play",RESTORE:"restore"},n.FLOW_STAGE_ACTIONS={BACK_FROM_FLOW_GROUP:"backFromFlowGroup",EXECUTE:"execute"},n.WINDOW_CUSTOM_DATA_TYPE={Cookie:0,Var:1},n.VALUE_CALCULATOR_TYPE={Cookie:"cookie",Variable:"var",JQuery:"jquery",LocalStorage:"localstorage"},n.DEFAULT_REACTION_TIME=500,n.FLOW_TRIGGER_WORKSPACE=".flow",n.FLOW_STEP_TYPE={UI:"UI",Action:"Action"},n.FLOW_UIELEMENT_TYPE={Element:"Element",Popup:"Popup"},n.FLOW_ACTION_RUN_STATE={Waiting:"Waiting",Done:"Done"},n.FLOW_ACTION_TYPE={ConnectToBizflow:"ConnectToBizflow",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Redirect:"Redirect",Refresh:"Refresh",Style:"Style",SetData:"SetData",Split:"Split",Stop:"Stop",WaitForCondition:"WaitForCondition",OnPageAction:"OnPageAction",ErrorHandling:"ErrorHandling",RestartSwt:"RestartSwt"},n.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"},n.FLOW_INNER_EVENTS={EventPropogationPrefix:"wmFlowInternalEvent",FlowIsPlaying:"FlowIsPlaying"},n.STICKY_TYPE={ONCE:0,SOFT:1,STRONG:2},n.VISIBILITY_STATE={VISIBLE:0,HIDDEN:1},n.ICON_CONTENT_KIND={Text:0,Image:1},n.POSITION_PERIMETER_TYPE={Outside:0,Inside:1},n.POSITION_TYPE={Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8},n.OPPOSITE_POSITION_TYPE={},function(e,t){e[t.Top]=t.Bottom,e[t.Right]=t.Left,e[t.Bottom]=t.Top,e[t.Left]=t.Right,e[t.TopLeft]=t.BottomRight,e[t.TopRight]=t.BottomLeft,e[t.BottomRight]=t.TopLeft,e[t.BottomLeft]=t.TopRight,e[t.Center]=t.Center}(n.OPPOSITE_POSITION_TYPE,n.POSITION_TYPE),n.DEFAULT_POSITIONS={top:0,left:0,bottom:0,right:0},n.POPUP_BALLOON_Z_INDEX=t.deployableDefaultAttributes.zIndex.popupStep.toString(),n.NORMAL_BALLOON_Z_INDEX=t.deployableDefaultAttributes.zIndex.simpleStep.toString(),n.POSITION_OFFSET_TYPE={VerticallyCentered:1,HorizontalCentered:2,Above:3,Below:4,ToRight:5,ToLeft:6,SnapToViewportRight:9},n.POSITION_OFFSET={Center:0,Start:1,End:2},n.EMBEDMENT_TYPE={EmbedInElement:0,EmbedInElementParent:1,EmbedInOwnerDocument:2,EmbedInTopDocument:3,EmbedInClosestCanEmbed:4,EmbedNearCompatibleSibling:5,ForceEmbedInElement:6},n.ICON_CONTENT_STATE={Regular:0,Hover:1,Click:2},n.SMART_TIP={MODE:{OnlyInfo:0,OnlyValidations:1,InfoAndValidations:2},COMPONENT_TYPE:{Info:0,Validation:1,PositiveFeedback:2}},n.TOOLTIPS_ACTIVATION_MODES={Mouse:1,Focus:2},n.OLD_STICKIES={STICKINESS_TYPES:{soft:0,strong:1}},n.CONDITION_CHECKER={FEATURE_NAMES:{SmartTipSegmentation:"evaluate smart tip segmentation"}},n.IS_STICKY_SETTING_KEY="isSticky",n.STICKINESS_TYPE_SETTING_KEY="stickinessType",n.ANIMATION_TYPES={None:1},n.FLOW_TRIGGER_TYPE={Click:"Click",Hover:"Hover",Button:"Button",Text:"Text",Delay:"Delay",PageChanged:"PageChanged",SelectAny:"SelectAny",SelectValue:"SelectValue",BbCode:"BbCode",PeerStep:"PeerStep",Custom:"Custom",Swipe:"Swipe"},n.SHOUTOUT_CLICK_TYPE={Action:0,Close:1,XButton:2,RemindMeLater:3},n.BALLOON_BUTTON_TYPE={Submit:"Submit",Back:"Back",Next:"Next",Done:"Done",Start:"Start",Cancel:"Cancel"},n.FEATURES_LOGS={ElementFinder:"elementFinder",WalkMeSession:"session",Flows:"flows",AnalyticsTracking:"analyticsTracking"},n.SEARCH_DEPLOYABLES_PROVIDER_ID=0,n.APPLET_INTERACTION_TYPES={Element:1,Overlay:2},n.WALKTHRU_PERSISTANCE_DATA_FIELDS={CURRENT_TUTORIAL_COOKIE_NAME:"tId",CURRENT_STATE_COOKIE_NAME:"stt",CURRENT_STEP_COOKIE_NAME:"step",CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME:"spn",CURRENT_PLAY_GUID_COOKIE_NAME:"plgd",CURRENT_PLAY_INITIATOR_COOKIE_NAME:"pint",SPLIT_POINT_COOKIE_NAME:"splt",TUTORIAL_FINISHED_COOKIE_NAME:"fnsh",STEP_PLAY_HISTORY_COOKIE_NAME:"sph",SPLIT_TUTORIAL_IDS_COOKIE_NAME:"sti",SPLIT_START_FROM_STEP_COOKIE_NAME:"ssi",INTERACTION_GUID_COOKIE_NAME:"igd"},n.SURVEY_START_EVENTS={WalkThruCompleted:0,WalkThruExited:1,Both:2,WalkThruInterrupted:3,BbCodeClicked:4},n.CHECK_STEP_MODE={Normal:1,Sandbox:2},n.playConditionModes={PLAY_CONDITION:0,STICKY_CONDITION:1,BOTH:2},n.UI_PROPERTIES={Visible:"visible",Invisible:"invisible",Completed:"completed",Uncompleted:"uncompleted",StrikedOut:"strike-out",Active:"active",Inactive:"inactive",ProgressBar:"progress-bar",Default:"default",Search:"search",SearchProviders:"search-providers",Video:"video",Article:"article",Accessible:"accessible",Phantom:"phantom",LmsCourse:"lmsCourse",DisplayOnlyInSearch:"displayOnlyInSearch"},n.DISPLAY_WIDGET_CONDITION="displayWidgetCondition",n.WALKTHRU_STATE={NOT_RUNNING:0,RUNNING:1,WAITING_FOR_ELEMENT:2,WAITING_FOR_ELEMENT_EVENT:3,PAUSED:4,WAITING_FOR_SPLIT:5,WAITING_FOR_NEXT_BUTTON_CLICK:6,WAITING_FOR_PAGE_CHANGE:7,WAITING_FOR_STICKY_ELEMENT:8,WAITING_FOR_CONDITION:9,PASSING_OWNERSHIP:10,WAITING_FOR_REDIRECT:11,WAITING_FOR_OWNERSHIP:12},n.WALKTHRU_STEP_TRIGGER={NOTHING:0,NEXT_BUTTON:1,CLICK:2,HOVER:3,PAGE_CHANGED:4,KEY_PRESSED:5,DURATION:6,SELECT_ANY:7,SELECT_VALUE:8,SWIPE:9},n.SUBTEXT_CURRENT_START="##START_OF_CURRENT##",n.SUBTEXT_CURRENT_END="##END_OF_CURRENT##",n.SUBTEXT_TOTAL_START="##START_OF_TOTAL##",n.SUBTEXT_TOTAL_END="##END_OF_TOTAL##",n.SURVEY_FREQUENCY={0:"always",1:"visit",2:"once"},n.UI_CHANGE_NOTIFIERS={HASH:"hash",HISTORY:"history",IFRAME_LOAD_SELECTOR:"iframeLoadSelector",CLICK_SELECTOR:"clickSelector",AJAX_CALLS:"ajaxCalls",USER_INPUT:"userInput",HASH_ON_AJAX_CALLS:"hashOnAjax"},n.FLOW_TRANSITION_HANDLER_IDS={DELAYER:0,ON_BEFORE_UNLOAD:1},n.QUESTION_TYPES={FreeText:0,RadioButton:1,CheckBox:2,NPS:3,Message:4},n.DEFAULT_CHANGE_PIXELS_THRESHOLD=1,n.ACTION_TO_DEPLOYABLE_DATA={playWt:{deployableType:n.DEPLOYABLE_TYPE.Tutorial,deployableIdField:"wtId"},playContent:{deployableType:n.DEPLOYABLE_TYPE.Content,deployableIdField:"contentId"},playSurvey:{deployableType:n.DEPLOYABLE_TYPE.Survey,deployableIdField:"surveyId"},playBf:{deployableType:n.DEPLOYABLE_TYPE.BusinessSolution,deployableIdField:"bfId"},playShuttle:{deployableType:n.DEPLOYABLE_TYPE.Shuttle,deployableIdField:"shuttleId"}},n.SUPER_SCRIPT={MODE:{VISIBLE:"visible",INVISIBLE:"invisible"}},n.VISUAL_DESIGN_DRAWABLE={DefaultZIndex:2147483631},n.RICH_TEXT_EDITOR={ACTION_LINK_ATTR:"data-rte-action"},n.VISUAL_DESIGN_TYPES={ShoutOut:"ShoutOut",StepBalloon:"StepBalloon"},n.SHADOW_TYPES={None:0,Shadow:1,Glow:2,Button:3},n.SHADOW_LEVEL={Light:0,Medium:1,Intense:2},n.DEFAULT_CLASSES={IGNORE_CSS_RESET:"wm-ignore-css-reset"},n.KEY_CODES={ESC:27},n.USER_ATTRIBUTES={VARIABLE:"variable",WALK_ME_DATA:"walkMeData",COOKIE:"cookie",JQUERY:"jquery",TEXT:"text"}}).dependencies("DeployableConsts, SharedConsts");var re=Cr.get("Consts");Cr.register("ExternalWalkMeConfig").asCtor(function Je(e){var t={platform:e.PLATFORM.Web};this.get=function(e){return window._walkmeConfig&&window._walkmeConfig[e]?window._walkmeConfig[e]:t[e]}}).dependencies("Consts"),Cr.register("inArrayFunc").dependencies("ArrayUtils").asFunction(function(e){return e.inArray}),Cr.register("ArrayUtils").asCtor(function Xe(){var r=this;function i(e,t,n){return n=n||{},e=e||0,function(){return t.apply(n,[].slice.call(arguments,0,e))}}r.concatWithoutDuplicates=function o(e,t){for(var n=e.length-1;0<=n;n--){for(var r=!1,i=t.length-1;0<=i&&!r;i--)t[i]==e[n]&&(r=!0);r||t.push(e[n])}return t},r.max=function(e,t){var n=null;if(0<e.length){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);r<o&&(r=o,n=e[i])}}return n},r.min=function(e,t){var n=null;if(0<e.length){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}}return n},r.foreach=function(e,t){r.forEachSpec(e,i(1,t))},r.forEach=r.foreach,r.forEachSpec=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},r.reduce=function(e,t,n){return r.reduceSpec(e,i(2,n),t)},r.reduceSpec=function(e,t,n){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i],i,e);return r},r.filter=function(e,t){return r.filterSpec(e,i(1,t))},r.filterSpec=function(e,t){for(var n=new Array,r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n},r.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},r.indexOf=r.inArray,r.map=function(e,t){return r.mapSpec(e,i(1,t))},r.mapSpec=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e));return n},r.shuffle=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n);var r=e[--n];e[n]=e[t],e[t]=r}return e},r.any=function(e,t){return e&&e.length&&r.filter(e,t).length},r.reduceArray=function(e,t,n){var r,i,o,a,s,u=e,l=u.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==l&&n===undefined)throw new TypeError;if(r=0,n!==undefined)i=n;else{for(o=!1;!o&&r<l;)a=r.toString(),(o=u.hasOwnProperty(a))&&(i=u[a]),r+=1;if(!o)throw new TypeError}for(;r<l;)a=r.toString(),(o=u.hasOwnProperty(a))&&(s=u[a],i=t.call(undefined,i,s,r,u)),r+=1;return i}}),Cr.register("PlatformDI").asCtor(function $e(e,t,n){var r,i=this;i.register=function(e,t){"number"!=typeof e?n.inArray(r,e)+1&&t():e==r&&t()},i.is=function(e){return"number"==typeof e?r==e:!!(n.inArray(r,e)+1)},i.isMobileWeb=function(){return this.is(e.PLATFORM.MobileWeb)},i.isDesktopWeb=i.isWeb=function(){return this.is(e.PLATFORM.Web)},i.isDesktop=function(){return this.is(e.PLATFORM.Desktop)},function o(){r=t.get("platform")}.apply(null,arguments)}).dependencies("Consts, ExternalWalkMeConfig, ArrayUtils");var e=Cr.get("PlatformDI");Cr.register("StaticComponentsLoader").asCtor(function Ze(){this.load=function e(){n.push(__webpack_require__(68)),n.push(__webpack_require__(76)),n.push(__webpack_require__(80)),n.push(__webpack_require__(97)),n.push(__webpack_require__(104)),n.push(__webpack_require__(109)),n.push(__webpack_require__(123).register()),n.push(__webpack_require__(137)),n.push(__webpack_require__(147)),n.push(__webpack_require__(151)),n.push(__webpack_require__(154)),n.push(__webpack_require__(157)),n.push(__webpack_require__(158)),n.push(__webpack_require__(163)),n.push(__webpack_require__(166)),n.push(__webpack_require__(178)),n.push(__webpack_require__(181)),n.push(__webpack_require__(189)),n.push(__webpack_require__(230)),n.push(__webpack_require__(246)),n.push(__webpack_require__(288)),n.push(__webpack_require__(292)),n.push(__webpack_require__(301)),n.push(__webpack_require__(304)),n.push(__webpack_require__(309)),n.push(__webpack_require__(359)),n.push(__webpack_require__(371)),n.push(__webpack_require__(488)),n.push(__webpack_require__(495)),n.push(__webpack_require__(514)),n.push(__webpack_require__(537)),n.push(__webpack_require__(572)),n.push(__webpack_require__(614)),n.push(__webpack_require__(618)),n.push(__webpack_require__(621)),n.push(__webpack_require__(635)),n.push(__webpack_require__(638))},this.init=function r(){for(var e=0;e<n.length;e++){var t=n[e];t&&t.init&&t.init()}};var n=[]}),Cr.register("JsonUtils").asCtor(function et(){function m(e){if(null!==e&&y(e,function(e){try{e.toJSON&&(e.toJSON=null)}catch(t){}}),function h(){return"object"==typeof JSON&&(!!JSON.stringify&&!!S(JSON.stringify))}())return JSON.stringify(e);if(null===e)return"null";var t=typeof e;if("undefined"===t)return undefined;if("number"===t||"boolean"===t)return""+e;if("string"===t)return v(e);if("object"===t){if("function"==typeof e.toJSON)return m(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),u=e.getUTCMilliseconds();return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),u<100&&(u="0"+u),u<10&&(u="0"+u),'"'+i+"-"+n+"-"+r+"T"+o+":"+a+":"+s+"."+u+'Z"'}if(e.constructor===Array){for(var l=[],c=0;c<e.length;c++)l.push(m(e[c])||"null");return"["+l.join(",")+"]"}var d,f,p=[];for(var g in e){if("number"===(t=typeof g))d='"'+g+'"';else{if("string"!==t)continue;d=v(g)}"function"!==(t=typeof e[g])&&"undefined"!==t&&(f=m(e[g]),p.push(d+":"+f))}return"{"+p.join(",")+"}"}}function t(e){if(function n(){return"object"==typeof JSON&&(!!JSON.parse&&!!S(JSON.parse))}())return JSON.parse(e);var t=e.toString().replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return _makeTutorialEv.Ev("("+e+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}this.toJSON=m,this.secureEvalJSON=t,this.clone=function i(e){return t(m(e))},this.runOnObjectRecursive=y;var n=/["\\\x00-\x1f\x7f-\x9f]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function v(e){return e.match(n)?'"'+e.replace(n,function(e){var t=r[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'}function y(e,t){if(e!=undefined&&"object"==typeof e)for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&r!==undefined&&y(r,t)}null!==e&&e!==undefined&&t(e)}function S(e){return-1<e.toString().indexOf("[native code]")}}),Cr.register("SettingsFile").asCtor(function tt(n){var e,t=this;t.getSettingsFile=function(){return e&&e.getSettingsFile()||{}},t.getPublishVersion=function(){return t.getSettingsFile().DataFiles[0].url.match(/data_([a-z0-9]+)/)[1]},t.getPublishDirectory=function(){var e=t.getSettingsFile().DataFiles[0].url;return e.substring(0,e.lastIndexOf("/")+1)},t.getCdnServerName=function(){return t.getSettingsFile().CdnServerName||window.mt_cdn_server_name},t.getStorageType=function(){return t.getSettingsFile().Storage},t.getAllUserGuids=function(){return t.getSettingsFile().UserGuids},t.getPublishDate=function(){return t.getSettingsFile().PublishDate},t.getPublicPath=function(){return t.getSettingsFile().PublicPath},t.getUrl=function(){return window._walkmeInternals&&window._walkmeInternals.settingsUrl},t.getPlayerRelatedPath=function(){var e=t.getSettingsFile().LibFile;return/http.+\/player\//.exec(e)[0]},function r(){e=function t(){if(window.wmPlaySnippetData){var e=n.secureEvalJSON(window.wmPlaySnippetData);return window.wmPlaySnippet={getSettingsFile:function(){return e}},window.wmPlaySnippet}return null}()||window.wmPreviewSnippet||window.wmSnippet}()}).dependencies("JsonUtils"),window._walkmeInternals=window._walkmeInternals||{},__webpack_require__.p=function nt(){try{if(window.localStorage){var e=window.localStorage.getItem("walkmePublicPath");if(e)return e}}catch(t){}return Cr.get("SettingsFile").getSettingsFile().PublicPath}(),window._walkmeInternals.walkmeBasePath=__webpack_require__.p,Cr.register("Logger").asCtor(function rt(s,l,u,c,d,f,p,g,h){var m=this,v=!1;window.walkme_lib_in_dev&&(v=!0);var y,S="walkmeCustomerLogs",i={debug:4,info:3,warn:2,error:1},E=86400,w=0;function e(r){return r.debug=function(e,t,n){return r("debug",e,t,n)},r.info=function(e,t,n){return r("info",e,t,n)},r.warn=function(e,t,n){return r("warn",e,t,n)},r.error=function(e,t,n){return r("error",e,t,n)},r}m.ready=function(){r.logger=m.wrapCustomerLog("DI")},m.wrapCustomerLog=function(r){return function(e,t,n){m.customerLog(e,t,n||r)}},m.customerLog=function(e,t,n){if(!l.isQuirksMode()||!(e instanceof mtjQuery||e&&e.nodeType)){t=t||1;var r=y.get();if(r){var i=parseInt(r.l),o=r.f,a=r.u;if(t<=i&&function s(e,t,n){var r=!0;e?r=-1!=mtjQuery.inArray(n,e):t&&(r=-1==mtjQuery.inArray(n,t));return r}(o,a,n))try{r.m?I(b()+p.toJSON(e)):I(e)}catch(u){}}}},m.sendServerLog=e(function(e,t,n,r){Cr.get("EventCollectorLoggerPixel").log(e,t,n),m.customerLog(t,i[e],r)}),m.wrapServerLog=function(i){return e(function(e,t,n,r){m.sendServerLog(e,t,n,r||i)})};var T=0,C=[];function b(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "}function I(e){if(window.console)console.log(e);else try{var t=function a(){var e=mtjQuery("#walkme-console-box");if(0===e.length){var t=Cr.get("TopContainerProvider").getTopContainer();e=mtjQuery('<div id="walkme-console-box"></div>');var n=h.parseElementAsJquery('<div style="display: none;">Walkme Console: [ </div>'),r=mtjQuery('<button type="button" title="Toggle the walkme debug console">Walkme Console</button>'),i=mtjQuery('<ul id="walkme-console-messages"></ul>'),o=mtjQuery('<a href="#">clear</a>');n.append(o),n.append(" ]"),n.append(i),e.append(n),e.append(r),t.append(e),r.click(function(){n.slideToggle("fast",function(){var e=mtjQuery(this).is(":visible")?"Close Console":"Walkme Console";r.text(e)})}),o.click(function(){i.empty()}),n.css({margin:"15px 60px 5px 15px",padding:"5px",border:"1px solid red","background-color":"#FFC",color:"#000"}),r.css({border:"1px solid red","background-color":"#FFFFCC","margin-left":"15px",width:"120px"}),e.css({position:"fixed","z-index":d.POPUP_BALLOON_Z_INDEX,"font-family":"Arial",bottom:"10px",left:"10px",width:"100%","text-align":"left"}),i.css({"background-color":"white",border:"1px solid black",height:"260px","list-style-type":"none",padding:"0","overflow-y":"auto",margin:"5px 0 0"})}return e}(),n=new Date,r=function o(e){return e instanceof Tr?"-jQuery object: selector - "+e.selector+", value - "+e.val()+", domElement - "+p.toJSON(e[0]):p.toJSON(e)}(e),i=h.parseElement('<li style="padding: 2px 5px; border-bottom: 1px solid #afafaf"><span style="float: left; color: #afafaf; margin-right: 5px;">'+_(n.getHours())+":"+_(n.getMinutes())+":"+_(n.getSeconds())+" </span>"+r.substring(1,r.length-1)+"</li>");t.find("#walkme-console-messages").prepend(i)}catch(s){}}function _(e){return e<10?"0"+e:e}function t(){var n,t,r=this;function i(){n=n||{}}function o(e,t){return n?n[e]:t}function a(e){return Cr.get("CommonUtils").isDefined(e)?"string"==typeof e?(e=e.replace(/\s/g,"")).split(","):0<e.length?e:void 0:[]}function s(){t.setCookie(S,p.toJSON(n),E)}r.get=function(){return n},r.enable=function(e){return i(),n.l=e||1,s(),r},r.disable=function(){return n&&(n.l=0,s()),r},r.reset=function(){return n={l:1},s(),r},r.level=function e(e){return e===undefined?o("l",null):(i(),n.l=e,s(),r)},r.track=function(e){if(e===undefined)return o("f",[]);i();var t=a(e);return delete n.u,n.f=n.f?g.concatWithoutDuplicates(t,n.f):t,s(),r},r.untrack=function(e){if(e===undefined)return o("u",[]);i();var t=a(e);return delete n.f,n.u=n.u?g.concatWithoutDuplicates(t,n.u):t,s(),r},r.timer=function(e){return i(),e?n.m=1:n.m&&delete n.m,s(),r},function u(e){t=e,n=p.secureEvalJSON(t.getCookie(S))}.apply(null,arguments)}m.timer=function(o){T++;var a=(new Date).getTime();return{stop:function(){var e=p.secureEvalJSON(s.getCookie(S));if(e&&e.m){var t=(new Date).getTime()-a,n=Array(T).join("->\t"),r=b()+n+o+": "+t+"ms";1==T?(I(r),function i(){for(var e=C.length-1;0<=e;e--)I(C[e]);C.length=0}()):C.push(r),T--}}}},m.enableCustomerLogs=function(e){return y.enable(e)},m.error=function(e,t,n){try{var r,i=arguments.callee.caller,o=i?i.name:"N/A";if(e&&e.message)r=(t?t+"\n":"")+"File : "+e.fileName+"\n - Function : "+o+"\n - Line : "+e.lineNumber+"\n - Msg : "+e.message;else r="Function : "+o+"\n - "+t;e&&e.stack&&(r+="\n - Stack: "+e.stack),function a(e,t,n){try{if(!Cr.get("AuditingEnabledIndicator").isEnabled())return!0;if(f.isFeatureEnabled("disableAuditErrorLog"))return!0;if(5<++w)return;var r={code:t,isInEditor:c.get(),SVNRevision:u.SVNRevision,LibVersion:u.LibVersion};n&&(mtjQuery.extend(n,r),r=n),m.sendServerLog.error(e,r)}catch(i){}}(r,1,n),v&&!window.wmNoAlert&&alert("Dev mode alert: "+r),m.customerLog("Error: "+r)}catch(s){}},m.getAPI=function(){return y},function n(){y=new t(s)}.apply(null,arguments)}).dependencies("CookiesManager, HostData, Lib, IsInEditor, Consts, FeaturesManager, JsonUtils, ArrayUtils, DomManager"),Cr.register("FeaturedLogger").asCtor(function it(e,t,n,r){var i,o;this.customerLog=function a(){var e=t.formatString.apply(null,arguments);n.customerLog(e,o,i)},function s(){i=r&&r.feature||e.DEFAULT_FEATURE,o=r&&r.logLevel||e.DEFAULT_LOG_LEVEL}()}).asProto().dependencies("FeaturedLoggerConsts, CommonUtils, Logger"),Cr.register("FeaturedLoggerConsts").asInstance({DEFAULT_FEATURE:"No name",DEFAULT_LOG_LEVEL:3}),this.CssInjector=__webpack_require__(641),Cr.register("CssInjector").asCtor(this.CssInjector).args({jQ:Tr}),Cr.register("CssUtils").asCtor(function ot(){var i=["@import","expression","javascript","-moz-binding","-o-link","behavior"];function n(e){return e.replace(/\/\*[\s\S]*?\*\//gm,"")}this.clearComments=n,this.getSelectors=function r(e){var t=n(e).split(/\s*{[^}]*}\s*/);return t.pop(),t},this.isSecure=function t(e){return!function r(e){for(var t=0;t<i.length;t++){var n=i[t];if(-1<e.indexOf(n))return!0}return!1}(n(e).toLowerCase())}}),__webpack_require__(642),Cr.register("WalkMeInfo").asCtor(function at(e,t,n,r,i,o,a){var s=this;s.getUserGuid=c,s.getEndUserGuid=c,s.getEndUserGuidSource=c,s.getPermutationId=c,s.getLanguage=c,s.getSource=c,s.getCustomVars=c,s.getLibVersion=c,s.setAnalyticsCustomFields=function f(e,t){return u[e]=t,!0},s.getAnalyticsCustomFields=d;var u=Array();function l(){if(e.getEndUserGuidSource())return e.getEndUserGuid()}function c(){throw new Error("WalkMeInfo not initialized properly")}function d(){return u}s.init=function(){s.getUserGuid=i.getUserGuid,s.getEndUserGuid=l,s.getEndUserGuidSource=e.getEndUserGuidSource,s.getPermutationId=t.getCurrentPermutation,s.getLanguage=n.getCurrentLanguage,s.getEnvironmentId=r.get,s.getCustomVars=d,s.getLibVersion=function(){return o.LibVersion},s.getPublishDate=a.getPublishDate}}).dependencies("EndUsersManager,AbCurrentPermutationProvider,LanguageManager,AuditSourceManager,UserGuidContainer,Lib,SettingsFile"),Cr.register("DebuggerManager").asCtor(function st(n,r,i,o,a,e,t){var s=this,u=r.keysConfig.wmDebugger.config,l=r.keysConfig.wmDebugger.state;function c(e,t){"walkmetracker"!=t.searchTerm||f()||d()}function d(e,t){!function n(){return i.get().DebuggerSettings&&"1"==i.get().DebuggerSettings.IsInPublish}()||s.launchDebugger(e,t)}function f(){return!!n.dbgr}function p(e){!function t(e){n.dbgr||(n.dbgr={})}(),n.dbgr.shouldClear=e,n.dbgr||(n.dbgr={}),__webpack_require__.e(1).then(function(){var e=[__webpack_require__(719)];(function(e){e()}).apply(null,e)})["catch"](__webpack_require__.oe)}function g(){n.dbgr&&(n.dbgr.debuggerWasLoaded=null),n.unbind(t.EVENTS.Widget.SearchTermChanged,c)}s.launchDebugger=function h(e,t){s.isDebuggerOnWindow()||(e?r.saveData(u.key,e,u.expiry):r.removeData(u.key),t&&(n.dbgr||(n.dbgr={}),n.dbgr.debuggerWasLoaded=t),p(!0),o.postMessageToFrameAndDescendants(window.top,o.toJSON({requestType:"DEBUGGER_LOADED"})))},s.isDebuggerOnWindow=f,s.launchDebuggerIfEnabled=d,s.closeDebugger=function m(){if(s.isDebuggerOnWindow()){var e=n.dbgr.close;e&&e()}delete n.dbgr},s.loadDebuggerForEditor=function v(e){s.closeDebugger(),r.saveData(u.key,{uiState:"wmd-minimize"},u.expiry),r.saveData(l.key,w.ActiveAndReset,l.expiry),r.refreshGetData(undefined,e)},s.loadDebuggerFromStorage=function y(){!function e(){window._walkmeInternals.ctx.get("PostMessageListener").listen(function(e){try{"DEBUGGER_LOADED"==o.secureEvalJSON(e.data).requestType&&p()}catch(t){a.customerLog("Error loading debugger from post message: "+t,4)}})}(),p()},s.clearDebuggerState=function S(){r.removeData(l.key),r.removeData(u.key)},function E(){n.bind(t.EVENTS.Widget.SearchTermChanged,c),n.bind("removeWalkMe",g)}()}).dependencies("WmInternals, ClientStorageManager, SiteConfigManager, CommonUtils, Logger, SettingsFile, Consts");var w={Deactive:0,Active:1,ActiveAndReset:2};Cr.register("DynamicComponentTypes").asFunction(function ut(){return{Walkthru:0,LiveChat:1,ActionBot:2,IntegrationCenterWebhooks:3,DeepUI:4,Widget:5,BalloonStyles:6,IntegrationCenterEndUserIDP:7,Segment:8,RichTextEditorConverter:9,ElementsTether:10,BlackListElements:11}}),Cr.register("DynamicComponentsProvider").asCtor(function dt(){var e;this.get=function t(){return e},function n(){e=[__webpack_require__(644),__webpack_require__(645),__webpack_require__(646),__webpack_require__(647),__webpack_require__(648),__webpack_require__(649),__webpack_require__(650),__webpack_require__(651),__webpack_require__(652),__webpack_require__(653),__webpack_require__(654),__webpack_require__(655),__webpack_require__(656),__webpack_require__(657),__webpack_require__(658),__webpack_require__(659),__webpack_require__(660)]}()});var t=Cr.register("WalkmeLoader").asCtor(function ft(i,o,e,t,n,a,s,r,u,l,c,d,f){var p,g,h=this;function m(e){t.setWalkmeTimeout(function(){e&&e()},0)}function v(e){window._walkmeInternals.walkmeLoadLog.push(e)}var y=Cr.register("loadClasses").asInstance({}).dependencies("CookiesManager,Logger,FramesetsUtils,SettingsFile,JQueryElementFinder,ConditionFunctions,ConditionTreeEvaluator,BBCodeParser,ResourceManager,ClientOrServerStorageManager,EndUsersManager,EventSenderInitializer,AbPermutationManager,LibInitializer,WmAjax,SiteConfigManager,AnalyticsManager,ClickAuditManager,RecorderServerManager,ServerDataSenderManager,GoalsManager,WalkMeGoalsManager, IncomingIntegrationConditions");"useOnce"in y&&y.useOnce();var S=Cr.register("loadClasses2").asInstance({}).dependencies("DebuggerManager,WmInternals,FeaturesManager,TimerManager,CommonEvents,LoggerManager,ShoutOutActionDataProvider,AuditTasksManager,LegacyWidgetApiModule,LegacyExternalApiModule");function E(e,t){e&&(e.run?e.run(function(){w(e,t)}):w(e,t))}function w(e,t){if(e){var n=p[e.next];g=e.next,n?E(n,t):t&&t()}}function T(){Cr.get("WalkmeLoadTimeManager").init(),u.init(),Cr.get("SuperScriptLauncher").init().then(C).then(function(){Cr.get("HostData").isIE(7)||Cr.get("AuditSourceProvider").isInPlayMode()||(Cr.get("PageVisitIdProvider").init(),Cr.get("HeartbeatEventSender").init(),Cr.get("DataSenderInitializer").initErrorLogger({toJSON:function(e){return Cr.get("JsonUtils").toJSON(e)},isAuditingEnabled:function(){return Cr.get("AuditingEnabledIndicator").isEnabled()},baseUrl:Cr.get("EventServerBaseUrlProvider").get(),wmAjax:Cr.get("WmAjax"),commonEventAttributesProvider:Cr.get("CommonEventAttributesProvider")}),Cr.get("EventSenderInitializer").init(),Cr.get("EventSenderEventListener").init()),Cr.get("LibInitializer").startInitializer()})["catch"](function(e){throw e})}function C(){return Cr.get("SessionPersister").loadOrCreate()}"useOnce"in S&&S.useOnce(),h.start=function(e){E(p[g],e)},h.get=function(e){return Cr.get(e)},function b(){window._walkmeInternals.walkmeLoadLog=[],p={start:{run:function(e){v("st"),J=Cr.get("CommonUtils"),i.profilerAPI=Cr.get("PerformanceAPI");var t=Cr.get("SettingsFile").getSettingsFile();Cr.get("AuditSourceManager").set(t.Environment),r.setUserGuid(t.UserGuids&&t.UserGuids[0]),Cr.get("RecorderServerManager").set(t.PlayerServer),Cr.get("FramesetsUtils").waitForFramesHeadsAndBodies(e)},next:"creatApi"},creatApi:{run:function(e){window.WalkMeAPI=Cr.get("ClassWalkMeAPI"),e()},next:"pageReady"},pageReady:{run:function(e){v("pr"),h.libCtorTimer=Cr.get("Logger").timer("lib constructor"),e()},next:"loadStorage"},loadWalkmeConfig:{run:function(r){v("lwc"),o.init(function(){if(null!=o.Data){var e=o.Data.EndUserSettings,t={SiteConfig:o.Data},n=Cr.get("EndUsersManager");n.setEndUserSettings(e),Cr.get("DynamicComponentsLoader").loadOneByType(Cr.get("DynamicComponentTypes").IntegrationCenterEndUserIDP,t).then(function(){n.createEndUserGuid(),r()})}else r()})},next:"loadServerStorage"},loadStorage:{run:function(e){v("ls");var t=Cr.get("ClientStorageManager");if(t){if(!1===t.init(e,i))return function n(e){a.removeWalkMe(e,{sendLog:!0}),i.initFailed=!0}("storageManagerInitFailed"),!1;try{window.walkme_lib_in_dev&&s.devModeAlert()}catch(r){}h.libCtorTimer.stop()}},next:"loadWalkmeConfig"},loadServerStorage:{run:function(e){v("lss");var t=Cr.get("StorageManagerFactory").bySettingsFile(!0);Cr.register("ClientOrServerStorageManager").asInstance(t),t===Cr.get("ClientStorageManager")&&t.removeData(t.keysConfig.serverStorage.lastGetDataTime.key,r.getUserGuid()),t.init(e,e)},next:"afterStorageLoaded"},afterStorageLoaded:{run:function(e){v("asl"),function n(){Cr.get("loadClasses"),Cr.get("loadClasses2")}(),window.WalkMeDataAPI=Cr.get("WalkMeDataAPI");var t=Cr.get("ClientOrServerStorageManager");t.convertOldCookieStorage("wm-lang"),t.convertOldCookieStorage("wm-ABPer"),!1!==f.getCookie("walkmeDontInitLib")?m(window.wm_afterStorageLoaded_callback):m(T)}}},g="start"}.apply(null,arguments)}).dependencies("Lib, WalkmeConfigManager, Consts, TimerManager, CommonEvents, LibDestroyer, DevModeAlertRaiser, UserGuidContainer, WindowBeforeUnloadHandler, LocalStorageService, CommonUtils, WmInternals, CookiesManager");function n(){var t;this.set=function n(e){t=e},this.get=function e(){return t},this.addRange=function r(e){t=t.concat(e)},function i(){t=[]}()}"useOnce"in t&&t.useOnce(),Cr.register("WmInternalsOverloader").asCtor(function pt(r){this.init=function e(){Tr(["bind","unbind","on","off","one"]).each(function(e,n){r[n]=function(e,t){Tr(r)[n](e,t)}})}}).dependencies("WmInternals"),Cr.register("SnippetModeIdentifier").asCtor(function gt(){var e,t=this;t.isSnippetExist=function(){return!!t.getSnippet()},t.isPlayMode=function(){return!!window.wmPlaySnippet},t.isPreviewMode=function(){return!!window.wmPreviewSnippet},t.isPublishMode=function(){return!(t.isPlayMode()||t.isPreviewMode())},t.getSnippet=function(){return e||(window.wmPlaySnippet?e=window.wmPlaySnippet:window.wmPreviewSnippet?e=window.wmPreviewSnippet:window.wmSnippet&&(e=window.wmSnippet)),e}}),Cr.register("LibCtorService").asCtor(function ht(e,t,n){function r(){Cr.get("AjaxManager").init(),Cr.get("CommonEvents").raiseEvent(e.EVENTS.MainStart,{object:t}),Cr.initialize("Logger"),Cr.initialize("HostData"),Cr.initialize("ElementFinder"),Cr.get("WalkmeLoader").start()}this.init=function i(){Cr.get("CommonEvents").raiseEvent(e.EVENTS.DICreated,Cr),n.init(r)}}).dependencies("Consts, Lib, SupportToolkitInitializer"),Cr.register("TasksContainer").asCtor(n),Cr.register("ContentsContainer").asCtor(n),Cr.register("ShuttlesContainer").asCtor(n),Cr.register("SurveysContainer").asCtor(n),Cr.register("ShoutOutsContainer").asCtor(n),Cr.register("SpotlightsContainer").asCtor(n),Cr.register("TooltipsContainer").asCtor(n),Cr.register("CategoriesContainer").asCtor(n),Cr.register("CollectionsContainer").asCtor(n),Cr.register("ConditionBlocksContainer").asCtor(n),Cr.register("BusinessSolutionsContainer").asCtor(n),Cr.register("CoursesContainer").asCtor(n),Cr.register("LabelsContainer").asCtor(n),Cr.register("LessonsContainer").asCtor(n),Cr.register("TagsContainer").asCtor(n),Cr.register("TrackedPagesContainer").asCtor(n),Cr.register("TrackedElementsContainer").asCtor(n),Cr.register("AbExperimentsContainer").asCtor(n),Cr.register("SearchProviderUrlsContainer").asCtor(n);var i=Cr.get("UIComponentsClasses");i.eventBasedObject,i.uiComponentBase,i.idisplayer,i.popupBase,i.shoutOutBase;function o(){this.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:undefined}}function o(){this.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:undefined}}function P(){var o,u,s,l,c,a,d=this;function f(){return u.getFromStorage(a)}d.saveData=function(e){var t=l.minifyData(e);if(d.removeData(),t!==undefined){for(var n=function s(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++){var o=t>e.length?e.length:t,a=e.slice(0,o);e=e.substring(o),n.push(a)}return n}(t,2600),r=0;r<n.length;r++){var i=n[r];u.saveToStorage(c+r,i,o)}u.saveToStorage(a,n.length,o)}},d.getData=function(){var e,t,n,r=f();if(r!=undefined){e="";for(var i=0;i<r;i++){e+=u.getFromStorage(c+i)}}if(e)try{t=(t=l.deminifyData(e))||undefined}catch(o){n=o}return(n||0<r&&!t)&&function a(e){s(e,"Storage data is malformed, discarding it."),d.removeData()}(n),t},d.removeData=function(){var e=f();if(u.saveToStorage(a,0,o),e!=undefined)for(var t=0;t<e;t++)u.saveToStorage(c+t,null,o)},function p(e,t,n,r){u=e,o=t,s=n,l=Cr.get("DataMinifier"),r;var i=Cr.get("StorageKeysConfigurations").storage;c=i.dataPrefix.key,a=i.numberOfEntries.key}.apply(null,arguments)}function a(n,r){function t(e,t){return{name:n.get()[r.generateKey(e)],type:e.toLowerCase(),weak:t}}this.generateWithoutBackground=function i(e){return t(e,!0)},this.generate=function o(e){return t(e,!1)}}Cr.register("CdnServer").asCtor(function mt(e){var t;this.get=function n(){return t||e.getCdnServerName()||""},this.override=function r(e){t=e}}).dependencies("SettingsFile"),Cr.register("FindElementCornerMargin").asInstance(1),Cr.register("FindElementCornerFunctions").asFunction(function(t){return[function(e){return{x:e.offset().left+e.outerWidth()/2,y:e.offset().top+t}},function(e){return{x:e.offset().left+e.outerWidth()/2,y:e.offset().top+e.outerHeight()-t}},function(e){return{x:e.offset().left+t,y:e.offset().top+e.outerHeight()/2}},function(e){return{x:e.offset().left+e.outerWidth()-t,y:e.offset().top+e.outerHeight()/2}},function(e){return{x:e.offset().left+t,y:e.offset().top+t}},function(e){return{x:e.offset().left+t,y:e.offset().top+e.outerHeight()-t}},function(e){return{x:e.offset().left+e.outerWidth()-t,y:e.offset().top+t}},function(e){return{x:e.offset().left+e.outerWidth()-t,y:e.offset().top+e.outerHeight()-t}}]}).dependencies("FindElementCornerMargin"),Cr.register("ElementPositionCalculator").asCtor(function vt(s,u){this.getElementPosition=function l(e,t){try{var n,r;if(e==s.EMBEDMENT_TYPE.EmbedInOwnerDocument){var i=t.offset();n=Math.floor(i.top),r=Math.floor(i.left)}else if(e==s.EMBEDMENT_TYPE.EmbedInTopDocument){var o=u.getPosRelativeToWindow(t[0],window,!0);n=o.top,r=o.left}return{top:n,left:r,height:t.height(),width:t.width()}}catch(a){return{}}}}).dependencies("Consts, PositionHelper"),Cr.register("ExtensionConfigManager").asCtor(o),Cr.register("ExtensionConfigManager").asCtor(o),Cr.register("StringCache").asCtor(function yt(){var n=[],r=[];this.set=function(e,t){n.push(e),r.push(t),5<n.length&&(n.shift(),r.shift())},this.getValue=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return r[t]},this.getKey=function(e){for(var t=0;t<r.length;t++)if(r[t]==e)return n[t]}}).asProto(),Cr.register("ButtonSiteConfigKeyGenerator").asCtor(function St(){this.generateKey=function t(e){return e+"ButtonText"}}),Cr.register("WelcomeButtonSiteConfigKeyGenerator").asCtor(function Et(){this.generateKey=function t(e){return"WelcomeStepButton"+e+"Text"}}),Cr.register("BalloonButtonDataGenerator").asCtor(a).dependencies("SiteConfigManager, ButtonSiteConfigKeyGenerator"),Cr.register("WelcomeBalloonButtonDataGenerator").asCtor(a).dependencies("SiteConfigManager, WelcomeButtonSiteConfigKeyGenerator"),Cr.register("AjaxProxyIframeManager").asCtor(function wt(o,a,t,n){var s,u,l,r,c={},d=1,i="resources/AP/",f="ajaxProxyIframe.html";function p(){l.resolve()}function g(e){if(!(s.toLowerCase().indexOf(e.origin)<0)){var t=a.secureEvalJSON(e.data);if(t.wmAP&&c[t.requestIndex]){if(!t.success)return r(t.error),Cr.get("EventSenderErrorLogger").logError(t.error,{data:t.data}),void c[t.requestIndex].requestDefer.reject();t.data=a.secureEvalJSON(t.data),c[t.requestIndex].requestDefer.resolve(t)}}}this.init=function h(){l=Tr.Deferred(),s=function e(){return t.getPublicPath()+i+f}(),u=o.createIframe(s,"walkme-ap-iframe",!1,p,g),r=n.wrapCustomerLog("AjaxProxy")},this.postMessage=function m(e,t){!function r(t,n){c[t]={requestDefer:Tr.Deferred(),result:""},c[t].requestDefer.promise().then(function(e){delete c[t],n(e)},function(){delete c[t]})}(d,t),function i(e,t){var n={origin:o.getWinOrigin(),requestIndex:t,message:e,wmAP:!0};l.promise().then(function(){u.contentWindow.postMessage(a.toJSON(n),s)})}(e,d),d++},this.abort=function v(e){delete c[e]}}).dependencies("CommonUtils, JsonUtils, SettingsFile, Logger"),Cr.register("ClassWalkMeAPI").asCtor(function Tt(t,o,r,i,n,e,a,s,u,l,c,d){var f=this;f.getPlayInitiatorEnum=function h(){return o.STEP_PLAY_INITIATOR_ENUM},f.getFlows=function m(){try{for(var e=window._walkmeInternals.ctx,t=e.get("BusinessSolutionsManager").getAll(),n=e.get("CommonUtils").clone(t),r=0;r<n.length;r++){var i=n[r].Settings.CustomField1;i&&(n[r].Settings.CustomField1=s.decodeHtml(i,['"',"'","&"]))}return n}catch(o){p("walkMeAPI - error running getFlows.",3)}},f.startContentById=function v(e,t,n){try{if(e<0)return!1;var r={type:t=t!==undefined?t:o.STEP_PLAY_INITIATOR_ENUM.API};return g(r),n&&(r.objectId=n),Cr.get("ContentsManager").activateById(e,r),!0}catch(i){p("walkMeAPI - error running startContentById.",3)}},f.startSurveyById=function y(e,t){try{return!(e<0)&&(g(t=t||{type:o.STEP_PLAY_INITIATOR_ENUM.API}),Cr.get("SurveysManager").activateById(e,t))}catch(n){p("walkMeAPI - error running startSurveyById.",3)}},f.startFlowById=function S(e,t){try{if(!a.isWalkMeVisible())return!1;var n={type:o.STEP_PLAY_INITIATOR_ENUM.API};return g(n),window._walkmeInternals.ctx.get("BusinessSolutionsManager").activateById(e,n,t)}catch(r){p("walkMeAPI - error running startFlowById.",3)}},f.stopFlow=function E(){try{return!!a.isWalkMeVisible()&&window._walkmeInternals.ctx.get("BizflowApi").stop()}catch(e){p("walkMeAPI - error running stopFlow.",3)}},f.setAnalyticsCustomField=function w(e,t){try{return!(e>o.ANALYTICS_CUSTOM_VARS.MaxCustomFields||e<1||t.length>o.ANALYTICS_CUSTOM_VARS.MaxVarLength)&&Cr.get("WalkMeInfo").setAnalyticsCustomFields(e-1,t)}catch(n){p("walkMeAPI - error running setAnalyticsCustomField.",3)}},f.setAnalyticsProperty=function T(e,t){try{r.setPredefinedPropertyValue(e,t)}catch(n){p("walkMeAPI - error running setAnalyticsProperty.",3)}},f.enableLogs=function C(e){try{return e==undefined&&(e=!0),this.log.enable(e)}catch(t){p("walkMeAPI - error running enableLogs.",3)}},f.loadTasks=function b(e,t){try{return window._walkmeInternals.ctx.get("TodoListManager").loadTasks(e,t)}catch(n){p("walkMeAPI - error running loadTasks.",3)}},f.getTasks=function I(e){try{return window._walkmeInternals.ctx.get("TodoListManager").getApiTasks(e)}catch(t){p("walkMeAPI - error running getTasks.",3)}},f.getWidgetMode=function _(){return"Walkthrus"},f.setWidgetMode=function A(e){return"Deprecated"},f.getWidgetInitialState=function P(){return"Closed"},f.changeLanguage=function k(e,t){try{return Cr.get("LibInitializer").changeLanguage(e,t)}catch(n){}},f.getAllLanguages=function D(){try{return lt.ctx.get("LanguageManager").getAllLanguages()}catch(e){p("walkMeAPI - error running getAllLanguages.",3)}},f.getSupportedLanguages=function x(){try{return lt.ctx.get("LanguageManager").getMenuLanguages()}catch(e){p("walkMeAPI - error running getSupportedLanguages.",3)}},f.getCurrentLanguage=function N(){try{return lt.ctx.get("LanguageManager").getCurrentLanguage()}catch(e){p("walkMeAPI - error running getCurrentLanguage.",3)}},f.getTree=function O(){try{return _walkMe.getUiDataProvider().uiObjectsTree()}catch(e){p("walkMeAPI - error running getTree.",3)}},f.triggerUIChange=function L(){try{return n.triggerUIChangeAPI()}catch(e){p("walkMeAPI - error running triggerUIChange.",3)}},f.triggerPageChange=function F(){try{return u.triggerPageChange()}catch(e){p("walkMeAPI - error running triggerPageChange.",3)}},f.launchTracker=function M(e,t){try{return i.launchDebuggerIfEnabled(e,t)}catch(n){p("walkMeAPI - error running launchTracker.",3)}},f.log=e.getAPI(),f.getObjectsTree=function R(){try{return window._walkmeInternals.ctx.get("WidgetUiApi").getObjectsTree()}catch(e){p("walkMeAPI - error running getObjectsTree.",3)}},f.getDeployableId=function B(e,t){try{var n=l.get(e).getAll(),r=Tr.grep(n,function(e){return e.Name.toLowerCase()==t.toLowerCase()});return 0<r.length&&r[0].Id}catch(i){p("walkMeAPI - error running getDeployableId. Error: "+i,3)}},f.getWalkthrus=function U(){return[]},f.isDeployableVisible=function V(e,t){if(!Cr.get("ShowInMenuCheckerFactory").isSupportedDeployableInMenu(e))return void p("walkMeAPI - deployable type not supported.",3);var n=l.get(e);{if(n){var r=n.getById(t);if(r){r.deployableType||(r.deployableType=e);var i=Cr.get("PropertiesGeneratorFactory").create({deployable:r}).getAll();return-1<c.inArray(o.UI_PROPERTIES.Visible,i)}return p("walkMeAPI - error deployable not exist.",3),!1}return p("walkMeAPI - error getting deployable type manager.",3),!1}},f.activateDeployable=function W(e,t,n){var r=l.get(e);{if(n=n||{type:o.STEP_PLAY_INITIATOR_ENUM.API},!r)return p("walkMeAPI - error activate deployable.",3),!1;try{return!!r.activateById(t,n)}catch(i){return p("walkMeAPI - error activate deployable. "+i,3),!1}}},f.debug=function j(){return{toggleWM:function(){d.saveData("walkme_is_enabled_override",0),p("walkMeAPI - WalkMe toggled off.",3)}}}();var p=e.wrapCustomerLog("walkmeAPI");function g(e){t.raiseEvent(o.EVENTS.ApiWasCalled,{initiator:e})}!function G(){t.raiseEvent(o.EVENTS.WalkmeApiStarted,{object:f}),function e(){f.conditions={handlers:{registerAsync:function(){var e=Cr.get("ExternalConditionsHandlers");return e.register.apply(e,arguments)}}}}()}()}).dependencies("CommonEvents, Consts, AnalyticsPropertiesManager, DebuggerManager, UIChangeTracker, Logger, WalkMeVisibilityChecker, HtmlDecoder, PageChangeTracker, DeployablesManagerFactory, ArrayUtils, CookiesStorageManager").asSingleton(),__webpack_require__(661),Cr.register("WalkMeVisibilityChecker").asCtor(function Ct(n,r){this.isWalkMeVisible=function i(){var e=0!==n.get().ShowWalkMe,t=r.shouldShowWidget();return e&&t}}).dependencies("SiteConfigManager, AbTestingManager"),__webpack_require__(666),Cr.register("SiteConfigManager").asCtor(function bt(i){var o;this.get=function e(){return a},this.set=function u(e,t){a=e;var n=Cr.get("FeaturesManager");n.isFeatureEnabled("decodeSiteConfig")&&!function r(e){for(var t in e)if(Object.hasOwnProperty.call(e,t)){var n=e[t];"string"==typeof n?e[t]=i.decodeHtml(n,s):"object"==typeof e&&r(n)}}(a);if(a!=[]&&!t){if(!(o=!0)===Cr.get("CustomCssSetter").setCustomCssIfNeeded(null)&&!n.isFeatureEnabled("loadNoStyle"))return void Cr.get("LibDestroyer").removeWalkMe("set custom css failed",{sendLog:!0});Cr.get("PositionHelper").extendVisibilityFilters()}},this.wasCustomCssSet=function t(){return o};var a=[],s=["&","'",'"',"<",">"]}).dependencies("HtmlDecoder"),__webpack_require__(667),Cr.register("LibDestroyer").asCtor(function It(i,r,o,a,s,u,l,c){var d=this,f=!1,t=[];function n(){var e=Cr.get("CdnServer").get().replace("http://","").replace("https://","");if(mtjQuery("script[src*='"+e+"']").not("script[src*='walkme_lib']").not("script[src*='maketutorial_lib']").not("[src*='jquery']").not("[src*='wmjQuery']").remove(),mtjQuery(".mt-to-destroy, .walkme-to-destroy").remove(),function r(e){if(!Cr.get("FramesetsUtils").isFramesetsPage())return;for(var t=Cr.get("FramesetsUtils").getAllFramesDocuments(),n=0;n<t.length;n++)Tr(e,t[n]).remove()}(".mt-to-destroy, .walkme-to-destroy"),window._walkmePlayer&&window._walkmePlayer.destroyWalkMePlayer&&window._walkmePlayer.destroyWalkMePlayer(),window.walkmeWidget&&window.walkmeWidget.destroyWalkMePlayer&&window.walkmeWidget.destroyWalkMePlayer(),Cr.has("WalkmeWidget")&&Cr.get("WalkmeWidget").destroyWalkMePlayer(),Cr.get("SmartTipSetActivationInitiator").stop(),Cr.entry("UIChangeTracker").wasReady()){var t=Cr.get("UIChangeTracker");t&&(t.stop(),t=null)}if(Cr.entry("PageChangeTracker").wasReady()){var n=Cr.get("PageChangeTracker");n&&(n.stop(),n=null)}!function i(e){Cr.get("TrackedPagesManager").releaseAll(),Cr.get("TrackedElementsManager").releaseAll(),Cr.entry("PageVisitGuidProvider").wasReady()&&Cr.get("PageVisitGuidProvider").releaseResources()}()}function p(t){var e=Tr.Deferred();return o.raiseEvent(a.EVENTS.ReleaseAllElementsCalled),l.executeParallel({functionsToExecute:[function(e){g(e,t)},h,v,m],successCallback:function(){y().then(e.resolve)},failCallback:e.reject}),e.promise()}function g(e,t){Cr.get("Logger").customerLog("Releasing balloons",5,a.LOG_FEATURES.BALLOON);var n={isDestroyingAll:f};Tr.extend(n,t),o.raiseEvent(a.EVENTS.CallReleaseElementsFromBalloons,n);var r=i.getAll();i.removeAll(),l.executeParallel({objectsArray:r,functionsToExecute:[function(e,t){e.destroy(!1,t)}],successCallback:e})}function h(e){Cr.get("ShoutOutsManager").releaseAll(e)}function m(e){Cr.get("CoursesManager").releaseAll(e)}function v(e){Cr.get("AttentionGrabberManagerAPI").remove(e)}function y(){return Cr.get("SmartTipSetActivationInitiator").stop(),Cr.get("BusinessSolutionsManager").releaseAll()}d.releaseAllElements=p,d.releaseBalloons=g,d.releaseShoutOuts=h,d.releaseFlow=y,d.removeWalkMe=function S(e,t){(t=t||{}).sendLog&&Cr.get("EventSenderErrorLogger").logError("WalkMe was removed",{subType:"RemoveWalkMe",removeWalkMeReason:e,errorCode:t.errorCode}),d.removingWalkMe=!0,Cr.get("Logger").customerLog(c.formatString("removeWalkMe called with reason {0}",e)),lt.removeWalkMeReason=e;try{Cr.get("EventSenderDisabler").disable()}catch(n){}var i={reason:e,errorCode:t.errorCode};o.raiseEvent(a.EVENTS.BeforeWalkmeRemoved,i);try{window.walkme_remove_walkme_callback&&walkme_remove_walkme_callback(e)}catch(n){}d.destroyAll(function(){(function e(){return r.clearGlobalTimeouts(),Cr.get("CrossDomainManager").get().stop(),Cr.get("ResourceManager").emptyStyleSheets(),Cr.get("IFramesManager").releaseEvents(),Cr.get("AutoStartRunningState").cleanResources(),Cr.get("SessionPersister").cleanResources(),Cr.get("WindowBeforeUnloadHandler").cleanResources(),Cr.get("PostMessageListener").cleanResources()})().then(function(){var e=Cr.get("CdnServer").get().replace("http://","").replace("https://","");Tr("script[src*='"+e+"']").remove(),Tr("script[src*='maketutorial']").remove(),Tr("script[src*='wmjQuery']").remove(),Tr("script[id='mt_script']").remove(),Tr("link[id^='mt-css']").remove();u.getTopContainer();Tr(".walkme-to-remove").remove(),s.removeScrollAndResizeEvents(),l.unregisterEventHandler("load",Tr.ready,!1,window),Tr(window).unbind(),Tr(lt).unbind(),function r(){if(!window._walkmeInternals)return;for(var e=Cr.get("WalkmeInternalsPersistWhitelist"),t={},n=0;n<e.length;n++)t[e[n]]=lt[e[n]];window._walkmeInternals=t}(),o.raiseEvent(a.EVENTS.AfterWalkmeRemoved,i),function n(){for(var e=["wmjQuery","mtjQuery","_walkmeConfig","_walkMe","_makeTutorial","WalkMeAPI","WalkMeDataAPI","WalkMePlayerAPI","WalkMeDataClass","WalkmeWidget","_makeTutorialEv","wmContext","WalkmeSnippet","wmPreviewSnippet","wmSnippet","walkme_lib_in_dev","walkme_lib_notify_ServerName","walkme_lib_upload_date","walkme_lib_uploader","walkme_lib_version","ClassMakeTutorial","loadWidgetWrap","loadWidget","walkme_event","walkme_post_lib_loaded","walkme_pre_lib_loaded",,"_walkmeWebpackJP","mt_cdn_server_name","mt_get_user_settings_url"],t=0;t<e.length;t++)window[e[t]]=undefined}(),t.callback&&t.callback()})})},d.destroyAll=function E(e){if(e&&t.push(e),!f)return f=!0,Cr.get("Logger").customerLog("destroyAll - begin",1),Cr.get("ClientStorageManager").releaseCallbacks(),Cr.get("ConditionCheckerType").cleanResources(),Cr.get("UIVisibilityManagerType").cleanResources(),Cr.get("DOMSessionManager").cleanResources(),Cr.get("BizFlowOnBeforeUnloadChecker").destroy(),Cr.get("FlowTransitionDelayer").destroy(),Cr.get("jQueryCacheCleaner").destroy(),Cr.get("GoalsManager").cleanResources(),Cr.get("PerformanceAPI").destroy(),p().pipe(function(){Cr.get("Logger").customerLog("destroyAll - releaseAllElements finished",1)}).pipe(n).pipe(r.releaseAllTimeouts).pipe(function(){Cr.get("Logger").customerLog("destroyAll - calling user callbacks",1);for(var e=0;e<t.length;e++)t[e]();f=!(t=[])});Cr.get("Logger").customerLog("destroyAll - already destroying",1)},d.releaseTeachMeElements=m}).dependencies("BalloonsContainer, TimerManager, CommonEvents, Consts, PositionHelper, TopContainerProvider, CommonUtils, StringUtils"),Cr.register("endUserGuidValidator").asCtor(function _t(e,t,n,r,i,o,a){this.validate=function u(){if(!r.isInPreviewMode()&&a.get())return undefined;for(var e=0;e<s.length;e++){var t=s[e]();if(t)return o.logError(t.message),t}};var s=[function l(){return t.isServerStorageOn()&&n.isWalkMeGeneratedEndUserType()?{message:"Unique User Settings are not supported by server storage",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.cannotHaveBothUniqueUserAndServerStorage}:undefined},function c(){if(n.isEndUserGuidValid())return undefined;return{message:"Could not retrieve end user identifier",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.missingUserIdentifyer}}]}).dependencies("Consts, ServerStorageSettingsService, EndUsersManager, AuditSourceProvider, Lib,EventSenderErrorLogger, IsInEditor"),Cr.register("CommonEvents").asCtor(function At(i,o,a,e,n){this.raiseEvent=function u(e,t){r(e,t)},this.deprecatedRaiseEvent=r,this.sendInternalEvent=r,this.sendAutomationEvent=function l(e,t){if(!window.wmjQuery)return;n.forward(e,t)};var s=window.wmjQuery&&Tr(e);function r(e,t,n){try{if(!window.wmjQuery)return;s.triggerHandler(e,[t,n]),o.route(e,t,n),a.sync(e,t)}catch(r){i.error(r)}}}).dependencies("Logger,ApiEventRouter,EventsTriggerSyncer,WmInternals,AutomationEventForwarder").asSingleton(),Cr.register("MessageSender").asCtor(function Pt(n){this.send=function r(e,t){return n.raiseEvent(e,t),t.returnValue}}).dependencies("CommonEvents"),Cr.register("AdditionalTemplatesHandlers").asCtor(function kt(){this.assign=function i(e,t){if(r(e))throw new Error("There is already handler assigned to the type - "+e);if("function"!=typeof t)throw new Error("'handler' must be a function");n[e]=t},this.get=o,this.run=function a(e,t,n){var r=n,i=o(e);return i&&(r=i.apply(null,t)),r},this.hasHandler=r;var n={};function o(e){return n[e]}function r(e){return!!o(e)}}).asSingleton(),Cr.register("WMObjectNameObfMapping").asInstance({amount:"b",app:"a",browser:"c",browserName:"d",browserVersion:"e",count:"i",cVars:"f",duration:"g",env:"h",euId:"euId",euIdSource:"j",feId:"k",feVersion:"l",gitRevision:"m",instanceId:"n",interactionGuid:"o",ip:"p",key:"q",language:"r",libVersion:"s",local:"t",message:"u",misc:"v",mobile:"w",name:"x",os:"y",pageTitle:"z",permId:"aa",platform:"ab",publishDate:"ac",publishEnv:"ad",quantity:"ae",reason:"af",sesId:"ag",sessionId:"ah",sum:"ai",time:"timestamp",total:"ak",type:"al",uId:"uId",url:"an",urlWithoutQueryString:"ap",userVars:"ao",result:"aq",score:"ar",version:"ax",pluginName:"aw",pluginVersion:"ay",pluginCaptureVersion:"az",capturePlatformVersion:"au",platformVersion:"av",customContext:"aj",owner_type:"oa",owner_id:"oc",owner_chain:"sm",owner_sticky:"be",features_list:"fl",identifySettings_stepSensitivity:"ia",identifySettings_threshold:"ib",identifySettings_settings:"ic",identifySettings_jquerySelector:"ii",identifySettings_elementDescription:"ie",identifySettings_pluginData:"if",identifySettings_wmDate:"ig",identifySettings_wmVersion:"ih",pluginSubType:"ba",pageResult:"bb"}),Cr.register("WMObjectNameObfMapper").asFunction(function Dt(r,i){return function(e){"object"!=typeof e&&(e={message:e});var t={};for(var n in e)r[n]===undefined?i.logError("no such key you try to encode ",n):t[r[n]]=e[n];return t}}).dependencies("WMObjectNameObfMapping,EventSenderErrorLogger"),Cr.register("StaticWMDataProvider").asFunction(function xt(n,r){return function(){var e=r.get(),t=!0===window.walkme_lib_in_dev?{local:!0}:{};return Tr.extend({libVersion:e.version.lib,extensionVersion:e.version.ext,publishDate:n.getPublishDate(),publishEnv:e.wm.env,pageTitle:e.ctx.title},e.env,e.wm,t)}}).dependencies("WalkMeInfo, CommonEventAttributesProvider"),Cr.register("AutomationEventDataAppender").asCtor(function Nt(){this.append=function r(e,t,n){e.Type=n,t&&Tr.extend(e,t)}}),Cr.register("EventDataAppender").asCtor(function Ot(){this.append=function r(e,t,n){e.Type=n,t&&(e.ExtraData=t)}}),Cr.register("ApiEventForwarder").asCtor(function Lt(e){var o,a;this.forward=function s(e,t,n){var r=o&&o[e]&&o[e].transform;if(r){var i=r(t,n);a.raise(i.name,i.data)}else a.raise(e,t)},function t(){o=e.apiEventsConfigProvider&&e.apiEventsConfigProvider.get(),a=e.apiEventRaiser}()}).asProto().dependencies(),Cr.register("NewApiEventForwarder").dependencies("NewApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:Cr.create("ApiEventRaiser",{windowFuncName:"walkme_event",dataAppenders:[t]})};return Cr.create("ApiEventForwarder",n)}),Cr.register("OldApiEventForwarder").dependencies("OldApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:Cr.create("ApiEventRaiser",{windowFuncName:"mt_event",dataAppenders:[t]})};return Cr.create("ApiEventForwarder",n)}),Cr.register("EditorApiEventForwarder").dependencies("EditorApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:Cr.create("ApiEventRaiser",{windowFuncName:"walkme_editor_event",dataAppenders:[t]})};return Cr.create("ApiEventForwarder",n)}),Cr.register("AutomationEventForwarder").dependencies("AutomationEventDataAppender").asFunction(function(e){var t={apiEventRaiser:Cr.create("ApiEventRaiser",{windowFuncName:"walkme_automation_event",dataAppenders:[e]})};return Cr.create("ApiEventForwarder",t)}),Cr.register("ApiEventRaiser").asCtor(function Ft(i,a,e,s){var u,t=this;t.raise=function l(e,t){try{if(a[s.windowFuncName]){var n=function o(n,r){var i={};return Tr.each(u,function(e,t){t.append(i,r,n)}),i}(e,t);a[s.windowFuncName](n)}}catch(r){i.error(r)}},t.addAppender=function n(e){u.push(e)},function r(){u=s.dataAppenders,e.add(t)}()}).asProto().dependencies("Logger, win, ApiEventRaisersContainer"),Cr.register("ApiEventRaisersContainer").asCtor(function Mt(){this.add=function n(e){t.push(e)},this.get=function e(){return t};var t=[]}),Cr.register("ApiEventRouter").asCtor(function Rt(r,i,o,a,s){this.route=function u(e,t,n){r.get()[e]&&(i.forward(e,t,n),s.forward(e,t,n)),o.get()[e]&&a.forward(e,t,n)}}).dependencies("NewApiEventsConfigProvider, NewApiEventForwarder, OldApiEventsConfigProvider, OldApiEventForwarder, EditorApiEventForwarder");var s,u=__webpack_require__(668).DummyEventsTrigger;function l(){var n;this.minifyData=function(e){if(e&&0!=e.length)return n.stringify(e)},this.deminifyData=function(e){if(e)return n.parse(e)},function r(e,t){n=Cr.get("CJson")}.apply(null,arguments)}function c(){var t;this.minifyData=function(e){if(e&&0!=e.length)return t.toJSON(e)},this.deminifyData=function(e){if(e)return t.secureEvalJSON(e)},function n(e){t=e}.apply(null,arguments)}function z(){var o,n,a,r,i,s,u,l,c,d,f,p,g,h,m,v,y,S,E,w,T,C,b=this,I=[];function _(){n.saveData(I)}b.isStorageEnabled=function(){return S},b.sendData=function(e){if(function i(){return C&&0==b.actionUrl().indexOf("/Statistics/")}())c("Prevent sending logs to Analytics",3);else if("object"==typeof e)S?h.refreshGetData(null,n):n();else{var t=w.formatString("TypedDataSender - got object with value {0} of type {1} instead of object ({2}).",e,typeof e,u);c(t,1)}function n(){if(f)c("Not accepting anymore data",3);else if(I=b.data(),o.isServerSick())if(!1===E&&I.length<10)r();else{var e=w.formatString("TypedDataSender - Server is sick, ignoring new data of type {0} for now",u);c(e,3)}else r(),o.sendData()}function r(){S||(I.length=0),a&&a(I,e),e[g]=function t(){var e=0;return S&&(e=h.getFromStorage(T,0),h.saveToStorage(T,e+1,m)),e}(),I.push(e),S&&_()}},b.persistData=function(){S&&(_(),I&&0!=I.length||h.removeFromStorage(T))},b.data=function(){return S&&function e(){I=n.getData()}(),I=I||[]},b.actionUrl=function(){return r},b.sendingThreshold=function(){return s},b.dataType=function(){return u},b.truncateData=function(){S&&((I=b.data()).splice(1,I.length-1),b.persistData())},b.clearAndStopSavingData=function(){f=!0,I.length=0,S&&n.removeData()},b.technicalSuccessHandler=function(){return i},b.successCallback=function(){return v},b.failCallback=function(){return y},b.requestParamsFunc=function(){return d},b.getDataIdFieldName=function(){return g},b.shouldTruncateData=function(){return E},function A(e){var t=e.stateManager;o=e.serverDataSenderManager,r=e.actionUrl,a=e.beforeSendingManipulationFunc,i=e.technicalSuccessHandler,s=e.sendingThreshold,u=e.dataType,l=e.dateSenderLogFeature,d=e.requestParamsFunc,p=e.logError,w=e.stringUtils,c=e.logger.wrapCustomerLog(l),g=e.dataIdFieldName||"iN",v=e.successCallback,y=e.failCallback,E=e.shouldTruncateData,T=t.keysConfig.typedDataSender.nextItemNumber.key,C=e.shouldBlockAnalytics,(S=!1!==e.storageEnabled)&&(m=e.defaultDataStorageLifeSeconds,h=new N(t,e.twoLettersDataType),n=new P(h,m,p,e.recursiveMinification),I=b.data())}.apply(null,arguments)}function d(a,s,u,e,l,c){var d=this,f=!1;function p(e,t){return e?e[t]:undefined}d.send=function(e,t){if(d.isEnabled()){f||(a.setStaticData("Wm-Eu-Data",function r(){return l(function t(e){return{browserName:p(e.browser,"name"),browserVersion:p(e.browser,"version"),mobile:e.mobile,os:p(e.os,"name"),env:e.env,euId:e.euId,euIdSource:e.euIdSource,permId:e.permId,platform:e.platform,uId:e.uId,local:e.local,libVersion:e.libVersion,publishDate:e.publishDate}}(c()))}()),f=!0);try{var n=u.toJSON(function i(e,t){t.time||(t.time=(new Date).getTime());return{ns:e,data:l(t)}}(e,t));a.send(n)}catch(o){throw s&&s.logError(u.toJSON(o.message)),o}}},d.isEnabled=function(){return e.isEnabled()},function t(){}.apply(this,arguments)}Cr.register("EventsTriggerSyncer").asCtor(function Bt(i){this.sync=function o(e,t){var n=t?t.defaultValue:undefined,r=i.sync(e,t,n);t&&r!==undefined&&(t.returnValue=r),t&&t.asyncCallback&&(r&&r.then?r.then(t.asyncCallback,t.asyncFailback):Tr.when(r).then(t.asyncCallback,t.asyncFailback))}}).dependencies("EventsTrigger"),Cr.has("EventsTrigger")||Cr.register("EventsTrigger").asInstance(new u),Cr.register("NewApiEventsConfigProvider").asCtor(function Ut(n){var r;function e(e,t){return{name:n.EVENTS.Launchers.LauncherIsShown,data:t}}function t(e,t){return t.origEventData=e,{name:n.EVENTS.Walkthrus.StepShown,data:t}}this.set=function i(e,t){r[e]=t},this.get=function o(){return r[n.EVENTS.Walkthrus.StepShown]={transform:t},r[n.EVENTS.Launchers.LauncherIsShown]={transform:e},r[n.EVENTS.TaskCompleted]={},r[n.EVENTS.TasksLoaded]={},r[n.EVENTS.Launchers.LauncherClicked]={},r[n.EVENTS.Goals.GoalReached]={},r.ABTestingGoalsFetched={},r[n.EVENTS.UIComponentDestroyed]={},r[n.EVENTS.DeployableCreated]={},r.SurveyPlayed={},r.SurveyCompleted={},r.BalloonCreated={},r.WalkthruAborted={},r.WalkthruStopped={},r.UserStoppedWalkthru={},r.UserStoppedWalkthruAfterStop={},r.WalkthruFailedToStart={},r.WalkthruCompleted={},r.BeforeNewStepShown={},r.BackButtonClicked={},r.NextButtonClicked={},r.DoneButtonClicked={},r.SfVarsExposed={},r.BBCodeLinkClicked={},r.FailureMessageOkButtonPressed={},r.StorageManagerInitialized={},r[n.EVENTS.StorageLoaded]={},r[n.EVENTS.WalkmeLoaded]={},r[n.EVENTS.Flows.UIFlowStageShown]={},r[n.EVENTS.Flows.FlowCompleted]={},r[n.EVENTS.Flows.FailedToStart]={},r[n.EVENTS.Flows.FlowStopped]={},r[n.EVENTS.Flows.FlowStarted]={},r[n.EVENTS.Flows.BeforeExecutingFlowStage]={},r[n.EVENTS.Flows.AfterCompletingFlowStage]={},r[n.EVENTS.Flows.FlowStageSkipped]={},r[n.EVENTS.SmartTips.TooltipShown]={},r[n.EVENTS.SmartTips.SmartTipIconShown]={},r[n.EVENTS.BeforeWalkmeRemoved]={},r[n.EVENTS.AfterWalkmeRemoved]={},r[n.EVENTS.Flows.FlowAborted]={},r[n.EVENTS.Surveys.SurveyBalloonDisplayed]={},r[n.EVENTS.LightBoxDivCreated]={},r[n.EVENTS.WidgetPlayer.PlayerBuilt]={},r[n.EVENTS.WidgetMenu.MenuBuilt]={},r[n.EVENTS.SmartTips.SmartTipElementShown]={},r[n.EVENTS.SmartTips.SmartTipElementRemoved]={},r[n.EVENTS.SmartTips.SmartTipIconDestroyed]={},r[n.EVENTS.Walkthrus.StepCompleted]={},r[n.EVENTS.Walkthrus.WalkthruStopped]={},r},function a(){r={}}()}).dependencies("Consts"),Cr.register("EditorApiEventsConfigProvider").asCtor(function Vt(t){this.get=function n(){var e=t.get();return e.WalkthruCompleted={transform:function(e,t){return{name:"WalkthruCompleted",data:{WalkThru:e,AdditionalData:t}}}},e}}).dependencies("NewApiEventsConfigProvider"),Cr.register("OldApiEventsConfigProvider").asCtor(function Wt(n){function t(n){return function(e,t){return{name:n,data:e}}}function r(e,t){return{name:n.EVENTS.Walkthrus.StepShown,data:t}}this.get=function i(){var e={};return e[n.EVENTS.Walkthrus.StepShown]={transform:r},e.WalkthruStopped={transform:t("TutorialStopped")},e.UserStoppedWalkthru={transform:t("UserStoppedTutorial")},e.UserStoppedWalkthruAfterStop={transform:t("UserStoppedTutorialAfterStop")},e.WalkthruCompleted={transform:t("TutorialCompleted")},e.BeforeNewStepShown={},e.BackButtonClicked={},e.NextButtonClicked={},e.DoneButtonClicked={},e}}).dependencies("Consts"),Cr.register("PostMessage").asInstance(window.postMessage),Cr.register("NativeTimerFunctionsProvider").asCtor(function jt(){this.get=function(){return{clearTimeout:window.NREUM&&NREUM.o&&NREUM.o.CT||window.clearTimeout,clearInterval:window.clearInterval,setTimeout:window.NREUM&&NREUM.o&&NREUM.o.ST||window.setTimeout,setInterval:window.setInterval}}}).asSingleton(),Cr.register("TimerManager").asCtor(function Gt(e,t,n,i){var r=this;r.setWalkmeTimeout=function w(e,t){return new y(e,t)},r.setWalkmeInterval=function T(e,t){return d(function n(e){return lt.walkmeWrap?function(){lt.walkmeWrap.apply(this,[e])}:e}(e),t)},r.playSetTimeout=function C(e,t){return new y(e,t,a.playTimeouts)},r.playSetInterval=function b(e,t){return new S(e,t,a.playTimeouts)},r.libSetTimeout=function I(e,t){return new y(e,t,a.libTimeouts)},r.releaseAllTimeouts=function _(){r.releaseTimeoutsArray("libTimeouts"),r.pauseTimeoutsArray("playTimeouts")},r.clearGlobalTimeouts=function A(){for(var e in l)e&&e.indexOf&&0===e.indexOf(u)&&m(l[e])},r.releaseTimeoutsArray=h,r.stopTimeoutsArray=h,r.pauseAllTimeouts=function P(){for(var e in a)r.pauseTimeoutsArray(e)},r.pauseTimeoutsArray=function k(e){var t=a[e];t&&E(t,function(e){s.push(e),e.pause()})},r.resumeTimeoutsArray=function D(e){if(a[e]){for(var t=0;t<s.length;t++)s[t].resume();s.length=0}},r.resumeAllTimeouts=function x(){for(var e in a)r.resumeTimeoutsArray(e)},r.overrideTimeouts=function N(){Cr.get("FeaturesManager").isFeatureEnabled("overridetimeouts")&&(window.clearTimeout=function(e){g(e,m)},window.clearInterval=function(e){g(e,v)})};var o=n.get(),a={libTimeouts:{},playTimeouts:{}},s=[],u="wm-",l={};e.raiseEvent(t.EVENTS.TimerManagerCreationStarted,{object:r});var c=o.setTimeout,d=o.setInterval,f=o.clearTimeout,p=o.clearInterval;function g(e,t){l[u+e]!==undefined||t(e)}function h(e){var t=a[e];t&&E(t,function(e){e.clear()})}function m(e){f(e)}function v(e){p(e)}function y(e,t,n){this.fn=e,this.interval=t,this.timeoutsDict=n||{};var r=this;this.id=c(function(){r.run()},t),this.timeoutsDict[this.id]=this,l[u+this.id]=this.id}function S(e,t,n,r,i){this.timeoutsDict=n,r=r||window;function o(){e.apply(r,i||arguments)}this.id=d(function(){lt.walkmeWrap?lt.walkmeWrap(o):o()},t),n[this.id]=this,l[u+this.id]=this.id}function E(e,t){for(var n in e)if(e.hasOwnProperty(n))try{t(e[n])}catch(r){}}y.prototype.timeoutWrap=function(){this.clear();try{this.fn.apply(window)}catch(e){!function ON(t,n){var r=n&&/function ([\w\d\_]+)\(/.exec(n.toString());Cr.has("EventSenderErrorLogger")&&Cr.get("EventSenderErrorLogger").logError(t.message,{functionName:r&&r[1]}),i.customerLog("TimerManager error: "+(t&&t.message))}(e,this.fn)}},y.prototype.run=function(){if(lt.walkmeWrap){var e=this;lt.walkmeWrap(function(){e.timeoutWrap()})}else this.timeoutWrap()},y.prototype.resume=function(){if(!this.cleared){var e=this;this.id=c(function(){e.run()},10),this.timeoutsDict[this.id]=this}},y.prototype.id=null,y.prototype.cleared=!1,y.prototype.clear=function(){this.cleared||(m.call(window,this.id),this.cleared=!0,delete this.timeoutsDict[this.id],delete l[u+this.id])},y.prototype.pause=function(){this.cleared||(delete this.timeoutsDict[this.id],m.call(window,this.id))},S.prototype.id=null,S.prototype.cleared=!1,S.prototype.clear=function(){m(this.id),this.cleared=!0,delete l[u+this.id],delete this.timeoutsDict[this.id]}}).asSingleton().dependencies("CommonEvents,Consts,NativeTimerFunctionsProvider,Logger"),Cr.register("WalkMeDebounce").asCtor(function Ht(o){this.debounce=function(n,r){var i;return function(){var e=this,t=arguments;i&&i.clear(),i=o.libSetTimeout(function(){i=null,n.apply(e,t)},r)}},function e(){}.apply(null,arguments)}).asSingleton().dependencies("TimerManager"),s={0:l,2:c},Cr.has("DataMinifier")||Cr.register("DataMinifier").asFunction(function(e,n,t){return new(function r(){var e=n.getStorageType(),t=e&&e.mt;return s[t||0]}())(e,t)}).dependencies("JsonUtils,SettingsFile,Logger"),Cr.register("TypedDataSender").asCtor(z).asProto(),Cr.register("ServerDataSenderManagerParams").asInstance({defaultDataStorageLifeSeconds:900,dateSenderLogFeature:"serverDataSender"}),Cr.register("ServerDataSenderManager").asCtor(function Yt(e,r,l,t,o,c,d,a,f,p,n,g){var h,s,m,u,i,v,y,S,E,w,T,C=o.keysConfig.serverDataSender.serverSick.key,b=o.keysConfig.serverDataSender.serverSickAttempts.key,I=o.keysConfig.serverDataSender.serverSickTimestamp.key,_=2,A=3e3,P=6e4,k={1:6e4,2:24e4},D={Success:0,LogicalError:1,TechnicalError:2},x=this,N={};function O(){var e=L();return e||(v("serverDataSenderManager - no data to send. marking it healthy",3),void V())}function L(){for(var e=F(),t=e.length-1;0<=t;t--){var n=e[t],r=n.data();if(0<r.length)return{dataSender:n,data:r}}}function F(){return n.getDictionaryValues(N)}function M(){return!!h&&(v("There's already a pending request to server",3),!0)}function R(){var e=O();if(e&&!M()){var t=e.dataSender,n=e.data;v(g.formatString("Got {0} {1}s to send, starting now",n.length,t.dataType()),3),W(n,t)}}function B(){if(s)v("Already waiting for server's health",5);else{null!=m&&(m.clear(),m=null),s=!0;var e=o.getData(b);if(e=e?++e:1,y<e){var t=g.formatString("Server wasn't healthy for more than {0} attempts, restarting sick mode",e);v(t,0),o.removeData(I),o.removeData(b),s=!1,B()}else{var n=function i(e){var t=o.getData(I);if(!t){var n=function r(e){return T[e]}(e);t=(new Date).getTime()+n,o.saveData(I,t,u)}return t-(new Date).getTime()}(e),r=g.formatString("Sick attempts: {0}, time before next retry: {1} second(s)",e,n/1e3);v(r,3),w=a.libSetTimeout(function(){o.refreshGetData(null,function(){o.removeData(I),o.saveData(b,e,u),s=!1,R()})},n)}}}function U(){o.getData(C);V(),h=!1,R()}function V(){o.removeData(C),o.removeData(b),o.removeData(I),s=!1}function W(e,t){if(0!=l.get().length)if(0!=e.length){null!=m&&(m.clear(),m=null),h=!0;var n=t.sendingThreshold(),r=p.clone(e);r.length>n&&(r=r.splice(0,n));var i=t.requestParamsFunc()(r);d.isFeatureEnabled(f.FEATURES.DontMaskEndUserAddress)&&(i.dmeua=1);var o=c.execute({url:l.get()+t.actionUrl(),dataType:"jsonp",data:i,timeout:E});d.isFeatureEnabled("bypassAuditServer")?function s(i,e,o){e.error(function(e,t,n){if(200==e.status&&"parsererror"==t)j(i,o);else{var r=g.formatString("Server technical (AJAX) error (2) jqXHR:{0}, textStatus:{1}, errorThrown:{2}",p.toJSON(e),t,n);v(r,3),Y(n,o)}}),e.success(function(e){var t="Got success while in bypass player server mode";v(t,3),_makeTutorial.Logger.error(null,t)})}(r,o,t):function u(r,e,o){e.success(function(e){v("Sending data ajax success",3),window._walkMe&&function i(t,n,r){if(r.technicalSuccessHandler&&r.technicalSuccessHandler())r.technicalSuccessHandler()(t,function(){var e=t.Data||t;H(n,r,e)},function(){Y(t.Data||t,r)},function(){var e=t.Data||t;j(n,r,e)},n);else switch(t.WMResultCode){case D.Success:j(n,r,t.Data);break;case D.LogicalError:v(r.dataType()+" : Logical error sending data. "+t.Data,3),H(n,r,t.Data);break;case D.TechnicalError:v(r.dataType()+" : Technical error sending data",3),Y(t.Data||t,r);break;default:v(r.dataType()+" : No error code received - treated as technical error",3),Y(t.Data||t,r)}}(e,r,o)}),e.error(function(e,t,n){200==e.status&&"parsererror"==t?H(r,o,n):Y(n,o)})}(r,o,t);var a=g.formatString("Sent {0} data of type {1} to server at {2}",r.length,t.dataType(),(new Date).toString());v(a,3)}else v("dataArray's length is 0, no data to send",3);else v(g.formatString("RecorderServerName is {0}, can't send data of type {1}",l.get(),t.dataType()),2)}function j(e,t,n){if(v("The technical success was also logical success",3),function i(e,t){G(e,t)}(e,t),U(),t.successCallback){var r=t.successCallback();r&&r(n)}}function G(e,t){for(var n=t.getDataIdFieldName(),r=function a(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r][t];i&&n<i&&(n=i)}return n}(e,n),i=t.data(),o=i.length-1;0<=o;o--){i[o][n]<=r&&i.splice(o,1)}t.persistData()}function H(e,t,n){if(v(g.formatString("Logical error happened, discarding {0} {1}",e.length,t.dataType()),3),G(e,t),U(),h=!1,R(),t&&t.failCallback){var r=t.failCallback();r&&r(n)}}function Y(e,t){if(o.saveData(C,1,u),v("Truncating data due to sick server",3),function r(){for(var e=F(),t=e.length-1;0<=t;t--){var n=e[t];n.shouldTruncateData()&&n.truncateData()}}(),h=!1,t&&t.failCallback){var n=t.failCallback();n&&n(e)}B()}x.register=function(e,t){if(N[e])return N[e];var n=new z({beforeSendingManipulationFunc:t.beforeSendingManipulationFunc,actionUrl:t.actionUrl,technicalSuccessHandler:t.technicalSuccessHandler,successCallback:t.successCallback,failCallback:t.failCallback,dataType:t.dataType,twoLettersDataType:e,serverDataSenderManager:x,sendingThreshold:t.sendingThreshold,stateManager:o,stringUtils:g,storageEnabled:!1!==t.storageEnabled,dateSenderLogFeature:i,requestParamsFunc:t.requestParamsFunc,dataIdFieldName:t.dataIdFieldName,defaultDataStorageLifeSeconds:t.dataStorageLifetimeSeconds!=undefined?t.dataStorageLifetimeSeconds:u,logError:r.error,logger:r,recursiveMinification:t.recursiveMinification,shouldTruncateData:!1!==t.shouldTruncateData,shouldBlockAnalytics:d.isFeatureEnabled("noAnalyticsAudit")});return N[e]=n},x.start=function(e){x.sendData()},x.stop=function(e){!function t(){o.removeData(C),o.removeData(b),o.removeData(I)}(),x.removeAllData(),null!=m&&(m.clear(),m=null),null!=w&&(w.clear(),m=null)},x.sendData=function(){var e=O();if(e&&!M()){var t=e.dataSender,n=e.data;if(x.isServerSick())return v("Waiting for server's health in sendData",3),void B();if(n.length>=t.sendingThreshold())v(g.formatString("sendData - Got {0} {1}s to send, starting now",n.length,t.dataType()),3),null!=m&&(m.clear(),m=null),W(n,t);else if(null==m||m.cleared){var r=g.formatString("Got {0} {1}s to send, waiting {2}",n.length,t.dataType(),S);v(r,3),m=a.libSetTimeout(function(){m=null,o.refreshGetData(null,function(){var e=O();if(e&&!M()){var t=e.dataSender;W(e.data,t)}})},S)}else v("sendData - timeout already exists",5)}},x.isServerSick=function(){return function t(){var e=L();e&&e.data||V()}(),o.getData(C)||!1},x.removeAllData=function(){for(var e=F(),t=e.length-1;0<=t;t--)e[t].clearAndStopSavingData()},function Q(){u=t.defaultDataStorageLifeSeconds,i=t.dateSenderLogFeature,y=t.maxSickAttemps||_,E=t.sendDataAjaxTimeout||P,S=t.checkDataToSendInterval||A,T=t.attemptsWaitTime||k,v=r.wrapCustomerLog(i)}.apply(null,arguments)}).dependencies("Lib,Logger,RecorderServerManager,ServerDataSenderManagerParams,ClientStorageManager,WmAjax,FeaturesManager,TimerManager,Consts,JsonUtils,DictionaryUtils,StringUtils"),Cr.register("AjaxManager").asCtor(function Qt(e,t,n,r,i){var o=r.AJAX_PROVIDERS.wmjQueryAjaxProvider;this.init=function(){o=r.AJAX_PROVIDERS.wmjQueryAjaxProvider,i._walkmeInternals&&i._walkmeInternals.bind&&i._walkmeInternals.bind("dataFilesLoaded",function(){e.isFeatureEnabled("ajaxProxy")&&(n.init(),o=r.AJAX_PROVIDERS.ajaxProxyProvider)})},this.getProvider=function(){var e;switch(o){case r.AJAX_PROVIDERS.ajaxProxyProvider:e=n;break;default:e=t}return e},function a(){}.apply(null,arguments)}).dependencies("FeaturesManager, WmjQueryAjaxProvider, AjaxProxyProvider, Consts, win"),Cr.register("AjaxProxyProvider").asCtor(function zt(i){this.init=function e(){i.init()},this.callAjax=function o(e){var t=Tr.Deferred(),n=function r(e){return{success:function(t){e.promise().then(function(e){e.success&&t(e.data)})},error:function(t){e.promise().then(function(e){e.success||t(e.data.jqXHR,e.data.textStatus,e.data.errorThrown)})},abort:function(){e.promise().then(function(e){i.abort(e.requestIndex)})}}}(t);return i.postMessage(e,t.resolve),e.success&&n.success(e.success),e.error&&n.error(e.error),n}}).dependencies("AjaxProxyIframeManager"),Cr.register("WmjQueryAjaxProvider").asCtor(function qt(){this.callAjax=function t(e){return Tr.ajax(e)}}),Cr.register("HttpHeadersProvider").asCtor(function Kt(){this.get=function(){var e={},t=window.walkme_get_ajax_headers;try{var n=t&&t();n&&"object"==typeof n&&(e=n)}catch(r){}return e}}),Cr.register("WmAjax").asCtor(function Jt(e,n,r,i,o){var a,s,u=e;this.setFeatures=function(e,t){a=e,s=t},this.execute=function(e){return e.dataType=e.dataType?e.dataType:"jsonp",n.isFeatureEnabled("customAjaxHeaders")&&(e.headers=Tr.extend(e.headers||{},o.get())),"jsonp"===e.dataType&&(a||s&&i.hasCorsSupport())&&function t(e){e.dataType="json"}(e),u.sendAutomationEvent("ajaxSent",e),r.getProvider().callAjax(e)},this.loadTextFile=function(e,t,n,r,i){r=r||function(e,t,n){},mtjQuery.ajax(e,{cache:!!i,dataType:"jsonp",jsonpCallback:t,success:n,error:r})},function t(){}.apply(null,arguments)}).dependencies("CommonEvents,FeaturesManager,AjaxManager,CorsSupportIndicator,HttpHeadersProvider"),Cr.register("InitiatorManager").asCtor(function Xt(){var n;this.get=function e(){return n[n.length-1]},this.setForScope=function r(e,t){n.push(e),t(),n.pop()},function t(){n=[]}()}),Cr.register("UserTimeMonitor").asCtor(function $t(n,r){this.wasActionPerformed=function t(e){return n.getData(e)==r.getEndUserGuid()},this.logActionPerformed=function i(e,t){n.saveData(e,r.getEndUserGuid(),t)}}).dependencies("ClientStorageManager, EndUsersManager"),Cr.register("WalkmeVisibleReporter").asCtor(function Zt(t,n,e,r,i,o){this.report=function s(){try{if(i.isInPreviewMode()||i.isInPlayMode()||o.get())return;if(n.wasActionPerformed(a.key))return;t.postEvent(t.EVENT_TYPES.Visible,{type:t.EVENT_APPS.Walkme}),n.logActionPerformed(a.key,a.expiry)}catch(e){r.error(e)}};var a=e.walkmeVisibleReporter.walkmeVisibleReported;(function u(){}).apply(null,arguments)}).dependencies("EventSender, UserTimeMonitor, StorageKeysConfigurations, Logger, AuditSourceProvider, IsInEditor"),Cr.register("EventServerBaseUrlProvider").asCtor(function en(t,o){var n;this.get=function r(){return n||(n=t.getSettingsFile().EventServer,function e(){return(new XMLHttpRequest).withCredentials===undefined&&"undefined"!=typeof window.XDomainRequest}()&&(n=function i(e){var t=o.location.protocol,n=/^http[^s]/i.test(t),r=new RegExp("^(//|"+t+")","i").test(e);return!n||r?e:e.replace(/^https:/,"http:")}(n))),n}}).dependencies("SettingsFile, win"),Cr.register("EventSenderEventListener").asCtor(function tn(i,t,o,a,s,u){function l(e,n){t.bind(e,function(e,t){n(t)})}this.init=function c(){!function e(){l(i.EVENTS.Goals.GoalReached,o.postEvent),l(i.EVENTS.AbExperimentLinkedGoalReached,o.postEvent)}(),function t(){l(i.EVENTS.SmartTips.ValidationFailed,a.postValidationFailedEvent),l(i.EVENTS.SmartTips.ValidationPassed,a.postValidationPassedEvent),l(i.EVENTS.SmartTips.TooltipShown,a.postTooltipShownEvent),l(i.EVENTS.SmartTips.SetTurnedOn,a.postSetActivatedEvent),l(i.EVENTS.SmartTips.SmartTipSegmented,a.postSmartTipSegmentedEvent),l(i.EVENT_SENDER_EVENT_TYPES.Focus,a.postElementEvent),l(i.EVENT_SENDER_EVENT_TYPES.Blur,a.postElementEvent),l(i.EVENT_SENDER_EVENT_TYPES.Click,a.postElementEvent)}(),function n(){l(i.EVENTS.Flows.FlowStarted,s.postFlowStartedEvent),l(i.EVENTS.Flows.FlowBranched,s.postFlowBranchedEvent),l(i.EVENTS.Flows.BeforeExecutingFlowStage,s.postBeforeExecutionStageEvent),l(i.EVENTS.Flows.UIFlowStageShown,s.postUIFlowStageShownEvent),l(i.EVENTS.Flows.AfterCompletingFlowStage,s.postAfterCompletionStageEvent),l(i.EVENTS.Flows.FlowStageSkipped,s.postFlowStageSkippedEvent),l(i.EVENTS.Flows.FlowStopped,s.postFlowStoppedEvent),l(i.EVENTS.Flows.FlowCompleted,s.postFlowCompletedEvent),l(i.EVENTS.Flows.SafeStartStatusChanged,s.postFlowSafeStartStatusChangedEvent)}(),function r(){l(i.EVENTS.Quizzes.QuizPlay,u.postQuizPlayEvent),l(i.EVENTS.Quizzes.QuizSubmitted,u.postQuizSubmittedEvent),l(i.EVENTS.Quizzes.QuizAnswerSubmitted,u.postAnswerSubmittedEvent),l(i.EVENTS.Quizzes.QuizPass,u.postQuizPassEvent),l(i.EVENTS.Quizzes.QuizFail,u.postQuizFailEvent)}()},function e(){}.apply(this,arguments)}).dependencies("Consts, WmInternals, GoalReachedEventSender, SmartTipEventSender, BizFlowEventSender, QuizEventSender"),Cr.register("GoalReachedEventSender").asCtor(function nn(a,s,u,l,c,d){this.postEvent=function f(e){try{var t=e.goal,n=c.get(t.GoalType).getById(t.RelatedObjectId),r=d.getGoalsFromDeployable(n),i=l.map(t.GoalType);return a.postEvent(u.EVENT_SENDER_EVENT_TYPES.GoalReached,{type:i,oId:t.Id,oName:t.Name,pId:e.identifier?e.identifier:-1,total:r.length,owId:n.Id,owName:n.Name,owType:i,main:t.IsMainGoal,interactionGuid:e.interactionGuid})}catch(o){return s.error(o),!0}},function e(){}.apply(null,arguments)}).dependencies("EventSender, Logger, Consts, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, WalkMeGoalsManager"),Cr.register("BILogger").asCtor(d).dependencies("DataSenderBI,EventSenderErrorLogger,JsonUtils,EventsCollectorAuditingEnabledIndicator,WMObjectNameObfMapper,StaticWMDataProvider"),Cr.register("BIBeaconLogger").asFunction(function(e,t,n,r,i,o){var a=new d(e,t,n,r,i,o),s=a.isEnabled;return a.isEnabled=function(){return function e(){return"navigator"in window&&"sendBeacon"in navigator}()&&s()},a}).dependencies("DataSenderBIBeacon,EventSenderErrorLogger,JsonUtils,EventsCollectorAuditingEnabledIndicator,WMObjectNameObfMapper,StaticWMDataProvider"),Cr.register("ThrottledBILogger").asCtor(function rn(e,n){var r,t=this;t.send=function i(e,t){r&&n.gamble(t&&t.key)&&r.send(e,t)},t.isEnabled=function o(){return Math.random()<.1||e.isFeatureEnabled("forcePerfLogs")},function a(){t.isEnabled()&&(r=Cr.get("BILogger"))}.apply(this,arguments)}).dependencies("FeaturesManager, SlowlyDyingChanceCalculator"),Cr.register("SessionThrottledBIBeaconLogger").asCtor(function on(e,o,a,s){var n,t=this,u="wm-bi-ses",l=86400;t.send=function r(e,t){n&&n.send(e,t)},t.isEnabled=function c(){return function i(){var e,t=o.getData(u,undefined,s.getUserGuid());if(t&&t.session===a.getCurrentSession())e=t.isEnabled;else{e=function r(){return Math.random()<.005}();var n={session:a.getCurrentSession(),isEnabled:e};o.saveData(u,n,l,s.getUserGuid())}return e}()||e.isFeatureEnabled("forcePerfLogs")},function i(){e.whenFeaturesReady(function(){t.isEnabled()&&(n=Cr.get("BIBeaconLogger"))})}.apply(this,arguments)}).dependencies("FeaturesManager,ClientStorageManager,SessionManager,UserGuidContainer"),Cr.register("PerformanceDataIntegrityKeeper").asCtor(function an(e){this.onViolation=function(e){if("visible"!=document.visibilityState)return e();document.addEventListener("visibilitychange",e,!1)},this.unbind=function(e){document.removeEventListener("visibilitychange",e,!1)},this.isEnabled=function(){return"visibilityState"in document&&document.addEventListener}}).dependencies("CommonUtils"),Cr.register("EventBinder").asCtor(function sn(){function i(e,t,n){return e.on(t,n)}this.bind=i,this.unbind=function r(e,t,n){return e.off(t,n)},this.bindBySelector=function o(e,t,n,r){return i(Tr(e).find(t),n,r)}}),Cr.register("DeployableTypeToEventSenderAppTypeMapper").asCtor(function un(t){var n;this.map=function r(e){return e in n?n[e]:t.EVENT_SENDER_EVENT_APPS.None},function e(){(n={})[t.DEPLOYABLE_TYPE.Task]=t.EVENT_SENDER_EVENT_APPS.Task,n[t.DEPLOYABLE_TYPE.Tutorial]=t.EVENT_SENDER_EVENT_APPS.Walkthru,n[t.DEPLOYABLE_TYPE.Shuttle]=t.EVENT_SENDER_EVENT_APPS.Shuttle,n[t.DEPLOYABLE_TYPE.Launcher]=t.EVENT_SENDER_EVENT_APPS.Launcher,n[t.DEPLOYABLE_TYPE.Content]=t.EVENT_SENDER_EVENT_APPS.Content,n[t.DEPLOYABLE_TYPE.ShoutOut]=t.EVENT_SENDER_EVENT_APPS.ShoutOut,n[t.DEPLOYABLE_TYPE.Survey]=t.EVENT_SENDER_EVENT_APPS.Survey,n[t.DEPLOYABLE_TYPE.AbExperiment]=t.EVENT_SENDER_EVENT_APPS.AbTesting,n[t.AUDIT_TYPE.OPEN_TICKET]=t.EVENT_SENDER_EVENT_APPS.Ticket,n[t.DEPLOYABLE_TYPE.BusinessSolution]=t.EVENT_SENDER_EVENT_APPS.BizFlow}.apply(null,arguments)}).dependencies("Consts"),Cr.register("ReportInitiatorMapper").asCtor(function ln(i,o){function t(e){if(e){var t={};i.setIfDefined(t,e.objectId,"id"),i.setIfDefined(t,e.type,"type");var n=function r(e){if(e.appType)return e.appType;return e.type?o.map(e.type):null}(e);return i.setIfDefined(t,n,"appType"),t}}this.map=t,this.mapForExtend=function n(e){return{pInit:t(e)}}}).dependencies("Mapper, InitiatorTypeToAppTypeMapper"),Cr.register("InitiatorTypeToAppTypeMapper").asCtor(function cn(n){var t;function r(e){return t[e]}this.map=r,this.mapBbcodeInitiator=function i(e){if(!e)return undefined;var t=r(e.type);return{objectId:e.objectId,type:n.STEP_PLAY_INITIATOR_ENUM.BBCODE,appType:t}},function e(){(t={})[n.STEP_PLAY_INITIATOR_ENUM.LAUNCHER]=n.EVENT_SENDER_EVENT_APPS.Launcher,t[n.STEP_PLAY_INITIATOR_ENUM.TASK]=n.EVENT_SENDER_EVENT_APPS.Task,t[n.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT]=n.EVENT_SENDER_EVENT_APPS.ShoutOut,t[n.STEP_PLAY_INITIATOR_ENUM.WALKTHRU]=n.EVENT_SENDER_EVENT_APPS.Walkthru,t[n.STEP_PLAY_INITIATOR_ENUM.STEP]=n.EVENT_SENDER_EVENT_APPS.Step,t[n.STEP_PLAY_INITIATOR_ENUM.RESTART_SWT]=n.EVENT_SENDER_EVENT_APPS.BizFlowStep,t[n.STEP_PLAY_INITIATOR_ENUM.BBCODE]=n.EVENT_SENDER_EVENT_APPS.BizFlowStep,t[n.STEP_PLAY_INITIATOR_ENUM.BRANCHING]=n.EVENT_SENDER_EVENT_APPS.BizFlowStep}.apply(null,arguments)}).dependencies("Consts"),Cr.register("InitiatorTypeToDeployableTypeMapper").asCtor(function dn(n){var r;this.map=function t(e){return r[e]},function i(){var e=n.STEP_PLAY_INITIATOR_ENUM,t=n.DEPLOYABLE_TYPE;(r={})[e.LAUNCHER]=t.Launcher,r[e.TASK]=t.Task,r[e.SHOUTOUT]=t.ShoutOut,r[e.WALKTHRU]=t.Tutorial,r[e.STEP]=t.Step}.apply(null,arguments)}).dependencies("Consts"),Cr.register("StepActionToEventSenderActionAppTypeMapper").asCtor(function fn(n){var r;this.map=function t(e){return e in r?r[e]:""},function i(){var e=n.STEP_ACTION,t=n.EVENT_SENDER_EVENT_APPS;(r={})[e.PlayStep]=t.Step,r[e.Branch]=t.Walkthru}.apply(null,arguments)}).dependencies("Consts"),Cr.register("StepActionToEventSenderStepActionNameMapper").asCtor(function pn(n,t){var r;this.map=function i(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'step action' to 'event sender action name' for step action: "+e),"")},function o(){var e=n.STEP_ACTION,t=n.EVENT_SENDER_STEP_ACTION_NAMES;(r={})[e.Redirect]=t.Redirect,r[e.PlayStep]=t.PlayStep,r[e.WaitForCondition]=t.WaitForCondition,r[e.Branch]=t.Branch,r[e.StopWt]=t.StopWt,r[e.Delay]=t.Delay,r[e.Refresh]=t.Refresh,r[e.OpenPlayerMenu]=t.OpenPlayerMenu,r[e.SetWalkMeData]=t.SetWalkMeData,r[e.PassOwnership]=t.PassOwnership}.apply(null,arguments)}).dependencies("Consts, Logger"),Cr.register("InteractionEventsInitiatorsProvider").asCtor(function gn(e,r,t,n){var i;function o(e,t){var n=r.get(t);i.push({eventName:e,callback:n.initiateInteraction})}this.get=function a(){return i},function s(){i=[],o(e.EVENTS.PlayerClicked),o(e.EVENTS.Launchers.LauncherClicked),o(e.EVENTS.AutoStart.Activated),o(e.EVENTS.PermalinkClicked),o(e.EVENTS.ApiWasCalled,t),o(e.EVENTS.WidgetOpening,n)}.apply(this,arguments)}).dependencies("Consts, InteractionEventInitiatorFactory, ApiWasCalledNewInteractionIndicator, WidgetOpenedNewInteractionIndicator"),Cr.register("InteractionManager").asCtor(function hn(e,t){var n,r;this.getCurrentInteractionGuid=function o(){return n||null},this.setCurrentInteractionGuid=function a(e){n=e},this.beginNewInteraction=function s(){n=e.generateGuid(),r("New interaction guid was created : "+n,3)};var i="interaction";(function u(){r=t.wrapCustomerLog(i)}).apply(this,arguments)}).asSingleton().dependencies("GuidGenerator, Logger"),Cr.register("InteractionInitiationEventListener").asCtor(function mn(e,n){function r(n){e.bind(n.eventName,function(e,t){n.callback(t)})}this.init=function i(){for(var e=n.get(),t=0;t<e.length;t++){r(e[t])}},function t(){}.apply(this,arguments)}).dependencies("WmInternals, InteractionEventsInitiatorsProvider"),Cr.register("InteractionEventInitiatorFactory").asCtor(function vn(i){function t(t){this.initiateInteraction=function n(e){e=function r(e){var t=function n(e){if(e&&e.initiator&&e.initiator.type!=undefined)return e.initiator.type;return undefined}(e);t&&(e.actualInitiatorType=t);return e}(e),t&&!t.shouldInitiateNewInteraction(e)||i.beginNewInteraction()}}this.get=function n(e){return new t(e)}}).dependencies("InteractionManager"),Cr.register("ApiWasCalledNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.CHAT_AGENT]};return Cr.create("NewInteractionIndicator",n)}),Cr.register("WidgetOpenedNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.ATTENTION_GRABBER]};return Cr.create("NewInteractionIndicator",n)}),Cr.register("NewInteractionIndicator").asCtor(function yn(t,e){var n;this.shouldInitiateNewInteraction=function r(e){return e.actualInitiatorType==undefined||-1!=t(e.actualInitiatorType,n)},function i(e){n=e.initiatorsThatBeginNewInteraction}.apply(this,[e])}).asProto().dependencies("inArrayFunc"),Cr.register("AuditingEnabledIndicator").asCtor(function Sn(o,a,s,u,l,t,n){function r(){var e=!!window.wm_no_audit,t=!!o.getWindowCookie("wm-no-audit"),n=!a.isFeatureEnabled("blockJsonp")||l.hasCorsSupport(),r=s.get(),i=!!r.Settings&&!!r.Settings.noAuditCond&&Cr.get("ConditionTreeEvaluator").evaluate(r.Settings.noAuditCond);return n&&u.get()&&!a.isFeatureEnabled("noAudit")&&!e&&!t&&!i}this.isEnabled=r,this.shouldAudit=function i(){var e=Cr.get("WalkMeInfo");return e.getEnvironmentId&&e.getEnvironmentId()!=t.SOURCES.preview&&!n.get()&&r()}}).dependencies("CommonUtils, FeaturesManager, SiteConfigManager, RecorderServerManager,CorsSupportIndicator, Consts, IsInEditor"),__webpack_require__(669),Cr.register("HighlighterService").asCtor(function En(e,n,r,t){this.shouldShow=function(e){var t=r.getSettingsValue(n.get().Settings,"hlType","none");return"rect"===r.getSettingsValue(e,"hlType",t)},this.generateId=function(e,t,n,r){return e+"-"+t+"-"+n+"-"+r},this.generateCssClasses=function(e,t){var n="walkme-custom-"+e+" walkme-to-remove ";if(t)for(var r=0;r<t.length;r++)n+=" walkme-custom-"+e+"-"+t[r].name+"-"+t[r].id;return n},this.copyFloatProperties=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(r.isNumber(t[n])?e[n]=parseFloat(t[n]):e[n]=t[n])},this.getDefaultSettings=function(){return{left:0,top:0,width:0,height:0}},function i(){t.wrapCustomerLog(e.HIGHLIGHTER.LOG_FEATURE)}.apply(null,arguments)}).asProto().dependencies("Consts, SiteConfigManager, CommonUtils, Logger"),Cr.register("HighlighterSettingsProvider").asCtor(function wn(r,e){this.getHighlighterSettings=function(e,t,n){return{element:t,settings:e,embedInElement:r.getSettingsValue(e,"embed",!1),drawableType:"balloon",drawableId:n.balloonEntityId,monitor:!n.isViewStep&&!n.isCapture,defaultSettings:!!n.isCapture,cssKeysValues:[{id:n.balloonEntityId,name:"step"},{id:n.containerEntityId,name:"walkthru"}]}},function t(){}.apply(null,arguments)}).dependencies("CommonUtils"),__webpack_require__(671),__webpack_require__(672),Cr.register("Animator").asCtor(function Tn(i,s,o,u,l,a,c){var d,f=this,p=null,g=null,h=null,m=!1,e=!0,v=!1,y=!1,S=!1,E=null,w=!1,T=!1,r=!1,C=null,b=null,I=[],_=null,A=null,P=1,k="animations",n="marginRight",D=250,x=.3,N=50,O={0:"Top",1:"Left",2:"Top",3:"Left"},L={InitCSS:{display:"inline"},Properties:{},Options:{}};function F(e){return mtjQuery.extend({},e)}function M(){y&&(!function e(){C.children(":visible").addClass("walkme-balloon-hidden-content").css("display","none")}(),V(t))}function R(){if(function t(){return v||r}()){var e=function i(e,t){var n={position:"absolute",top:e.css("top"),left:e.css("left"),height:e.height(),width:e.width(),zIndex:e[0].style.zIndex},r=mtjQuery("<div />").css(n);return e.css({top:0,left:0}).wrap(r),t(r,e),n}(C,function n(){{if(v)return J;if(r)return K}}());f.postAnimation(function(){!function t(e){r&&(C.css("bottom",""),C.css("right",""));C.unwrap().css(e)}(e)})}}function B(e){for(var t=0;t<I.length;t++)"function"==typeof I[t]&&I[t].apply(null,arguments);I.length=0}function U(){C&&C.css(_)}function V(e){A.queue(k,e)}function W(){A.dequeue(k)}function j(e,t){!function r(e,t,n){if(parseInt(e.margin)<0)switch(e.marginTop=0,e.marginLeft=0,e.marginRight=0,e.marginBottom=0,n){case a.Bottom:case a.Top:e.marginLeft=t.marginLeft;break;case a.Right:case a.Left:e.marginTop=t.marginTop}else e.marginTop=t.marginTop,e.marginLeft=t.marginLeft,e.marginRight=t.marginRight,e.marginBottom=t.marginBottom}(p,e,t),g.marginTop=e.marginTop,g.marginLeft=e.marginLeft,g.marginRight=e.marginRight,g.marginBottom=e.marginBottom,delete g.margin}function G(e,t,n){if(e){var r={};for(var i in e)if(e.hasOwnProperty(i)){var o=l.isDefined(t[i])?t[i]:i;if(r[o]=e[i],l.isDefined(n[o])){var a=r[o].toString().replace("px","");r[o]=n[o]*a+"px"}}return r}}function H(){!function n(e){var l,c,d=Q()?"marginTop":"marginLeft",f=function t(){return E==o.POSITION_TYPE.Bottom||E==o.POSITION_TYPE.Right}(),p=f?1:-1,g=e.length-1;E==o.POSITION_TYPE.Top&&(l="border-top-width",c="borderTopWidth");E==o.POSITION_TYPE.Bottom&&(l="border-bottom-width",c="borderBottomWidth");E==o.POSITION_TYPE.Right&&(l="border-right-width",c="borderRightWidth");E==o.POSITION_TYPE.Left&&(l="border-left-width",c="borderLeftWidth");mtjQuery(e).each(function(e,t){this.css("visibility","hidden").css("display","block");var n=(parseInt(this.css(l),10)+2)*p,r=this.css(l),i=this[0].style.zIndex,o={};o[c]=r,o.opacity=1,f&&(o[d]=1);var a,s,u={};u.duration=D,u.complete=(a=this,s=i,function(){a.css(d,""),a.css("zIndex",s)}),e==g&&this.css("zIndex",i-1),this.css("visibility",""),f&&this.css(d,n),this.css(l,"0px"),this.animate(o,u)})}(b),i.setWalkmeTimeout(function(){W()},D)}function Y(){mtjQuery(b).each(function(){this.show().css("visibility","")}),W()}function Q(){return E==o.POSITION_TYPE.Bottom||E==o.POSITION_TYPE.Top}function t(){C.children(".walkme-balloon-hidden-content").removeClass("walkme-balloon-hidden-content").fadeIn(250,function(){mtjQuery(this).css("direction",mtjQuery(this).css("direction"))})}function z(){C.bind("click.wm_animation",function(){if(!w){w=!0;var e=0<parseInt(C.css(n))?n:"marginLeft";if(q(C,10,e),b)for(var t=0;t<b.length;t++)q(b[t],10,e)}}),function t(e){e.find("button,a,.walkme-custom-balloon-close-button").bind("click.wm_animation",function(e){e.stopPropagation()})}(C)}function q(e,t,n){if(t<=0)return e.css(n,g[n]),void(w=!1);var r=parseInt(e.css(n))-function o(e){return e*x*(e%2*2-1)}(t),i=[];i[n]=r,e.animate(i,N,function(){q(e,t-1,n)})}function K(e,t){var n=parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10),r=parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10);t.css("top",""),t.css("left",""),t.css("bottom","-"+n+"px"),t.css("right","-"+r+"px")}function J(e,t){X(e,t),h.step=function(){X(e,t)}}function X(e,t){var n=e.height()/2-t.height()/2,r=e.width()/2-t.width()/2;t.css("top",n),t.css("left",r)}function $(){return!(m||!e)}this.disableAnimation=function(){e=!1},this.setPosition=function(e){E=e,function n(){var e={},t={};Q()?(e.size="height",e.osize="width"):(e.size="width",e.osize="height"),!v&&g.size&&(E==o.POSITION_TYPE.Top&&"height"==e.size||E==o.POSITION_TYPE.Left&&"width"==e.size)&&(r=!0),t.marginTop=E==o.POSITION_TYPE.Bottom?-1:1,t.marginLeft=E==o.POSITION_TYPE.Right?-1:1,e.margin="margin"+O[E],g=G(g,e,t),p=G(p,e,t)}()},this.setPagePositionOffset=function(e,t){j(e,t)},this.postAnimation=function(e){e&&I.push(e)},this.prepare=function(e,t){b=t,_=function n(e){return{filter:e.css("filter")}}(C=e),function r(){A.clearQueue(k)}(),function i(){u.isFeatureEnabled("dontPrepForScrl")||C.css({display:"block",visibility:"hidden",filter:""})}(),$()?(function o(){S&&b?V(H):I.push(Y)}(),M(),R(),f.postAnimation(U),h.complete=B):f.postAnimation(Y),function a(){return!!T}()&&f.postAnimation(z)},this.animate=function(e){C?(this.postAnimation(e),$()?(m=!0,function t(e){!E&&p.margin&&(p.margin=0),mtjQuery(e).css({display:"none",visibility:""}).css(_).css(p)}(C),C.animate(g,h),function n(){var e=h.duration*P;i.setWalkmeTimeout(W,e)}()):(function r(){mtjQuery(C).css({display:"inline",visibility:""}).css(_)}(),B())):e&&e()},this.stop=function(){C.stop(!0,!1)},this.destroy=function(e){var t=C;if(b)for(var n=0;n<b.length;n++)try{t=t.add(b[n])}catch(i){}function r(){u.isFeatureEnabled(d.BalloonShowDestroySync)&&t&&t.stop(!0,!1),e&&e()}try{$()?function o(e,t){e.removeAttr("id").find("div").removeAttr("id"),e.fadeOut(150,function(){s.destroyDivWithIframes(e,t)})}(t,r):function a(e,t){s.destroyDivWithIframes(e,t)}(t,r)}catch(i){r()}},function Z(){d=o.FEATURES;var e=c.config;!function n(){A=mtjQuery({})}();var t=e||L;p=F(t.InitCSS),g=F(t.Properties),h=F(t.Options),function r(e){e&&(v=l.defaultValue(e.center,!1),y=l.defaultValue(e.hwa,!1),S=l.defaultValue(e.are,!1),P=l.defaultValue(e.delay,1))}(t.MetaData),T=c.isVibrating}.apply(null,arguments)}
/* ============================================================
 * @license
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Open source under the BSD License.
 *
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 * https://raw.github.com/danro/jquery-easing/master/LICENSE
 * ======================================================== *
 * Extending the jquery easing plugin to enable more easing options such as bounce.
 * More easing functions can be found here:
 * https://github.com/danro/jquery-easing/blob/master/jquery.easing.js
 * Examples here: http://easings.net/
 * ======================================================== */).asProto().dependencies("TimerManager, UiUtils, Consts, FeaturesManager, CommonUtils, Positions");var J;function J(u,e,t,p,n,r,i,o,g,a,s,l,h,c,d,f,m,v,y,S,E,w,T){var C,b,I,_=this;function A(e,t,n){for(var r=0,i=0;i<e.length;i++){if(t(e[i])&&n<=++r)return!0}return!1}function P(e){return e&&"string"==typeof e&&e.replace?e.replace(/,|\$|\u20AC|\u20AA|¥|¢|£/g,""):e}function k(t){var n=lt.walkmeWrap;return n?function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),n.apply(this,e)}:t}function D(e){return null!=e&&e!=undefined}function x(e){return-1<e.toString().indexOf("[native code]")}_.settingsFieldValid=i.settingsFieldValid,_.isSettingsValueExists=i.isSettingsValueExists,_.getSettingsValue=i.getSettingsValue,_.formatString=E.formatString,_.secureEvalJSON=S.secureEvalJSON,_.toJSON=S.toJSON,_.clone=S.clone,_.doAllMeetCondition=function N(e,t){return A(e,t,e.length)},_.doesAnyMeetCondition=function O(e,t){return A(e,t,1)},_.getInt=function L(e,t){return _.isNumber(e)?parseInt(e,10):t},_.filter=d.filter,_.isFunctionNative=x,_.isWebComponentSupported=function F(){return!!window.customElements&&window.customElements.define&&x(window.customElements.define)},_.executeAsync=function M(r){return new ct(function(e,t){try{e(r())}catch(n){t(n)}})},_.isNumber=function(e){return"boolean"!=typeof e&&!isNaN(e-0)},_.getJQueryElementFinder=function(){return Cr.get("JQueryElementFinder")},_.waitForCondition=function(n,r,i,o){var a=Tr.Deferred();return function s(e){if(r<=e)return a.reject();var t=n();if(t)return a.resolve(t);o&&c.customerLog(o),u.libSetTimeout(function(){s(++e)},i)}(0),a.promise()},_.sendMenuEvent=function(e,t,n){try{var r={Type:e};t&&(r.WalkthruId=t),n&&window.mtjQuery.extend(r,n),b.raiseEvent(e,r),walkme_player_event(r)}catch(i){}},_.isIe7or8=function(){return e.isIE(8,"lte")},_.libSetTimeout=u.libSetTimeout,_.elementLastKeeper=Cr.get("ElementLastKeeper"),_.attentionGrabberFactory={create:function(e){return{setupAttenGrab:function(){return m.createAG(e)}}}},_.attentionGrabberClass=function(e){return{setupAttenGrab:function(){m.creataImageAG(e)},remove:function(e){m.remove(e)}}},_.isValidMailTo=function(e){return e&&0==e.indexOf("mailto:")},_.isValidUrl=function(e){return!e||0==e.indexOf("http")||0==e.indexOf("/")},_.setDefault=function(e,t,n){e[t]===undefined&&(e[t]=n)},_.isUiObjectActivatable=function(e){return"category"!=e.type()&&"tab"!=e.type()},_.isTrue=function(e,t,n){var r=_.getSettingsValue(e,t,n);return _.isValueTrue(r)},_.isValueTrue=function(e){return e&&(1==e||"True"==e||"1"==e)},_.isLike=function(e,t){t=(t=(t=t.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&")).replace(new RegExp("[.]","g"),"\\.")).replace(new RegExp("[*]","g"),".*"),e=e.toString().toLowerCase(),t=t.toLowerCase();try{return e.match(t)[0]==e}catch(n){return!1}},_.isBigger=function(e,t){return e=P(e),t=P(t),e=parseFloat(e),t=parseFloat(t),!(!_.isNumber(e)||!_.isNumber(t))&&t<e},_.isSmaller=function(e,t){return e=P(e),t=P(t),e=parseFloat(e),t=parseFloat(t),!(!_.isNumber(e)||!_.isNumber(t))&&e<t},_.addTabIndex=function(t,e,n){h.isFeatureEnabled("accessibility")&&(e=_.defaultValue(e,0),t.attr("tabIndex",e),t.keyup(function(e){13!=e.keyCode||e.shiftKey||(t.click(),e.stopPropagation())}))},_.handleAccessibleElement=function(e,t){_.addTabIndex(e),_.setRole(e,t)},_.setRole=function(e,t){e.attr("role",t||"complementary")},_.getCustomConfiguration=function(){var e=f.get();return(h.isFeatureEnabled("configurationTab")?e.Settings.configuration:e.Custom)||{}},_.isGradientUsingFilter=function(e){return-1==w.parseElementAsJquery("<div style='"+e+"' />").css("background-image").indexOf("gradient")},_.handleCrossDomainError=function(e){if(!function i(e){var t=e&&18==e.code,n=e&&(e.message&&0<=e.message.indexOf("denied")||e.number&&(-2146828218===e.number||-2147024891===e.number)&&function r(){return B.isIE()||B.isEdge()}());return t||n}(e))throw e},_.encloseCall=function(t){var e=function i(e,t){for(var n=[],r=0;r<e.length;r++)t!=r&&n.push(e[r]);return n}(arguments,0);return function(){var e=arguments;return function(){return t.apply(null,e)}}.apply(null,e)},_.registerEventHandler=function(e,t,n,r){r=r||window;var i=k(t);return r.attachEvent?r.attachEvent("on"+e,i):r.addEventListener?r.addEventListener(e,i,!!n):c.customerLog("Element "+r+" doesnt support event handlers. Event: "+e,3),function(){_.unregisterEventHandler(e,i,n,r)}},_.unregisterEventHandler=function(e,t,n,r){(r=r||window).detachEvent?r.detachEvent("on"+e,t):r.removeEventListener&&r.removeEventListener(e,t,!!n)},_.setBodyUtils=function(e){C=e},_.getBody=function(e){return C.getBody(e)},_.postMessageToAllFramesChain=function(e,t){var n=0;if(e)try{e.postMessage(t,"*"),n++,e!=e.parent&&(n+=_.postMessageToAllFramesChain(e.parent,t))}catch(r){c.customerLog("Error in postMessage to frames chain "+r,4)}return n},_.postMessageToFrameAndDescendants=function(e,t){!function o(e,t){!function i(e,t){try{e!=window&&e.postMessage(t,"*")}catch(n){}}(e,t);for(var n=e.frames,r=0;r<n.length;r++)o(n[r],t)}(e,t)},_.getFrameIndex=function(e){return function a(e,t){if(e==t)return{frameIndex:0};var n=0;for(var r=0;r<e.frames.length;r++){n++;var i=e.frames[r],o=a(i,t);if(o.frameIndex!==undefined)return o.frameIndex+=n,o;n+=o.totalFrames}return{totalFrames:n}}(top,e||window).frameIndex},_.doForFramesChain=function(e,t){if(e){try{t(e)}catch(n){}e!=e.parent&&_.doForFramesChain(e.parent,t)}},_.addScript=function(e,t,n){T.addScript(e,t,n)},_.createScriptElement=function(e){return T.createScriptElement(e)},_.addScriptWithCallback=function(e,t,n,r,i){T.addScriptWithCallback(e,t,n,r,i)},_.checkElementText=function(e){return e.is("input")||e.is("textarea")?e.val():e.is("select")?e.find("option:selected").text():e.text()},_.getElementDocument=function(e){try{return e[0].ownerDocument}catch(t){}return document},_.nl2br=function(e){return e?e.replace(/\n/g,"<br/>"):""},_.getTimer=function(i){return new function e(){var r=new Date;return function(e){var t=new Date,n=t-r;return i("Measurer - "+e+" ("+n+" ms)"),r=t,n}}},_.defaultValue=function(e,t){return void 0!==e&&null!=e?e:t},_.createElementInDocument=function(e,t){var n=t.createElement("div");w.setInnerHTML(n,e);var r=Tr(n).children();return h.isFeatureEnabled(p.FEATURES.ShadowRootsInspector)&&r.find("[onclick]").each(function(e,t){var n=t.getAttribute("onclick");t.removeAttribute("onclick"),t.addEventListener("click",new Function(n))}),r},_.createIframe=function(e,t,n,r,i,o,a,s){o=o||Cr.get("TopContainerProvider").getTopContainer(null,!0)[0];var u=h.isFeatureEnabled(p.FEATURES.ShadowRootsInspector)?o.ownerDocument.createElement("iframe"):document.createElement("iframe");try{o.appendChild(u)}catch(f){u=o.ownerDocument.createElement("iframe"),o.appendChild(u)}if(u.id=t,a||(u.className="walkme-to-remove"),n||(u.style.cssText="display:none;visibility:hidden;"),s)for(attribute in s)s.hasOwnProperty(attribute)&&u.setAttribute(attribute,s[attribute]);function l(e){u.removeEventListener?u.removeEventListener("load",l):u.detachEvent&&u.detachEvent("onload",l),r&&r(e)}if(u.addEventListener){var c={id:t,src:e,callback:r,messageCallback:i,isVisible:n,container:o,dontRemove:a},d=v.send("CreateIFrameUseCapture",c)||!1;u.addEventListener("load",l,d)}else u.attachEvent&&u.attachEvent("onload",l);return i&&g.listen(k(i)),u.src=e,u},_.removeIframeListeners=function(e,t,n){e.removeEventListener?window.removeEventListener(t,n,!1):e.detachEvent&&window.detachEvent("on"+t,n)},_.getTrackData=function(e){return{Id:e.Id,Name:e.Name}},_.getStepTrackData=function(e,t){var n={Id:e.Id,Name:e.StepTitle||e.StepText};return t&&(n.TutorialId=t.Id,n.TutorialName=t.Name),n},_.isImpersonated=function(){return window.editorAPI&&editorAPI.isImpersonated&&editorAPI.isImpersonated()},_.getWindowData=function(e,t){var n=undefined;if(t)switch(e){case p.WINDOW_CUSTOM_DATA_TYPE.Cookie:n=(n=_.getWindowCookie(t))||undefined;break;case p.WINDOW_CUSTOM_DATA_TYPE.Var:n=_.getWindowVar(t)}return n},_.getWindowCookie=function(e,t){return r.getCookie(e,t)},_.getInputGenerator=function(e){return Cr.get("InputGenerator")},_.encodeText=function(e){e=e&&y.decodeHtml(e.toString(),["&",'"',"'",">","<"]);var t=Tr("<div></div>");return t.text(e),t.html()},_.getWindowVar=function(e){var t=window;return e=y.decodeHtml(e,["&"]),l.getValue(t,e)},_.getPropertyValue=function(e,t,n){var r=l.getValue(e,t);return r=r||n},_.getValue=l.getValue,_.findJspContainer=function(e,t){var n=_.getJspParent(e);return n?Tr(n).find(".jspPane"):t},_.getJspParent=function(e){var n=_.getClientjQuery();if(n){var t=e.parents("div");return _.firstMatch(t,function(e){var t=n(e);if(t.data!=undefined&&t.data("jsp")!=undefined)return t})}},_.getClientjQuery=function(){var e=window.jQuery||window.$;return e&&e.fn&&e.fn.jquery?e:undefined},_.firstMatch=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},_.generateGUID=function(){return Cr.get("GuidGenerator").generateGuid()},_.isDefined=D,_.definedOrDefault=function(e,t){return D(e)?e:t},_.executeParallel=function(e){var r,i=e.objectsArray,o=e.selectorFunc,a=e.functionsToExecute,s=e.successCallback,t=e.failCallback,u=!1;function l(){0==--r&&s&&s()}function n(){u||(u=!0,t&&t())}i?function c(){if(0==i.length)return void(s&&s());r=a.length*i.length;for(var e=a.length-1;0<=e;e--)for(var t=i.length-1;0<=t;t--){if(u)return;var n=o?o(i[t]):i[t];a[e](n,l)}}():function d(){if(0==a.length)return void(s&&s());r=a.length;for(var e=a.length-1;0<=e;e--){if(u)return;a[e](l,n)}}()},_.getWinOrigin=function(){return a.location.origin||a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")},_.getOrigin=function(){var e=s.get();return function t(e){return 0===e.indexOf("/")}(e)?function n(){if(!I){var e=window.location;(I=e.origin)||(I=e.protocol+"//"+e.hostname,e.port&&(I+=":"+e.port))}return I}()+e:e},_.getWalkmeInternals=function(){return lt},_.isUrlEncoded=function(e){return(e=e||"")!==decodeURIComponent(e)},_.getFileExtension=function(e){return e.split(".").pop()},function R(){C=n,b=Cr.get("CommonEvents")}.apply(null,arguments)}mtjQuery.extend(mtjQuery.easing,{easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeOutBack:function(e,t,n,r,i,o){return o==undefined&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a=a||.3*i,s<Math.abs(r)){s=r;o=a/4}else o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n}}),Cr.register("PublishDataManager").asCtor(function Cn(e,t,n){var r,i,o=t.keysConfig.publishData.lastDataVersion;this.init=function a(e){i=e&&e.dataVersion||0},this.hasNewDeployables=function(){if(r)return r;var e=t.getData(o.key)||i;return r=e<i},this.saveDataVersion=function(){t.saveData(o.key,i,o.expiry)}}).dependencies("Lib, ClientOrServerStorageManager, Logger"),Cr.register("RegularBodyUtils").asCtor(function bn(){this.getBody=function(e){return e.body},function e(){}.apply(null,arguments)}),Cr.register("TagBodyUtils").asCtor(function In(){this.getBody=function(e){return Tr("body",e)[0]},function e(){}.apply(null,arguments)}),Cr.register("CommonUtils").asCtor(J).dependencies("TimerManager,HostData,AuditSourceManager,Consts,RegularBodyUtils,CookiesManager,SettingsValuesRetriever, ExternalWalkMeConfig,PostMessageListener,win,CdnServer,ObjectJpath,FeaturesManager, Logger, ArrayUtils, SiteConfigManager, AttentionGrabberManagerAPI,MessageSender,HtmlDecoder,JsonUtils,StringUtils, DomManager, ScriptInjector"),Cr.register("ComplexHtmlElementsProvider").asCtor(function _n(i){this.getComplexHtmlElements=function a(e,t){var n,r=t.data("iframe");if(e.Settings.complexHtml){if((e.Settings.complexHtml.type==o.TABLE||"table"==e.Settings.complexHtml.type)&&(n=i.findNearestSelfOrParentByType(t,["table"]),e.Settings.complexHtml.settings)){switch(e.Settings.complexHtml.settings.triggerType){case"cell":t=i.findFirstSelfOrChildByType(t,["td","th"])||i.findNearestSelfOrParentByType(t,["td","th"]);break;case"column":t=i.getColumn(t);break;case"row":t=i.findFirstSelfOrChildByType(t,["tr"])||i.findNearestSelfOrParentByType(t,["tr"]);break;case"table":t=i.findNearestSelfOrParentByType(t,["table"])}e.Settings.complexHtml.settings.onTable||(n=undefined)}if(t&&0<t.length)return r&&t.data("iframe",r),{parentElement:n,elements:t}}};var o={TABLE:1,DROPDOWN:2}}).dependencies("PositionHelper"),Cr.register("SettingsValuesRetriever").asCtor(function An(){var r=this;r.getSettingsValue=function i(e,t,n){return r.settingsFieldValid(e)&&r.isSettingsValueExists(e,t)?e[t]:n},r.isSettingsValueExists=function n(e,t){return!!r.settingsFieldValid(e)&&t in e},r.settingsFieldValid=function t(e){return!(!e||0==e.length)}}),Cr.register("UiUtils").asCtor(function Pn(){var d,f,p,g,h,m,v,y,n=" walkme-override walkme-css-reset",s=this,S=null,e=!1,u={},l="walkme-popup-background",r="syncBalloonDivRemoval";function t(e,t){t.className+=n}function i(i){var o=p.browser,a='<PARAM NAME="WMode" VALUE="Window">';function s(e,t){for(var n=0;n<e.length;n++){var r=e[n].parentNode,i=t?t(e[n]):e[n].outerHTML;e[n].insertAdjacentHTML("beforeBegin",i),r.removeChild(e[n])}}-1!=o.name.indexOf("Firefox")?function t(){(function e(){return mtjQuery("object:has('param[name='wmode'][value!='transparent'][value!='opaque']')",i)})().append("<param name='wmode' value='transparent'>").wrap("<div></div>").unwrap(),mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",i).attr("wmode","transparent").wrap("<div></div>").unwrap()}():-1!=o.name.indexOf("IE")&&function u(){var e=mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",i);if(e.attr("wmode","transparent"),s(e),9<=o.version){var t=function n(){return mtjQuery("object:has('param[name*='wmode'][value!='transparent'][value!='opaque']'), object:not(:has(param[name='wmode']))",i)}();mtjQuery("param[name='wmode']",t).remove(),t.append("<param name='wmode' value='transparent'>"),s(t)}o.version<=8&&s(function r(){return mtjQuery("object[classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000']:not(:has(param[name*='wmode']))",i)}(),function(e){var t=e.outerHTML;return-1==t.indexOf(a)?t:e.outerHTML.replace(a,'<PARAM NAME="WMode" VALUE="transparent">')})}(),e=!0}function o(e,t){!y.get()&&h.isFeatureEnabled("uiUtils:UseDOMSessionManager")?Cr.get("DOMSessionManager").mutate(function(){e.apply(null,t)}):d.libSetTimeout(function(){e.apply(null,t)},1)}function a(e,t,n){e.hide(),e.remove(),c(t,n)}function c(e,t){e.remove(),t&&t()}s.canDisplayOverlay=function E(){var E=!(p.isQuirksMode()||S.shouldHandlePageAsFramesets());return E},this.removeOverlay=function(e){s.removeOverlayById(l,e)},this.removeOverlayById=function(e,t){var n=u[e];n&&n.exist()&&(delete u[e],t?n.fadeOut("slow",function(){Tr(this).remove()}):n.remove(),n=null)},s.displayOverlay=function(e,t,n,r){n==undefined&&(n=l);var i=mtjQuery("#"+n).filter(function(){return"none"!=Tr(this).css("display")});if(0<i.length)return i[0];var o=Cr.get("TransparentLayerProvider").tryGetWalkMeLayer(g.getTopContainer());o.append(m.formatString('<div id="{0}" class="mt-to-destroy"></div>',n));var a=mtjQuery("#"+n,o);return a.css({opacity:r?r.opct:"0.7",display:"none",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:r?r.color:"#000000","z-index":e-1}),s.addBrowserSpecificClasses(a),t?a.fadeIn("slow"):a.css("display",""),u[n]=a},s.getStyle=function(e,t){try{return t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle}catch(n){return null}},s.getAnimationDimentionSize=function(e,t){var n;return n="top"==t||"bottom"==t?"height":"width",e.css(n)},s.addBrowserSpecificClasses=function(e){if(p.isMobile()&&e.addClass("walkme-mobile-device"),p.isIE()){var t=p.browser.version,n="walkme-ie-"+(document.documentMode||t),r="walkme-ie-bm-"+t;e.addClass(n),e.addClass(r)}},s.addWalkmeClasses=function(e){e[0].className+=" walkme-to-destroy"+n,e.find("*").each(t)},s.addBrowserClass=function(e){var t=p.browser.name.replace(/ /g,"").toLowerCase();e.addClass("walkme-"+t)},s.setLangAttribute=function(e){var t=Cr.get("LanguageManager").getCurrentLanguage();t&&e.attr("lang",t)},s.bindFocusAndBlur=function(e,t){e.focus(function(){e.val()==t&&e.val("")}),e.blur(function(){""==e.val()&&e.val(t)})},s.fixFlash=function(){!e&&h.isFeatureEnabled("flashTransparent")&&f.foreachDocument(i,!0)},s.hexToRgba=function(e,t){var n=e.replace("#",""),r=parseInt(n,16);return"("+(r>>16&255)+","+(r>>8&255)+","+(255&r)+","+t+")"},s.closestCanEmbed=function(e){if(!h.isFeatureEnabled("embedInClosestCanEmbed"))return Cr.get("EmbedInClosestCanEmbedElementContainerProvider").get(e)},s.destroyDivWithIframes=function(e,t){if(e){var n=v("iframe",e);0==n.length?h.isFeatureEnabled(r)?c(e,t):o(c,[e,t]):(n.attr("src",""),h.isFeatureEnabled(r)?a(n,e,t):o(a,[n,e,t]))}else t&&t()},function w(e,t,n,r,i,o,a,s,u,l,c){S=e,d=t,f=n,p=r,g=i,h=o,a,s,m=u,v=l,y=c}.apply(null,arguments)}).dependencies("FramesetsUtils, TimerManager, DocumentsManager, HostData, TopContainerProvider, FeaturesManager, Consts, CommonEvents, StringUtils, wmjQuery, IsInEditor"),Cr.register("Balloon").asCtor(function kn(p,h,m,u,g,v,s,y,r,f,o,t,n,S,E,l,w,T,c,i,C,a,d,b,I,_,e,A){var P,k,D,x,N,O,L,F,M,R,B,U,V,W,j,G,H,Y,Q,z,q,K,J,X,$,Z,ee,te,ne,re,ie,oe,ae=this,se=null,ue=null,le=!0,ce=!1,de=!1,fe=!1,pe=!1,ge="",he="",me="",ve="",ye="",Se="",Ee=!1,we="",Te="",Ce=undefined,be=0,Ie=0,_e=0,Ae="step",Pe=0,ke="walkthru",De=!1,xe=[],Ne=[],Oe=null,Le=null,Fe=null,Me=null,Re=null,Be=null,Ue="scroll",Ve=800,We="displayTO",je=m.POSITION_TYPE.Bottom,Ge={},He="trigger",Ye="balloon",Qe=500;function ze(e){Q(e,5,Ye)}function qe(){var e=Se?Se.html():t.parse(he,W);return{balloonData:{title:t.parse(ge,W),content:e,customHtml:{inner:ve,outter:ye},stepIndexText:me},userGuid:a.getUserGuid(),nextButton:ce,doneButton:de,backButton:fe,configuration:we,content:he,title:ge,subtext:me,settings:Te,end:x,stepType:D,submitButton:pe,contentDiv:Se}}function Ke(e,t){var n=function o(e){if(Oe)return Oe;return g.getElementBounds(e,le,window,Te,ie)}(e),r={element:e,elementBounds:n,isScrollNeeded:t},i=function u(e){if(e.isScrollNeeded||!h.isEmbeded(Te)||y.isFeatureEnabled("disableStrongEmbed"))return undefined;var t=qe(),n=(new Date).getTime();F=e.element;for(;F&&F.exist();){var r=Xe(e,t,F);Je(m.EVENTS.BalloonLogs.BalloonPopLocationCalculated,r);var i=!!r&&rt(R,nt);if(Je(m.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,i),!!r&&i)return r;R&&R.remove();var o=(new Date).getTime(),a=Qe<o-n,s=F.is("body");if(a||s)return F=undefined,undefined}}(r)||function a(e){var t=qe();return Xe(e,t,e.element)}(r);if(i)return le&&R.data("iframe",A.element.data("iframe")),function s(e,t,n){B=N.drawArrows(se,_e,e,t,n,F,Ae);for(var r=v.getSettingsValue(Te,"z-index",m.NORMAL_BALLOON_Z_INDEX),i=0;i<B.length;i++)C.setTopMostCssStyle(B[i],r);N.fixArrows({balloonDiv:R,arrowsDivs:B,result:e,isInCaptureMode:Ee,isQuirksMode:f.isQuirksMode(se[0])})}(i,M,n),ne&&function l(e){var t=function r(){var e=Y.getHighlighterDivs();if(h.isEmbeded(Te))return e;var t=G.getHighlighterDivs(),n=Tr.map(B,function(e){return e.toArray()}).concat(t,e);return n.push(R[0]),n}();if(!t.length)return;re?re.updateElements(t):(re=lt.ctx.create("ScrollObserver",{elements:t,capturedElement:e})).observe()}(e),function c(e,t){if(Be.setPosition(t.positionType),1==v.getSettingsValue(Te,"isInvisible",0)){e.hide();for(var n=0;n<B.length;n++)B[n].hide()}else Be.prepare(e,B)}(R,i),R}function Je(e,t){var n={isEmbeded:h.isEmbeded(Te),containerEntityType:ke,containerEntityId:Pe,balloonEntityType:Ae,balloonEntityId:_e,extraData:t};S.raiseEvent(e,n)}function Xe(e,t,n){var r=$e(),i=g.getDrawingArea(se,!le,N.shouldScrollToElement()),o=Ze(r.width),a=0<Ie?Ie:0;!function u(e,t){if(e<=200)return;!y.isFeatureEnabled("noHgtLmt")&&t<=200&&(0!=P&&2!=P&&P!=undefined||(P=1))}(r.width,r.height);var s={};return(F=h.getContainer(Te,n,le,s)).exist()?(function l(){var e={};if(null==Le&&null==Fe){st((e=ae.getElementPositionRelativeToContainer(se)).top,e.left,e.height,e.width)}}(),R=N.generateBalloonDiv(F,Ee,Pe,_e,D,t,Ae,ke,X,$,Z),b.appendToContainer(F,R),h.handleEmbedding(Te,R,s),M=N.fixSize(R,e.element,le,o,a,Te),function d(e,t,n,r,i){var o=v.definedOrDefault(P,je),a=N.arrowHeight()+1,s=N.decideWhereToPop(r,t,o,a,i);if(!s)return undefined;s=function g(e,t,n,r){var i=v.definedOrDefault(we.BalloonRadius,15);if(e.positionType==m.POSITION_TYPE.Right||e.positionType==m.POSITION_TYPE.Left){var o,a=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;if(isFinite(a)&&0!==a||(a=1),o=Ee||Te.lv&&0<Te.lv?mtjQuery(v.getElementDocument(r)).height()*a:mtjQuery(v.getElementDocument(se)).height()*a,t.height+e.top>o){var s=N.arrowHeight()+1,u=n.top+n.height/2,l=u-t.height/2,c=u-t.height+s+i/2;c=Math.max(0,c);var d=u-s-i/2,f=o-t.height-1,p=Math.min(f,d);e.top=l,e.top=Math.min(p,e.top),e.top=Math.max(e.top,c),e.top=Math.max(0,e.top)}}return e}(s,t,r,n),h.fixPosition(s,Te,n),N.addPositionClass(e,s);var u=we.BalloonBorderWidth*(N.hasBorder()?1:0);!function c(e,t,n,r){e.css("top",t.top-n+"px"),e.css("left",t.left-n+"px");var i=f.isQuirksMode(se[0]);t.positionType==m.POSITION_TYPE.Top&&e.css("top",t.top-2*n+1+"px");t.positionType==m.POSITION_TYPE.Bottom&&e.css("top",t.top-1+"px");t.positionType==m.POSITION_TYPE.Left&&(e.css("left",t.left-2*n+1+"px"),i&&e.css("left",t.left-2*n+"px"));t.positionType==m.POSITION_TYPE.Right&&e.css("left",t.left-1+"px");e.css("width",r.width+"px"),i&&e.css("width",r.width+2*n+"px");e.css("height",r.height+"px")}(e,s,u,t);var l=v.getSettingsValue(Te,"z-index",m.NORMAL_BALLOON_Z_INDEX);C.setTopMostCssStyle(e,l),f.isQuirksMode(se[0])&&N.fixQuirksMode(e);return s}(R,M,F,e.elementBounds,i)):undefined}function $e(){var e=le?se:mtjQuery("body"),t=n.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}function Ze(e){var t=0<be?be:0;return e<=200&&(0!=P&&2!=P&&P!=undefined||(t=e-se.position().left-20)<120&&(t=120)),t}function et(e,t){try{!z&&Y.shouldShow(se,Te)&&Y.highlight(),ee&&tt()||function f(e,t){var n=y.isFeatureEnabled("noScrlAnm")?E.SCROLL_MODES.Normal:E.SCROLL_MODES.Animated,r=v.getSettingsValue(Te,Ue,n);e=e&&E.shouldScroll(se,r,D);var i,o=!1;e&&(o=E.jspScrollAttempt(se));var a=function u(){var e={element:se,balloonDrawer:N,settings:Te};return Cr.create("ScrollManager",e)}();i=D&&D==m.STEP_TYPE.Popup?function l(e){var t={},n=Ze($e().width),r=0<Ie?Ie:0;return F=h.getContainer(Te,e,le,t),R=N.generateBalloonDiv(F,Ee,Pe,_e,D,qe(),Ae,ke,X,$,Z),h.handleEmbedding(Te,R,t),b.appendToContainer(F,R),M=N.fixSize(R,e,le,n,r,Te),ae.showPopupBalloon(R),R}(se):Ke(se,e);if(!i)return void(t&&t());(function c(){if(!J)return;var e={objectId:_e,type:m.STEP_PLAY_INITIATOR_ENUM.STEP};J(R,e)})(),function d(n){we.classes&&mtjQuery.each(we.classes,function(e,t){n.addClass(t)})}(i),S.raiseEvent(m.EVENTS.BalloonCreated,{Element:i,Configuration:we,PageElement:se}),Ge.balloonDrawTime=q("Done drawing balloon"),K=v.getTimer(ze);function s(){Ge.balloonShowTime=K("Done showing balloon"),t&&t(Ge,i),S.raiseEvent(m.EVENTS.BalloonShown)}!o&&e?a.scrollToElementIfNeeded(se,null,function(){Ee||!ot(function(){a.scrollToBalloon(se,a.getScrollOptions(Te),R)})?Be.animate(s):s()},Te,P,r,R,B):Be.animate(s);N.manipulationsForInlineCss(i)}(e,t)}catch(n){s.error(n)}}function tt(){return y.isFeatureEnabled(te.BalloonShowDestroySync)}function nt(e){return e.is(":wm_interact_all_points")}function rt(e,t){var n=e.css("display"),r="none"==n;r&&R.css("display","block");var i=t(R);return r&&R.css("display",n),i}function it(){return D==m.STEP_TYPE.Popup}function ot(e){Q("Handeling balloon positioning for element:",3,Ye),Q(se,3,Ye);var t=!1,n=!1,r=ae.getElementPositionRelativeToContainer(se);Q("current element top position: "+r.top+" left position: "+r.left,3,Ye),!le&&function u(){var e=se.data("iframe");return e&&g.isElementScrolledOut(se,e,P)}()&&(t=!0);var i=h.isEmbeded(Te);ne&&!i||E.isBalloonPositionVisibleRelativeToParents(se,P)||(t=!0),Oe=null;var o=function l(e,t,n,r){return null!=Le&&null!=Fe&&null!=Me&&null!=Re&&(T.check(Le,e)||T.check(Fe,t)||T.check(Me,n)||T.check(Re,r))}(r.top,r.left,r.height,r.width),a=function c(){var e={stepId:_e,balloonDiv:R,defaultValue:!function t(){return!!(document.webkitFullscreenElement||document.mozFullScreen||document.mozFullscreenElement||document.msFullscreenElement)}()};return S.raiseEvent(m.EVENTS.ShouldChangeBalloonPosition,e),e.returnValue}(),s=re&&re.isScrolling();return o&&a?s&&r.top!=Le?(st(r.top,r.left,r.height,r.width),e&&e()):(Q("Balloon position changed, redrawing the balloon",3,Ye),n=!0,w.shouldMoveByIntervals(t,R,Te)?function d(e,t){var n=0;!function r(){n<10?(n++,ae.moveBalloon(e),p.playSetTimeout(r,30)):t&&t()}()}(r,e):(Q("Element position changed, destroying it",5,Ye),st(r.top,r.left,r.height,r.width),function f(){y.isFeatureEnabled(m.FEATURES.CalculateElementBoundsBeforeRedraw)&&(Oe=g.getElementBounds(se,le,window,Te))}(),ae.destroy(!0,function(){Q("Finished destorying balloon",5,Ye),t||L||(Q("Redrawing balloon",5,Ye),ae.Show(!1,function(){S.raiseEvent(oe.AfterBalloonRedraw),Oe=null,e&&e()}))}))):e&&e(),n}function at(e,t,n){var r=parseFloat(e.css("left"))-t+"px",i=parseFloat(e.css("top"))-n+"px";e.css("left",r),e.css("top",i)}function st(e,t,n,r){Le=e,Fe=t,Me=n,Re=r}this.onDestroy=function(e){xe.push(e)},this.setReleaseEvents=function(e){Ne=e},this.releaseEvents=function(e){for(var t,n=0;n<Ne.length;n++)try{Ne[n](e)&&(t=!0)}catch(r){}return t},this.SetTimeoutOn=function(e){it()||O||(O=p.playSetTimeout(function(){ae.elementDisplayTimeoutFunction(e)},200))},this.getArrowHeight=function(){return N.arrowHeight()},this.AddSubmitButton=function(){pe=!0},this.getElementPositionRelativeToContainer=function(e){var t={};if(le){var n=se.offset();ie&&(n.top=se[0].getBoundingClientRect().top),Q("getElementPositionRelativeToContainer element offset top: "+n.top+" left: "+n.left,3,Ye),t.top=Math.floor(n.top),t.left=Math.floor(n.left)}else{var r=g.getPosRelativeToWindow(se[0],window,!0);t.top=r.top,t.left=r.left}return t.height=se.height(),t.width=se.width(),g.fixOffsetForIE(se,t),h.fixPosition(t,Te,F),t},this.showPopupBalloon=function(e){var t=I.Center;Te.hasOwnProperty("pagePosition")&&(t=parseInt(Te.pagePosition,10));var n=Cr.create("PopupPosition",{animator:Be,pagePosition:t}),r=v.getSettingsValue(Te,"z-index",m.POPUP_BALLOON_Z_INDEX);e.css({"z-index":r,"min-width":N.minPopupWidth()});var i=parseInt(v.getSettingsValue(Te,"leftOffset",0)),o={top:parseInt(v.getSettingsValue(Te,"topOffset",0)),left:i};n.positionElementInPage(e,o);var a=u.canDisplayOverlay(),s=_.isSpotlight(Te);a&&s&&u.displayOverlay(r,!0,undefined,Te.overlay),f.isQuirksMode(se[0])&&N.fixQuirksMode(e),Be.prepare(e),Be.postAnimation(function(){g.registerResizeAndScrollEvents({element:e,offset:o,callback:t!==I.Center?n.positionElementInPage:undefined})})},this.getBalloonDiv=function(){return R},this.getElement=function(){return se},this.getBalloonData=function(){return{isEmbeded:h.isEmbeded(Te),containerEntityType:ke,containerEntityId:Pe,balloonEntityType:Ae,balloonEntityId:_e}},this.getBalloonHTML=function(){return N.generateHtml(qe())},this.Show=function(n,r){q=v.getTimer(ze);function e(){(function t(){var e=[];return it()||!Ee&&!G.shouldShow(se,Te)||(e.push(G.highlight()),H&&e.push(H.highlight())),ct.all(e)})().then(function(e){-1===Tr.inArray(!0,e)&&et(n,r)})}var t=le?i.getDirectHead(se):Tr("head");Ee?e():N.loadResources(t,e)},this.stop=function(){Be.stop()},this.destroy=function(e,t){if(!(e&&ee&&tt())){e&&S.raiseEvent(oe.BeforeBalloonRedraw),ee=!0;S.raiseEvent(m.EVENTS.Walkthrus.DestroyStepBalloon,{balloonDiv:R}),it()&&se.remove(),e||(L=!0,function n(){O&&(O.clear(),O=null)}(),function r(){for(var e=0;e<xe.length;e++)try{xe[e]()}catch(t){}xe.length=0}(),ne&&function i(){re&&(re.destroy(),re=null)}()),function o(e){if(e)try{e.unbind(),mtjQuery("*",e).unbind()}catch(t){}}(R),Be.disableAnimation(),Be.destroy(function(){try{G.unhighlightElement(se,"balloon"),H&&H.unhighlightElement(ue,He),Y.unhighlightElement(se,"balloon")}catch(e){s.error(e,"error removing highlighting elements for balloon")}ee=!1,t&&t()})}},this.elementDisplayTimeoutFunction=function(e){g.isElementVisible(se,Ce||Te.filter)?ae.handleBalloonDisplay(e):(Q("Element not visible anymore.",5,Ye),ae.destroy(!1,e))},this.handleBalloonDisplay=function(e){ot(),O=p.playSetTimeout(function(){L&&tt()||ae.elementDisplayTimeoutFunction(e)},U)},this.moveBalloon=function(e){var t=se.height(),n=se.width(),r=w.getDeltaLeft(Re,n,Fe,e.left),i=w.getDeltaTop(Me,t,Le,e.top);st(e.top,e.left,t,n),at(R,r,i);for(var o=0;o<B.length;o++)at(B[o],r,i);it()||!Ee&&!G.shouldShow(se,Te)||(G.highlight(),H&&H.highlight()),!z&&Y.shouldShow(se,Te)&&Y.highlight()},function ut(){if(te=m.FEATURES,ee=!1,D=m.STEP_TYPE.Normal,se=A.element,A.parentElement&&(se=A.parentElement,ue=A.element),j=A.forceEmbedBalloonInIframe,z=A.dontShowIoBalloon,De=A.isFirstStep,k=A.isViewStep,V=A.siteConfig,X=A.placeholderConfigurations,$=A.placeholderVariableValues,Z=A.initiatorData,W=A.stepSettings.v,A.fixedSize&&(be=A.fixedSize.width,Ie=A.fixedSize.height),Te=A.stepSettings,Ce=A.visibilityFilter,U=v.getSettingsValue(Te,We)||v.getSettingsValue(V.Settings,We)||Ve,A.text&&(ge=A.text.title,me=A.text.subText,he=v.nl2br(A.text.content)),x=A.end,A.buttons&&(ce=A.buttons.next,de=A.buttons.done,fe=A.buttons.back,pe=A.buttons.submit),Se=A.htmlContent,ve=A.innerHtml,ye=A.outterHtml,P=A.position,A.data&&(_e=A.data.balloonEntityId||A.data.stepId,Pe=A.data.containerEntityId||A.data.tutorialId,D=A.data.type,Ae=A.data.balloonEntityType||"step",ke=A.data.containerEntityType||"walkthru"),function a(e,t){var n={balloonEntityId:_e,containerEntityId:Pe,isCapture:e,isViewStep:t},r=d.getHighlighterSettings(Te,se,n);G=Cr.create("Highlighter",r),ue&&(r.element=ue,r.drawableType=He,H=Cr.create("Highlighter",r));var i=function o(){var e=y.isFeatureEnabled("oldSpotlight"),t=f.isIE()&&f.isIEOlderThan(9);return e||t}()?"OldInsideout":"Insideout";Y=Cr.create(i,r)}(A.isCaptureBalloon,k),we=A.configuration,r.fixConfiguration(we),Q=s.wrapCustomerLog(Ye),c.setCustomCssIfNeeded(se),N=A.drawer,se){var e=l.isInIframe(se);le=!(!v.getSettingsValue(Te,"embed",!1)&&e&&!j&&!y.isFeatureEnabled(m.FEATURES.ForceEmbedInOwnerDocument))||o.shouldHandlePageAsFramesets(),A.isCaptureBalloon&&function n(){Ee=!0,le=h.isEmbeded(Te)&&le,Be&&Be.disableAnimation()}(),J=A.bindButtonsFunc,function i(e){var t=e.AnimateFirst&&!De||Ee||k,n=e.Vibrate&&!Ee,r={config:e.Animation,isVibrating:n};Be=Cr.create("Animator",r),t&&Be.disableAnimation()}(we),ne=!f.isIEOlderThan(9)&&y.isFeatureEnabled(te.ObserveScroll);var t=h.isEmbeded(Te);ie=!t&&y.isFeatureEnabled(te.NoScrollTop),S.raiseEvent(m.EVENTS.BalloonInitialized,{params:A}),oe=m.EVENTS.Walkthrus}else le=!0}.apply(null,arguments)}).asProto().dependencies("TimerManager, BalloonEmbedder, Consts, UiUtils, PositionHelper, CommonUtils, Logger, FeaturesManager, BalloonUtils, HostData, FramesetsUtils, BBCodeParser, ElementUtils, CommonEvents, ScrollUtils, ElementInIframeIndicator, MoveBalloonByIntervalsHelper, BalloonElementPositionChangedChecker, CustomCssSetter, DirectHeadProvider, TopMostCssStyleSettter, UserGuidContainer, HighlighterSettingsProvider, ContainerAppender, Positions, SpotlightChecker, BalloonStyleProvider"),Cr.register("BalloonLogEventHandler").asCtor(function Dn(e,t,n){var r;this.init=function c(){t.bind(n.EVENTS.BalloonLogs.BalloonPopLocationCalculated,a),t.bind(n.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,s),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,u),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,u)};var i="[BalloonLogEventHandler] ",o="balloonLogEventHandler";function a(e,t){t&&t.isEmbeded&&!t.extraData&&l(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": Something happened while calculaing the position of the balloon, trying to attach it to another element",3)}function s(e,t){t&&t.isEmbeded&&!t.extraData&&l(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": The balloon is partly covered by an element, trying to attach it to another element",3)}function u(e,t){l(t.reason+", trying to attach the balloon to another element. Invalid parent:",3),r(t.currentParent[0])}function l(e,t){r(i+e,t)}!function d(){r=e.wrapCustomerLog(o)}()}).dependencies("Logger, WmInternals, Consts"),Cr.register("MoveBalloonByIntervalsHelper").asCtor(function xn(r){this.shouldMoveByIntervals=function i(e,t,n){return r.isFeatureEnabled("moveByIntervals")},this.getDeltaLeft=function o(e,t,n,r){return parseFloat(e)-parseFloat(t)},this.getDeltaTop=function a(e,t,n,r){return parseFloat(e)-parseFloat(t)}}).asProto().dependencies("FeaturesManager"),Cr.register("BalloonElementPositionChangedChecker").asCtor(function Nn(a,s,u){this.check=function l(e,t){var n=a.isFeatureEnabled(s.FEATURES.PositionCheckByChangeThreshold),r=u.get().positionChangePixelsThreshold;return n?function i(e,t,n){return Math.abs(e-t)>n}(e,t,r):function o(e,t){return e!=t}(e,t)}}).asProto().dependencies("FeaturesManager,Consts,BalloonPositionCheckSettingsGetter"),Cr.register("SafeFullUrlProvider").asCtor(function On(e,t){this.get=function n(){return e.isFeatureEnabled("disableWidgetOpenFullUrl")||e.isFeatureEnabled("dontSendPageUrl")?"":t.getUrl()}}).dependencies("FeaturesManager, HostData"),Cr.register("Encryptor").asCtor(function Ln(t){this.encrypt=function n(e){return t.btoa(unescape(encodeURIComponent(e)))}}).dependencies("Base64"),Cr.register("PropagationStopper").asCtor(function Fn(){this.addEventStopPropagation=function n(t,e){e.forEach(function(e){t.on(e,function(e){e.preventDefault(),e.stopPropagation()})})}}),Cr.register("StopPropagationWrapper").asCtor(function Mn(n,r){this.wrapWithEvent=function i(e,t){e.stopPropagation(),n.raiseEvent(e.type+r.EVENTS.PropagationStoppedSuffix,{originalEvent:e,data:t})}}).dependencies("CommonEvents, Consts"),Cr.register("SlowlyDyingChanceCalculator").asCtor(function Rn(){this.gamble=function r(e,t){n[e=e||0]==undefined&&(n[e]=t||1);return!(Math.random()>n[e])&&(n[e]=n[e]/2,!0)};var n={};function t(){n={}}(function i(e){e.bind(t)}).apply(this,arguments)}).dependencies("UIChangeTracker").asProto(),Cr.register("SearchResultActivator").asCtor(function Bn(r,i,e,n,o,a,s,u){var l=e.wrapCustomerLog("searchResult"),c=[".zendesk.com"],d={width:900,height:500};function f(e){var t=i.getSize(),n=a.to_html('<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',{width:t.width,height:t.height,url:r.isUrlEncoded(e)?e:encodeURI(e)});return u.parseElementAsJquery(n)}function p(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://")||function n(e){e=e.toLowerCase();for(var t=0;t<c.length;t++)if(0<=e.indexOf(c[t].toLowerCase()))return!0;return!1}(e);return t&&l("Can't play content in lightbox",3),t}function g(e){l("Started playing content in lightbox",3),WalkMePlayerAPI.isMenuOpen()&&WalkMePlayerAPI.toggleMenu(),function t(e){i&&i.remove()}(),i.activate(e,d,"searchResult",!0,f,h)}function h(e){l("Started playing content in new tab",3),window.open(e,"_blank")}this.openSearchResult=function(e){if(r.isValidUrl(e)){l(s.formatString("Content url is :{0}",e),3),n.raiseEvent("LoadingContent",e);var t="true"===o.get().Custom.lightboxEnabled;p(e)||!t?h(e):g(e)}else l(s.formatString("Content url is invalid: {0}",e),3)}}).dependencies("CommonUtils, LightboxDisplayer, Logger, CommonEvents, SiteConfigManager, Mustache, StringUtils, DomManager");var f=__webpack_require__(100).DeployablesManager;Cr.register("DeployablesManagerFactory").asCtor(function Un(n){var r,i,o;function a(e,t){r[e]||(r[e]=t)}this.get=function s(e){return o||(o=!0,function t(){a(n.DEPLOYABLE_TYPE.Content,Cr.get("ContentsManager")),a(n.DEPLOYABLE_TYPE.Task,Cr.get("TodoListManager")),a(n.DEPLOYABLE_TYPE.Category,Cr.get("CategoriesManager")),a(n.DEPLOYABLE_TYPE.Collection,Cr.get("CollectionsManager")),a(n.DEPLOYABLE_TYPE.AbExperiment,Cr.get("ExperimentsManager")),a(n.DEPLOYABLE_TYPE.Survey,Cr.get("SurveysManager")),a(n.DEPLOYABLE_TYPE.ShoutOut,Cr.get("ShoutOutsManager")),a(n.DEPLOYABLE_TYPE.ConditionBlock,Cr.get("ConditionBlocksManager")),a(n.DEPLOYABLE_TYPE.Tag,Cr.get("TagsManager")),a(n.DEPLOYABLE_TYPE.BusinessSolution,Cr.get("BusinessSolutionsManager")),a(n.DEPLOYABLE_TYPE.TrackedPage,Cr.get("TrackedPagesManager")),a(n.DEPLOYABLE_TYPE.Course,Cr.get("CoursesManager")),a(n.DEPLOYABLE_TYPE.Lesson,Cr.get("LessonsManager")),a(n.DEPLOYABLE_TYPE.TrackedElement,Cr.get("TrackedElementsManager")),a(n.DEPLOYABLE_TYPE.SearchProviderUrl,Cr.get("SearchProviderUrlsManager"))}()),r[e]||i},this.add=a,function e(){r={},i={name:function(){},getById:function(){},getAll:function(){return[]}}}()}).dependencies("Consts"),Cr.register("DeployableTypeNameProvider").asCtor(function Vn(e){this.getDeployableTypeNameByTypeNumber=function t(n){var r=undefined;return mtjQuery.each(e.DEPLOYABLE_TYPE,function(e,t){if(n==t)return r=e,!1}),r}}).dependencies("Consts"),Cr.register("TagsInjector").asCtor(function Wn(s){this.inject=function u(e,t,n){var r=n.isNewConditions?"ConditionTrees":"Settings";e[r]||(e[r]={});var i=e[r][n.name];if(!t)return i;!function a(e,t){return t&&"true"!==e.Settings[t]&&!e.Settings[t]}(e,n.enabled)||(e.Settings[n.enabled]=1,i=undefined);var o=s.get(n.isNewConditions).combine("And",t,i);return e[r][n.name]=o}}).dependencies("ConditionsCombinerFactory"),Cr.register("TagsSegmentationProperties").asCtor(function jn(e){this.properties={},this.properties[e.DEPLOYABLE_TYPE.Tutorial]={name:"DOCT",enabled:"DOCTEnabled"},this.properties[e.DEPLOYABLE_TYPE.Task]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},this.properties[e.DEPLOYABLE_TYPE.Launcher]={name:"PlayLauncherConditionTree"},this.properties[e.DEPLOYABLE_TYPE.Shuttle]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},this.properties[e.DEPLOYABLE_TYPE.Content]={name:"DisplayCondition"},this.properties[e.DEPLOYABLE_TYPE.BusinessSolution]={name:"DisplayRules",enabled:"segmentationEnabled",isNewConditions:!0,dontInjectTagsIntoAutoStartFeature:"SWT_AutoPlayIgnoreTags"},this.properties[e.DEPLOYABLE_TYPE.Course]={name:"DisplayCondition"},this.properties[e.DEPLOYABLE_TYPE.SearchProviderUrl]={name:"DisplayCondition"}}).dependencies("Consts"),Cr.register("AnalyticsTrackerConsts").asCtor(function Gn(){this.EVENT_NAMESPACE=".wmte",this.LOG_LEVEL_DEFAULT=3,this.FEATURES={analyticsTracking:"analyticsTracking",autoTracking:"autoTracking",pageChangeTracking:"pageChangeTracking"}}),Cr.register("AnalyticsTrackerLogger").asCtor(function Hn(t,n,r){this.customerLog=function i(e){t.customerLog(e,n.LOG_LEVEL_DEFAULT,r.FEATURES_LOGS.AnalyticsTracking)},this.error=function o(e){t.error(e)}}).dependencies("Logger, AnalyticsTrackerConsts, Consts"),Cr.register("TrackedElementEventBinder").asCtor(function Yn(o,a,s,u,e,l,c){this.bind=function t(n,r,i){a.customerLog(c.formatString("TrackedElementEventBinder - binding events to element with id {0}",r.Id)),u.bind(n,o.EVENT_NAMESPACE,function(t){e.get(l.get().getCurrentIndex()).then(function(e){s.send(t,e,r,i,n)})})},this.unbind=function n(e,t){a.customerLog(c.formatString("TrackedElementEventBinder - unbinding events from element with id {0}",t.Id)),u.unbind(e,o.EVENT_NAMESPACE)}}).dependencies("AnalyticsTrackerConsts, AnalyticsTrackerLogger, TrackedElementEventDataSender, ElementInteractionEventsBinder, PageVisitGuidProvider, ChangesTrackerFactory, StringUtils"),Cr.register("TrackedElementEventDataSender").asCtor(function Qn(s,u,l){this.send=function c(e,t,n,r,i){var o={type:s.EVENT_SENDER_EVENT_APPS.TrackedElement,oId:n.Id,oName:n.Name,owType:s.EVENT_SENDER_EVENT_APPS.TrackedPage,pId:(r?r.Id:"0")+"_"+t};r?(o.owId=r.Id,o.owName=r.Name):(o.owId=0,o.owName="Site-Wide");var a={eventName:e,eventData:o,trackedElement:n,trackedPage:r,element:i};l.raiseEvent(s.EVENTS.TrackedElementBeforeSendEvent,a),u.postEvent(e,o)}}).dependencies("Consts, EventSender, CommonEvents"),Cr.register("TrackedElementInteractionsToggler").asCtor(function zn(i){this.toggleBinder=function o(e,t,n,r){r?i.bind(e,t,n):i.unbind(e,t)},this.stopBinder=function n(e,t){e&&i.unbind(e,t)}}).dependencies("TrackedElementEventBinder");var p,g=(__extends(h,p=f),h.prototype.getAllByPageId=function(t){return this.arrayUtils.filter(this.getAll(),function(e){return e.TrackedPageId==t})},h.prototype.start=function(){this._trackedElementsVisibilityTracker=this.trackedElementsVisibilityTrackerFactory.create({}),this._trackedElementsVisibilityTracker.startTrack()},h.prototype.releaseAll=function(){this._trackedElementsVisibilityTracker&&this._trackedElementsVisibilityTracker.stopTrack()},h);function h(e,t,n,r){p.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.TrackedElement}),this.arrayUtils=n,this.trackedElementsVisibilityTrackerFactory=r,this._name="TrackedElement",this.setDeployables([])}function m(e,t,n){this.stopTrack=function o(){r.stopTrack()},this.startTrack=function a(){Tr(i).each(function(e,t){r.startTrack(t)})};var r,i=[];!function s(){i=e.getAllByPageId(n.trackedPage&&n.trackedPage.Id),r=t.create(n)}()}function v(r,i,o,a){var s,u;this.evaluateAsync=function l(t){var e=-1;(u=i.getStickyType(a.trackedElement.Settings))!=r.STICKY_TYPE.ONCE&&(e=2e3);var n={logContext:a.trackedElement.Id,findElementParams:{IdentifySettings:a.trackedElement.IdentifySettings},trackUIChanges:!0,elementEvaluationIntervalMs:e};(s=o.create(n)).setOnVisibilityChanged(function(e){t(e==r.VISIBILITY_STATE.VISIBLE),e==r.VISIBILITY_STATE.VISIBLE&&u!=r.STICKY_TYPE.STRONG&&s.cleanResources()}),s.evaluateElementVisibilityAsynch()},this.cleanResources=function e(){s&&s.cleanResources()},this.getElement=function t(){if(s)return s.getElement()}}Cr.register("TrackedElementsManager").asCtor(g).dependencies("Lib, Consts, ArrayUtils, TrackedElementsVisibilityTrackerFactory"),Cr.register("TrackedPageEventDataSender").asCtor(function qn(r,i){this.send=function o(e,t){var n={type:r.EVENT_SENDER_EVENT_APPS.TrackedPage,oId:t.Id,oName:t.Name,pId:t.Id+"_"+e};i.postEvent(r.EVENT_SENDER_EVENT_TYPES.Play,n)}}).dependencies("Consts, EventSender");var y,S=(__extends(E,y=f),E.prototype.start=function(){this.trackedPagesEventsListener.startListen()},E.prototype.setDeployables=function(e){e&&(y.prototype.setDeployables.call(this,e),this.trackedPagesEventsListener.init(e))},E.prototype.releaseAll=function(){this.trackedPagesEventsListener.stopListen()},E);function E(e,t,n){y.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.TrackedPage}),this.trackedPagesEventsListener=n,this._name="TrackedPage",this.setDeployables([])}function T(t,n){var r;this.evaluate=function i(){if(!n.trackedPage.ConditionTrees||!n.trackedPage.ConditionTrees.DisplayRules)return!0;var e=n.trackedPage.ConditionTrees.DisplayRules;return r.getCurrentEvaluationValueAndStopEvaluating(e)},function o(){var e={featureName:"evaluate tracked page segmentation",elementName:n.trackedPage.Name,stopPollingAfterEvaluateTrue:!1};r=t.createNew(e)}()}function C(n,r,t,i,o,e,a,s,u){var l,c,d;function f(e){o.isAutoTrackingOn()||t.send(e,d)}this.stopListen=function p(){l.stopTrack()},this.evaluateAndUpdateContainer=function g(e){var t=c.evaluate();n.customerLog(s.formatString("TrackedPageEventsListener - for page with id {0}, segmentation condition was{1}met",d.Id,t?" ":" not ")),t?(i.get(e).then(f),l.startTrack(),d.IsComplex&&r.add(d)):(l.stopTrack(),d.IsComplex&&r.remove(d))},function h(){l=e.create(u),c=a.create(u),d=u.trackedPage}()}function b(n,t){function r(e){0==e.trackedElement.IsViewsOnly&&n.toggleBinder(e.element,e.trackedElement,e.trackedPage,e.isVisible)}function e(e,t){0==t.IsViewsOnly&&n.stopBinder(e,t)}this.startTrack=function i(e){!e.IdentifySettings.IsJquerySelector&&1!=e.IsViewsOnly||t.startTrack(e,r)},this.stopTrack=function o(){t.stopTrack(e)}}function I(t,n){function r(e){t.toggleBinder(e.element,e.trackedElement,e.trackedPage,e.isVisible)}this.startTrack=function i(e){n.startTrack(e,r)},this.stopTrack=function e(){n.stopTrack(t.stopBinder)}}function _(i,o,a,s,u,l,c,d){var f;this.startTrack=function p(t,n){if(f[t.Id])return;o.customerLog(c.formatString("TrackedElementVisibilityTracker - trackVisibility for element with id {0}",t.Id));var e={trackedElement:t},r=l.create(e);f[t.Id]={evaluator:r,trackedElement:t},r.evaluateAsync(function(e){!function r(t){o.customerLog(c.formatString("TrackedElementVisibilityTracker - visibility changed for element with id {0} to {1}",t.trackedElement.Id,t.isVisible));var n=f[t.trackedElement.Id].evaluator.getElement();t.isVisible&&s.get(u.get().getCurrentIndex()).then(function(e){a.send(i.EVENT_SENDER_EVENT_TYPES.Visible,e,t.trackedElement,t.trackedPage,n)});t.element=n,t.visibilityCallback&&t.visibilityCallback(t)}({isVisible:e,trackedElement:t,trackedPage:d.trackedPage,visibilityCallback:n})})},this.stopTrack=function e(r){o.customerLog(c.formatString("TrackedElementVisibilityTracker - stopTrack")),Tr.each(f,function(e,t){var n=t.evaluator.getElement();r&&r(n,t.trackedElement),t.evaluator.cleanResources()}),f={}},function t(){f={}}()}function A(e){return e.get("isEmulator")?{width:window.innerWidth,height:window.innerHeight}:screen}Cr.register("TrackedPagesManager").asCtor(S).dependencies("Lib, Consts, TrackedPagesEventsListener"),Cr.register("TrackedPagesEventsListener").asCtor(function Kn(t,n,r,i){var o,a,s=[];function u(e){for(var t=0;t<s.length;t++)s[t].evaluateAndUpdateContainer(e.uiChangeIndex);r.resolveUIChange(e.uiChangeIndex)}this.init=function l(e){t.customerLog("TrackedPagesEventsListener - init"),o=e,a=n.get()},this.startListen=function e(){t.customerLog("TrackedPagesEventsListener - startListen"),a.bind(u),Tr(o).each(function(e,t){var n={trackedPage:t},r=i.create(n);s.push(r)}),u({uiChangeIndex:0})},this.stopListen=function c(){t.customerLog("TrackedPagesEventsListener - stopListen"),a.unbind(u);for(var e=0;e<s.length;e++)s[e].stopListen();s=[]}}).dependencies("AnalyticsTrackerLogger, ChangesTrackerFactory, TrackedActivatedPagesContainer, TrackedPageEventsListenerFactory"),Cr.register("PageVisitGuidProvider").asCtor(function Jn(e,t,n){var r,i,o,a;function s(e){i=e.uiChangeIndex,u(),o&&o.resolve(r),o=mtjQuery.Deferred()}function u(){r=t.generateGuid(!0)}this.get=function l(e){return e<i?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):e===undefined||e==i?mtjQuery.Deferred().resolve(r):o.promise()},this.releaseResources=function c(){mtjQuery(lt).off(n.EVENTS.NewSession,u),a.unbind(s)},function d(){i=0,(a=e.get()).bind(s),u(),o=mtjQuery.Deferred(),mtjQuery(lt).on(n.EVENTS.NewSession,u)}()}).dependencies("ChangesTrackerFactory, GuidGenerator, Consts"),Cr.register("TrackedElementIndicatorService").asCtor(function Xn(e,t){this.isAutoTrackingOn=function n(){return e.isFeatureEnabled(t.FEATURES.autoTracking)}}).dependencies("FeaturesManager, AnalyticsTrackerConsts"),Cr.register("TrackedActivatedPagesContainer").asCtor(function $n(e){var t,n,r;function i(){return e.getDictionaryValues(r)}this.add=function o(e){r[e.Id]=e},this.remove=function a(e){delete r[e.Id]},this.getAll=function s(e){return e<t?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):e===undefined||e==t?mtjQuery.Deferred().resolve(i()):n.promise()},this.resolveUIChange=function u(e){t=e,n&&n.resolve(i()),n=mtjQuery.Deferred()},function l(){r={},t=0,n=mtjQuery.Deferred()}()}).dependencies("DictionaryUtils"),Cr.register("ElementVisibilityEvaluatorFactory").asCtor(function Zn(t,n,r,i,o,a,s,u,l){this.create=function c(e){return new Ye(t,n,r,i,o,a,s,u,l,e)}}).dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator, ElementChangeChecker, StringUtils"),Cr.register("TrackedElementsVisibilityTrackerFactory").asCtor(function er(t){this.create=function n(e){return new m(Cr.get("TrackedElementsManager"),t,e)}}).dependencies("TrackedElementVisibilityTrackerFactory"),Cr.register("TrackedElementVisibilityEvaluatorFactory").asCtor(function tr(t,n,r){this.create=function i(e){return new v(t,n,r,e)}}).dependencies("Consts, UIElementVisibilityAttributes, ElementVisibilityEvaluatorFactory"),Cr.register("TrackedElementVisibilityTrackerFactory").asCtor(function nr(e,n,r,i,o,a,s,u,l){var c;this.create=function d(e){var t=new _(n,r,i,o,a,u,l,e);return c?new b(s,t):new I(s,t)},function t(){c=e.isAutoTrackingOn()}()}).dependencies("TrackedElementIndicatorService, Consts, AnalyticsTrackerLogger, TrackedElementEventDataSender, PageVisitGuidProvider, ChangesTrackerFactory, TrackedElementInteractionsToggler, TrackedElementVisibilityEvaluatorFactory, StringUtils"),Cr.register("TrackedPageEventsListenerFactory").asCtor(function rr(t,n,r,i,o,a,s,u){this.create=function l(e){return new C(t,n,r,i,o,a,s,u,e)}}).dependencies("AnalyticsTrackerLogger, TrackedActivatedPagesContainer, TrackedPageEventDataSender, PageVisitGuidProvider, TrackedElementIndicatorService, TrackedElementsVisibilityTrackerFactory, TrackedPageSegmentConditionCheckerFactory, StringUtils"),Cr.register("TrackedPageSegmentConditionCheckerFactory").asCtor(function ir(t){this.create=function n(e){return new T(t,e)}}).dependencies("ConditionCheckerFactory"),Cr.register("SuperScriptLauncher").asCtor(function or(r,i,o,a,s){this.init=function n(){return new ct(function(e,t){var n=o.getData(o.keysConfig.superScript.loadSuperScript.key);if(!(window.self===window.top&&n))return e();l(n),a.superScriptLoaded=function(){e()}})},this.launch=l,this.disable=e;var u="/devScripts/superscript.js",t="superscript";function l(e){var t=i.getCdnServerName();s.addScript(t+u);var n=o.keysConfig.superScript.loadSuperScript;o.saveData(n.key,e||r.SUPER_SCRIPT.MODE.VISIBLE,n.expiry)}function e(){var e=document.getElementById(t);e&&e.remove(),o.removeData(o.keysConfig.superScript.loadSuperScript.key)}!function c(){a.launchSuperScript=l,a.disableSuperScript=e}()}).dependencies("Consts, SettingsFile, ClientStorageManager, WmInternals, CommonUtils"),Cr.register("ContainerAppender").asCtor(function ar(){this.appendToContainer=function n(e,t){return Tr(t).appendTo(e)}}),Cr.register("BaseBalloon").asCtor(function sr(u,s,t,n,r,e){var l,i=Cr.create("WalkmeOOP",this),o=i.Prop.Protected("lib"),a=i.Prop.Protected("title"),c=i.Prop.Protected("content"),d=i.Prop.Protected("customHtml"),f=i.Prop.Protected("stepIndexText"),p=i.Prop.Protected("balloonSettings"),g=i.Prop.Protected("direction"),h=i.Prop.Protected("userGuid"),m=(i.Prop.Protected("contentDiv"),i.Prop.Protected("fixedWidth"),i.Prop.Protected("fixedHeight"),i.Prop.Protected("stepType")),v=i.Prop.Protected("buttons"),y=(i.Virtual.Public("generateHtml",function(){var e=y(),t=S();return n.to_html(e,t)}),i.Virtual.Protected("createHtmlTemplate")),S=i.Virtual.Protected("createTemplateData",function S(){!function n(e){if(s.get()[e]){var t=s.get()[e];t=(t=(t=t.replace(/&quot;/gi,'"')).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"),s.get()[e]=t}}("BalloonCloseTooltip");var e=r.shouldDisplayX(l);return{data:{title:a(),content:c(),customHtml:d(),stepIndexText:f(),balloonCloseTooltip:s.get().BalloonCloseTooltip},font:p().Font,cssReset:t.CssResetRules,displayX:e,colors:{mainBg:p().Color,minorBg:p().BalloonColor2,border:p().BorderColor,header:p().HeaderColor,content:p().ContentColor,footerText:p().FooterTextColor,buttonBg:p().ButtonBgColor,buttonBg2:p().ButtonBgColor2,buttonBorder:p().ButtonBorderColor,buttonText:p().ButtonTextColor},radiuses:{balloon:p().BalloonRadius+"px",button:p().BalloonButtonRadius+"px"},direction:{basic:g(),side:"rtl"==g()?"right":"left",oppositeSide:"rtl"==g()?"left":"right"},poweredBy:{showText:"txt"==p().showPoweredByFormat,link:p().showPoweredBy?"http://www.walkme.com/?u="+h():""},buttons:v().buttonsArr,border:{size:p().BalloonBorderWidth+"px"}}}),E=(i.Virtual.Public("manipulationsForInlineCss",function(){}),i.Protected("getCustomDivHtml",function(e){return"<div class='walkme-custom-balloon-custom-div-"+e+"' style='display:none;' ></div>"}),i.Virtual.Protected("generateNormalButtonClasses",function E(e,t){return C(t,e)}));function w(e,t,n,r){var i={},o=s.get();return i.backButton=i.nextButton=i.doneButton=i.submitButton=!1,i.buttonsArr=[],e&&(i.backButton={order:2,weak:!0,classes:E("back","weak"),buttonText:o.BackButtonText},i.buttonsArr.push(i.backButton)),t&&(i.nextButton={order:3,normal:!0,classes:E("next","normal"),buttonText:o.NextButtonText},function a(){return"1"==u.getSettingsValue(l,"isNextToDone","0")}()&&(i.nextButton.buttonText=o.DoneButtonText),i.buttonsArr.push(i.nextButton)),n&&(i.doneButton={order:3,normal:!0,classes:E("done","normal"),buttonText:o.DoneButtonText},i.buttonsArr.push(i.doneButton)),r&&(i.submitButton={order:4,normal:!0,classes:E("submit","normal"),buttonText:o.SubmitButtonText},i.buttonsArr.push(i.submitButton)),i}function T(e){var t=s.get(),n=e.action||-1;switch(parseInt(n)){case 1:return{order:4,normal:!0,classes:C("normal","start"),buttonText:t.WelcomeStepButtonStartText};case 3:return{order:1,weak:!0,classes:C("weak","cancel"),buttonText:t.WelcomeStepButtonCancelText};case 4:return{order:4,normal:!0,classes:E("submit","normal"),buttonText:t.SubmitButtonText};case 5:return{order:4,normal:!0,classes:C("normal","redirect"),buttonText:e.name};case 6:return{order:2,weak:!0,classes:C("weak","stay"),buttonText:e.name};case 7:return{order:4,normal:!0,classes:C("normal","ok"),buttonText:e.name}}var r=e.name||"",i=e.type,o=e.weak?"weak":"normal";return{order:2,weak:e.weak,normal:!e.weak,classes:C(o,i),buttonText:r}}function C(e,t){var n="walkme-custom-balloon-button walkme-custom-balloon-"+e+"-button";return t&&(n+=" walkme-custom-balloon-"+t+"-button walkme-action-"+t),n}i.Public("initButtons",function(e){var t=function s(e,t){var n={};if(n.nextButton=n.doneButton=n.backButton=n.submitButton=!1,n.buttonsArr=[],0==t.length)m()!=re.STEP_TYPE.Popup&&(n=w(e.back,e.next,e.done,e.submit));else for(var r=0;r<t.length;r++){var i=t[r];if(0==i.action){var o=w(!1,e.next,e.done,!1);n.nextButton=o.nextButton,n.doneButton=o.doneButton,0<o.buttonsArr.length&&n.buttonsArr.push(o.buttonsArr[0])}else if(2==i.action){var a=w(e.back,!1,!1,!1);n.backButton=a.backButton,0<a.buttonsArr.length&&n.buttonsArr.push(a.buttonsArr[0])}else n.buttonsArr.push(T(i))}return n}({back:e.backButton,next:e.nextButton,done:e.doneButton,submit:e.submitButton},function n(){var e=u.getSettingsValue(l,"customButtons",[]);if(0==e.length){var t=m()==re.STEP_TYPE.Popup?u.getSettingsValue(l,"popupStepButtons",[]):[];e=t}return e}());v(t)}),function b(){o(e.lib),a(e.balloonData.title),c(e.balloonData.content),d(e.balloonData.customHtml),f(e.balloonData.stepIndexText),p(e.balloonSettings),g(e.balloonSettings.direction),h(e.userGuid),m(e.stepType),l=e.settings,e.end}.apply(null,arguments)}).asProto().dependencies("CommonUtils, SiteConfigManager, BalloonTemplatesProvider, Mustache, XButtonDisplayChecker"),Cr.register("ArrowsHelper").asCtor(function ur(p,s){function v(e,t,n,r,i){if(!!s.isCaliforniaBalloonStyle()||(r==p.POSITION_TYPE.Left&&"ltr"==n||r==p.POSITION_TYPE.Right&&"rtl"==n)||i){var o=r==p.POSITION_TYPE.Left?"left":"right";t[0].css("border-"+o+"-color",e.BalloonColor2)}for(var a=0;a<t.length;a++)t[a].addClass("walkme-custom-balloon-arrow-footer")}this.LocalSVNRevision="$Rev$",this.finalizeArrowsPosition=function(e,t){switch(e){case p.POSITION_TYPE.Top:t.top--;break;case p.POSITION_TYPE.Bottom:t.top++;break;case p.POSITION_TYPE.Left:t.left--;break;case p.POSITION_TYPE.Right:t.left++}},this.fixArrows=function(e){var t=e.balloonDiv,n=e.arrowsDivs,r=e.result,i=e.isInCaptureMode,o=e.isQuirksMode,a=e.balloonSettings,s=e.arrowBaseWidth,u=e.balloonSettings.Color,l=e.outerArrowColor,c=a.direction;r.positionType==p.POSITION_TYPE.Left||r.positionType==p.POSITION_TYPE.Right?function m(e,t,n,r,i,o,a){t.show();var s=Tr(".walkme-custom-balloon-bottom-div",t),u=s[0]?s[0].offsetHeight:0,l=o,c=parseFloat(n[0].css("top")),d=parseFloat(t.css("top")),f=t[0]?t[0].offsetHeight:0,p=c-d,g=f-u;if(t.hide(),g-p<l&&p<g){var h=d-(g-p+1);t.css("top",h+"px"),v(e,n,i,r.positionType,a)}else g<=p&&v(e,n,i,r.positionType,a)}(a,t,n,r,c,s,o):i&&r.positionType==p.POSITION_TYPE.Top&&function d(e,t){t[0].css("border-top-color",e.Color)}(a,n),o&&function f(e,t,n){var r,i=Tr(".walkme-custom-balloon-arrow-inner",e.parent()),o=Tr(".walkme-custom-balloon-arrow-outer",e.parent());if(i.hasClass("walkme-custom-balloon-arrow-right"))r="right";else{if(!i.hasClass("walkme-custom-balloon-arrow-left"))return;r="left"}i.css("border-"+r+"-color",n),o.css("border-"+r+"-color",t)}(t,l,u)},function e(){}.apply(null,arguments)}).asProto().dependencies("Consts, BalloonStyleProvider"),Cr.register("BalloonV3").asCtor(function lr(o,a,n,s,u,l,c,d,f,p,e){function t(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 wm-custom-balloon-"),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(" "),r.b(r.v(r.f("designTemplateCssClass",e,t,0))),r.b("' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,262,279,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("min-width: 240px;")}),e.pop()),r.b("'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,431,515,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,903,930,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px; "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,1326,1343,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("min-height: auto;")}),e.pop()),r.b("'>"),r.s(r.f("customHtml",e,t,1),e,t,0,1382,1398,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.f("customHtml",e,t,0)))}),e.pop()),r.s(r.f("customHtml",e,t,1),e,t,1,0,0,"")||(r.s(r.f("displayX",e,t,1),e,t,0,1441,2050,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close walkme-inspect-ignore' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" font-size: 12px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal; "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,1833,1977,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 20px; padding: 0; width: 8px; height: 8px; background-repeat: no-repeat; background-position: center; font-size: 18px; line-height: 8px;")}),e.pop()),n.b("' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size:14px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b("; "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,2368,2612,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.f("noTitle",e,t,1),e,t,0,2380,2394,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("display: none;")}),e.pop()),n.b(" margin: 20px 47px 20px 20px; padding: 0; font-size: 16px; font-weight: normal; line-height: 25px; "),n.s(n.f("noContent",e,t,1),e,t,0,2519,2544,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 20px 47px 0 20px;")}),e.pop()),n.b(" "),n.s(n.f("noButtons",e,t,1),e,t,0,2573,2598,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 20px 47px 0 20px;")}),e.pop())}),e.pop()),r.b("'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2686,3370,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; "),n.s(n.f("setLineHeight",e,t,1),e,t,0,2979,2998,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" line-height: 18px;")}),e.pop()),n.b(" font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: auto;zoom: 1; "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,3104,3322,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 0 20px; padding: 0; font-size: 14px; font-weight: light; line-height: 22px; "),n.s(n.f("noTitle",e,t,1),e,t,0,3200,3256,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 20px 47px 0 20px; padding: 0; line-height: 25px;")}),e.pop()),n.b(" "),n.s(n.f("noButtons",e,t,1),e,t,0,3283,3308,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 20px 47px 0 20px;")}),e.pop())}),e.pop()),n.b("'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop())),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;"),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,3608,3618,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("margin: 0;")}),e.pop()),r.b("'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";  "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,3776,3801,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("margin: 0; padding: 20px;")}),e.pop()),r.b("'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; margin-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 10px; float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b("; "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,4061,4172,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("margin: 10px 0 0 0; font-size: 10px;"),n.s(n.f("noButtons",e,t,1),e,t,0,4111,4158,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.s(n.f("stepIndexText",e,t,1),e,t,0,4129,4140,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 0; ")}),e.pop())}),e.pop())}),e.pop()),r.b("'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px; "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,4578,4588,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("margin: 0;")}),e.pop()),r.b("'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div><div class='walkme-custom-side-border' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; width: 4px; height: 100%;  top:0px; "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(":0px; border:"),r.b(r.v(r.d("border.side.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": none; border-top: none; border-bottom: none; position: absolute; "),r.s(r.f("isCaliforniaStyle",e,t,1),e,t,0,5104,5118,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("display: none;")}),e.pop()),r.b("'></div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,5181,5209,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()}var g,h,r=Cr.create("WalkmeOOP",this),m=r.Prop.Public("contentMargin",15);r.Override("manipulationsForInlineCss",function(e){if(!s.isIE(8,"lte")){var t=g.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e}),p.addClickAndHover(t,e)}}),r.Override("createTemplateData",function(){var e=g.createTemplateData();e.outerDiv=g.getCustomDivHtml("inner-div"),e.title=g.getCustomDivHtml("title"),e.colors.xBtn=g.balloonSettings().XButtonColor,e.colors.stepInfo=g.balloonSettings().StepInfoColor,e.colors.separator=g.balloonSettings().SeparatorColor,e.stepIndexHeight=46,e.top={minHeight:57,textAlign:e.direction.side,title:{paddingTop:12},content:{sideMargin:m(),oppositeSideMargin:m()-2}},e.data.title&&!e.data.content&&(e.top.minHeight=43),e.bottom={},e.bottom.stepIndexMarginTop=10,o.isDefined(e.buttons)&&0!=e.buttons.length||(e.stepIndexHeight-=8,e.bottom.stepIndexMarginTop-=4),e.stepIndexHeight+="px",e.bottom.poweredByHeight+="px",e.bottom.poweredByText="By WalkMe",e.xBtn={marginTop:g.balloonSettings().BalloonBorderWidth+"px",marginHorizental:parseInt(g.balloonSettings().BalloonBorderWidth)+4+"px"};var t=g.balloonSettings().BalloonBorderWidth-4;t<0&&(t=0),e.border.side={size:t+"px"},e.shadow=a.calculate(g.balloonSettings().ShadowType,g.balloonSettings().ShadowLevel,g.balloonSettings().ShadowColor),e.isNotIe7=!s.isIEBrowser(7),function r(){g.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}(),p.setTemplateData(e),e.buttonsHtml=function i(e){return c.to_html(function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,1455,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 21px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,289,520,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("padding: 0; min-width: 60px; height: auto; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; border: 2px solid "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; -webkit-box-shadow: "),n.b(n.v(n.d("colors.btnShadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.d("colors.btnShadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.d("colors.btnShadow",e,t,0))),n.b(";")}),e.pop()),n.s(n.f("normal",e,t,1),e,t,0,553,864,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,721,737,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 5px; padding-right: 5px; "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,812,842,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 0 0 0 4px; padding: 0;")}),e.pop())}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,884,1136,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 3px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px; "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,1064,1114,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 0 0 0 4px; background: "),n.b(n.v(n.d("colors.minorBg",e,t,0))),n.b(";")}),e.pop())}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 10px; position:relative; color:inherit; "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,1341,1399,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("padding: 6px 14px 5px; font-size: 12px; line-height: 12px;")}),e.pop()),n.b("'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1577,2293,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1600,2270,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top:6px; margin-bottom:6px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; "),n.s(n.f("noButtons",e,t,1),e,t,0,1837,1888,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.s(n.f("stepIndexText",e,t,1),e,t,0,1855,1870,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("display: none; ")}),e.pop())}),e.pop()),n.b(" "),n.s(n.f("isCaliforniaStyle",e,t,1),e,t,0,1925,1982,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 10px 0 0 0;"),n.s(n.f("noButtons",e,t,1),e,t,0,1958,1968,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("margin: 0;")}),e.pop())}),e.pop()),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>"),n.b(n.v(n.d("bottom.poweredByText",e,t,0))),n.b("</a></div>")}),e.pop())}),e.pop())),r.fl()},e)}(e),e.designTemplateCssClass=u.get(h,l.templateEntityType.balloon),e.setLineHeight=!(h&&f.shouldResetLineHeight(h.Settings));var n=h&&d.get(h.DesignTemplateId,l.templateEntityType.balloon);return n&&(e.customHtml=c.to_html(n,e)),e}),r.Override("createHtmlTemplate",function(){return t}),function i(){r.ExtendsInstance(Cr.create("BaseBalloon",e)),g=r._base,h=e.entity}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, Mustache, DesignTemplateHtmlGetter, DynamicFontSizeService, BalloonStyleProvider"),Cr.register("BalloonVM1").asCtor(function cr(r,i,n,o,a,e){var s,t=Cr.create("WalkmeOOP",this),u=t.Prop.Public("contentMargin",15);t.Override("manipulationsForInlineCss",function(e){if(!o.isIE(8,"lte")){var t=s.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}}),t.Override("createTemplateData",function(){var e=s.createTemplateData();return e.outerDiv=s.getCustomDivHtml("inner-div"),e.title=s.getCustomDivHtml("title"),e.colors.xBtn=s.balloonSettings().XButtonColor,e.colors.stepInfo=s.balloonSettings().StepInfoColor,e.colors.separator=s.balloonSettings().SeparatorColor,e.stepIndexHeight=46,e.top={minHeight:57,textAlign:e.direction.side,title:{paddingTop:12},content:{sideMargin:u(),oppositeSideMargin:u()-2}},e.data.title&&!e.data.content&&(e.top.minHeight=43),e.bottom={},e.bottom.stepIndexMarginTop=10,r.isDefined(e.buttons)&&0!=e.buttons.length||(e.stepIndexHeight-=8,e.bottom.stepIndexMarginTop-=4),e.stepIndexHeight+="px",e.bottom.poweredByHeight+="px",e.xBtn={marginTop:s.balloonSettings().BalloonBorderWidth-5+"px",marginHorizental:parseInt(s.balloonSettings().BalloonBorderWidth)+4+"px"},e.shadow=i.calculate(s.balloonSettings().ShadowType,s.balloonSettings().ShadowLevel,s.balloonSettings().ShadowColor),e.isNotIe7=!o.isIEBrowser(7),function t(){s.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}(),e.buttonsHtml=function n(e){return a.to_html(function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,920,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 25px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 7px; padding-right: 7px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,704,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; float: left; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 12px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1042,1581,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1065,1558,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top: 11px; margin-bottom:6px; margin-right: 5px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},e)}(e),e}),t.Override("createHtmlTemplate",function(){return function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-vm1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,305,389,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,779,806,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1194,1715,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" border-radius: 20px; font-size: 23px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; padding-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 18px; padding-bottom: 6px; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" line-height: 30px; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size: 16px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2082,2468,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:13px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: hidden;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" padding: 3px 3px 3px 0; min-height:36px; background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" position: absolute; color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; left: 50%; transform: translateX(-65%); float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3616,3644,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()}}),function l(){t.ExtendsInstance(Cr.create("BaseBalloon",e)),s=t._base}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, Mustache"),Cr.register("BaseBalloonDrawer").asCtor(function dr(c,d,y,h,f,S,o,p,t,E,m,e,g,v,w,T,C,n){var b=["top","right","bottom","left"],r=["center","start","end"],i=Cr.create("WalkmeOOP",this),a=i.Prop.Protected("balloon"),s=i.Prop.Protected("balloonClass"),I=i.Prop.Protected("balloonSettings"),_=i.Prop.Protected("minWidth"),u=i.Prop.Protected("maxWidth"),A=i.Prop.Protected("defaultMaxWidth"),P=(i.Prop.Public("minPopupWidth"),i.Prop.Public("maxPopupWidth"),i.Prop.Public("arrowHeight")),k=i.Prop.Public("arrowBaseWidth"),l=i.Prop.Public("hasBorder"),D=i.Prop.Public("shouldScrollToElement"),x=i.Prop.Public("balloonTitleSelector"),N=i.Prop.Public("balloonContentSelector"),O=i.Virtual.Protected("addBalloonDiv"),L=i.Virtual.Public("loadResources",function(e,t){t&&t()}),F=i.Virtual.Protected("getArrowsColors");i.Virtual.Public("fixSize",function(e,t,n,r,i,o,a){var s=function c(e,t){var n;(!e||e<=0)&&(n=0,mtjQuery.each(mtjQuery("[width], [style*=width], [style*=WIDTH]",t),function(e,t){mtjQuery(t).width()>n&&(n=mtjQuery(t).width())}));return n}(r,e);e.css("visibility","hidden"),e.show();var u=function d(e){return{height:e.height(),width:e.width()}}(e),l=M(e,t,n,function f(e){return!e||e<=0?A():e}(r),a,u,s,o);return l.height=R(e,i,l.height),function p(e,t){e.width(t.width+"px"),e.height(t.height+"px")}(e,l),l});var M=i.Virtual.Protected("fixWidth",function M(e,t,n,r,i,o,a,s){var u=g.send(S.EVENTS.BalloonLogs.CalculateBalloonWidthCalled,{settings:s,shouldReturnResult:!0});if(u==undefined){h.isQuirksMode(t[0])&&(o.width=X(e));var l=i!=undefined?i:_();o.width<l&&(o.width=l)}else o.width=u;return!function c(e,t,n){return t&&(e<t||n<t)}(o.width,a,r)?o.width>r&&(o=B(r,e,u,r)):o=B(a,e,u,r),u==undefined&&(e.css("width",e.width()+1+"px"),o.width=e.width(),o.height=e.height()),o}),R=i.Virtual.Protected("fixHeight",function R(e,t,n){return t&&0<t&&(n=t),n}),B=i.Virtual.Protected("handleWiderElement",function B(e,t){return mtjQuery(".walkme-custom-balloon-content",t).css("width",e+"px"),t.css("width","auto"),{width:t.width(),height:t.height()}}),U=i.Virtual.Protected("generateHtmlParams",function U(e){return{balloonParams:{balloonSettings:I(),balloonData:e.balloonData,userGuid:e.userGuid,settings:e.settings,end:e.end,stepType:e.stepType,contentDiv:e.contentDiv},buttonsParams:{nextButton:e.nextButton,doneButton:e.doneButton,backButton:e.backButton,submitButton:e.submitButton}}}),V=i.Public("generateHtml",function V(e){var t=U(e);return a(Cr.create(s(),t.balloonParams)),a().initButtons(t.buttonsParams),a().generateHtml()}),W=(i.Public("manipulationsForInlineCss",function(e){return a().manipulationsForInlineCss(e)}),i.Public("generateBalloonDiv",function(e,t,n,r,i,o,a,s,u,l,c){var d=C.parseElementAsJquery(V(o)),f={html:d,type:v.ENTITY_TYPE.step};w.removeIfShould(d,o.settings),(c=c||{}).bbCodeParserVersion=o.settings.v,m.replace(f,u||[],l||{},c);var p=h.isIE(7)?d[0].outerHTML:d,g=O(p,e,t);return H(g,n,r,i,o,a,s),g}),i.Virtual.Protected("generateIdForBalloon",function W(e){return"walkme-balloon-"+e})),j=i.Virtual.Protected("generateClassesForBallon",function j(e,t,n,r,i){return["walkme-custom-"+n+"-"+e,"walkme-custom-"+r+"-"+t,"walkme-custom-"+(i==re.STEP_TYPE.Popup?"popup":"simple")+"-step"]}),G=i.Virtual.Protected("generateClassesForArrows",function G(e,t,n,r){return["walkme-custom-balloon-arrow","walkme-custom-balloon-arrow-"+t,"walkme-custom-balloon-arrow-"+e,"walkme-custom-balloon-arrow-"+e+"-"+t,"walkme-custom-"+r+"-"+n]}),H=i.Virtual.Protected("addIdentifiers",function H(e,t,n,r,i,o,a){e.attr("id",W(n));for(var s=j(t,n,a,o,r),u=0;u<s.length;u++)e.addClass(s[u]);var l=f.getCurrentLanguage()||"default";e.addClass("walkme-custom-language-"+l),d.addBrowserSpecificClasses(e),function c(e,t){var n=t.balloonData;n.title||e.addClass("walkme-custom-no-title");n.content||n.customHtml&&(n.customHtml.inner||n.customHtml.outter)||e.addClass("walkme-custom-no-content");var r=t.settings.customButtons&&0<t.settings.customButtons.length;t.settings.popupStepButtons&&0<t.settings.popupStepButtons.length||r||t.nextButton||t.backButton||t.doneButton||t.submitButton||e.addClass("walkme-custom-no-buttons")}(e,i)}),Y=i.Virtual.Protected("addArrowClasses",function Y(e,t,n,r,i){for(var o=G(t,n,r,i),a=0;a<o.length;a++)e.addClass(o[a])}),Q=(i.Virtual.Public("fixArrows",function(){}),i.Virtual.Public("fixQuirksMode",function(){}),i.Virtual.Protected("finalizeArrowsPosition",function(){})),z=(i.Virtual.Public("drawArrows",function(e,t,n,r,i,o,a){var s=function g(e,t,n,r,i){var o,a;if(e.positionType==S.POSITION_TYPE.Top||e.positionType==S.POSITION_TYPE.Bottom){var s=e.left+t.width;o=Z(e.left,s,k(),e.positionOffset,n.width,n.left,i.offset().left),a=e.positionType==S.POSITION_TYPE.Top?e.top+t.height:e.top-P()}else if(e.positionType==S.POSITION_TYPE.Left||e.positionType==S.POSITION_TYPE.Right){var u=e.top+t.height;a=Z(e.top,u,k(),e.positionOffset,n.height,n.top,i.offset().top),e.positionType==S.POSITION_TYPE.Left?(o=e.left+t.width,h.isQuirksMode(r[0])&&(o-=2)):o=e.left-P()}return{top:a,left:o}}(n,r,i,e,o),u={top:s.top,left:s.left};n.positionType==S.POSITION_TYPE.Top&&(u.top=s.top,s.top=s.top-I().BalloonBorderWidth+1,u.left=s.left-1),n.positionType==S.POSITION_TYPE.Bottom&&(s.top=s.top+I().BalloonBorderWidth-1,u.top=s.top-I().BalloonBorderWidth,u.left=s.left-1),n.positionType==S.POSITION_TYPE.Left&&(h.isQuirksMode(e[0])?(s.left=s.left-I().BalloonBorderWidth+1,u.left=s.left+I().BalloonBorderWidth):(s.left=s.left-I().BalloonBorderWidth+1,u.left=s.left+I().BalloonBorderWidth-1),u.top=s.top-1),n.positionType==S.POSITION_TYPE.Right&&(s.left=s.left+I().BalloonBorderWidth-1,u.left=s.left-I().BalloonBorderWidth,u.top=s.top-1),Q(n.positionType,s,u);var l,c=null,d=b[n.positionType],f=F(d);0<I().BalloonBorderWidth&&(c=$(u,n,o,f.outterArrow,P()+1,P()+1),Y(c,"outer",d,t,a)),l=$(s,n,o,f.innerArrow,P(),P()),Y(l,"inner",d,t,a);var p=[l];return c&&p.push(c),p}),i.Protected("getBalloonBasicWidth",function(e,t,n){var r=0;r=h.isQuirksMode(t[0])?X(e):e.width();var i=0;return i=n||n<=0?u():n,r<_()&&(r=_()),i<r&&(r=i),r}),i.Public("setConfiguration",function z(e){t.fixConfiguration(e),I(e),L()}));function q(){return P()+1}function K(e){var t=e[0],n=t.getBoundingClientRect(),r=y.getElementDocument(e),i=o.getOffsetRect(t,r,window);return o.getElementBoundsWithRectAndOffset(n,i)}function J(){var e=mtjQuery(document);return e.height=e.height(),e.width=e.width(),e.top=0,e.left=0,e}function X(e){var t=mtjQuery(x(),e).text(),n=0,r=0,i=0,o=mtjQuery(N(),e);if(0<o.length){for(var a=o.html().replace(/<br*">/g,"< >").split("< >"),s=0;s<a.length;s++){var u=a[s].replace(/(<([^>]+)>)/gi,"").length;i<u&&(i=u)}var l=mtjQuery(N()+" span",e);r=0<l.length?parseInt(l.css("font-size").replace(/px/,"")):parseInt(o.css("font-size").replace(/px/,""))}var c=mtjQuery(x()+" span",e);n=0<c.length?parseInt(c.css("font-size").replace(/px/,"")):parseInt(mtjQuery(x(),e).css("font-size").replace(/px/,""));var d=0;return d=t.length*n>i*r?t.length*n:i*r,d*=parseFloat(y.getSettingsValue(p.get().Settings,"quirksModeFactor",.5))}function $(e,t,n,r,i,o){var a=function c(e,t,n,r,i,o){return{width:e,height:t,point_direction:n||0,angle:r||0,color:i||"red",background:o||"transparent"}}(i,o);a.color=r;var s=e.top,u=e.left;t.positionType,S.POSITION_TYPE.Bottom,t.positionType,S.POSITION_TYPE.Right,a.point_direction=t.positionType,a.angle=function d(e,t){var n=.5;return e==S.POSITION_OFFSET.Start?n=1:e==S.POSITION_OFFSET.End&&(n=0),2!=t&&3!=t||(n=1-n),n}(t.positionOffset,a.point_direction);var l=function f(e,t){var n=mtjQuery(t.createElement("div"));n.css("display","block"),n.css("width","0"),n.css("height","0"),n.css("border",e.width+"px solid transparent"),n.css("border-"+b[e.point_direction]+"-color",e.color),n.css("line-height","0"),n.css("border-"+b[(e.point_direction+2)%4],"0px"),3==e.point_direction||1==e.point_direction?n.css("border-style","outset solid solid solid"):n.css("border-style","solid outset solid solid");return n}(a,n[0].ownerDocument);return l.css({visibility:"hidden",top:s+"px",left:u+"px"}),mtjQuery(n.append(l)),l}function Z(e,t,n,r,i,o,a){var s;return r==S.POSITION_OFFSET.Center?s=(t+e-n)/2:r==S.POSITION_OFFSET.Start?s=o+(i-n)/2:r==S.POSITION_OFFSET.End?s=o+(i-n)/2:c.error(null,"incorrect offset type: "+r),T.isFeatureEnabled(S.FEATURES.FixArrowsOutsideElement)&&(s=function u(e,t,n,r,i){var o=t+n-i<e;if(e<t-i||o){return t+n/2-i-r/2}return e}(s,o,i,n,a)),function l(e,t,n,r){var i=n-r;if(i<e)return i;if(e<t)return t;return e}(s,e,t,n)}function ee(e,t,n,r){return{top:e.top-t.height-n>r.top,right:e.right+t.width+n<r.width+r.left,bottom:e.bottom+t.height+n<r.height+r.top,left:e.left-t.width-n>r.left}}i.Public("decideWhereToPopForCaptureBalloon",function(e,t,n,r){try{var i={width:n,height:r},o=J(),a=K(e),s=q();return te(a,i,t,s,o,!0)}catch(u){c.error(u)}}),i.Public("getPossiblePositionsForCaptureBalloon",function(e,t,n){try{var r={width:t,height:n},i=J();return ee(K(e),r,q(),i)}catch(o){c.error(o)}}),i.Public("addPositionClass",function(e,t){var n="walkme-custom-position-"+b[t.positionType];n+=" walkme-custom-offset-"+r[t.positionOffset],e.addClass(n)});var te=i.Virtual.Public("decideWhereToPop",function te(e,t,n,r,i,o){var a,s,u=e.left+e.width/2,l=e.top+e.height/2,c=ee(e,t,r,i),d=u-t.width/2>i.left,f=u+t.width/2<i.width+i.left,p=l-t.height/2>i.top,g=l+t.height/2<i.height+i.top,h=0;n==S.POSITION_TYPE.Top||n==S.POSITION_TYPE.Bottom?(d&&f?s=S.POSITION_OFFSET_TYPE.HorizontalCentered:d?f||(s=S.POSITION_OFFSET_TYPE.SnapToViewportRight):s=S.POSITION_OFFSET_TYPE.ToRight,a=n==S.POSITION_TYPE.Top?S.POSITION_TYPE.Top:S.POSITION_TYPE.Bottom,o&&(a=c.top&&n==S.POSITION_TYPE.Top||n==S.POSITION_TYPE.Bottom&&!c.bottom?S.POSITION_TYPE.Top:S.POSITION_TYPE.Bottom)):n!=S.POSITION_TYPE.Right&&n!=S.POSITION_TYPE.Left||(g&&p?s=S.POSITION_OFFSET_TYPE.VerticallyCentered:g&&p||(s=S.POSITION_OFFSET_TYPE.Below,h=2-P()),a=n==S.POSITION_TYPE.Left?S.POSITION_TYPE.Left:S.POSITION_TYPE.Right,o&&(a=c.left&&n==S.POSITION_TYPE.Left||n==S.POSITION_TYPE.Right&&!c.right?S.POSITION_TYPE.Left:S.POSITION_TYPE.Right));var m=E.getOrientationByName(a),v=E.getOffsetByName(s);return{top:Math.ceil(y.defaultValue(m.getTopPosition(e,t,r,i),v.getTopPosition(e,t,r,i)+h)),left:Math.ceil(y.defaultValue(m.getLeftPosition(e,t,r,i),v.getLeftPosition(e,t,r,i)+h)),positionType:m.type,positionOffset:v.type}});(function ne(){u(400),A(400),l(!0),x(".walkme-custom-balloon-title"),N(".walkme-custom-balloon-content"),D(!0),z(n.balloonSettings)}).apply(null,arguments)}).asProto().dependencies("Logger, UiUtils, CommonUtils, HostData, LanguageManager, Consts, PositionHelper, SiteConfigManager, BalloonUtils, BalloonOrientationProvider, PlaceholdersReplacer, wmjQuery, MessageSender, SharedConsts, XButtonRemover, FeaturesManager, DomManager"),Cr.register("BalloonDrawerV3").asCtor(function fr(r,i,o,a,e,t,s,u,l,n){var c,d,f=Cr.create("WalkmeOOP",this);function p(e,t){e.css("width",t+"px")}function g(){return c.balloonSettings().BorderColor}f.Override("addBalloonDiv",function(e,t){var n=i.createElementInDocument(e,t[0].ownerDocument);return a.setLangAttribute(n),n.css({display:"none",top:0}),n}),f.Override("loadResources",function(e,t){var n=c.balloonSettings().FontsData;n?o.fonts(n,e,t,t):t&&t()}),f.Override("getArrowsColors",function(e){var t=c.balloonSettings(),n=t.Color,r=g(),i=t.direction;switch(e){case"bottom":n=t.Color;break;case"top":n=t.BalloonColor2;break;case"left":"ltr"==i||l.isCaliforniaBalloonStyle()?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor);break;case"right":"rtl"==i||l.isCaliforniaBalloonStyle()?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor)}return{innerArrow:n,outterArrow:r}}),f.Override("fixArrows",function(e){e.balloonSettings=c.balloonSettings(),e.arrowBaseWidth=c.arrowBaseWidth(),e.outerArrowColor=g(),r.fixArrows(e)}),f.Override("fixQuirksMode",function(e){Tr(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",e).hide();var t=Tr(".walkme-custom-powered-by-div",e);if(0<t.length){var n=t.css("margin-bottom"),r=t.css("margin-top");t.css("margin-bottom","0px").css("margin-top","0px"),t.css("padding-bottom",n).css("padding-top",r)}}),f.Override("finalizeArrowsPosition",function(e,t,n){r.finalizeArrowsPosition(e,t)}),f.Override("generateHtmlParams",function(e){var t=c.generateHtmlParams(e);return t.balloonParams.entity=d,t}),f.Override("handleWiderElement",function(e,t,n,r){var i,o=mtjQuery(".walkme-custom-balloon-content",t),a=mtjQuery(".walkme-custom-balloon-title",t);return a.css("width","10px"),n!=undefined?p(t,n):e<=r?p(t,r):(0<o.length?p(o,e):p(a,e),t.css("width","auto"),i=t.width(),p(t,i)),a.css("width","auto"),{width:t.width(),height:t.height()}}),f.Override("generateClassesForArrows",function(e,t,n,r){var i=c.generateClassesForArrows(e,t,n,r),o=s.get(d,u.templateEntityType.balloon);return o&&i.push(o),i}),function h(){f.ExtendsInstance(Cr.create("BaseBalloonDrawer",n)),c=f._base;var e=n.balloonSettings.minPopupWidth?n.balloonSettings.minPopupWidth+"px":"300px";l.isCaliforniaBalloonStyle()&&(e=l.getMinPopupWidth()+"px"),c.balloonClass("BalloonV3"),c.minWidth(190),c.minPopupWidth(e),c.arrowHeight(10),c.arrowBaseWidth(18),c.hasBorder(!1),d=n.entity}.apply(null,arguments)}).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, ContainerAppender, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, BalloonStyleProvider"),Cr.register("BalloonDrawerVM1").asCtor(function pr(r,i,o,a,e,s,u,l){var c,t=Cr.create("WalkmeOOP",this);t.Override("addBalloonDiv",function(e,t){var n=i.createElementInDocument(e,t[0].ownerDocument);return s.isFeatureEnabled("accessibility")&&(focusableElements=n.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),i.addTabIndex(focusableElements),focusableElements.on("focus",function(){Tr(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){Tr(this).css({outline:"none","outline-offset":"0px"})})),a.setLangAttribute(n),n.css("display","none"),n}),t.Override("loadResources",function(e,t){var n=c.balloonSettings().FontsData;n?o.fonts(n,e,t,t):t&&t()}),t.Override("getArrowsColors",function(e){var t=c.balloonSettings(),n=(t.Color,d());return{innerArrow:"top"==e?t.BalloonColor2:t.Color,outterArrow:n}}),t.Override("fixArrows",function(e){e.balloonSettings=c.balloonSettings(),e.arrowBaseWidth=c.arrowBaseWidth(),e.outerArrowColor=d(),r.fixArrows(e)}),t.Override("fixQuirksMode",function(e){Tr(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",e).hide();var t=Tr(".walkme-custom-powered-by-div",e);if(0<t.length){var n=t.css("margin-bottom"),r=t.css("margin-top");t.css("margin-bottom","0px").css("margin-top","0px"),t.css("padding-bottom",n).css("padding-top",r)}}),t.Override("finalizeArrowsPosition",function(e,t,n){r.finalizeArrowsPosition(e,t)}),t.Override("handleWiderElement",function(e,t){var n=function o(){return function e(){return l&&l.entity&&l.entity.Settings&&l.entity.Settings.lv}()>u.balloonLogicVersion.lv1||s.isFeatureEnabled("mobileWebAutoBalloonWidth")}()?"auto":e+"px",r=mtjQuery(".walkme-custom-balloon-content",t),i=mtjQuery(".walkme-custom-balloon-title",t);return i.css("width","10px"),r.css("width",n),t.css("width","auto"),i.css("width","auto"),{width:t.width(),height:t.height()}});function d(){return c.balloonSettings().ButtonBgColor}(function n(){t.ExtendsInstance(Cr.create("BaseBalloonDrawer",l));var e=l.balloonSettings.minPopupWidth?l.balloonSettings.minPopupWidth:300;(c=t._base).balloonClass("BalloonVM1"),c.minWidth(190),c.minPopupWidth(e),c.arrowHeight(10),c.arrowBaseWidth(18),c.hasBorder(!1),c.defaultMaxWidth(230)}).apply(null,arguments)}).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, FeaturesManager, SharedConsts"),Cr.register("BalloonDrawerFactory").asCtor(function gr(){this.get=function(e,t){var n="vm1"===e?"BalloonDrawerVM1":"BalloonDrawerV3";return Cr.create(n,t)},function e(){}.apply(null,arguments)}),Cr.register("ClickAndHoverAdder").asCtor(function hr(){function f(e,t,n){Tr(e).css(t,n)}this.addClickAndHover=function(e){var t=e.cssProperty,n=e.regularColor,r=e.hoverColor,i=e.clickColor,o=e.elemSelector,a=!1,s=e.balloonDiv.find(o);s.mouseenter(function u(e){a=!0,Tr(".walkme-click-and-hover:active")[0]==e.currentTarget?f(e.currentTarget,t,i):f(e.currentTarget,t,r)}),s.mouseleave(function l(e){a=!1,f(e.currentTarget,t,n)}),s.mouseup(function c(e){f(e.currentTarget,t,a?r:n)}),s.mousedown(function d(e){f(e.currentTarget,t,i)})},function e(){}.apply(null,arguments)}),Cr.register("ShadowCalculator").asCtor(function mr(i){var o=1,a=2;this.calculate=function(e,t,n){if(e==o)switch(t){case 0:return"1px 1px 3px 0px rgba(0, 0, 0, 0.2)";case 1:return"0px 0px 13px 0px rgba(0, 0, 0, 0.2)";case 2:return"0px 0px 13px 5px rgba(0, 0, 0, 0.2)"}else if(e==a){var r=i.hexToRgba(n,.6);switch(t){case 0:return"0px 0px 7px 0px rgba"+r;case 1:return"0px 0px 14px 0px rgba"+r;case 2:return"0px 0px 26px 5px rgba"+r}}},function e(){}.apply(null,arguments)}).dependencies("UiUtils"),Cr.register("BalloonPositionProvider").asCtor(function vr(c,o){function h(e,t,n){var r=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),i=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea);return{left:o.defaultValue(e.left,r),top:o.defaultValue(e.top,i),positionType:e.positionType,positionOffset:t.type}}function m(e,t,n){e.top=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.left=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.positionType=t.type}this.findBestPosition=function a(e,t,n,r,i){return function g(e,t){for(var n={},r=0;r<t.mainOrientations.length;r++){var i=t.mainOrientations[r];m(n,i,e);for(var o=0;o<t.offsets.length;o++){var a=t.offsets[o];if(a.isRelevant(n)){var s=h(n,a,e);if(s&&(u=s,void 0,c=(l=e).drawingArea.top<u.top,d=u.left+l.balloonSize.width<l.drawingArea.left+l.drawingArea.width,f=u.top+l.balloonSize.height<l.drawingArea.top+l.drawingArea.height,p=l.drawingArea.left<u.left,c&&d&&f&&p))return s}}}var u,l,c,d,f,p;return undefined}({elementBounds:e,balloonSize:t,marginFromElement:n,drawingArea:r},{mainOrientations:c.getOrderedDirections({lowPriorityDirection:i}),offsets:c.getOrderedOffsets()})},this.getPredefinedPosition=function d(e,t,n,r,i,o){var a={},s=c.getOrientationByName(i),u=c.getOffsetByName(o)||c.getOffsetByName(s.defaultOffset),l={elementBounds:e,balloonSize:t,marginFromElement:n,drawingArea:r};return m(a,s,l),h(a,u,l)}}).dependencies("BalloonOrientationProvider, CommonUtils"),Cr.register("BalloonOrientationProvider").asCtor(function yr(e,t){this.getOrderedDirections=function f(e){e=e||{};var t=u()?o:i;return l(c,t,e.lowPriorityDirection)},this.getOrderedOffsets=function p(){var e=u()?s:a;return l(d,e)},this.getOrientationByName=function g(e){return c[e]},this.getOffsetByName=function h(e){return d[e]};var n="Direction",r="rtl",i=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Right,e.POSITION_TYPE.Left],o=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Left,e.POSITION_TYPE.Right],a=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToRight,e.POSITION_OFFSET_TYPE.ToLeft],s=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToLeft,e.POSITION_OFFSET_TYPE.ToRight];function u(){var e=t.get();return e&&e[n]==r}function l(e,t,n){for(var r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return n!==undefined&&function o(e,n){e.sort(function(e,t){return e.type==n?1:t.type==n?-1:0})}(r,n),r}var c={};c[e.POSITION_TYPE.Top]={type:e.POSITION_TYPE.Top,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.top-t.height-n},getLeftPosition:function(e,t,n,r){return undefined}},c[e.POSITION_TYPE.Bottom]={type:e.POSITION_TYPE.Bottom,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.bottom+n},getLeftPosition:function(e,t,n,r){return undefined}},c[e.POSITION_TYPE.Right]={type:e.POSITION_TYPE.Right,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.right+n}},c[e.POSITION_TYPE.Left]={type:e.POSITION_TYPE.Left,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.left-t.width-n}};var d={};d[e.POSITION_OFFSET_TYPE.VerticallyCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return Math.ceil(e.top+e.height/2-t.height/2)},getLeftPosition:function(e,t,n,r){return undefined}},d[e.POSITION_OFFSET_TYPE.Above]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.bottom-t.height},getLeftPosition:function(e,t,n,r){return undefined}},d[e.POSITION_OFFSET_TYPE.Below]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.top},getLeftPosition:function(e,t,n,r){return undefined}},d[e.POSITION_OFFSET_TYPE.HorizontalCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return Math.ceil(e.left+e.width/2-t.width/2)}},d[e.POSITION_OFFSET_TYPE.ToRight]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.left}},d[e.POSITION_OFFSET_TYPE.ToLeft]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.right-t.width}},d[e.POSITION_OFFSET_TYPE.SnapToViewportRight]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return r.left+r.width-t.width-1}}}).dependencies("Consts, SiteConfigManager"),Cr.register("BalloonPositionVisibilityChecker").asCtor(function Sr(n,l,c,o){function d(e,t,n){var r=t+n,i=o.get();return e<t-i||r+i<e}this.isBalloonPositionVisibleRelativeToParents=function(e,t){if(l.isFeatureEnabled("disableIEVRTP"))return!0;if(function i(e){var t=e.css("position");return"absolute"==t||"fixed"==t}(e))return!0;var o=function u(e,t){var n=e.offset(),r=e.height(),i=e.width(),o={top:n.top,left:n.left};switch(t){case 0:o.left+=i/2;break;case 1:o.top+=r/2,o.left+=i;break;case 2:o.top+=r,o.left+=i/2;break;case 3:o.top+=r/2;break;default:c.error(new Error("Unknown balloon position"))}return o}(e,t),n=e.parents("div"),a=!1,s=!1,r=!f(n,function(e){e=mtjQuery(e);if(!l.isFeatureEnabled("disableAbsRTP")&&"absolute"==e.css("position"))return a=!0;if(!l.isFeatureEnabled("disableFixRTP")&&"fixed"==e.css("position"))return s=!0;var t=function r(e){return"auto"==e||"scroll"==e||"hidden"==e}(e.css("overflow")),n=function i(e,t){var n=t.offset();return d(e.top,n.top,t.outerHeight())||d(e.left,n.left,t.outerWidth())}(o,e);return t&&n});return a||s||r};var f=function f(e,t){return null!=n.firstMatch(e,t)}}).dependencies("CommonUtils, FeaturesManager, Logger, ElementBoundsBufferGetter"),Cr.register("ElementBoundsBufferGetter").asCtor(function Er(n){this.get=function r(){var e=n.get().Custom,t=e&&e.elementBoundsBuffer;return t==undefined?0:Number(t)}}).dependencies("SiteConfigManager"),Cr.register("PopupBalloonDisplayer").asCtor(function wr(f,p,g,h,m,v,y,S,E){this.showSpecialPopupBalloon=function w(e,t,n,r,i,o,a,s){var u=f.get(!0),l=E.clone(n);i&&(l.displayX=!1);var c=p.get().BalloonSettings;c=E.clone(c),Tr.extend(c,o);var d=Cr.create("Balloon",{element:u,forceEmbedBalloonInIframe:!1,positionHelper:g,fixedSize:{width:t,height:0},stepSettings:l,htmlContent:e.htmlContent,text:{title:e.title||"",content:e.text||"",subText:e.subText||""},data:{type:h.STEP_TYPE.Popup},configuration:c,logger:m,drawer:y.getBalloonDrawer(c,s),siteConfig:p.get(),bindButtonsFunc:a?undefined:S.addButtonEventsToBalloon});return new ct(function(n){d.Show(!1,function(){var e=mtjQuery(d.getBalloonDiv());if(e.removeClass("walkme-custom-step-undefined"),mtjQuery("*",e).removeClass("walkme-custom-step-undefined"),e.removeClass("walkme-custom-walkthru-undefined"),mtjQuery("*",e).removeClass("walkme-custom-walkthru-undefined"),o&&o.surveyId){var t=o.surveyId;e.attr("id","walkme-survey-balloon-"+t),"california"===p.get().BalloonSettings.BalloonStyle&&(o.minPopupWidth=444)}r(e,c),n(d)}),v.add(d)})}}).dependencies("PopupStepElementProvider, SiteConfigManager, PositionHelper, Consts, Logger, BalloonsContainer, BalloonDrawerProvider, BalloonButtonsEventsBinder, JsonUtils"),Cr.register("BalloonDrawerProvider").asCtor(function Ir(a,s,u){this.getBalloonDrawer=function l(e,t){var n=function o(e){var t=u.clone(e),n=a.get();n&&(t.direction=n.Direction,t.showPoweredBy="1"==n.PoweredByLink,t.showPoweredByFormat=n.IsDisplayPoweredBy);return t}(e),r={balloonSettings:n,entity:t},i=n.BalloonVersion;return s.get(i,r)}}).dependencies("SiteConfigManager, BalloonDrawerFactory, JsonUtils"),Cr.register("BalloonButtonsEventsBinder").asCtor(function _r(n,r,i,o,a,s){this.addButtonEventsToBalloon=function u(e,t){n.bind(e,null,t),e.on("click mousedown mouseup",function(e){o.isFeatureEnabled(a.FEATURES.ShadowRootsInspector)||s.wrapWithEvent(e)})},this.attachBalloonXButtonClickEvent=function t(e){mtjQuery(".walkme-action-close, .walkme-action-cancel",e).click(function(e){!function n(e){var t={ClickEvent:e};i.raiseEvent("UserStoppedWalkthru",t),r.releaseBalloons()}(e)})}}).dependencies("BBCodeEventsBinder, LibDestroyer, CommonEvents, FeaturesManager, Consts, StopPropagationWrapper"),Cr.register("XButtonDisplayChecker").asCtor(function Ar(t){this.shouldDisplayX=function n(e){return 1==t.getSettingsValue(e,"displayX",!0)||"True"==t.getSettingsValue(e,"displayX","True")||1==t.getSettingsValue(e,"displayX",1)}}).dependencies("CommonUtils"),Cr.register("BalloonsContainer").asCtor(function Pr(e){var t;function n(){t=[]}function r(){return t}this.add=function i(e){t.push(e)},this.removeAll=n,this.getAll=r,this.stopAll=function o(){e.executeParallel({objectsArray:r(),functionsToExecute:[function(e,t){e.stop(),t&&t()}]})},function a(){n()}()}).dependencies("CommonUtils"),Cr.register("BalloonPositionCheckSettingsGetter").asCtor(function kr(t,n){this.get=function r(){var e=t.get();return e.Custom&&e.Custom.BalloonPositionCheckSettings||{positionChangePixelsThreshold:n.DEFAULT_CHANGE_PIXELS_THRESHOLD}}}).dependencies("SiteConfigManager,Consts"),Cr.register("IconsFilterer").asCtor(function Dr(e){var t;this.getById=function r(n){var e=Tr(t()).filter(function(e,t){return t.Id==n});return e?e[0]:null},function n(){t=e.getImages}()}).asProto(),Cr.register("CustomImagesProvider").dependencies("IconTemplates").asFunction(function(e){return Cr.create("IconsFilterer",{getImages:function(){return e.customImages}})}),Cr.register("HtmlShapesProvider").dependencies("IconTemplates").asFunction(function(e){return Cr.create("IconsFilterer",{getImages:function(){return e.htmlImages}})}),Cr.register("DocumentElementEventsBinder").asCtor(function xr(o){this.on=function a(e,t,n,r){if(n){n=[].concat(n);var i=Tr(e[0].ownerDocument);t=t||e;for(var o=0;o<n.length;o++)i.find(t).on(n[o],r)}},this.off=function s(e,t,n){if(n){n=[].concat(n);var r=o(e).getDocument();t=t||e;for(var i=0;i<n.length;i++)r.find(t).off(n[i])}}}).asProto().dependencies("wmjQuerySafe"),Cr.register("AuditTasksManager").asCtor(function Nr(r,i,o,a,s,u){this.auditTaskPlayed=function l(e,t){if(u.isEnabled()){var n=s.get(e.RelatedDeployableType).getById(e.RelatedDeployableId);r.postEvent(i.EVENT_SENDER_EVENT_TYPES.Play,{type:i.EVENT_SENDER_EVENT_APPS.Task,oId:e.Id,oName:e.Name,pId:"-1",aoId:n.Id,aoName:n.Name,aAppType:a.map(e.RelatedDeployableType),pInit:o.map(t)})}},function e(){}.apply(null,arguments)}).dependencies("EventSender, Consts, ReportInitiatorMapper, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, AuditingEnabledIndicator"),e.register([re.PLATFORM.Web,re.PLATFORM.Desktop],function(){Cr.register("screen").asInstance(screen)}),e.register(re.PLATFORM.MobileWeb,function(){Cr.register("screen").asCtor(A).dependencies("ExternalWalkMeConfig")}),Cr.register("ScreenSizeConditionFunctions").asCtor(function Or(){var t=Cr.get("screen");this.getFuncList=function(){return e},this.getFuncAssert=function(){return n},this.getAsyncFuncs=function(){return r};var e={widthMoreThan:function i(e){return t.width>e.funcArgs.WidthInput},widthLessThan:function o(e){return t.width<e.funcArgs.WidthInput},heightMoreThan:function a(e){return t.height>e.funcArgs.HeightInput},heightLessThan:function s(e){return t.height<e.funcArgs.HeightInput}},n=[],r=[]}).asSingleton().dependencies("screen"),Cr.register("WindowSizeConditionFunctions").asCtor(function Lr(){var t=Cr.get("win");function n(e,t,n){return t!=e.WindowSizeInput&&t>e.WindowSizeInput===n}this.getFuncList=function(){return e},this.getFuncAssert=function(){return r},this.getAsyncFuncs=function(){return i};var e={WindowSizeMoreThan:function o(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!0);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!0)}},WindowSizeLessThan:function a(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!1);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!1)}}},r=[],i=[]}).asSingleton().dependencies("win");var k=(D.prototype.getFuncList=function(){var n={};return Tr.safeEach(this.args,function(e,t){t&&t.getFuncList&&Tr.extend(n,t.getFuncList())}),n},D.prototype.getFuncAssert=function(){var n=[];return Tr.safeEach(this.args,function(e,t){t&&t.getFuncAssert&&Tr.extend(n,t.getFuncAssert())}),n},D.prototype.getAsyncFuncs=function(){var n=[];return Tr.safeEach(this.args,function(e,t){t&&t.getAsyncFuncs&&n.push.apply(n,t.getAsyncFuncs())}),n},D);function D(e,t,n,r){this.args=[];for(var i=0;i<arguments.length;i++)arguments[i]&&this.args.push(arguments[i])}Cr.register("ConditionFunctionsHandler").asCtor(k).asSingleton().dependencies("ScreenSizeConditionFunctions, WindowSizeConditionFunctions, HistoricalConditionFunctions, OnboardingConditionFunctions");var br=__webpack_require__(673).AsyncResult;Cr.register("SonarEventHandler").asCtor(function Fr(l,c,d,f,p){this.handleEvent=function n(r,i,o,a,s){function e(e){if(c.customerLog("An event was fired for condition checker result. (event:'"+i+"', element specified below) ",3),c.customerLog(r[0],3),!f.send("SonarEventRaised",{event:e})){if(l.isFeatureEnabled("verifySonarAfterEvent")){var t=a(),n=e.srcElement||e.target;if(!t||0<t.length&&n&&!t.is(n))return c.customerLog("triggered element does not match condition selector",5),void o.setValue(!1)}s&&s[e.type]&&!s[e.type](e)||d.wrapSession(function(){o.setValue(!0)})}}(function u(e,t,n){if(c.customerLog("Listening to event on element. (event:'"+t+"', element specified below) ",5),c.customerLog(e,5),e){var r=h(t,g);p.bind(e,r,n)}})(r,i,e),o.onResourceClean(function(){t(r,i,e)})},this.unbindEvent=t;var g=".mtCond";function t(e,t,n){try{if(c.customerLog("Stopped listening for event in condition checker result. (event:'"+t+"', element specified below) ",5),c.customerLog(e,5),e){var r=h(t,g);p.unbind(e,r,n)}}catch(i){}}function h(e,t){return e.replace(/ /g,t+" ")+t}}).dependencies("FeaturesManager, Logger, ElementFinder, MessageSender, EventBinder"),Cr.register("ConditionFunctions").asCtor(function Mr(r,i,o,t,n,e,a,c,s,u,l,d,f,p,g,h,m,v,y,S,E,w,T,C,b){var I=this,_={TRUE:0,FALSE:1,CANNOT_ASSERT:2},A="jQuery",P="SelectedElement",k="Element",D="click mouseup mousedown keydown",x={keydown:C},N=function N(){return{Id:-1,ElementDescription:"",StepIndex:-1,ConfigurationId:"1",Configuration:null,StepSensitivity:1,Type:-1,Settings:{},Duration:4,Delay:0}};function O(e,t){return o.isBigger(e,t)}function L(e,t){return o.isSmaller(e,t)}function F(e,t){return o.isLike(e,t)}function M(e,t){var n;try{t.regexText&&(n=new RegExp(t.regexText,t.regexFlags).exec(e))}catch(r){}return null!=n}function R(e){var t=e.split(":");return 60*Number(t[0])+Number(t[1])}function B(e){var t=new RegExp("[ \t"+String.fromCharCode(160)+"\r\n\x0B\f]+","gi");return e=e.replace(t," "),e=Tr.trim(e)}function U(e){h.customerLog("jQuery find element for condition",5);var t=i.findElementsByjQueryComplexSelector(e.jQuerySelector);return h.customerLog(t,5),0===t.length&&(t=!1),t}function V(e,t,n){return c(t,e.pollingInterval,function(){return U(e.funcArgs)},n)}this.getElementTextForEditor=function(e){var t=w.secureEvalJSON(e);return I.getElementText(t)},this.getElementStrength=function(e){var t=pe(w.secureEvalJSON(e)),n={score:-1};if(r.findElement(t,null,n))return n.score},this.getElementText=function(e){var t=pe(e),n=r.findElement(t,!1,undefined,undefined,undefined,e.ownerChain);return!1!==n&&o.checkElementText(Tr(n))};var W=function W(e){return V(e=Tr.extend(e,{pollingInterval:-1}),"hover")},j=function j(e){return V(e,"hover")},G=function G(e){return V(e=Tr.extend(e,{pollingInterval:-1}),D,x)},H=function H(e){return V(e,D,x)},Y=function Y(e){return V(e=Tr.extend(e,{pollingInterval:-1}),"swipe")},Q=function Q(e){return V(e,"swipe")},z=function z(e){return 0<i.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},q=function q(e){return 0==i.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},K=function K(e){return i.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>parseInt(e.funcArgs.jQueryLength)},J=function J(e){return i.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length<parseInt(e.funcArgs.jQueryLength)},X=function X(e){return i.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length==parseInt(e.funcArgs.jQueryLength)},$=function $(e){return i.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length!=parseInt(e.funcArgs.jQueryLength)},Z=function Z(e){var t=new Date(f.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t-n==0},ee=function ee(e){return!Z(e)},te=function te(e){var t=new Date(f.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t<=n},ne=function ne(e){var t=new Date(f.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n<=t},re=function re(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getDay()},ie=function ie(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getMonth()},oe=function oe(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getFullYear()},ae=function ae(e){var t=new Date;return 60*t.getHours()+t.getMinutes()>=R(e.funcArgs.TimeInput)},se=function se(e){var t=new Date;return 60*t.getHours()+t.getMinutes()<=R(e.funcArgs.TimeInput)},ue=function ue(e){return T.processUserUrl(e.funcArgs.UrlInput)==T.processSiteUrl(p.getCurrentLocation())},le=function le(e){return!ue(e)},ce=function ce(e){return 0<=T.processSiteUrl(p.getCurrentLocation()).indexOf(T.processUserUrl(e.funcArgs.UrlInput))},de=function de(e){return!ce(e)};function fe(e){return"boolean"==typeof e?e:1===e||0!==e&&("string"==typeof e?"true"==e.toLowerCase()||"1"==e||"false"!=e.toLowerCase()&&"0"!=e&&undefined:undefined)}function pe(e){var t=N();return e.IdentifySettings?(t.ElementDescription=w.secureEvalJSON(w.toJSON(e.IdentifySettings.ElementDescription)),t.IsIgnoreText=e.IdentifySettings.IgnoreText===undefined?fe(e.IdentifySettings.IsIgnoreText):parseInt(e.IdentifySettings.IgnoreText),t.StepSensitivity=e.IdentifySettings.Sensitivity===undefined?parseInt(e.IdentifySettings.StepSensitivity):parseInt(e.IdentifySettings.Sensitivity),t.IsIgnoreId=e.IdentifySettings.IgnoreId===undefined?fe(e.IdentifySettings.IsIgnoreId):parseInt(e.IdentifySettings.IgnoreId),t.IgnorePosition=fe(e.IdentifySettings.IgnorePosition),t.IsIdentifyByText=fe(e.IdentifySettings.IsIdentifyByText),t.IgnorePageIdentification=fe(e.IdentifySettings.IgnorePageIdentification),t.IsValidPageId=fe(e.IdentifySettings.IsValidPageId),t.filter=e.IdentifySettings.filter!==undefined?parseInt(e.IdentifySettings.filter):undefined,t.Settings.filter=e.IdentifySettings.Settings&&e.IdentifySettings.Settings.filter!==undefined?parseInt(e.IdentifySettings.Settings.filter):undefined,e.IdentifySettings.ElementDescription&&e.IdentifySettings.ElementDescription.p&&(t.IsJquerySelector=fe(e.IdentifySettings.IsJquerySelector),t.JquerySelector=e.IdentifySettings.JquerySelector)):t.ElementDescription=w.secureEvalJSON(w.toJSON(e.ElementDescription)),t}var ge=function ge(e){return T.processUserUrl(e.funcArgs.UrlInput)==T.processSiteUrl(p.getCurrentUrlPath())},he=function he(e){return!ge(e)},me=function me(e){return 0<=p.getCurrentUrlPath().toLowerCase().indexOf(T.processUserUrl(e.funcArgs.UrlInput))},ve=function ve(e){return!me(e)},ye=function ye(e){return F(T.processSiteUrlForLikeOrRegex(p.getCurrentUrlPath()),T.processUserUrlForLike(e.funcArgs.UrlInput))},Se=function Se(e){return!ye(e)},Ee=function Ee(e){return M(T.processSiteUrlForLikeOrRegex(p.getCurrentUrlPath()),T.processUserUrlForRegex(e.funcArgs.UrlInput))},we=function we(e){return!Ee(e)},Te=function Te(e){var t=pe(e.funcArgs);return 0!=r.findElement(t,!1,undefined,undefined,undefined,e.funcArgs.ownerChain)};function Ce(e,t,n,r,i){function o(e){return e?a:a=i()}var a,s=new br.regular,u=c(t,r,function(){return o(!1)}),l=c(n,r,function(){return o(!0)});return u.onGotValue(function(){u.getValue()&&s.setValue(!0)}),l.onGotValue(function(){l.getValue()&&s.setValue(!1)}),s.onResourceClean(function(){u.cleanResources(),l.cleanResources()}),s}function be(e){var t=pe(e);h.customerLog("Find element for condition",5);var n=r.findElement(t,null,undefined,undefined,undefined,e.ownerChain);return h.customerLog(n,5),n}function Ie(e,t,n){return c(t,e.pollingInterval,function(){return be(e.funcArgs)},n)}var _e=function _e(e){return Ie(e=Tr.extend(e,{pollingInterval:-1}),"hover")},Ae=function Ae(e){return Ie(e,"hover")},Pe=function Pe(e){return Ie(e=Tr.extend(e,{pollingInterval:-1}),D,x)},ke=function ke(e){return Ie(e,D,x)},De=function De(e){return Ie(e=Tr.extend(e,{pollingInterval:-1}),"swipe")},xe=function xe(e){return Ie(e,"swipe")},Ne=function Ne(e){return function r(e,t,n){return Ce(e.funcArgs,t,n,e.pollingInterval,function(){return be(e.funcArgs)})}(e,"mouseenter","mouseleave")},Oe=function Oe(e){return!Te(e)},Le=function Le(e){var t=pe(e.funcArgs);return 0!=r.findElement(t,!0,undefined,undefined,undefined,e.funcArgs.ownerChain)},Fe=function Fe(e){return!Le(e)},Me=function Me(e){var t=pe(e.funcArgs),n=r.findElement(t,!1,undefined,undefined,undefined,e.funcArgs.ownerChain);return Tr(n).is(":checked")},Re=function Re(e){return!Me(e)};function Be(e,t){return M(e,t)}function Ue(e,t){var n=f.decodeHtml(t,["&",'"',"'",">","<"]);return!1!==e&&B(e.toLowerCase())==B(n.toLowerCase())}function Ve(e,t){return!Ue(e,t)}function We(e,t){var n=f.decodeHtml(t,["&",'"',"'",">","<"]);return!1!==e&&F(B(e),B(n))}function je(e){return Tr.grep(e.split(/\s+/),function(e){return 0!=e.length}).length}function Ge(e){return!(!e||""==Tr.trim(e))&&(!isNaN(e)||(!!/^[+-]?(?=.)(\d{1,3}(,\d{3})*)?(\.\d+)?$/.test(e)||(!isNaN(e.replace(",","."))||!!/^[+-]?(?=.)(\d{1,3}(\.\d{3})*)?(,\d+)?$/.test(e))))}function He(e){return E.isStringDate(e)}function Ye(e){var t=e.match(/((2[0-4])|([0-1]?[0-9])):([0-5][0-9])[^:]*/);return null!=t&&e==t[0]}function Qe(e){var t=e.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/);return null!=t&&e==t[0]}function ze(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function qe(e){var t=e.match(/(https?:\/\/)?[-a-zA-Z0-9@:%_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/);return null!=t&&e==t[0]}var Ke=function Ke(e){return!!e.funcArgs.getSelectedElement()},Je=function Je(e){return!Ke(e)},Xe=function Xe(e){return Tr(e.funcArgs.getSelectedElement()).is(":checked")},$e=function $e(e){return!Xe(e)},Ze=function Ze(e){return!!e.funcArgs.getSelectedElement()},et=function et(e){return!Ze(e)},tt=function tt(e){return F(T.processSiteUrlForLikeOrRegex(p.getCurrentLocation()),T.processUserUrlForLike(e.funcArgs.UrlInput))},nt=function nt(e){return!tt(e)},rt=function rt(e){return M(T.processSiteUrlForLikeOrRegex(p.getCurrentLocation()),T.processUserUrlForRegex(e.funcArgs.UrlInput))},it=function it(e){return!rt(e)},ot=function ot(e){return T.processUserUrl(e.funcArgs.UrlInput)==T.processSiteUrl(tr())},at=function at(e){return!ot(e)},st=function st(e){return 0<=T.processSiteUrl(tr()).indexOf(T.processUserUrl(e.funcArgs.UrlInput))},ut=function ut(e){return!st(e)},lt=function lt(e){return F(T.processSiteUrlForLikeOrRegex(tr()),T.processUserUrlForLike(e.funcArgs.UrlInput))},ct=function ct(e){return!lt(e)},dt=function dt(e){return M(T.processSiteUrlForLikeOrRegex(tr()),T.processUserUrlForRegex(e.funcArgs.UrlInput))},ft=function ft(e){return!dt(e)},pt=function pt(e){return F(t.browser.string,"*"+e.funcArgs.BrowserName+"*")},gt=function gt(e){return!pt(e)},ht=function ht(e){return window.self!==window.top},mt=function mt(e){return!ht(e)},vt=function vt(e){var t=d.getData(s.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY);if(!t)return!1;var n=((new Date).getTime()-t)/2,r=4e3<n?4e3:4e3*function i(e,t){return e/=t,e--,Math.sqrt(1-e*e)}(n,4e3);return Cr.get("WalkmeLoadTimeManager").getWalkmeLoadTime()+r>t},yt=function yt(e){return!vt(e)};function St(e){var t=parseInt(e.funcArgs.GoalId);return y.value&&y.value.isGoalReached(t)}var Et=function Et(e){var t=l.getCookie(e.funcArgs.CookieName),n=f.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return!1!==t&&t.toLowerCase()==n.toLowerCase()},wt=function wt(e){return!Et(e)},Tt=function Tt(e){var t=l.getCookie(e.funcArgs.CookieName);return!1!==t&&O(t,e.funcArgs.CookieInput)},Ct=function Ct(e){var t=l.getCookie(e.funcArgs.CookieName);return!1!==t&&L(t,e.funcArgs.CookieInput)},bt=function bt(e){var t=l.getCookie(e.funcArgs.CookieName),n=f.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return!1!==t&&F(t,n)},It=function It(e){return!bt(e)},_t=function _t(e){return!1!==l.getCookie(e.funcArgs.CookieName)},At=function At(e){return!_t(e)},Pt=function Pt(e){var t=v.getData(e.funcArgs.DataKey,undefined);if(t===undefined)return!1;null===t&&(t="null");var n=f.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()},kt=function kt(e){return!Pt(e)},Dt=function Dt(e){var t=v.getData(e.funcArgs.DataKey,undefined);return t!==undefined&&O(t,e.funcArgs.DataValue)},xt=function xt(e){var t=v.getData(e.funcArgs.DataKey,undefined);return t!==undefined&&L(t,e.funcArgs.DataValue)},Nt=function Nt(e){var t=v.getData(e.funcArgs.DataKey,undefined);return t!==undefined&&null!==t&&F(t,f.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]))},Ot=function Ot(e){return!Nt(e)},Lt=function Lt(e){return v.getData(e.funcArgs.DataKey,undefined)!==undefined},Ft=function Ft(e){return!Lt(e)},Mt=function Mt(e){var t=o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName),n=f.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return t!==undefined&&null!==t&&t.toString().toLowerCase()==n.toLowerCase()},Rt=function Rt(e){return!Mt(e)},Bt=function Bt(e){var t=o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return t!==undefined&&O(t,e.funcArgs.WindowVarInput)},Ut=function Ut(e){var t=o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return t!==undefined&&L(t,e.funcArgs.WindowVarInput)},Vt=function Vt(e){var t=o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName),n=f.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return t!==undefined&&null!==t&&F(t.toString(),n)},Wt=function Wt(e){return!Vt(e)},jt=function jt(e){var t=o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return t!==undefined&&null!==t},Gt=function Gt(e){return!jt(e)},Ht=function Ht(e){return M(o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName),e.funcArgs.WindowVarInput)},Yt=function Yt(e){return!Ht(e)},Qt=function Qt(e){var t=n.getCurrentLanguage();return""===t&&(t="default"),f.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]).toLowerCase()==t.toLowerCase()},zt=function zt(e){return!Qt(e)},qt=function qt(e){var t=n.getCurrentLanguage();return""===t&&(t="default"),F(t,f.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]))},Kt=function Kt(e){return!qt(e)},Jt=function Jt(e){return!!en(e)},Xt=function Xt(e){var t=en(e);return null==t?null:!t},$t=function $t(e){return!!tn(e)},Zt=function Zt(e){var t=tn(e);return null==t?null:!t};function en(e){var t=parseInt(e.funcArgs.TaskId),n=parseInt(e.funcArgs.GoalId);return Cr.get("TodoListManager").isTaskGoalReached(t,n)}function tn(e){var t=parseInt(e.funcArgs.TaskId),n=parseInt(e.funcArgs.ReachedWithinDays);return Cr.get("TodoListManager").isTaskGoalReachedWithin(t,n)}var nn=function nn(e){var t=Tr("#tsidLabel"),n=f.decodeHtml(e.funcArgs.SfTabInput.toString(),["&",'"',"'",">","<"]);return 0!=t.length&&B(t.text().toLowerCase())==B(n.toLowerCase())},rn=function rn(e){return!nn(e)},on=function on(e){var t=Tr("#tsidLabel"),n=f.decodeHtml(e.funcArgs.SfTabInput,["&",'"',"'",">","<"]);return 0!=t.length&&0<=B(t.text().toLowerCase()).indexOf(B(n.toLowerCase()))},an=function an(e){return!on(e)},sn={Accounts:"salesforce.com/001/",Contacts:"salesforce.com/003/",Opportunities:"salesforce.com/006/",Documents:"salesforce.com/015/",Cases:"salesforce.com/500/",Solutions:"salesforce.com/501/",Contracts:"salesforce.com/800/",Reports:"salesforce.com/00O/",Leads:"salesforce.com/00Q/",Dashboards:"salesforce.com/01Z/",CustomTabs1:"salesforce.com/a00/",Products:"salesforce.com/a01/"},un={MainPage:"o",New:"e"},ln=function ln(e){var t=e.funcArgs.SfType,n=e.funcArgs.SfModoule;return ce({funcArgs:{UrlInput:""+sn[t]+un[n]}})},cn=function cn(e){return!ln(e)},dn=function dn(e){return 0<e.funcArgs.conditionBlockId&&u.activateById(e.funcArgs.conditionBlockId,undefined)},fn=function fn(e,t){var n=o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,e);return n!==undefined&&null!==n&&t(n)},pn="walkMeWorkday.segmentation.flow.forms";this.WORKDAY_FORMS_VAR_NAME=pn;var gn=function gn(t){return fn(pn,function(e){return e[t.funcArgs.FormInput]})},hn=function hn(e){return!gn(e)},mn=function mn(r){return fn(pn,function(e){var t=f.decodeHtml(r.funcArgs.FormInput,["&",'"',"'"]);for(var n in e)if(0<=n.toLowerCase().indexOf(t.toLowerCase()))return!0;return!1})},vn=function vn(e){return!mn(e)},yn=function yn(r){return fn(pn,function(e){var t=f.decodeHtml(r.funcArgs.FormInput,["&",'"',"'"]);for(var n in e)if(F(n,t))return!0;return!1})},Sn=function Sn(e){return!yn(e)},En=function En(r){return fn(pn,function(e){var t=0;for(var n in e)t++;return t.toString()===r.funcArgs.FormInput})},wn=function wn(e){return o.getWindowData(s.WINDOW_CUSTOM_DATA_TYPE.Var,pn)},Tn=function Tn(e){return!wn(e)},Cn="walkMeWorkday.segmentation.flow.page";this.WORKDAY_PAGE_VAR_NAME=Cn;var bn=function bn(n){return fn(Cn,function(e){var t=f.decodeHtml(n.funcArgs.PageInput,["&",'"',"'"]);return e.toString().toLowerCase()==t.toLowerCase()})},In=function In(e){return!bn(e)},_n=function _n(n){return fn(Cn,function(e){var t=f.decodeHtml(n.funcArgs.PageInput,["&",'"',"'"]);return 0<=e.toLowerCase().indexOf(t.toLowerCase())})},An=function An(e){return!_n(e)},Pn=function Pn(t){return fn(Cn,function(e){return F(e,f.decodeHtml(t.funcArgs.PageInput,["&",'"',"'"]))})},kn=function kn(e){return!Pn(e)},Dn=function Dn(e){return fn(Cn,function(e){return""!==e})},xn=function xn(e){return!Dn(e)},Nn="walkMeWorkday.segmentation.flow.subPage";this.WORKDAY_SUB_PAGE_VAR_NAME=Nn;var On=function On(n){return fn(Nn,function(e){var t=f.decodeHtml(n.funcArgs.SubPageInput,["&",'"',"'"]);return e.toString().toLowerCase()==t.toLowerCase()})},Ln=function Ln(e){return!On(e)},Fn=function Fn(n){return fn(Nn,function(e){var t=f.decodeHtml(n.funcArgs.SubPageInput,["&",'"',"'"]);return 0<=e.toLowerCase().indexOf(t.toLowerCase())})},Mn=function Mn(e){return!Fn(e)},Rn=function Rn(t){return fn(Nn,function(e){return F(e,f.decodeHtml(t.funcArgs.SubPageInput,["&",'"',"'"]))})},Bn=function Bn(e){return!Rn(e)},Un=function Un(e){return fn(Nn,function(e){return""!==e})},Vn=function Vn(e){return!Un(e)},Wn="walkMeWorkday.segmentation.worklets";function jn(t){return fn(Wn,function(e){return e&&e[t.funcArgs.workletUid]})}var Gn="walkMeWorkday.segmentation.inbox";function Hn(t){return fn(Gn,function(e){return e&&e[t.funcArgs.inboxItemUid]})}var Yn={jQueryTrue:z,jQueryFalse:q,jQueryLengthBigger:K,jQueryClicked:G,jQueryClickedSticky:H,jQueryHovered:W,jQueryHoveredSticky:j,jQueryHoverSwitch:function(e){return function i(e,t,n,r){return Ce(e,t,n,r,function(){return U(e)})}(e.funcArgs,"mouseenter","mouseleave",e.pollingInterval)},jQuerySwiped:Y,jQuerySwipedSticky:Q,jQueryLengthSmaller:J,jQueryLengthEquals:X,jQueryLengthNotEquals:$,UrlEquals:ue,UrlNotEquals:le,UrlContains:ce,UrlNotContains:de,UrlLike:tt,UrlNotLike:nt,UrlIsPerRegularExpression:rt,UrlIsNotPerRegularExpression:it,UrlPathEquals:ge,UrlPathNotEquals:he,UrlPathContains:me,UrlPathNotContains:ve,UrlPathLike:ye,UrlPathNotLike:Se,UrlPathIsPerRegularExpression:Ee,UrlPathIsNotPerRegularExpression:we,DateEquals:Z,DateNotEquals:ee,DateFrom:te,DateUntil:ne,DateIsDay:re,DateIsMonth:ie,DateIsYear:oe,TimeFrom:ae,TimeUntil:se,ReferrerUrlEquals:ot,ReferrerUrlNotEquals:at,ReferrerUrlContains:st,ReferrerUrlNotContains:ut,ReferrerUrlLike:lt,ReferrerUrlNotLike:ct,ReferrerUrlIsPerRegularExpression:dt,ReferrerUrlIsNotPerRegularExpression:ft,ElementExists:Te,ElementNotExist:Oe,ElementVisible:Le,ElementNotVisible:Fe,ElementClicked:Pe,ElementClickedSticky:ke,ElementHovered:_e,ElementHoveredSticky:Ae,ElementHoverSwitch:Ne,ElementSwiped:De,ElementSwipedSticky:xe,ElementSelected:Me,ElementNotSelected:Re,BrowserEquals:pt,BrowserNotEquals:gt,ContainerIsIframe:ht,ContainerNotIframe:mt,WindowIsNew:vt,WindowIsNotNew:yt,CookieExists:_t,CookieNotExists:At,CookieEquals:Et,CookieNotEquals:wt,CookieBigger:Tt,CookieSmaller:Ct,CookieLike:bt,CookieNotLike:It,WalkMeDataExists:Lt,WalkMeDataNotExists:Ft,WalkMeDataEquals:Pt,WalkMeDataNotEquals:kt,WalkMeDataBigger:Dt,WalkMeDataSmaller:xt,WalkMeDataLike:Nt,WalkMeDataNotLike:Ot,LanguageEquals:Qt,LanguageNotEquals:zt,LanguageLike:qt,LanguageNotLike:Kt,WindowVarEquals:Mt,WindowVarNotEquals:Rt,WindowVarBigger:Bt,WindowVarSmaller:Ut,WindowVarLike:Vt,WindowVarNotLike:Wt,WindowVarExists:jt,WindowVarNotExists:Gt,WindowVarIsPerRegularExpression:Ht,WindowVarIsNotPerRegularExpression:Yt,TaskGoalReached:Jt,TaskGoalNotReached:Xt,TaskGoalReachedWithin:$t,TaskGoalNotReachedWithin:Zt,ExperimentGoalReached:St,ExperimentGoalNotReached:function(e){return!St(e)},SalesforceTabEquals:nn,SalesforceTabNotEquals:rn,SalesforceTabContains:on,SalesforceTabNotContains:an,SalesforceUrlEquals:ln,SalesforceUrlNotEquals:cn,ConditionBlockTrue:dn,FormEquals:gn,FormNotEquals:hn,FormContains:mn,FormNotContains:vn,FormLike:yn,FormNotLike:Sn,FormCount:En,FormExists:wn,FormNotExists:Tn,PageEquals:bn,PageNotEquals:In,PageContains:_n,PageNotContains:An,PageLike:Pn,PageNotLike:kn,PageExists:Dn,PageNotExists:xn,SubPageEquals:On,SubPageNotEquals:Ln,SubPageContains:Fn,SubPageNotContains:Mn,SubPageLike:Rn,SubPageNotLike:Bn,SubPageExists:Un,SubPageNotExists:Vn,SelectedElementVisible:Ke,SelectedElementNotVisible:Je,SelectedElementSelected:Xe,SelectedElementNotSelected:$e,SelectedElementExists:Ze,SelectedElementNotExist:et,WorkletExists:jn,WorkletNotExists:function nr(e){return!jn(e)},InboxItemExists:Hn,InboxItemNotExists:function rr(e){return!Hn(e)}},Qn={TextPerRegularExpression:Be,TextNotPerRegularExpression:function ir(e,t){return!Be(e,t)},TextEquals:Ue,TextNotEquals:Ve,TextLike:We,TextNotLike:function or(e,t){return!We(e,t)},TextEmpty:Ue,TextNotEmpty:Ve,TextBigger:function ar(e,t){return!1!==e&&O(e,t)},TextSmaller:function sr(e,t){return!1!==e&&L(e,t)},TextLengthIsLessThan:function ur(e,t){return(e=Tr.trim(e)).length<parseInt(t)},TextLengthIsEqualTo:function lr(e,t){return(e=Tr.trim(e)).length==parseInt(t)},TextLengthIsGreaterThan:function cr(e,t){return(e=Tr.trim(e)).length>parseInt(t)},TextWordCountIsLessThan:function dr(e,t){return je(e)<parseInt(t)},TextWordCountIsEqualTo:function fr(e,t){return je(e)==parseInt(t)},TextWordCountIsGreaterThan:function pr(e,t){return je(e)>parseInt(t)},TextNumeric:Ge,TextNotNumeric:function gr(e){return!Ge(e)},TextIsDate:He,TextIsNotDate:function hr(e){return!He(e)},TextIsTime:Ye,TextIsNotTime:function mr(e){return!Ye(e)},TextIsUSPhoneNumber:Qe,TextIsNotUSPhoneNumber:function vr(e){return!Qe(e)},TextIsEmail:ze,TextIsNotEmail:function yr(e){return!ze(e)},TextIsWebAddress:qe,TextIsNotWebAddress:function Sr(e){return!qe(e)},TextIsDayOfWeek:function Er(e,t){var n=E.parseTwoDigitDateString(e);return n&&n.getDay()==t},TextIsNotDayOfWeek:function wr(e,t){var n=E.parseTwoDigitDateString(e);return n&&n.getDay()!=t}};for(var zn in Qn)Qn.hasOwnProperty(zn)&&(qn(Qn[zn],zn),Kn(Qn[zn],zn),Jn(Qn[zn],zn));function qn(n,e){Yn[A+e]=function(e){var t=i.getjQueryElementText(e.funcArgs.jQuerySelector);return e.funcArgs.jQueryText||""==e.funcArgs.jQueryText?n.call(this,t,e.funcArgs.jQueryText):n.call(this,t)}}function Kn(n,e){Yn[P+e]=function(e){var t=o.checkElementText(Tr(e.funcArgs.getSelectedElement()));return e.funcArgs.ElementText||""==e.funcArgs.ElementText?n.call(this,t,e.funcArgs.ElementText):n.call(this,t)}}function Jn(n,e){Yn[k+e]=function(e){var t=I.getElementText(e.funcArgs);return!1!==t&&(e.funcArgs.ElementText||""==e.funcArgs.ElementText?n.call(this,t,e.funcArgs.ElementText):n.call(this,t))}}Tr.extend(Yn,e.getFuncList());var Xn=[];Xn.LanguageEquals=!1,Xn.LanguageNotEquals=!1,Xn.LanguageLike=!1,Xn.LanguageNotLike=!1,Xn.TaskGoalReached=!1,Xn.TaskGoalNotReached=!1,Xn.TaskGoalReachedWithin=!1,Xn.TaskGoalNotReachedWithin=!1,Xn.jQueryClicked=!1,Xn.jQueryClickedSticky=!1,Xn.jQueryHovered=!1,Xn.jQueryHoveredSticky=!1,Xn.jQuerySwiped=!1,Xn.jQuerySwipedSticky=!1,Xn.ElementClicked=!1,Xn.ElementClickedSticky=!1,Xn.ElementHovered=!1,Xn.ElementHoveredSticky=!1,Xn.ElementSwiped=!1,Xn.ElementSwipedSticky=!1,Xn.ExperimentGoalReached=!1,Xn.ExperimentGoalNotReached=!1,Tr.extend(Xn,e.getFuncAssert());var $n=["ElementClicked","ElementHovered","ElementHoverSwitch","jQueryClicked","jQueryHovered","jQueryHoverSwitch","jQuerySwiped","ElementSwiped","LikelyToVisitUrlContains","LikelyToVisitUrlNotContains","LikelyToVisitUrlLike","LikelyToVisitUrlNotLike","LikelyToVisitUrlEquals","LikelyToVisitUrlNotEquals","LikelyToVisitUrlIsPerRegularExpression","LikelyToVisitUrlIsNotPerRegularExpression","NotLikelyToVisitUrlContains","NotLikelyToVisitUrlNotContains","NotLikelyToVisitUrlLike","NotLikelyToVisitUrlNotLike","NotLikelyToVisitUrlEquals","NotLikelyToVisitUrlNotEquals","NotLikelyToVisitUrlIsPerRegularExpression","NotLikelyToVisitUrlIsNotPerRegularExpression","LikelyToChurn","NotLikelyToChurn","TeachMeQuizCompletion","StepPlayed","StepNotPlayed","StepCompleted","StepNotCompleted","StepExists","StepNotExists","StepCanPlay","StepCannotPlay","StepIsVisible","StepIsNotVisible","WidgetModesCondition","incoming-integration"];$n.push.apply($n,e.getAsyncFuncs()),this.isFuncAsync=function(e){return 0<=m.inArray(e,$n)};var Zn=["jQueryHoveredSticky","jQueryClickedSticky","jQuerySwipedSticky","ElementClickedSticky","ElementHoveredSticky","ElementSwipedSticky"];function er(e,t){if(t.identifySettings&&a.checkIfTreeContainsSelectedElement(e)){var n=t.identifySettings;e.funcArgs.getSelectedElement=function(){return r.findElement(n,!1)}}}this.isFuncSticky=function(e){return 0<=m.inArray(e,Zn)},this.hasCoreFunction=function(e){return!!Yn[e]},this.getFunctionsByLibNameType=function(e){return Yn[e]||S.get(e)},this.canAssertFunction=function(e){return Yn[e]?Xn[e]==undefined||0!=Xn[e]:S.canAssert(e)},this.evaluationPreviewForEditor=function(e){var t=w.secureEvalJSON(e);return er(t.node,t),I.evaluationPreview(t.node)},this.evaluationPreview=function(e){var t=this.getFunctionsByLibNameType(e.funcName);if(!this.canAssertFunction(e.funcName))return _.CANNOT_ASSERT;var n=t({funcArgs:e.funcArgs,conditionId:-1,pollingInterval:-1});return n instanceof br.regular&&(n=n.getValue()),n?_.TRUE:_.FALSE},this.evaluationTreePreviewForEditor=function(e){var t=w.secureEvalJSON(e);return function n(e){e.node&&e.node.Root&&(e.node=g.convert(e.node.Root))}(t),function o(r){var e=r.node;return null!=e?function i(e){if("Func"==e.nodeType)return er(e,r),I.evaluationPreview(e);var t=i(e.leftSon);var n=i(e.rightSon);if("And"==e.nodeType)return t==_.TRUE&&n==_.TRUE?_.TRUE:t==_.CANNOT_ASSERT||n==_.CANNOT_ASSERT?_.CANNOT_ASSERT:_.FALSE;if("Or"==e.nodeType)return t==_.TRUE||n==_.TRUE?_.TRUE:t==_.CANNOT_ASSERT||n==_.CANNOT_ASSERT?_.CANNOT_ASSERT:_.FALSE}(e):_.TRUE}(t)};var tr=function tr(){return document.referrer}}).dependencies("Lib,JQueryElementFinder,CommonUtils,HostData,LanguageManager,ConditionFunctionsHandler,ConditionTreeUtils,PollingCommonInteracted,Consts,ConditionBlocksManager,CookiesManager,ClientStorageManager,HtmlDecoder,LocationService,NewToOldConditionConverter,Logger,ArrayUtils,ClientOrServerStorageManager,AbTestingGoalsManagerInstance,ExternalConditionsHandlers,DateConditions,JsonUtils,UrlComparePreparer,KeyDownClickVerifier,FeaturesManager"),Cr.register("IncomingIntegrationConditions").asCtor(function Rr(e,a,s,t,r,u,l,c,n,i,o){var d,f,p=a.wrapCustomerLog(e.LOG_FEATURES.INCOMING_INTEGRATION_CONDITIONS);this.isEnabled=function(){return r.isFeatureEnabled("incomingIntegration")},this.awaitIncomingIntegration=function(){try{var e=i.getEndUserGuid(!0);f(undefined,{endUserGuid:e})}catch(t){r.isReady()&&f()}return g};var g=new ct(function(e){n.isInPlayMode()?e():(f=o.proxy(h,this,e),t.on("EndUserRetrieved",f))});function h(i,e,t){if(r.isFeatureEnabled("incomingIntegration")){var n=t.endUserGuid;n?function o(e){var t=function r(){return c.getSettingsFile().PlayerApiServer}();if(!t)return p("conditions microservice is undefined",4,"incomingIntegration"),void i();var n=u.execute({type:"GET",url:t+"/conditions/evaluatedConditions",dataType:"json",data:{accountGuid:l.getUserGuid(),endUserId:e,environment:_walkMe.getEnvId()}});n.done(function(e){d=e,function t(){s.register("incoming-integration",function(e,t){e.setValue(d[t.funcArgs.id]||!1)})}(),i()}),n.fail(function(e,t,n){a.error(t,n),i()})}(n):i()}else i()}return this}).dependencies("Consts, Logger, ExternalConditionsHandlers, WmInternals, FeaturesManager, WmAjax, UserGuidContainer, SettingsFile, AuditSourceProvider, EndUsersManager, wmjQuery").asSingleton(),Cr.register("DateConditions").asCtor(function Br(r){this.isStringDate=function(e){var t=r.formatString("(({0}{2}{0}\\4{1})|({1}{2}{0}\\9{0})|({0}{2}{0}\\14{0}))","([1-9]\\d?|0?[1-9])","([1-9]\\d\\d\\d)","([.\\-/ ])"),n=new RegExp(t,"i").exec(e);return null!=n&&e==n[0]},this.parseTwoDigitDateString=function(e){var t,n=e.split(new RegExp("[.\\-/ ]","i")),r=parseInt(n[1]),i=parseInt(n[0]),o=function a(e){return e&&2==e.length}(n[2])?parseInt(n[2])+2e3:null;return function s(e){return 0<e&&e<=12}(i)&&function u(e,t,n){return 0<e&&e<=new Date(n,t,0).getDate()}(r,i,o)&&o&&(t=new Date(o,i-1,r)),t}}).dependencies("CommonUtils"),Cr.register("IsElementAttached").asFunction(function Ur(){return function(e){var t;try{t=e[0].ownerDocument}catch(r){return!1}var n=t.defaultView||t.parentWindow;return!(!n||n.top!=window.top||!e.is(":mt_visible"))}}),Cr.register("PollingCommonInteracted").asFunction(function Vr(u,l,c,d){return function(e,t,n,r){var i,o,a=new br.regular(!1);function s(){u.customerLog("0)"<"Poll Element: start search for element (polling: "+t,5),i&&i.clear(),!!o&&d(o)||(c.unbindEvent(o,e),o=n(),u.customerLog("Poll Element: element matched: ",5),u.customerLog(o,5),o?c.handleEvent(o,e,a,n,r):0<=t&&a.setValue(!1)),0<=t&&(i=l.libSetTimeout(s,t))}return a.onResourceClean(function(){t=-1}),a.onRefresh(function(){a.getValue()&&a.setValue(!1),s()}),a.getValue()||s(),a}}).dependencies("Logger,TimerManager,SonarEventHandler,IsElementAttached"),Cr.register("KeyDownClickVerifier").asFunction(function Wr(n,r,i){return function(e){if(!e)throw"Event has to be defined";if(!n.isFeatureEnabled(r.FEATURES.ClickTriggerWithKeyboard)||"keydown"!=e.type)return!1;var t=e.keyCode||e.which;return-1!=i.inArray(t,[13,32])}}).dependencies("FeaturesManager,Consts,ArrayUtils"),Cr.register("ExternalConditionsHandlers").asCtor(function jr(e,t,a,n){var s={},u=t.wrapCustomerLog(e.LOG_FEATURES.EXTERNAL_CONDITIONS_HANDLERS);this.get=function r(e){if(!e)throw new Error("A handler name must be defined");var t=n.get(e,s[e]&&s[e].func);return u("Got a "+(s[e]?"real":"dummy")+" handler for "+e),t},this.register=function l(e,t,n){if(u("Register called for "+e+" function."),!e||!t)throw new Error("Name and handler must be defined.");if(function r(e){return!!Cr.get("ConditionFunctions").hasCoreFunction(e)}(e))throw new Error(e+" is a core condition. Core conditions cannot be overridden.");return u((s[e]?"Replacing":"Registering")+" a condition handler for "+e),s[e]={func:t,canAssert:!!n&&!!n.editorPreview},function i(n){var e=a.get(n);u(n+" had "+e.length+" pending results."),Tr(e).each(function(e,t){s[n].func(t.asyncResult,t.params)}),u("Finished handling pending results for "+n)}(e),function o(e,t){return function(){s[e]?s[e].func==t?(s[e]=undefined,u(e+" handler unregistered.")):u(e+" wasn't unregistered. A new handler might have been registered."):u(e+" was already unregistered.")}}(e,t)},this.canAssert=function i(e){return!!s[e]&&s[e].canAssert}}).dependencies("Consts, Logger,PendingResultsContainer,ExternalHandlerWrapper"),Cr.register("PendingResultsContainer").asCtor(function Gr(e,t,a){this.add=function p(e,t,n){var r=function i(e){var t=u[e];t||(t=[],u[e]=t);return t}(e);f(t,e),r.push({asyncResult:t,params:n}),d++,f(t,e),l("Pending result for "+e+" added."),function o(){s<d&&!c&&(a.logError("ExternalConditionsHandler: The Pending results excceded the the current threshold.",{threshold:s}),c=!0)}()},this.get=function n(e){var t=u[e];t?(l("Returning "+t.length+"pending results for "+e),u[e]=undefined,d-=t.length):l(e+" doesn't have pending results.");return t||[]};var s=100,u={},l=t.wrapCustomerLog(e.LOG_FEATURES.EXTERNAL_CONDITIONS_HANDLERS),c=!1,d=0;function f(e,t){e.onResourceClean(function(){!function r(e,n){var t=u[e];t&&(u[e]=Tr(t).filter(function(e,t){return t.asyncResult!=n}).toArray())}(t,e)})}}).dependencies("Consts,Logger,EventSenderErrorLogger"),Cr.register("ExternalHandlerWrapper").asCtor(function Hr(o){this.get=function n(e,t){return t?function r(n){return function(e){var t=new br.regular(!1);return n(t,e),t}}(t):function i(n){return function(e){var t=new br.regular(!1);return o.add(n,t,e),t}}(e)}}).dependencies("PendingResultsContainer"),__webpack_require__(674),__webpack_require__(675),Cr.register("ConditionCheckerFactory").asCtor(function Yr(t,n,r,i,o,a,s,u,l,c){function d(e){return new n(r,i,o,a,s,u,c,l,e)}function f(e){return new t(r,i,o,a,s,u,c,e)}this.createConditionChecker=function p(e,t){return e&&e.Root?d(t):f(t)},this.createNew=d,this.createOld=f}).dependencies("ConditionCheckerType,NewConditionCheckerType,TimerManager,ConditionFunctions,UIChangeTracker,Logger,CommonEvents,Consts,NewToOldConditionConverter,DebuggerManager"),Cr.register("OldConditionsCombiner").asCtor(function Qr(){this.combine=function r(e,t,n){return t?n?{nodeType:e,leftSon:t,rightSon:n,nodeDepth:0}:t:n}}),Cr.register("NewConditionsCombiner").asCtor(function zr(a,s,u){this.combine=function l(e,t,n){var r=n?s.convert(n.Root):undefined,i=t&&t.Root?s.convert(t.Root):t,o=a.combine(e,i,r);return u.convert(o)}}).dependencies("OldConditionsCombiner, NewToOldConditionConverter, OldToNewConditionConverter"),Cr.register("ConditionsCombinerFactory").asCtor(function qr(){this.get=function t(e){return e?Cr.get("NewConditionsCombiner"):Cr.get("OldConditionsCombiner")}}),Cr.register("EngagementRulesDataSynchronizer").asCtor(function Kr(d,f,p,n,g,h,m,v,y){this.init=function a(){var e=function t(){return d.getData(i,null)}();return e?(n.setWalkmeTimeout(o,r),g.when(e)):o()};var S="loadEngagementRules",r=5e3,E="/engagementRulesReports/",w=d.keysConfig.engagementRules.fileExists.key,T=d.keysConfig.engagementRules.fileExists.expiry,i=d.keysConfig.engagementRules.uniqueData.key,t=d.keysConfig.engagementRules.uniqueData.expiry;function o(){return function c(){var n=g.Deferred(),e=function u(e){var t=f.getEndUserGuid(),n=m.encrypt(t),r=p.getSettingsFile();if(C(r,e))return;var i=r.BaseUserCdnFolder;if(C(i,e))return;return i+E+n+".json"}(n);if(C(e,n))return n.promise();var t=e,r=v.browser.name;if(("Chrome"==r||"Safari"==r)&&!d.getData(w,!1)){var i=e.indexOf("users"),o=e.substring(i,e.length),a=y.get()+"/FilesContentRetriever/LoadFileByName";t=a+"?fileName="+o}var s=function l(e){return Cr.create("EngagementRulesErrorTimer",{loadScriptDeferred:e})}(n);return h.addScriptWithCallback(t,S,function(e){0!=e.length&&d.saveData(w,!0,T);var t=function r(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}(e);s.clear(),n.resolve(t)},function(){s.clear(),n.resolve({})}),n.promise()}().then(e)}function C(e,t){return!e&&(t.resolve({}),!0)}function e(e){d.saveData(i,e,t)}}).dependencies("ClientStorageManager, EndUsersManager, SettingsFile, TimerManager, wmjQuery, CommonUtils, Encryptor, HostData, RecorderServerManager"),Cr.register("EngagementRulesErrorTimer").asCtor(function Jr(t,n,r,i){var o;this.clear=function e(){o.clear()},function a(){var e=i.loadScriptDeferred;o=t.setWalkmeTimeout(function(){e.isResolved()||(n.error(null,"Error trying to get engagement rules data from player server"),e.resolve({}),r.removeWalkMe("Failed loading engagement rules data after 5 seconds"))},5e3)}.apply(null,arguments)}).asProto().dependencies("TimerManager, Logger, LibDestroyer"),Cr.register("EngagementRulesRepository").asCtor(function Xr(e,t,n){this.init=function a(){r=t.isFeatureEnabled("engagementRules")?e.init().then(o):(o({}),n.when())},this.isReady=function s(e){r.then(e)},this.get=function u(){return i};var r,i={};function o(e){i=e}}).dependencies("EngagementRulesDataSynchronizer, FeaturesManager, wmjQuery"),Cr.register("HistoricalConditionFunctions").asCtor(function $r(t){this.getFuncList=function a(){return i},this.getFuncAssert=function s(){return r},this.getAsyncFuncs=function u(){return e};var r=[],e=[],i={};function n(e,n){Tr.each(e,function(e,t){i[t]=n,r[t]=!1})}function o(e){return!!t.get()[e.conditionId]}n(["UserWebsiteVisitedBefore","UserWebsiteVisitedAfter","UserWebsiteVisitedMoreThan","UserWebsiteVisitedInLast","UserTrackedElementClickedMoreThan","UserTrackedElementClickedInLast","UserTrackedElementClickedAfter","UserTrackedElementClickedBefore","UserTrackedPageVisitedInLast","UserTrackedPageVisitedBefore","UserTrackedPageVisitedAfter","UserTrackedPageVisitedMoreThan"],o),n(["UserWebsiteVisitedFirstTime","UserWebsiteVisitedLessThan","UserWebsiteNotVisitedEver","UserWebsiteNotVisitedBefore","UserWebsiteNotVisitedAfter","UserWebsiteNotVisitedInLast","UserTrackedElementClickedLessThan","UserTrackedElementNotClicked","UserTrackedElementNotClickedAfter","UserTrackedElementNotClickedBefore","UserTrackedElementNotClickedInLast","UserTrackedPageVisitedLessThan","UserTrackedPageNotVisited","UserTrackedPageNotVisitedBefore","UserTrackedPageNotVisitedAfter","UserTrackedPageNotVisitedInLast"],function l(e){return!o(e)})}).asSingleton().dependencies("EngagementRulesRepository"),Cr.register("OnboardingConditionFunctions").asCtor(function Zr(n){this.getFuncList=function i(){return r},this.getFuncAssert=function o(){return t},this.getAsyncFuncs=function a(){return e};var t=[],e=[],r={UserOnboardingProgressMoreThan:function s(e){return n.getTasksCompletionProgress()>e.funcArgs.UserOnboardingProgressInput},UserOnboardingProgressLessThan:function u(e){return n.getTasksCompletionProgress()<e.funcArgs.UserOnboardingProgressInput},UserOnboardingProgressNotStarted:function l(e){return 0==n.getTasksCompletionProgress()},UserOnboardingProgressOngoing:function c(e){var t=n.getTasksCompletionProgress();return 0<t&&t<100},UserOnboardingProgressComplete:function d(e){return 100==n.getTasksCompletionProgress()}};Tr.each(r,function(e){t[e]=!1})}).asSingleton().dependencies("TasksPercentageCalculator"),Cr.register("DeployableShowInMenuChecker").asCtor(function ei(r){this.isShowInMenu=function i(e){var t=function n(e){return e.Settings&&e.Settings.DisplayCondition}(e);return!t||r.checkConditions(t,e)}}).dependencies("DisplayConditionChecker"),Cr.register("ShowInMenuCheckerFactory").asCtor(function ti(t,n,r,i,o){this.getDisplayConditionCheckerFunc=function l(e){return a[e]||u},this.isSupportedDeployableInMenu=function c(e){return e!==o.DEPLOYABLE_TYPE.Course&&a[e]!==undefined};var a={};function s(e){return i.isTaskDisplayed(e)}function u(){return!0}(function d(){!function e(){a[o.DEPLOYABLE_TYPE.Task]=s,a[o.DEPLOYABLE_TYPE.Tutorial]=t.canShowTutorial,a[o.DEPLOYABLE_TYPE.BusinessSolution]=n.isShowInMenu,a[o.DEPLOYABLE_TYPE.Content]=r.isShowInMenu,a[o.DEPLOYABLE_TYPE.Shuttle]=r.isShowInMenu,a[o.DEPLOYABLE_TYPE.Course]=r.isShowInMenu}()}).apply(null,arguments)}).dependencies("Lib, BizFlowShowInMenuChecker, DeployableShowInMenuChecker, TodoListManager, Consts"),Cr.register("DisplayConditionChecker").asCtor(function ni(n){this.checkConditions=function i(e,t){return!e||n.createConditionChecker(e,{featureName:r,elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(e)};var r="uiProperties"}).dependencies("ConditionCheckerFactory"),Cr.register("ConditionTreeGetter").asCtor(function ri(e,i){this.get=function s(e,t,n){var r=a[e]?a[e]:o;return i.getSettingsValue(t[r],n,"")};var o="Settings",a={};a[e.BusinessSolution]="ConditionTrees"}).dependencies("DeployableTypes, CommonUtils"),Cr.register("ConditionTreeTraverser").asCtor(function ii(i){this.containsFuncName=function o(e,t){return function n(e){return e.Root}(e)&&(e=i.convert(e.Root)),function r(e,t){return"Func"==e.nodeType?-1<Tr.inArray(e.funcName,t):("And"==e.nodeType||"Or"==e.nodeType)&&(r(e.leftSon,t)||r(e.rightSon,t))}(e,t)}}).dependencies("NewToOldConditionConverter"),Cr.register("ConditionTreeEvaluator").asCtor(function oi(o){this.evaluate=function(e){return null==e||function i(e){if("Func"==e.nodeType){var t=o.getFunctionsByLibNameType(e.funcName),n=[];return n.push({funcArgs:e.funcArgs}),(r=t.apply(this,n))instanceof br.regular&&(r=r.getValue()),e.result=r}if("And"==e.nodeType){var r=i(e.leftSon)&&i(e.rightSon);return e.result=r}if("Or"!=e.nodeType)return!1;r=i(e.leftSon)||i(e.rightSon);return e.result=r}(e)}}).dependencies("ConditionFunctions"),Cr.register("ConditionEvaluator").asCtor(function ai(t){var i=this;i.supportedFunctions={isExistJQ:function n(e,t){t==undefined&&(t=1);return mtjQuery(e).length>=t},isTextValueJQ:function r(e,t){return mtjQuery(e).text()==t},isLocationMatch:function o(e){return t.isLocationMatchString(e)}};var s=new x;function u(e,t,n){for(var r=Array(),i=n,o=e.indexOf(t);-1<o;){if("("!=e.charAt(o+t.length))throw"Ilegal function definition in expression";for(var a=o+t.length+1,s=Array(),u=a;(")"!=e.charAt(u)||0!=s.length)&&u<e.length;){if("'"==e.charAt(u)||'"'==e.charAt(u))if(0==s.length)s.push(e.charAt(u));else{var l=s.pop();l!=e.charAt(u)&&(s.push(l),s.push(e.charAt(u)))}u++}if(")"!=e.charAt(u))throw"Ilegal function definition in expression";r[i]=e.substring(o,u+1),e=e.substring(0,o)+"["+i+"]"+e.substr(u+1),i++,o=e.indexOf(t)}return[r,e]}function l(e){if(e==undefined||e.length<=0)throw"Ilegal function definition";for(var t=e.substr(0,e.indexOf("(")),n=e.substring(e.indexOf("(")+1,e.length-1).split(","),r=0;r<n.length;r++)n[r]=n[r].replace(/^\s+|\s+$/g,""),("'"==n[r].charAt(0)&&"'"==n[r].charAt(n[r].length-1)||'"'==n[r].charAt(0)&&'"'==n[r].charAt(n[r].length-1))&&(n[r]=n[r].substring(1,n[r].length-1));return function(){return i.supportedFunctions[t].apply(this,n)}}this.evaluate=function(e){if(function a(e){if((e=(e=(e=(e=e.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"))==undefined||e.length<=0)throw"Ilegal Expression";var t=0;for(var n in this.supportedFunctions)if(this.supportedFunctions.hasOwnProperty(n)){var r=u(e,n,t);e=r[1];for(var i=t;i<r[0].length;i++){var o=l(r[0][i]);s.setFunction(o,t++)}}s.setExpression(e)}(e),s!=undefined)return s.evaluate();throw"Evaluator is undefined"},this.addSupportedFunction=function(e,t){if(this.supportedFunctions[e])throw"Function '"+e+"' already exist";this.supportedFunctions[e]=t}}).dependencies("LocationMatcher");var x=function x(){this.functions=Array(),this.treeNode=null,this.errorStack=Array();var u=this;function l(e){if(new RegExp("^\\[\\d+\\]$","i").test(e)){var t=parseInt(e.substring(1,e.length-1));return u.functions.length>=t&&u.functions[t]!=undefined?new o(u.functions[t]):(u.errorStack.push("Function id doesn't exist!"),!1)}return u.errorStack.push("function token isn't in the form [funcId]. recieved:"+e),!1}function c(e){return e?new t(e):(u.errorStack.push("Failed to create NOT node."),!1)}function d(e,t,n){if(t&&n){if("OR"==e.toUpperCase())return new i(t,n);if("AND"==e.toUpperCase())return new r(t,n)}return u.errorStack.push("Failed to create "+e.toUpperCase()+" node."),!1}function n(e){for(var t=Array(),n=0;n<e.length;n++)if("("==e.charAt(n))t.push("(");else if(")"==e.charAt(n)){if(0==t.length)return!1;t.pop()}return 0==t.length}function f(e){if("("!=(e=(e=(e=(e=(e=(e=mtjQuery.trim(e)).replace("  "," ")).replace("( ","(")).replace(/not\(/gi,"not (")).replace(/and\(/gi,"and (")).replace(/or\(/gi,"or (")).charAt(0)||")"!=e.charAt(e.length-1))return e;var t=e.substring(1,e.length-1);return n(t)?t:e}function p(e){return!!(e.match(/not/i)||e.match(/or/i)||e.match(/and/i))}function r(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()&&this.rightSon.evaluate()}}function i(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()||this.rightSon.evaluate()}}function t(e){this.son=e,this.evaluate=function(){return!this.son.evaluate()}}function o(e){this.func=e,this.evaluate=function(){return this.func()}}this.setFunction=function(e,t){if(e==undefined||t==undefined||t<0)throw"Wrong arguments.";return this.functions[t]=e,!0},this.evaluate=function(){if(null!=this.treeNode)return this.treeNode.evaluate();throw"Evaluation tree doesn't exist - No expression was set."},this.setExpression=function(e){if(e!=undefined&&0<e.length&&n(e)){if(this.treeNode=function s(e){var t=f(e);var n=t.split(" ");switch(n.length){case 0:u.errorStack.push("Error - a try to build tree with empty expression");break;case 1:return l(n[0]);case 2:return"NOT"==n[0].toUpperCase()?c(s(n[1])):(u.errorStack.push("Ilegal expression"),!1);case 3:return"NOT"==n[0].toUpperCase()?c(s(n[1]+" "+n[2])):d(n[1],s(n[0]),s(n[2]));default:for(var r=Array(),i=0;i<n.length;i++){if(0==i&&3<=n[i].length&&"NOT"==n[i].substr(0,3).toUpperCase())return c(s(n.join(" ").substr(3)));for(var o=!1,a=0;a<n[i].length;a++)"("==n[i].charAt(a)?(o=!0,r.push("(")):")"==n[i].charAt(a)&&(o=!0,r.pop());if(!o&&0==r.length&&p(n[i]))return d(n[i],s(n.splice(0,i).join(" ")),s(n.splice(1,n.length-1).join(" ")))}return u.errorStack.push("Ilegal expression"),!1}}(e),this.treeNode)return!0;var t=this.errorStack.join("\n");throw this.errorStack=this.errorStack.splice(),t}return this.errorStack.push("Ilegal expression!"),!1}};function N(){var r,i;this.saveToStorage=function(e,t,n){i.saveData(e+r,t,n)},this.getFromStorage=function(e,t){return i.getData(e+r,t)},this.removeFromStorage=function(e){return i.removeData(e+r)},this.refreshGetData=function(e,t){return i.refreshGetData(e,t)},function n(e,t){r=t,i=e}.apply(null,arguments)}function O(){var t,s,u,l,c,d,n,r=86400;function f(e){return n+u+"_"+e}function p(e){var t={};return t.p=l(),t.g=e,t}function i(e){var t=s.retrieveLocalData(f(e));return t&&l()==t.p?t:null}this.asyncRetrieveCompletedGoals=function(r,e,i,t){var o=function o(e){var t=f(r),n=p(e);s.updateLocalData(t,n),i&&i(e)},n=function a(e,t){return{userGuid:u,endUserId:e,source:c(),permutationId:l(),goalsToCheck:t}}(r,e);s.loadServerData(d,n,f(r),o,t,!0)},this.syncRetrieveCompletedGoals=function(e){var t=i(e);return t?t.g:null},this.updateGoalCompleted=function(e,t){var n=f(e),r=i(e)||p([]);r.g.push(t),s.updateLocalData(n,r)},this.tempClearUserCompletedGoals=function(e){s.updateLocalData(f(e),{})},function o(e){t=e.serverAddress,u=e.userGuidContainer.getUserGuid(),e.lib.Logger.error,l=e.getPermutationId,e.getEndUserGuid,c=e.getAuditSource,d=t+"/AbTesting/UserCompletedGoals",n=Cr.get("StorageKeysConfigurations").abTestingGoals.endUserUniqueKey.key,s=Cr.create("RemoteDataSynchronizer",{storageManager:e.storageManager,storageLifetime:r})}.apply(null,arguments)}function L(){this.extend=function(e,t,n,r,i,o){var a=function s(e,t){var n={};for(var r in t){n[r]=t[r];var i="function"==typeof t[r],o="function"==typeof e[r];i&&!o?e[r]=t[r]:i&&o&&t[r].WM_VIRTUAL&&(t[r]=e[r])}return n}(e,new t(n,r,i,o));e._base=a},this.VIRTUAL=function(e){return e.WM_VIRTUAL=!0,e};var e=this.VIRTUAL(function(){throw"Function is pure virtual. must override"});this.WM_PURE_VIRTUAL=function(){return e}}Cr.register("DummyClientStorageManager").asInstance({saveData:function(e,t,n,r){},getData:function(e,t,n){return t},getStorageType:function(){return{type:"jstorage"}}}),Cr.register("RemoteDataSynchronizer").asCtor(function si(e){var u,l,r,i,c,d,f=this,n=Cr.get("TimerManager"),a=function a(e){if(e){var t=arguments;n.libSetTimeout(function(){e.apply(this,Array.prototype.slice.call(t,1))},0)}},p={};function g(e,t){for(var n=t?p[e].success:p[e].fail,r=[].splice.call(arguments,2,arguments.length-2),i=0;i<n.length;i++)try{a.apply(this,[n[i]].concat(r))}catch(o){}p[e]=undefined}this.loadServerData=function(e,t,r,n,i,o,a){var s=function u(e){return!!p[e]}(r);!function l(e,t,n){p[e]||(p[e]={success:[],fail:[]}),t&&p[e].success.push(t),n&&p[e].fail.push(n)}(r,n,i),s||Cr.get("WmAjax").execute({url:e,data:function c(e){return d&&(d(e),e.isEncoded=!0),e}(t),traditional:o,timeout:6e4,success:function(e,t,n){e.ErrorMessage?g(r,!1,e.ErrorMessage):(a||f.updateLocalData(r,e),g(r,!0,e))},error:function(e,t,n){g(r,!1,t)}})},this.retrieveData=function(e,t,n,r,i,o,a){var s=l.getData(n,null);if(s){t=c?c(s):s;u=t}u!==undefined?r&&r(u):f.loadServerData(e,t,n,r,i,o,a)},this.retrieveLocalData=function(e){var t=l.getData(e,null),n=c&&t?c(t):t;return n&&(u=n),u},this.updateLocalData=function(e,t){u=t;var n=i&&t?i(t):t;l.saveData(e,n,r)},this.updateRemoteData=function(e,t,r,i){Cr.get("WmAjax").execute({url:e,data:t,success:function(e,t,n){e.ErrorMessage?a(i,e.ErrorMessage):a(r)},error:function(e,t,n){a(i,t)}})},function t(){l=e.storageManager,r=e.storageLifetime,i=e.encodeStorageData,c=e.decodeStorageData,d=e.encodeServerData}.apply(null,arguments)}).asProto(),Cr.register("TasksPercentageCalculator").asCtor(function ui(t,e){var n;function r(){n=undefined}this.getTasksCompletionProgress=function i(){if(n===undefined){var e=Cr.get("UiDataProvider").uiTasksTree();e&&0<e.length&&(n=t.calculate(e[0],"task"))}return n},function o(){e.bind(r)}()}).asSingleton().dependencies("ObjectTreePercentageCalculator, UIChangeTracker"),Cr.register("VisibleObjectTree").asCtor(function li(n){this.getTree=function r(e,t){return n.getDictionaryValues(function a(e,n,r){var t=e.children();i=e,o=n,i.type()==o&&!i.properties().hasProperty("phantom")&&i.properties().hasProperty("visible")&&(r[e.id()]=e);var i,o;t&&Tr.each(t,function(e,t){a(t,n,r)});return r}(e,t,{}))}}).asSingleton().dependencies("DictionaryUtils"),Cr.register("FramesetsUtils").asCtor(function ci(e,r,a,t){var s,n="FramesetsUtils",i=5,o=null,u=[],l=undefined,c=null,d=undefined,f=this;function p(){for(var e=[],t=g(),n=0;n<t.length;n++)e.push(t[n].contentWindow.document);return e}function g(e,t){return t===undefined&&(t=[]),mtjQuery("frame",e).each(function(){try{0<mtjQuery("frame, frameset",this.contentWindow.document).length&&(t=g(this.contentWindow.document,t)),t.push(this)}catch(e){s("Frame is cross-domain, we can't access it",i)}}),t}function h(){for(var e=0;e<l.length;e++){var t=l[e];f.isFrameActive(t)||null!=t&&null!=t.contentWindow&&m(t)}}function m(e){if(!function n(e){for(var t=0;t<u.length;t++)if(u[t]==e)return!0;return!1}(e)){if(u.push(e),t.isFeatureEnabled("useDocumentReadyForIframeLoad"))return void mtjQuery(e.contentWindow.document).ready(function(){y(e)});r.isIE(9,"lte")?e.addEventListener?e.addEventListener("load",v,!1):e.attachEvent("onload",v):mtjQuery(e).bind("load.walkme",function(){y(e)})}}function v(e){y(e.currentTarget)}function y(e){!function t(e){r.isIE(9,"lte")?e.removeEventListener?e.removeEventListener("load",v,!1):e.detachEvent("onload",v):mtjQuery(e).unbind("load.walkme")}(e),function n(e){for(var t=0;t<u.length;t++)u[t]==e&&u.splice(t,1)}(e)}function S(){null!=o&&(o.clear(),o=null)}function E(){for(var e=0;e<u.length;e++)mtjQuery(u[e]).unbind("load.walkme");u=[]}function w(e){return e.height!==undefined&&e.width!==undefined?e.height*e.width:mtjQuery(e).height()*mtjQuery(e).width()}f.isFramesetsPage=function T(){return d===undefined&&(d=0<Tr("frameset").length),d},f.checkIfAnyFrameIsUnloaded=function C(e){a.libSetTimeout(S,e),l=g(),u=[],o=a.playSetInterval(h,5),null!=c&&c.clear(),c=a.libSetTimeout(E,7e3)},f.waitForFramesToLoad=function b(){return function n(e){return function t(){return 0<u.length?(a.libSetTimeout(t,200),e.promise()):e.resolve()}()}(Tr.Deferred())},f.isFrameActive=function I(e){return null==e?(s("Frame is not active (Frame is null)",i),!1):null==e.contentWindow?(s("Frame is not active (frame.contentWindow is null)",i),!1):null==e.contentWindow.document?(s("Frame is not active (frame.contentWindow.document is null)",i),!1):0==mtjQuery("head",e.contentWindow.document).length?(s('Frame is not active (mtjQuery("head", frame.contentWindow.document).length == 0)',i),!1):0!=mtjQuery("body",e.contentWindow.document).length||0!=mtjQuery("frameset",e.contentWindow.document).length||(s('Frame is not active (mtjQuery("body", frame.contentWindow.document).length == 0)',i),!1)},f.getAllFramesDocuments=p,f.waitForFramesHeadsAndBodies=function _(n){if(f.isFramesetsPage()){var r=40,i=0;!function o(){var e=f.findBiggestFrame();var t=f.isFrameActive(e);if(t)return s("Biggest frame is active. waitCount: "+i,5,"FramesetsUtils"),void n();if(r<i)return void s("Failed waiting for head and body in biggest frame. Stopping execution"+i,1,"FramesetsUtils");a.setWalkmeTimeout(function(){s("Biggest frame wasn't ready on attempt "+ ++i,5,"FramesetsUtils"),o()},200)}()}else n()},f.shouldHandlePageAsFramesets=function A(){return!t.isFeatureEnabled("oldframesets")&&f.isFramesetsPage()},f.findBiggestFrame=function P(e,r){e=e||document;var i=r?w(r):-1;return mtjQuery("frame",e).each(function(){try{if(0<mtjQuery("frame, frameset",this.contentWindow.document).length){var e=this.contentWindow.document;e&&(r=f.findBiggestFrame(e,r),i=r?w(r):-1)}else{var t=w(this);i<t&&(i=t,r=this)}}catch(n){}}),r},f.doForAllFrames=function k(e){for(var t=p(),n=0;n<t.length;n++)e(t[n])},function D(){s=e.wrapCustomerLog(n)}.apply(null,arguments)}).dependencies("Logger, HostData, TimerManager, FeaturesManager"),Cr.register("DocumentsManager").asCtor(function di(e,t,n){var i=e,o=t,a=n.wrapCustomerLog("documentsManager");this.foreachDocument=function(n,e){n(document),i.doForAllFrames(n),o.foreachIframe(function r(e){try{n(e.iframe.contentWindow.document)}catch(t){a("DocumentsManager - Skipping inaccessible document",3)}})}}).dependencies("FramesetsUtils, IFramesManager, Logger");var L=new L;function B(n){function o(e){var t=u.substring(e).indexOf(".");return u.substring(e,e+t)}function a(){var e,t,n,r;if(-1!=(r=u.indexOf("MSIE")))e="IE",t=o(r+5);else if(-1!=u.indexOf("Trident")&&-1!=(r=u.indexOf("rv:")))e="IE",t=o(r+3);else if(-1!=(r=u.indexOf("Edge/")))e="Edge",t=o(r+5);else if(-1!=(r=u.indexOf("Chrome")))e="Chrome",t=u.substring(r+7,u.lastIndexOf(" "));else if(/Firefox\/(\S+)/.test(u))e="Firefox",t=RegExp.$1;else if(r=-1!=u.indexOf("Safari"))e="Safari",/Version\/(\S+)/.test(u)&&(t=RegExp.$1);else if(-1!=(r=u.indexOf("Opera")))if(e="Opera",/Version\/(\S+)/.test(u))t=RegExp.$1;else{var i=Math.max(u.lastIndexOf(" "),u.lastIndexOf("/"));t=u.substring(i+1)}else(n=u.lastIndexOf(" ")+1)<(r=u.lastIndexOf("/"))&&(e=u.substring(n,r),t=u.substring(r+1));return{name:e,version:t,string:e+" "+t,documentMode:l.documentMode}}function s(e,t,n){switch(e){case"lt":return t<n;case"lte":return t<=n;case"gt":return n<t;case"gte":return n<=t;default:return t==n}}function i(e,t){var n=a();return"IE"==n.name&&(!e||s(t,n.version,e))}var u=Cr.create("UserAgent",n),l=n.document,c=function c(e,t){if("android"!=f().name.toLowerCase())return!1;if(!e)return!0;var n=function r(){var e=u.match(/android\s([0-9\.]*)/i);return!!e&&e[1]}();return!!n&&s(t,n,e)};function d(e,t,n){var r=a();if("IE"!=r.name)return!1;if(!e)return!0;var i=n&&n.ownerDocument||l,o=i.documentMode;return o||("BackCompat"==i.compatMode?o=5:"7"==r.version&&(o=7)),s(t,o,e)}function t(e,t,n,r){return r?i(e,t)&&d(e,t,n):i(e,t)||d(e,t,n)}var r=[{n:"Android",os:"Android"},{n:"Linux",os:"Linux"},{n:"X11",os:"UNIX"},{n:"iPad",os:"iOS"},{n:"iPod",os:"iOS"},{n:"iPhone",os:"iOS"},{n:"Mac",os:"MacOS"},{n:"Win",os:"Windows"}],f=function(){for(var e,t=0;t<r.length;t++){var n=r[t].n;if(-1!=u.indexOf(n)){e=r[t].os;break}}return{name:e=e||"Unknown"}};return{browser:a(),getUrl:function e(){return n.location.href},getUrlWithoutQueryString:function p(){return[n.location.protocol,"//",n.location.host,n.location.pathname].join("")},getPageTitle:function g(){return l.title},os:f(),isIE:t,isIEOlderThan:function(e){return t(e,"lt")},isIEDoc:d,isIEBrowser:i,isQuirksMode:function(e){return d(5,null,e)},getWinSize:function(){try{var e=Tr(n);return{height:Math.round(e.height()),width:Math.round(e.width())}}catch(t){return null}},isMobile:function h(){return/android|ipad|android.+mobile|blackberry|iemobile|ip(hone|od)|phone|symbian|windows (ce|phone)/i.test(u||n.navigator.vendor||n.opera)},isAndroid:c,isFirefox:"Firefox"==a().name,isEdge:function m(){return"Edge"==a().name}}}function F(){var t,o,u,s,l,c,d,f,p,n="ABTesting",g={};var h=function h(e){var t=e.GoalType==d.DEPLOYABLE_TYPE.AbExperiment,n=function o(e){return g[e]!=undefined}(e.Id);if(t||n){var r=c(),i=u.syncRetrieveCompletedGoals(r);if(-1==p.inArray(e.Id,i))l("Experiment Goal was completed! Goal ID:"+e.Id+", Goal Name : "+e.Name,1),function a(e,t){u.updateGoalCompleted(e,t.Id)}(r,e),t||function s(e){var t=g[e.Id],n={goal:{Id:e.Id,GoalType:d.DEPLOYABLE_TYPE.AbExperiment,RelatedObjectId:t,Name:e.Name},identifier:e.identifier,interactionGuid:e.interactionGuid};f.raiseEvent(d.EVENTS.AbExperimentLinkedGoalReached,n)}(e)}};function a(e,t){for(var n=[],r=[],i=0;i<e.Goals.length;i++){var o=e.Goals[i];-1<p.inArray(o.Id,t)?n.push(o):r.push(o)}e.Goals=r,e.CompletedGoals=n}var i=!1;function m(e,t){!function i(e){for(var t=0;t<s.length;t++){a(s[t],e)}}(e);for(var n=0;n<s.length;n++){var r=s[n];l("Start watching Experiment goals. ExperimentID : "+r.Id,2),o.startWatchingDeployable(r,undefined)}t&&t()}this.startWatching=function(t){if(!i){i=!0;var e=[];if(function a(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.Goals.length;i++){var o=r.Goals[i];t.push(o.Id),1==o.IsLinkedGoal&&(g[o.Id]=r.Id)}}(s,e),0==e.length)return l("No AbTesting goals were defined"),void(t&&t());o.onGoalCompleted(h);var n=c(),r=u.syncRetrieveCompletedGoals(n);r?(l("Completed goals data exists. Starting goals watch"),f.raiseEvent("ABTestingGoalsFetched"),m(r,t)):(l("No completed goals data exists locally. Fetching from server"),u.asyncRetrieveCompletedGoals(n,e,function(e){l("Completed goals data recieved. Starting goals watch"),f.raiseEvent("ABTestingGoalsFetched"),m(e,t)},function(){l("WalkMe ABTesting - Error when fetching end-user goals. Removing WalkMe",1),Cr.get("LibDestroyer").removeWalkMe("AbTesting - Cannot fetch EndUser Goals",{sendLog:!0})}))}},this.isGoalReached=function(e){for(var t=u.syncRetrieveCompletedGoals(c()),n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},function r(e){o=e.deployablesGoalManager,s=e.experiments,t=e.lib,c=e.getEndUserGuid,l=Cr.get("Logger").wrapCustomerLog(n),f=e.commonEvents,u=new O({lib:t,serverAddress:e.serverAddress,getPermutationId:e.getPermutationId,getEndUserGuid:e.getEndUserGuid,getAuditSource:e.getAuditSource,storageManager:e.storageManager,userGuidContainer:e.userGuidContainer}),d=Cr.get("Consts"),p=Cr.get("ArrayUtils")}.apply(null,arguments)}function M(n){this.deployableCanAutoplay=function r(e,t){n.get(e).run(e,t)},this.deployableCannotAutoplay=function(){},this.deployablesChecksStarting=function(){}}function R(n){this.get=function r(e,t){return{trackUIChange:!0,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:n.AUTOSTART.LOG_FEATURE,elementName:t.Name}}}function U(u,l){this.iterate=function c(e){for(var t=l.getDeployableTypes(),n=0;n<t.length;n++)for(var r=t[n],i=u.get(r),o=i.getAll(),a=0;a<o.length;a++){var s=o[a];e(i,r,s)}}}function V(){var t;this.set=function(e){t=e},this.get=function(){return t},function n(e){t=e}.apply(this,arguments)}function W(){this.run=function(){}}Cr.register("WalkmeInheritance").asInstance(L),Cr.register("POVisibleIframeChecker").asCtor(function fi(){this.executeIfVisible=function i(e){if(!a||window==top)return e();p.push(e);try{var t={wm:!0,type:d};!function r(e,t){var n=e&&e.parent;if(!n||n==e)return;l.apply(n,[t,"*"]);r(n,t)}(window,c.toJSON(t))}catch(n){s.error(n)}},this.reset=function e(){p=[]};var a,s,u,l,c,d="isVisibleFrameAsk",f="isVisibleFrameAnswer",p=[];function g(e){try{var t=c.secureEvalJSON(e.data);if(!t.wm)return;switch(t.type){case d:var n=function o(r,e){if(null!==e){var i=undefined;return Tr("iframe,frame",e).each(function(e,t){if(t.contentWindow==r)return i=Tr(t).is(":mt_visible"),!1;try{if((i=o(r,t.contentDocument))!==undefined)return!1}catch(n){}}),i}}(e.source);n===undefined&&(n=!0),e.source.postMessage(c.toJSON({wm:!0,type:f,isVisible:n}),"*");break;case f:if(t.isVisible){var r=p.shift();r&&r()}}}catch(i){}}(function h(e,t,n,r,i){s=n,c=e,u=r,a=t.isFeatureEnabled("sfLightningPo"),l=i,c=e,a&&function o(){u.listen(g)}()}).apply(null,arguments)}).dependencies("JsonUtils,FeaturesManager,Logger,PostMessageListener, PostMessage"),Cr.register("PreExecutionPassOwnershipWrapper").asCtor(function pi(){var n,r;function i(){o(undefined,undefined)}function o(e,t){n=e,r=t}this.wrap=function a(e,t,n){o(e,t);var r=n();return i(),r},this.setCurrent=o,this.getCurrent=function e(){return n},this.clearCurrent=i,this.getCurrentStepData=function t(){return r}}),Cr.register("PassOwnershipRouter").asCtor(function gi(i,t,o,n){function a(e){return t.load(),n.get(e)}this.evaluateOwnership=function s(e,t,n){var r=a(n);return r?r.evaluateOwnership(e,t):i.PASS_OWNERSHIP.EvaluateOwnership.NotOwner},this.loseOwnership=function r(){o.raiseEvent("loseOwnership");var e=n.get();return e&&e.lostOwnership()},this.gainOwnership=function u(e,t,n){o.raiseEvent("gainOwnership");var r=a();return r&&r.gainedOwnership(e,t,n)},this.evaluateOwnershipByPeeking=function l(){var e=a();return e&&e.evaluateOwnershipByPeeking()}}).dependencies("Consts,FlowStack, CommonEvents, OwnershipManagerProvider"),Cr.register("OwnershipManagerProvider").asCtor(function hi(t,n,r,i){var o,a;function e(e,t,n){o[e]=t,n&&(a=t)}this.addOwnershipManager=e,this.get=function s(e){return e?o[e]:i.isEmpty()&&!r.getData(t.FLOW_BEFORE_PLAY_KEY)?a:n},function u(){o={},e(t.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow,n)}()}).dependencies("Consts, BizflowOwnershipManager, ClientStorageManager, FlowStack"),Cr.register("PassOwnershipManager").asCtor(function mi(a,s,u,n,l,c,d,f,r,i,p){var e=this;e.enabled=q,e.start=function Ie(n){k=!1,function e(r){!function a(e){if(L("[po_frames] restoring priority, temp priority is: "+x,4),window==top)f.sessionGetData(T,0,b,e);else{var t=me();if(t&&t.length){var n=le(function i(){try{top.frames;return top}catch(e){return window}}());t.sort(function(e,t){return t<e?-1:e<t?1:0}),L("[po_frames] used priorities: "+l.toJSON(t),4);for(var r=0;r<t.length&&!x;r++)-1==Tr.inArray(t[r],n)&&(n.push(t[r]),sessionStorage.setItem(j,l.toJSON(n)),x=t[r])}!function o(e,t){e&&(n=e,-1==Tr.inArray(n,le(top)))?t&&t(e):he(null,function(e){o(e,t)});var n}(x,e)}}(function(e){var t=parseInt(e,10)||0;L("got priority "+t+" from sessionStorage",4),fe(t,function(e){0===t||e?(L((e?"inherited priority from parent":"priority is zero")+", getting a new priority",4),he(null,r,!0)):(y=t,D?function n(t){fe(y,function(e){e?he(null,t,!0):t&&t()})}(r):r&&r())})})}(function(){s.raiseEvent(a.EVENTS.PassOwnership.PriorityInitialized,{priority:y}),function e(){mtjQuery(window).bind("focus",he),mtjQuery(window).bind("mouseenter",he)}(),function t(){ce()&&de()}(),L("starting cross domain listening..."),F=n,be()})},e.reset=function _e(){if(!q())return;A=0,L("reset ownership",4),Ce(),Se(),_=!1},e.stop=function Ae(){if(!q())return;(function e(){mtjQuery(window).unbind("focus",he),mtjQuery(window).unbind("mouseenter",he)})(),function t(){c.unregisterEventHandler("message",pe)}(),L("stop ownership",4),_=!1,f.releaseCallback(te)},e.isConditionMet=oe,e.isOwnerByDefault=$,e.getPriority=function Pe(){return y||x},e.loseOwnership=Z,e.determineOwnership=function ke(e,t){if(!q())return;ie(e);var n=oe(t);n||Te();D&&!t?he(null,function(){ke(e,!0)},!0):(L("switching owner..."),n||(ae(),Se(),f.setSyncFlag(b)));return n},e.optimizedDetermineOwnership=function De(){if(!q())return ne().gainOwnership(),!0;return oe()?(_=!0,ye(y),ne().gainOwnership(),!0):(Te(),!1)},e.setOwnershipCondition=ie,e.getSampleRate=X;var g,h,m,v,y,S,E,o,w,T,C,b,I,_,t,A,P,k,D,x,N,O,L,F,M,R=300,B=3e3,U=2e3,V="wm-qp-req",W="wm-qp-res",j="walkme-priorities",G=100,H=1,Y=10,Q=0,z=!1;function q(){return n.isFeatureEnabled("passOwnership")}function K(){return J()||i.isIEBrowser(10,"gte")}function J(){return i.isIEBrowser(9,"lte")}function X(){var e=200;return J()&&(e*=2),e}function $(){return N}function Z(e,t){q()&&(L("losing ownership..."+document.location.href),_&&(e&&(L("reset state: reseting the ownership condition"),Ce()),t?function n(){_=!1,z=!0,L("saving data to resume after unload",3),ie(O),I=!0,O=null,u.setWalkmeTimeout(ee,B)}():_=!1))}function ee(){L("continue listening after "+B+" milliseconds",3),z=!1,be()}function te(){var e=ve();!function t(){return!!A&&(A--,!0)}()&&(_&&y!=e&&(L("owner killed, losing ownership",3),ae(),p.reset()),_||(!e&&function n(){try{if(function e(){return O=f.getData(a.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,b)}())return ne().evaluateOwnership(!0)==a.PASS_OWNERSHIP.EvaluateOwnership.Owner;if($())return L("no ownership condition, owner by default",5),!0}catch(t){d.error(t,"Error determining the owner of a cross domain step")}return!1}()||re()?function r(){var e={priority:y,asyncCallback:Ee};s.raiseEvent(a.EVENTS.PassOwnership.PORegisterPriority,e)}():y==e&&(ue(),he()))),u.libSetTimeout(be,function i(){return I?U:M}()),function o(){F&&(F(),F=null)}()}function ne(){return t=t||Cr.get("PassOwnershipRouter")}function re(){if(ne().evaluateOwnershipByPeeking())return L("[passownership] owner by peeking",5),Y<=++Q;Q=0}function ie(e){O=e,f.saveData(C.key,e,C.expiry,b)}function oe(e,t,n){var r=ne().evaluateOwnership(e,t,n);return r==a.PASS_OWNERSHIP.EvaluateOwnership.Owner||r==a.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined&&$()}function ae(){L("owner killed, losing ownership",3),ne().loseOwnership(),Z()}function se(){f.refreshGetData(b,function(){P=null;var e=function o(){var e=f.getData(w.key,!1,b);L("registered priorities: "+l.toJSON(e),4);var t=0,n=h;for(;!t&&n<m;){for(var r in e)if(e.hasOwnProperty(r)){var i=parseInt(r,10);we()-e[r]<n&&t<i&&(t=i)}n+=g}return t}(),t=ve(),n=re();!e||y!=e||t&&!n?!n&&t&&t!=y&&Te():(L("priority is highest, gaining ownership - "+y,4),ye(y),ue())})}function ue(){L("gaining ownership: "+document.location.href,3),_=!0,ne().gainOwnership(I,function e(){return y+":"+window.location.href}(),!0),I=!1}function le(e){var t=[];try{if(e!=window&&e._walkmeInternals){var n=e._walkmeInternals.ctx.get("CrossDomainManager");if(n&&n.isReady())var r=n.get().getPriority();r&&b==e._walkmeInternals.ctx.get("UserGuidContainer").getUserGuid()&&t.push(parseInt(r,10))}}catch(a){}try{for(var i=e.frames,o=0;o<i.length;o++)t=t.concat(le(i[o]))}catch(a){}return t}function ce(){return i.isIE()||D}function de(){var e=S.key+y;1<=f.getData(e,undefined,b)&&f.increment(e,null,S.expiry,b),u.libSetTimeout(de,R)}function fe(e,t){e?ce()?(L("checking if priority is inherited using clientStorageManager",4),function n(e,i){var o=S.key+e;f.increment(o,null,S.expiry,b,function(){var t=!0;var n=u.libSetTimeout(e,v);function e(e){e=!!e,f.saveData(o,0,S.expiry,b),f.removeData(o,b),t=!1,n&&n.clear(),i&&i(e)}!function r(){t&&f.refreshGetData(b,function(){t&&(1<f.getData(o,undefined,b)&&e(!0),u.libSetTimeout(r,G))})}()})}(e,t)):(L("checking if priority is inherited using window.opener",4),function s(r,t){if(window.opener){var n,i,o;function a(e){L("is priority inherited: "+e,4),i&&i.clear(),n&&n(),t&&t(e)}n=c.registerEventHandler("message",function(e){try{var t=l.secureEvalJSON(e.data);t.requestType==W&&(t.priority==r?(A=H,a(!0)):0==--o&&a())}catch(n){L("Error in priority inherited message event "+n,4)}}),i=u.libSetTimeout(function(){a(!1)},1e3),0==(o=c.postMessageToAllFramesChain(window.opener,l.toJSON({requestType:V})))&&a(!1)}else t&&t(!1)}(e,t)):t&&t(!1)}function pe(e){var t;try{switch((t=l.secureEvalJSON(e.data)).requestType){case V:e.source.postMessage(l.toJSON({requestType:W,priority:y}),"*")}}catch(n){t&&d.error(n,"error handling priority message from parent")}}var ge=[];function he(e,t,n){if(t&&ge.push(t),!k&&!z){var o=y;k=!0;var r=n?null:y;f.increment(E.key,r,E.expiry,b,function(e){e!==y&&(L("updating priority from "+o+" to "+e,4),function r(e){var t=y=e;(function n(e){if(e=parseInt(e,10),window==top)f.sessionSetData(T,e,b);else{var t=l.secureEvalJSON(sessionStorage.getItem(j)||"[]");-1==Tr.inArray(e,t)&&t.push(e),L("[po_frames] storing priority "+e+" in the session",4),sessionStorage.setItem(j,l.toJSON(t))}})(y=e),!_&&ve()!=t||(L("is running during set priority - setting current owner",4),ye(y));L("updated priority: "+y,4)}(e),function i(e){var t=me();if(L("[po_frames] removing priority "+e+" from session",4),t&&e){var n=Tr.inArray(e,t);0<=n&&(t.splice(n,1),sessionStorage.setItem(j,l.toJSON(t)))}}(o));var t=ge;k=!(ge=[]);for(var n=0;n<t.length;n++)t[n](y)})}}function me(){var e=sessionStorage.getItem(j);if(L("[po_frames] getting session priorities: "+e,4),e)return l.secureEvalJSON(e)}function ve(){return f.getData(o.key,!1,b)}function ye(e){return L("setting owner to: "+document.location.href+"owner id:"+e,4),A=H,f.saveData(o.key,e,o.expiry,b)}function Se(){L("removing current owner",4),f.saveData(o.key,null,o.expiry,b)}function Ee(){p.executeIfVisible(function(){L("register in queue with priority "+y,4),f.addToDictionary(w.key,y,we(),w.expiry,b),P&&!P.cleared||(P=u.libSetTimeout(se,g))})}function we(){return(new Date).getTime()}function Te(){L("po_tabs - clear priorities queue",4),f.saveData(w.key,null,w.expiry,b)}function Ce(){f.saveData(C.key,!1,C.expiry,b)}function be(){f.refreshGetData(b,te)}(function xe(){D=n.isFeatureEnabled("po_doubleCheck"),N=window.top==window,M=X(),g=2*M,h=K()?5e3:800,m=K()?2e4:5e3,v="Chrome"==i.browser.name?1200:700,b=r.getUserGuid(),L=d.wrapCustomerLog(a.PASS_OWNERSHIP.LOG_FEATURE),function t(){var e=f.keysConfig.tabbedOwnership;S=e.priorityCheck,E=e.lastPriority,o=e.currentOwner,w=e.prioritiesQueue,T=e.priority.key,C=f.keysConfig.passOwnership.play}(),q()&&function e(){c.registerEventHandler("message",pe)}()}).apply(null,arguments)}).dependencies("Consts,CommonEvents,TimerManager,FeaturesManager,JsonUtils,CommonUtils,Logger,ClientStorageManager,UserGuidContainer,HostData,POVisibleIframeChecker"),Cr.register("AbPermutationManager").asCtor(function vi(y,S,E,w,T,C,e){var b,n,r,t="ABTesting",I=y.keysConfig.abPermutation;function _(e,t){return I.forcedPermutation.key+"-"+e+"-"+t}function i(e,t,r,i){var n=parseInt(y.getData(I.permutationOverride.key));if(!isNaN(n))return T.setCurrentPermutation(n),b("Using debug permutation from 'wm-force-permutation' key: "+n,1),void i(n);if(e){var o=S.getEndUserGuid(!0);if(!1===o)return b("WalkMe ABTesting - Cannot retrieve end user. Stopping execution",1),void C.removeWalkMe("AbTesting - Cannot fetch EndUser",{sendLog:!0});var a,s=function f(e){return I.currentPermutation.key+"-"+e}(o),u=null!=r,l=function p(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].PermutationId);t&&n.push(t.PermutationId);return n}(e,t),c=function g(e,t){var n=parseInt(y.getData(e));if(!isNaN(n)){if(-1<Tr.inArray(n,t))return b("permutation exists in storage: "+n,1),n;b("permutation exists in storage but was out of date: "+n,1)}return b("no valid permutation exists in storage",2),undefined}(s,l);if(c!=undefined&&!u)return T.setCurrentPermutation(c),b("using permutation from storage: "+c,1),void i(c);if(u){if(!0,!function h(e,t,n){if(n==t)return!1;var r=_(e,t);return 1!=y.getData(r)}(o,r,c))return b("using permutation from activation rule: "+r,1),T.setCurrentPermutation(r),void i(r);b("got permutation from activation rule: "+r,2),a=r}else a=function m(e){for(var t=0,n=Math.random(),r=0;r<e.length;r++)if(t+=e[r].Percentage,n<=t)return e[r].PermutationId;return e[e.length-1].PermutationId}(e),b("permutation was drawn: "+a,1);b("sending permutation id to server: "+a,2);var d=t?t.PermutationId:undefined;!function v(e,t,n,r,i,o){E.sendPermutationToServer(e,t,n,r,i,o,A)}(o,a,l,d,u,function(e){var t;if(b("server returned permutation id : "+e,2),b("saving permutation in storage : "+e,3),y.saveData(s,e,I.currentPermutation.expiry),u){b("Activation rule was used.",2);var n=_(o,r);y.saveData(n,1,I.forcedPermutation.expiry),t=a}else t=e;T.setCurrentPermutation(t),b("Final permutation: "+t,1),w.postEvent(u),i(t)})}else i(-1)}function A(){b("WalkMe ABTesting - Error when saving end-user permutation. Removing WalkMe",1),C.removeWalkMe("AbTesting - Cannot fetch EndUser Permutation",{sendLog:!0})}this.setPermutations=function(e,t){n=e,r=t},this.getPermutations=function(){return n},this.initGetPermutation=function(e,t){i(n,r,e,function(e){T.setCurrentPermutation(e),t(e)})},this.getPermutation=function(){return T.getCurrentPermutation()},this.getPermutationById=function(e){for(var t=0;t<n.length;t++)if(n[t].PermutationId==e)return n[t];return!1},function o(){b=e.wrapCustomerLog(t)}.apply(null,arguments)}).dependencies("ClientStorageManager,EndUsersManager,AbPermutationManagerServerCaller, AbTestingEventCollectorCaller, AbCurrentPermutationProvider, LibDestroyer, Logger"),Cr.register("AbCurrentPermutationProvider").asCtor(function yi(){this.setCurrentPermutation=function n(e){t=e},this.getCurrentPermutation=function e(){return t};var t=-1}),Cr.register("AbPermutationManagerServerCaller").asCtor(function Si(u,l,c,d,f,p){this.sendPermutationToServer=function(e,t,n,r,i,o,a){var s=l.execute({url:u.get()+"/AbTesting/SaveEndUserPermutation",dataType:"jsonp",data:{endUser:e,walkmeUserGuid:f.getUserGuid(),source:d.get(),permutationId:t,isForcedPermutation:i,availablePermutationsSerialized:p.toJSON(n),browser:c.browser.string,os:c.os.name,timeout:1e4,defaultPermutation:r}});s.success(function(e){"error"===e?a():o(e)}),s.error(function(e,t,n){a()})},function e(){}.apply(null,arguments)}).dependencies("RecorderServerManager, WmAjax, HostData, AuditSourceManager, UserGuidContainer, JsonUtils"),Cr.register("AbTestingEventCollectorCaller").asCtor(function Ei(i,o,a){this.postEvent=function s(e){try{var t={type:i.EVENT_SENDER_EVENT_APPS.AbTesting,reason:function n(e){return e?i.EVENT_SENDER_AB_TESTING_DRAW_REASONS.ActivationRule:i.EVENT_SENDER_AB_TESTING_DRAW_REASONS.Draw}(e)};o.postEvent(i.EVENT_SENDER_EVENT_TYPES.Draw,t)}catch(r){a.error(r)}}}).dependencies("Consts, EventCollectorEventSender, Logger"),Cr.register("UserAgent").asFunction(function(e){return e.navigator.userAgent}).asProto(),Cr.register("HostData").asFunction(B).dependencies("win"),Cr.register("PopupNotificationsService").asCtor(function wi(o,a,r,s,e,u,l){this.showFailedToStartPopup=function f(e,t,n,r){!function i(e){var t=Tr("<div></div>");l.setInnerHTML(t,e);o.showSpecialPopupBalloon({htmlContent:t},446,{popupStepButtons:[{id:0,name:"OK",action:7}]},function(e){mtjQuery(".walkme-action-ok",e).click(function(){a.releaseBalloons(),u.removeOverlay(),s.raiseEvent(c.FirstStepNotAvailableBalloonClosed)})},!0).then(function(){s.raiseEvent(c.FirstStepNotAvailable)})}(d({balloonSettings:e.BalloonSettings,alertText:t,bbCodeVersion:n,balloonEntityId:r}))},this.createHtmlForNotAvailablePopup=d;var c=e.EVENTS;function d(e){var t=e.isOldBalloon?"21px":"14px",n=r.parse(e.alertText,e.bbCodeVersion);return"<h1 class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' balloon-entityId-id='"+e.balloonEntityId+"' style='CSS-RESET font-family: "+e.balloonSettings.Font+";color: "+e.balloonSettings.HeaderColor+"; font-size: "+t+"; border: none; margin: 10px; word-wrap: break-word;'>"+n+"</h1>"}}).dependencies("PopupBalloonDisplayer, LibDestroyer, BBCodeParser, CommonEvents, Consts, UiUtils, DomManager"),Cr.register("ClickAuditEventSender").asCtor(function Ti(p,g,h,o){function m(e,t,n,r,i){return{type:e,oId:t,oName:n,pInit:o.map(r),pId:"-1",oIsWithAction:i}}this.send=function s(e){try{var t=g.getEventAppByDeployable(e.auditType),n={type:e.initiatorType,objectId:e.initiatorId},r=function f(e,t,n,r,i){var o,a,s=p.get(t),u={};if(s){var l=s.getById(n);l&&(o=l.Name,u=s.getActionData(l),a=s.isWithAction(l))}switch(e){case g.EVENT_APPS.Launcher:return function c(e,t,n,r){return{type:e,oId:t,oName:n,aType:r.Type,aAppType:r.aAppType,aoId:r.ItemId,aoName:r.Name,pId:"-1"}}(e,n,o,u);case g.EVENT_APPS.Content:return function d(e,t,n,r,i,o){var a=m(e,t,n,r,i);o&&null!=o.contentType?a.oType=o.contentType:h.error(null,"No contentType was not provided for resouce params");return a}(e,n,o,r,a,i);default:return m(e,n,o,r,a)}}(t,e.auditType,e.objectId,n,e.additionalParams),i=function o(e){switch(e){case g.EVENT_APPS.Launcher:return g.EVENT_TYPES.Click;default:return g.EVENT_TYPES.Play}}(t);g.postEvent(i,r)}catch(a){h.error(a)}},function e(){}.apply(null,arguments)}).dependencies("DeployablesManagerFactory, EventSender,Logger, ReportInitiatorMapper"),Cr.register("HtmlElementsDataProvider").asCtor(function Ci(e,r){var t;function n(e,t){var n=Tr(e).prop("nodeName");return n&&-1!=r(n.toLowerCase(),t)}this.isInput=function i(e){return n(e,t)},this.isSelectInput=function o(e){return n(e,["select"])},function a(){t=["input","textarea","select"]}.apply(null,arguments)}).dependencies("Consts, inArrayFunc"),Cr.register("LoadingTimeInformer").asCtor(function bi(n,i,o,a,s){this.run=function(){if(o.isFeatureEnabled("addLoadingTime")){var e=function r(e,t){var n=a.timing.map;return n[t]-n[e]}("snippetStartInit","walkmeReadyEnd");i.raiseEvent(n.EVENTS.WalkMeTotalLoadingTime,{totalLoadTime:e});var t="WalkMe total loading time was "+e+" ms";s.customerLog(t,3,n.EVENTS.WalkMeTotalLoadingTime)}}}).dependencies("Consts, CommonEvents, FeaturesManager, WmInternals, Logger"),Cr.register("FontLoadManager").asCtor(function Ii(t,n){this.shouldReturnWhenFontLoadFailed=function(e){return!t.isFeatureEnabled(n.FEATURES.DisableReturnWhenFontLoadFailed)&&e}}).dependencies("FeaturesManager, Consts"),__webpack_require__(676).registerToCtx(Cr),Cr.register("ElementTextExtractor").asCtor(function _i(f){var p=70;function g(e,t,n,r){if(0<n[0]){var i=!0,o=Cr.has("blackListElements")?Cr.get("blackListElements").shouldIgnoreElement:undefined;if((r&&!1===r(e)||e&&1===e.nodeType&&o&&o(e))&&(i=!1),i)if(!e||3!==e.nodeType&&4!==e.nodeType){if(e&&1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(var a=f.getChildNodes(e),s=0,u=a.length;s<u;s++)g(a[s],t,n,r)}else{var l=function c(e){return e=(e=(e=(e=(e=e.replace(new RegExp(String.fromCharCode(160),"g")," ")).replace(new RegExp(String.fromCharCode(10),"g"),"")).replace(new RegExp(String.fromCharCode(13),"g"),"")).replace(new RegExp(String.fromCharCode(9),"g"),"")).replace(new RegExp(" ","g"),""),e=(e=mtjQuery.trim(e)).substring(0,p)}(e.nodeValue);(l=function d(e){if(!function u(e){return null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(e)}(e))return e;var t=-1,n=e.length,r="";for(;++t<n;){var i=e.charAt(t);/[\uD800-\uDBFF]/.test(i)||/[\uDC00-\uDFFF]/.test(i)?r+=(o=void 0,o=i.charCodeAt(0),a=o.toString(16).toUpperCase(),s=2<a.length,"\\"+(s?"u":"x")+("0000"+a).slice(s?-4:-2)):r+=i}var o,a,s;return r}(l=l.toLowerCase()))&&(t.push(l),n[0]--)}}}this.getElementTextArray=function(e,t){var n=[];return g(e,n,[3],t),n}}).dependencies("ElementUtils"),Cr.register("ElementLastKeeper").asCtor(function Ai(r,n,s,u){var l=".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front:visible",i=!0,o=[];function a(){if(i){for(var e=[],t=0;t<o.length;t++)try{c(o[t],t)}catch(n){e.push(t)}for(t=e.length-1;0<=t;t--)o.splice(t,1)}o.length&&r.libSetTimeout(a,3e3)}function c(e,t){var n=e.parent(),r=n.contents().length;if(!function o(e){return 0<e.nextAll(l).length}(e)&&function a(e){var t=0;for(;e=e.previousSibling;)t++;return t}(e[0])+t+1!=r){var i=document.activeElement;e.appendTo(n),s.raiseEvent(u.EVENTS.ElementLocationChanged,{activeElement:i,element:e})}}this.addElement=function(e,t){n.isFeatureEnabled("noElk")||(o.length||r.libSetTimeout(a,3e3),t?o.unshift(e):o.push(e))},this.removeElement=function(e){if(!n.isFeatureEnabled("noElk")){var t=Tr.inArray(e,o);-1!=t&&o.splice(t,1)}},this.setState=function(e){n.isFeatureEnabled("noElk")||(i=e)},function e(){}.apply(null,arguments)}).asSingleton().dependencies("TimerManager, FeaturesManager, CommonEvents, Consts"),Cr.register("AnalyticsManager").asCtor(function Pi(o,u,l,c,d,f){var a,p="uniqueEndUser";this.auditUniqueEndUser=function(e,t,n){try{if(o.getData("wm-ueuT")!=n){!function s(e,t,n){if(!f.isEnabled())return!0;try{c.postEvent(c.EVENT_TYPES.Loaded,{type:c.EVENT_APPS.Walkme})}catch(a){u.error(a)}var r=d.get();if(!r)return!0;var i=r+"/Analytics/UniqueEndUser",o={userId:e,permutationId:t,endUserGuid:n};l.execute({url:i,data:o})}(e,t,n),u.customerLog("auditUniqueEndUser: sent unique user request. userGuid="+e+" permutationId="+t+"endUserGuid="+n,3,p);var r=o.keysConfig.analytics.lastAuditedUser;o.saveData(r.key,n,r.expiryFunc())}}catch(i){a(i,"Failed while auditing unique end users")}},function e(){a=u.error,u.customerLog("Analytics manager was created",3,p)}.apply(null,arguments)}).dependencies("ClientStorageManager, Logger, WmAjax, EventSender, PetaServerNameManager, AuditingEnabledIndicator"),Cr.register("ClickAuditManager").asCtor(function ki(h,m,v,y,a,r,S,E,s,w){this.SendClickAudit=function u(e,t,n,r){var i,o;if(t=s.isDefined(t)?t:-1,n?(i=n.type,o=n.hasOwnProperty("objectId")?n.objectId:n.id):i=E.STEP_PLAY_INITIATOR_ENUM.NONE,e===undefined||!S.isEnabled())return!0;a.send({auditType:e,objectId:t,initiatorType:i,initiatorId:o,additionalParams:r})},this.SendWidgetOpen=function i(e){if(!S.isEnabled())return!0;try{var t;return e&&(t=r.map(e)),y.postEvent(y.EVENT_TYPES.Open,{type:y.EVENT_APPS.Player,pInit:t})}catch(n){return m.error(n),!0}},this.SendShoutOutAudit=function T(e,t,n,r){if(!S.isEnabled())return!0;try{var i=h.get(v.ShoutOut),o=i.getById(e),a=function c(e){var t=e&&e.args;return t?w.extend({},t.buttonText&&{oName:t.buttonText},t.buttonText&&{oId:t.buttonId},t.buttonType&&{oType:t.buttonType}):{}}(r),s=y.getEventAppByDeployable(t),u=function d(e,t){return t&&t.VisualDesign?E.EVENT_SENDER_EVENT_APPS.UIAction:e}(s,o);if(function f(e){return e===E.SHOUTOUT_CLICK_TYPE.Action}(n)){var l=i.getActionData(o,r);return y.postEvent(y.EVENT_TYPES.Click,w.extend({type:u,owType:s,oId:e,owId:e,oName:o.Name,owName:o.Name,aType:l.Type,aAppType:l.aAppType,aoId:l.ItemId,aId:l.ItemId,aoName:l.Name,aName:l.Name,pId:"-1"},a))}if(function p(e){return e===E.SHOUTOUT_CLICK_TYPE.Close||e===E.SHOUTOUT_CLICK_TYPE.XButton||e===E.SHOUTOUT_CLICK_TYPE.RemindMeLater}(n))return y.postEvent(y.EVENT_TYPES.Close,w.extend({type:u,owType:s,oId:e,owId:e,oName:o.Name,owName:o.Name,pId:"-1",reason:n},a))}catch(g){return m.error(g),!0}},function e(){m.wrapCustomerLog(E.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}).dependencies("DeployablesManagerFactory, Logger,DeployableTypes, EventSender,ClickAuditEventSender, ReportInitiatorMapper, AuditingEnabledIndicator,Consts, CommonUtils, wmjQuery"),Cr.register("JQueryElementFinder").asCtor(function Di(n,p,g,s,h,t,m,v,y,r){var i=this,o=["parent","children","next"];function a(e){return"object"==typeof e&&null!==e}function u(e,t,n){return a(e)?S(e,t,n):y.run(e,n)}function l(e,t){var n;e.method!=undefined&&(t=function r(e){return e!=undefined&&-1<mtjQuery.inArray(e,o)}(n=a(e.method)?e.method.name:e.method)?function i(e,t){var n;try{n=e[t]().eq(0)}catch(r){m.error(r,"runJqueryMethod : element has no method named '"+t+"'"),n=Tr()}return n}(t.eq(0),n):(m.customerLog("Unknown jQuery Selector Method : '"+n+"'"),Tr()));return t}function S(e,t,n){try{var r=function o(e,t,n){var r=undefined;if(e!=undefined&&0<(r=u(e,t,n)).length){var i=h.getElementTagName(r[0]);"IFRAME"==i||"FRAME"==i?(t&&(t.ElementDescription.extended.elementIframe&&r.data("iframe",t.ElementDescription.extended.elementIframe),t.ElementDescription.extended.elementIframe=r),r=s.getFrameContents(r)):t&&(t.ElementDescription.extended.elementIframe=!1)}return r}(e.context,t,n),i=u(e.element,t,r);return i=l(e,i)}catch(a){return m.customerLog("jQuery Element Finder: Could not parse input"),Tr()}}function E(e){if(e=Tr.trim(e),!v.startsWith(e,"{")){var t=new Object;return t.element=e,t}try{return r.secureEvalJSON(e)}catch(n){return null}return null}i.findElementsByjQueryComplexSelector=function(e){return S(E(e=t.decodeHtml(e,["&",'"',"'",">"])))},i.getjQueryElementText=function(e){var t=i.findElementsByjQueryComplexSelector(e);return n.checkElementText(t)},i.findElements=function(e,t){if(!e.JquerySelector)return[];var n,r=e.JquerySelector;r=(r=(r=(r=(r=r.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&")).replace(/&gt;/gi,">");var i=",element:";if(v.startsWith(r,"context:")){var o=r.substr("context:".length),a=o.substr(o.indexOf(i)+i.length);o=o.substr(0,o.indexOf(i));var s=y.run(o);if(!(0<s.length))return[];"IFRAME"==h.getElementTagName(s[0])?e.ElementDescription.extended.elementIframe=s:e.ElementDescription.extended.elementIframe=!1,s=s.contents(),n=y.run(a,s),m.customerLog("jQuery selector found these elements:",5),m.customerLog(c,5)}else if(v.startsWith(r,"func:"))try{var u=r.substr("func:".length),l=function d(e){function t(e,t){for(var n=e.split("."),r=t,i=0;i<n.length;i++)r=r[n[i]];return r}var n={result:null,iframe:null},r=new Array;if(e.params)for(var i=0;i<e.params.length;i++)r.push(e.params[i].value);var o=window;if(e.iframe){if(0==(o=mtjQuery(e.iframe)).length)throw"Iframe not found: "+e.iframe;o=(o=o.contents()[0]).parentWindow||o.defaultView,n.iframe=mtjQuery(e.iframe)}var a,s=t(e["function"],o);if(!s)throw"Function not found: "+e["function"];if(e["this"]){if(!(a=t(e["this"],o)))throw"'This' not found: "+e["this"]}else a=-1==e["function"].indexOf(".")?null:t(e["function"].substring(0,e["function"].lastIndexOf(".")),o);var u=s.apply(a,r);return n.result=u,n}(mtjQuery.parseJSON(u));l.iframe&&(e.ElementDescription.extended.elementIframe=mtjQuery(l.iframe));var c=mtjQuery(l.result);return t!=undefined&&!t||(c=c.filter(p.getVisibleFilter(e))),m.customerLog("func selector found these elements:",5),m.customerLog(c,5),c}catch(f){return g.get()?(console.log("Using jQuery selector with function raised an exception:"),console.log(f)):(m.customerLog("Using jQuery selector with function raised an exception:"),m.customerLog(f)),[]}else{n=S(E(r),e)}return 0<n.length&&(t!=undefined&&!t||(n=n.filter(p.getVisibleFilter(e)))),m.customerLog("jQuery selector found these elements:",5),m.customerLog(n,5),n}}).dependencies("CommonUtils, PositionHelper, IsInEditor, FrameContentsProvider, ElementUtils,HtmlDecoder, Logger, StringUtils, JQuerySelectorRunner, JsonUtils"),Cr.register("JQuerySelectorRunner").asCtor(function xi(){this.run=function n(e,t){return mtjQuery(e,t)}}).dependencies(""),Cr.register("ResourceInjector").asCtor(function Ni(){this.inject=function n(e,t){e.append(t)}}),Cr.register("ResourceManager").asCtor(function Oi(f,p,g,c,l,t,d,h,m,v,y,o,S){var E,w,T=this,C={},a="walkme-framesets-fix-id",e="resources",b="walkme-",I="Comic Sans MS",_="QW@HhsXJ",A=50,P=2500,k=function(e,t,n){var r=this;return r.b(n=n||""),r.b("@font-face {"),r.b("\n"+n),r.b("font-family: '"),r.b(r.v(r.f("family",e,t,0))),r.b("';"),r.b("\n"+n),r.b("src: url("),r.b(r.v(r.f("src",e,t,0))),r.b(") "),r.s(r.f("format",e,t,1),e,t,0,69,89,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("format('"),n.b(n.v(n.f("format",e,t,0))),n.b("')")}),e.pop()),r.b(";"),r.b("\n"+n),r.b("font-weight: "),r.b(r.v(r.f("weight",e,t,0))),r.b(";"),r.b("\n"+n),r.b("font-style: "),r.b(r.v(r.f("style",e,t,0))),r.b(";"),r.b("\n"+n),r.b("}"),r.fl()},D=Cr.get("TimerManager");function x(e){return function t(e){return"widget-font"==e.name||"lib-font"==e.name}(e)&&function n(){return g.isAndroid("4.3","lt")&&"Chrome"!=g.browser.name}()}function N(e,t,n,r){E("Start loading embeded file for font '"+e.name+"'",4),function i(e,t,n){var r=b+e.name;C[r]={name:r,tagId:t,heads:[n[0]]}}(e,t,n),o.load(r)}function O(e){e&&(!function o(e){try{var t=Tr("head",e.document);M("",a,t),D.libSetTimeout(function(){t.find("#"+a).remove()},100)}catch(i){}var n=e.frames;for(var r=0;r<n.length;r++)o(n[r])}(top),D.libSetTimeout(function(){O(e-1)},100))}function L(e,t,n,r){if(n||r){E("Start tracking font '"+e.name+"'",4);var i=Tr(t.createElement("span")).addClass("walkme-font-tester").important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","font-family":I,"font-size":"250px","line-height":"normal"});S.setInnerHTML(i,(e.dummeyText||_)+"a"),i.appendTo(Cr.get("TransparentLayerProvider").tryGetWalkMeLayer(Tr("body",t)).or("html",t));var o=i[0].offsetWidth,a=i[0].offsetHeight,s=b+e.name;i.important("font-family",s+","+I),function u(e,t,n,r,i,o,a){if(!m(e).isSafe())return;E("================================================================================",5);E("Tracking font '"+i+"'",5);E("Comparison tester width: "+t+" === "+e[0].offsetWidth,5);E("Comparison tester height: "+n+" === "+e[0].offsetHeight,5);E("================================================================================",5);t===e[0].offsetWidth&&n===e[0].offsetHeight?r<0?(E("Finished with failure tracking font '"+i+"'",4),e.remove(),w[i]=!0,a&&a()):D.libSetTimeout(function(){u(e,t,n,r-A,i,o,a)},A):(E("Finished successfully tracking font '"+i+"'",4),e.remove(),w[i]=!1,o&&o())}(i,o,a,P,s,n,r)}else E("Stop Tracking font '"+e.name+"' because we don't have success/fail Callback",4)}function s(){return!!document.createStyleSheet}function F(e,t,n,r,i){try{!function u(e,t,n,r,i){var o=c._walkmeInternals;{if(o&&o.customInjectStyleSheetFuncs){E("Attempting to use custom CSS Injector");for(var a=0;a<o.customInjectStyleSheetFuncs.length;a++){var s=o.customInjectStyleSheetFuncs[a];"function"==typeof s&&s(e,t,n,r,i)}return!0}return!1}}(e,t,n,r,i)&&!function l(e,t,n,r,i){var o,a=t?t[0].ownerDocument:Tr("body")[0].ownerDocument;i&&(o=function u(e,t){for(var n=t.styleSheets,r=0;r<n.length;r++)if(n[r].owningElement.id==e)return r}(i,a));var s=o===undefined?a.createStyleSheet(""):a.createStyleSheet("",o);s.cssText=e,s.owningElement.id=r,s.walkmeToRemove=!0,s[n]=!0}(e,t,n,r,i)}catch(o){throw E("Cannot inject style sheet"),o}}function M(e,t,n,r,i){var o,a=n||Tr("head");l.get()&&mtjQuery("#"+t,a).remove();var s=Tr('<style type="text/css" class="walkme-to-remove">'+(i?"":e)+"</style>");if(t&&s.attr("id",t),r&&(o=a.find("#"+r)),o&&0<o.length?o.first().before(s):d.inject(a,s),i){var u=s.prop("styleSheet");u?u.cssText=e:s.append(e)}return s}T.font=function(e,t,n,r){if(h.isFeatureEnabled("noFonts"))n&&n();else{if(t&&t.length||(t=Tr("head")),!t.length)return f.error(null,"cannot inject font - head element does not exist"),void(r&&r());var i=t[0].ownerDocument;if(g.isIEDoc(8,"lte",t[0])&&"widget-font"!=e.name&&!h.isFeatureEnabled("loadAllFonts"))return E("Not loading font '"+e.name+"' (IE7/8), to load all fonts enable the loadAllFonts feature",4),void(n&&n());E("Start loading font '"+e.name+"'",4);var o="wm-font-"+e.id,a=Tr("#"+o,t),s=a&&!!a.length;if(h.isFeatureEnabled("injectTagsIfDisabled")&&(s=s&&!a.attr("disabled")),s)L(e,i,n,r);else{var u=C[b+e.name];if(u)return-1==Tr.inArray(t[0],u.heads)&&u.heads.push(t[0]),void L(e,i,n,r);if(y.shouldReturnWhenFontLoadFailed(w[b+e.name]))r();else{var l=T.getResourcePath(e.url);if(g.isIEDoc(8,"lte",t[0])){if(function c(e,t){for(var n=0;n<e[0].ownerDocument.styleSheets.length;n++)if(e[0].ownerDocument.styleSheets[n][t])return!0;return!1}(t,e.name))return void L(e,i,n,r);!function d(e,t,n,r){E("Start loading eot file for font '"+e.name+"'",4),r+=".eot",g.isIEBrowser(8)&&h.isFeatureEnabled("fixFontsCompatibility")&&(r+="?frame="+p.getFrameIndex(n[0].ownerDocument.parentWindow));var i=v.to_html(k,{family:b+e.name,src:r,weight:"normal",style:"normal"});g.isIEBrowser(8)?M(i,t,n):F(i,n,e.name,t)}(e,o,t,l)}else x(e)&&(l=l.concat("_svg")),N(e,o,t,l);L(e,i,g.isIEDoc(8,null,t[0])?function(){h.isFeatureEnabled("highPerf")||O(5),n&&n()}:n,r)}}}},T.preloadResources=function(e,t){e=e||Tr("head");for(var n=0;n<t.length;n++){var r=T.getResourcePath(t[n].url);r+=g.isIEDoc(8,null,e[0])?".eot":".js";var i=new Image;i.src=r,i.onload=function(){}}},T.fonts=function(e,t,n,r){var i=e.length,o=!1;if(i||n&&n(),n||r)for(a=0;a<e.length;a++)T.font(e[a],t,function(){0==--i&&(o?r&&r():n&&n())},function(){o=!0,0==--i&&r&&r()});else for(var a=0;a<e.length;a++)T.font(e[a],t)},T.finishFontLoad=function(e,t){E("finish loading font '"+e+"'",4);for(var n="",r=0;r<t.length;r++)n+=v.to_html(k,{family:e,src:t[r].src,format:t[r].format,weight:t[r].weight,style:t[r].style});var i=C[e];delete C[e];for(r=0;r<i.heads.length;r++)T.injectCss(n,i.tagId,Tr(i.heads[r]),e,null,!0)},T.getResourcePath=function(e){return e&&e.indexOf("/")?e:e=t.get()+e},T.injectCss=function(e,t,n,r,i,o){s()?F(e,n,r,t,i):M(e,t,n,i,o)},T.injectCssFile=function(e,t){var n=t||{},r=n.cssId||b+p.generateGUID(),i=n.head?n.head.ownerDocument:document,o=n.head||i.getElementsByTagName("head")[0],a=i.createElement("link");return a.id=r,a.rel="stylesheet",a.type="text/css",a.href=e,a.media="all",o.insertBefore(a,i.getElementById(n.beforeId))},T.refreshContentCss=function(e,t){var n=M(t+" :before,"+t+" :after{content:none !important;}",null,e);D.libSetTimeout(function(){n.remove()},0)},T.emptyStyleSheets=function(){if(s())for(var e=document.styleSheets,t=0;t<e.length;t++)e[t].walkmeToRemove&&(e[t].disabled=!0)},function n(){E=f.wrapCustomerLog(e),"Edge"==g.browser.name&&(I="Arial"),w={}}.apply(null,arguments)}).dependencies("Logger, CommonUtils, HostData, win, IsInEditor, CdnServer, ResourceInjector, FeaturesManager, wmjQuerySafe, Mustache, FontLoadManager, EmbededFontLoader, DomManager"),Cr.register("EmbededFontLoader").asCtor(function Li(){this.load=function t(e){Tr.ajax({type:"GET",url:e+".js",dataType:"script",cache:!0})}}),Cr.register("IFramesManager").asCtor(function Fi(e,a,t){this.remapTopIframes=function y(){if(v())return;u&&u.clear();var e=(new Date).getMilliseconds();c++;var n=[];Tr(document).find(l).each(function(){for(var e=!1,t=0;t<s.length;t++)if(s[t].iframe==this){s[t].foundInRemap=c,e=!0;break}e||n.push(this)});for(var t=0;t<s.length;t++)if(s[t].foundInRemap!=c){var r=s[t];p(r.iframe),s.splice(t,1)}for(var t=n.length-1;0<=t;t--)f(n[t],undefined);var i=(new Date).getMilliseconds();var o=i-e;d("Remapping top iframes took "+o+" ms",5);u=a.libSetTimeout(y,1e4)};var s,n,u,l="iframe:not(#walkme-hidden-iframe),frame",c=-1,r=!1,i=[],d=e.wrapCustomerLog("IFramesManager");function o(e,t,n){var r=(new Date).getMilliseconds();if(Tr(e).find(l).each(function(){var e=f(this,t);e.documentAccessible&&o(Tr(e.iframe.contentWindow.document),e),n&&g(e)}),t==undefined){var i=(new Date).getMilliseconds();d("Mapping iframes took "+(i-r)+" ms",5)}}function f(e,t){var n={iframe:e,documentAccessible:m(e),children:[]};return t?t.children.push(n):s.push(n),g(n),Tr(e).on("load.wmIframeManager",function(){n.children=[],m(e)&&(o(Tr(e.contentWindow.document),n,!0),g(n))}),n.documentAccessible||d("Cross domain iframe detected: "+e.src,4),n}function p(e){try{Tr(e).off("load.wmIframeManager")}catch(t){}}function g(e){for(var t=i.length-1;0<=t;t--)i[t](e)}function h(){n={children:s=[]}}function m(e){try{e.contentWindow.document}catch(t){return!1}return!0}function v(){return t.isFeatureEnabled("dontMapIframes")}this.mapIframes=function(){v()?h():(r||(h(),o(document,undefined)),r=!0)},this.getAll=function(){return s},this.foreachIframe=function(r,i){!function o(e){for(var t=0;t<e.children.length;t++){var n=e.children[t];i&&!n.documentAccessible||(r(n),o(n))}}(n)},this.onIframeLoad=function(e){i.push(e)},this.unbindIframeLoad=function(e){for(var t=i.length-1;0<=t;t--)if(i[t]===e){i.splice(t,1);break}},this.releaseEvents=function(){if(s)for(var e=0;e<s.length;e++)p(s[e].iframe)}}).dependencies("Logger, TimerManager, FeaturesManager"),Cr.register("PageVisitIdProvider").asCtor(function Mi(e,t,n,r){var i,o=[t.UI_CHANGE_NOTIFIERS.HASH,t.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS,t.UI_CHANGE_NOTIFIERS.HISTORY,t.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR];function a(e){!function n(e){for(var t=o.length-1;0<=t;t--)if(e[o[t]])return!0;return!1}(e.notifiers)||s()}function s(){i=n.generateGuid(!0),e.raiseEvent(t.EVENTS.PageVisitIdUpdated,{id:i})}this.init=function u(){r.bind(a),s()},this.get=function l(){return i},this.update=s,this.updateNotifiers=function c(e){o=e}}).dependencies("CommonEvents, Consts, GuidGenerator, UIChangeTracker"),Cr.register("ScrollManager").asCtor(function Ri(d,g,f,t,h,p,m,v,o,i,e,n){var a,y,S,E,w,T=this;function C(r,i,s,u,l,c){return!t.isQuirksMode(a[0])&&(!!e("html")||!T.isElementVisibleBeforeScroll(i,T.calculateScrollMargins(i,s),u)&&e("body"));function e(e){var t={duration:"slow",rootElement:e,elementToFindScrollableFor:i,complete:function(){c&&c()},heightLimit:!f.isFeatureEnabled("noHgtLmt"),customScrollElement:w.Custom.customScrollElement,forceFindScrollable:f.isFeatureEnabled(p.FEATURES.ForceFindScrollable),isElementInIFrame:v.isInIframe(i)};if(s){var n=l.height();t.endScroll={scrollOptions:s,balloonHeight:function o(e,t,n){var r=e.height(),i=parseInt(d.getSettingsValue(E,"topOffset",0));return 0==t?n+S.arrowHeight()+1-i:2==t?r+n+S.arrowHeight()+1-i:r<n?n-i:(r-n)/2+n-i}(i,u,n),totalDrawnHeight:function a(e,t,n){var r=e.outerHeight(),i=g.getElementViewport(e).height()-0;return I(r,n,t,S.arrowHeight(),i)?n:0==t||2==t?r+n+S.arrowHeight()+1-parseInt(d.getSettingsValue(E,"topOffset",0)):Math.max(r,n)}(i,u,n)}}return r.scrollintoview(t)}}function b(e,t,n,r){t&&!r?window.scrollTo(0,e.offset().top-s(e,t)):i.doNormalScroll(e,n,t)}function s(e,t){return"px"==t.unit?t.distance:g.getElementViewport(e).height()*t.distance/100}function I(e,t,n,r,i){return 0==n||2==n?i<e+t+r:i<e}T.scrollToElementIfNeeded=function(e,t,n,r,i,o,a,s){try{var u,l=!1,c=T.getScrollOptions(r);if(m.shouldTryAnimateScroll(e,o,r)){u=function d(e,t,n,r,i){var o=i[0],a=e,s=g.getElementViewport(e),u=T.calculateScrollMargins(e,n),l=y.top<r.offset().top||y.top+e.height()<r.offset().top+r.height(),c=s.top()-0+s.height()-0;return a=!n||1!=t&&3!=t?l?"down"==(c-u.bottom<=y.top+e.height()+r.height()+o.height()?"down":"up")?r:e:"down"==(s.top()+u.top>=y.top-r.height()-o.height()?"up":"down")?e:r:e.outerHeight()>r.height()?e:r,I(e.height(),r.height(),t,o.height(),s.height()-0)&&(a=r),a}(e,i,c,a,s);try{C(u,e,c,i,a,n)&&(l=!0)}catch(f){}}l&&o!=m.SCROLL_MODES.Normal||function p(e,t,n,r,i){var o=T.calculateScrollMargins(e,r);T.isElementVisibleBeforeScroll(e,o,n)||b(e,r,!0,v.isInIframe(t)),i&&i()}(u=e,e,i,c,n)}catch(f){h.error(f)}},T.getScrollOptions=function(e){var t=d.getSettingsValue(e,"endScroll",-1);if(0<=t)return{distance:parseInt(t,10),unit:d.getSettingsValue(e,"scrollUnit","%"),force:d.getSettingsValue(e,"forceScroll",0)}},T.scrollToBalloon=function(e,t,n){var r=T.calculateScrollMargins(e,t);if(!o.isElementInViewport(n,r)){var i=e.offset().top>n.offset().top;b(n,t,i)}},this.calculateScrollMargins=function(e,t){return t&&t.force?{top:s(e,t),bottom:0}:p.DEFAULT_POSITIONS},T.isElementVisibleBeforeScroll=function(e,t,n){return o.isElementInViewport(e,t)&&m.isBalloonPositionVisibleRelativeToParents(e,n)},function r(){a=n.element,S=n.balloonDrawer,E=n.settings,y=a.offset(),w=e.get()}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ElementUtils, FeaturesManager, HostData, Logger, Consts, ScrollUtils, ElementInIframeIndicator, PositionHelper, IFrameScrollManager, SiteConfigManager"),Cr.register("IFrameScrollManager").asCtor(function Bi(o){this.doNormalScroll=function(e,t,n){e[0].scrollIntoView(t);var r="hidden"===Tr("html").css("overflow"),i="hidden"===Tr("body").css("overflow");(o.isQuirksMode(e[0])||r||i)&&Tr("html")[0].scrollIntoView()},function e(){}.apply(null,arguments)}).dependencies("HostData"),Cr.register("AutoStartHelper").dependencies("CrossDomainManager").asCtor(function Ui(a){this.addAutoStartHelper=function i(e,t){n[t]=e},this.clearCache=function o(e){var t=s(e,"clearCache");t&&t.clearCache()},this.checkShouldAutoStart=function l(e,t,n){var r=s(e),i=r&&r.checkShouldAutoStart(e,t,n);{if(i==undefined&&a.get().enabled()){var o=u(e);return!o||o.checkShouldAutoStart(e,t,n)}if(i==undefined)return!0}return i};var r,n={};function s(e,t){return a.get().enabled()?function n(e){r=r||Cr.get("PassOwnershipAutoStartHelper");if(r[e])return r}(t):u(e)}function u(e){return n[e]}}),Cr.register("PassOwnershipAutoStartHelper").asCtor(function Vi(a,s,e,u,l){this.checkShouldAutoStart=function d(e,t){var n=function i(e){var t=undefined;e==s.Tutorial?t=a.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:e==s.BusinessSolution&&(t=a.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow);return t}(e);if(n!=undefined){var r=function o(e,t){return e==s.Tutorial?{walkthruId:t.Id,step:t.Steps[0]}:{flowId:t.Flow.Id,node:l.getNodeById(t.Flow.Id,t.Flow.RootFlowNodeId)}}(e,t);if(!u.get().isConditionMet(!0,r,n))return u.get().isOwnerByDefault()?c("AutoStartHelper - not top window, not starting"):c("AutoStartHelper - condition not met, not starting"),!1}};var c=e.wrapCustomerLog(a.AUTOSTART.LOG_FEATURE)}).dependencies("Consts, DeployableTypes, Logger, CrossDomainManager, FlowsContainer"),Cr.register("AutoStartManager").asCtor(function Wi(u,o,l,e,c,d,s,f,t,p,g,n,h,m,a,v,y,S){var E=this,w=o.wrapCustomerLog(p.AUTOSTART.LOG_FEATURE);function T(e,t,n){if(!function i(e){return f.getSettingsValue(e.Settings,"ASEnabled",0)}(t))return w("Deployable doesn't support auto start: "+t.Name,4),!1;var r=function s(e,t){var n={forceStart:!1,canStart:!1},r=t?t+"-":"",i=u.keysConfig.remindMeLater.remindMeLater.key+"-"+r+e.Id,o=u.getData(i,undefined,undefined,undefined);if(o){var a=S.secureEvalJSON(o);a.expiry&&a.expiry<Date.now()&&(n.forceStart=!0,n.startResult={shouldStart:!0,repeatCookieExpiry:-1,store:function(){u.removeData(i)}})}else n.canStart=!0;return n}(t,n);return r.forceStart?(w("Deployable can auto start (remind me later): "+t.Name,4),r.startResult):!!r.canStart&&function a(e,t,n){if(e.autoStartEnabled(t.Id)){var r=function o(e,t){var n=function i(e,t){var n=d.keysConfig.autoStart.repeat.key;return 0==e?n+"-"+t.Id:n+"-"+e+"-"+t.Id}(e,t),r=f.getSettingsValue(t.Settings,"ASRep","visit");""===r&&(r="visit");return E.checkRepeatCookie(n,r)}(n,t);if(r.shouldStart)return w("Deployable can auto start (storage): "+t.Name,4),r}return!1}(e,t,n)}function i(e,t,n,r){if(1!=f.getSettingsValue(n.Settings,"ASCTEnabled",0))return w("Non-conditional autostart, trying to auto start "+n.Name,3),b(t,n,r);w("Autostart is enabled for deployable: "+n.Name,3);var i=a.get(t,n,"ASCT");if(""!=i)try{!function l(e,t,n,r,i){var o=m.get(t,n),a=v.createConditionChecker(i,o);(function s(e,t,n,r,i){C(i.getCurrentEvaluationValueAndStopEvaluating(r),e,t,n,n,i)})(t,n,r,i,a),function u(n,r,i,o,e,a){a.onEvaluated(function(e){var t=T(n,i,r);t&&C(e,r,i,t,o,a,!0)}),a.evaluateAsyncAndDontEvaluateImmediately(e)}(e,t,n,r,i,a)}(e,t,n,r,i)}catch(o){}}function C(e,t,n,r,i,o,a){e?(w("Autostart condition met, trying to auto start: "+n.Name,3),function s(e,t,n,r,i,o){function a(){l.clearCache(e),b(e,t,n,o)&&-1!=r.repeatCookieExpiry&&i.cleanResources()}e==c.Tutorial?Cr.get("WalkthruStepsLoader").afterStepsLoaded(t.TutorialId,a):a()}(t,n,r,i,o,a)):w("Condition didn't meet, not starting deployable: "+n.Name,3),g.deprecatedRaiseEvent(p.EVENTS.AutoStart.ConditionEvaluated,n,{result:e})}function b(n,r,i,e){if(y.bind(p.EVENTS.AutoStart.Activated,function o(e,t){y.unbind(p.EVENTS.AutoStart.Activated,o);t.deployableType==n&&t.deployable==r&&i.store();w("Autostart successfully activated: "+r.Name,3)}),function a(e,t,n){return l.checkShouldAutoStart(e,t,n)}(n,r,e)){var t=parseFloat(f.getSettingsValue(r.Settings,"Delay",0));return t?s.libSetTimeout(function(){h.deployableCanAutoplay(n,r)},1e3*t):h.deployableCanAutoplay(n,r),!0}return h.deployableCannotAutoplay(n,r),!1}this.run=function(){h.deployablesChecksStarting(),w("Trying to find a deployable that can auto start",1),l.clearCache(),t.wrapSession(function(){n.iterate(function(e,t,n){var r=T(e,n,t);r?i(e,t,n,r):h.deployableCannotAutoplay(t,n)})})},this.checkRepeatCookie=function(e,t,n){var r={shouldStart:!0,repeatCookieExpiry:-1},i=n?d:u;if("always"==t);else{"visit"==t&&(e+="-v");1==i.getData(e,undefined,undefined,1)?r.shouldStart=!1:f.isNumber(t)?r.repeatCookieExpiry=t:"visit"==t?r.repeatCookieExpiry=p.ONE_DAY_SECONDS:"once"==t?r.repeatCookieExpiry=p.COOKIE_LIFE_2_YEARS:o.error(new Error("checkRepeatCookie bad value: "+t))}return r.store=function(){0<=r.repeatCookieExpiry&&i.saveData(e,1,r.repeatCookieExpiry)},r},function r(){}.apply(null,arguments)}).dependencies("ClientOrServerStorageManager, Logger, AutoStartHelper, DeployablesManagerFactory, DeployableTypes, ClientStorageManager, TimerManager, CommonUtils,ElementFinder, Consts, CommonEvents, AutoStartDeployablesIterator, AutostartDeployablesOrchestrator, AutoStartConditionParamsProvider, ConditionTreeGetter, ConditionCheckerFactory, WmInternals, JsonUtils"),Cr.register("AutoStartStoragePersister").asCtor(function ji(o,i){function a(e,t,n){return i.AUTOSTART.STOP_CONDITION_KEY+t+"-"+e.Id+"-"+n}this.setStopCondition=function(e,t,n){if(e.Settings.stopOn&&e.Settings.stopOn[n]){var r=a(e,t,n);o.saveData(r,1,i.COOKIE_LIFE_2_YEARS)}},this.isStopConditionDataExsit=function(e,t,n,r){if(!r)return!1;var i=a(e,t,n);return!!o.getData(i,!1)||void 0}}).dependencies("ClientOrServerStorageManager, Consts"),Cr.register("AutostartStopConditionChecker").asCtor(function Gi(i){this.check=function(e,t){var n=e.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&i.isStopConditionDataExsit(e,t,r,n[r]))return!1;return!0}}).dependencies("AutoStartStoragePersister"),Cr.register("DeployablesRunnerFactory").asCtor(function Hi(e,t,n){this.get=function i(e){return r[e]};var r=[];!function o(){r[e.ShoutOut]=t,r[e.Tutorial]=n,r[e.BusinessSolution]=n,r[e.Survey]=n}()}).dependencies("DeployableTypes, ImmediateDeployablesRunner, QueueDeployableRunner"),Cr.register("ImmediateDeployablesRunner").asCtor(function Yi(r,i,o,e,a){var s;this.run=function u(e,t){s("Autostarting: "+t.Name,3),i.raiseEvent(r.EVENTS.AutoStart.Activated,{deployableType:e,deployable:t}),function n(e){return e.StopWhenFlowPlaying&&null!=a.getCurrentFlowId()}(t)?s("ShoutOut can not be played when flow is playing: "+t.Name,3):o.get(e).activateById(t.Id,{type:r.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})},function t(){s=e.wrapCustomerLog(r.AUTOSTART.LOG_FEATURE)}()}).dependencies("Consts, CommonEvents, DeployablesManagerFactory, Logger, FlowsContainer"),Cr.register("QueueDeployableRunner").asCtor(function Qi(r,i){this.run=function s(e,t){o.push({deployableType:e,deployable:t}),function n(){i.isSomeoneRunning().then(a).fail(function(){var e=o.shift();r.run(e.deployableType,e.deployable)})}()};var o=[];function a(){o=[]}}).dependencies("ImmediateDeployablesRunner, AutoStartRunningState"),Cr.register("AutoStartRunningState").asCtor(function zi(i){this.isSomeoneRunning=function e(){var t=Tr.Deferred(),n=i.getRunningStateServices();return function r(){var e=n.shift();if(!e)return void t.reject();e.isRunning().then(t.resolve,r)}(),t.promise()},this.cleanResources=function n(){for(var e=i.getRunningStateServices(),t=0;t<e.length;t++)e[t].cleanResources&&e[t].cleanResources()}}).dependencies("AutoStartTypes"),Cr.register("EventBasedRunningState").asCtor(function qi(o,e,t){var n,r;this.isRunning=function u(){return r.promise()},this.cleanResources=function l(){i(!1)},this.getCurrentState=function c(){return n};var a=[{eventNames:t.resetEvents,method:s},{eventNames:t.startingEvents,method:function d(){r=Tr.Deferred()}},{eventNames:t.resolvingEvents,method:function f(){r.resolve(),n=e.AUTOSTART.DEPLOYABLE_RUNNING_STATE.RUNNING}},{eventNames:t.rejectingEvents,method:function p(){r.reject(),n=e.AUTOSTART.DEPLOYABLE_RUNNING_STATE.NOT_RUNNING}}];function i(e){for(var t=e?o.bind:o.unbind,n=0;n<a.length;n++)for(var r=a[n],i=0;i<r.eventNames.length;i++){t(r.eventNames[i],r.method)}}function s(){(r=Tr.Deferred()).reject(),n=e.AUTOSTART.DEPLOYABLE_RUNNING_STATE.NOT_RUNNING}!function g(){s(),i(!0)}()}).asProto().dependencies("WmInternals, Consts"),Cr.register("SurveyRunningState").dependencies("Consts").asFunction(function(e){return Cr.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Surveys.SurveyCompleted],startingEvents:[e.EVENTS.Surveys.StartSurvey],resolvingEvents:[e.EVENTS.Surveys.SurveyPlayed],rejectingEvents:[e.EVENTS.Surveys.SurveyFailedShowing]})}),e.register([re.PLATFORM.Web,re.PLATFORM.MobileWeb,re.PLATFORM.Desktop],function(){Cr.register("AutostartDeployablesOrchestrator").asCtor(M).dependencies("DeployablesRunnerFactory")}),e.register([re.PLATFORM.Web,re.PLATFORM.MobileWeb,re.PLATFORM.Desktop],function(){Cr.register("AutoStartConditionParamsProvider").asCtor(R).dependencies("Consts")}),Cr.register("AutoStartTypes").asCtor(function Ki(e,t,n){var o;this.addDeployable=function a(e,t,n){var r=function i(n){var r=-1;return Tr.each(o,function(e,t){t.type==n&&(r=e)}),r}(n);o.splice(r+1,0,{type:e,runningState:t})},this.getDeployableTypes=function r(){return Tr.map(o,function(e){return e.type})},this.getRunningStateServices=function i(){return Tr(o).filter(function(e,t){return t.runningState}).map(function(e,t){return t.runningState}).toArray()},function s(){o=[{type:e.ShoutOut},{type:e.BusinessSolution,runningState:t},{type:e.Survey,runningState:n}]}()}).dependencies("DeployableTypes, BizFlowRunningState, SurveyRunningState"),e.register([re.PLATFORM.Web,re.PLATFORM.MobileWeb,re.PLATFORM.Desktop],function(){Cr.register("AutoStartDeployablesIterator").asCtor(U).dependencies("DeployablesManagerFactory, AutoStartTypes")}),Cr.register("GetterSetterManager").asInstance(V),Cr.register("RecorderServerManager").asCtor(V).args([""]),Cr.register("PetaServerNameManager").asCtor(V),Cr.register("AuditSourceManager").asCtor(function Ji(n){var r;this.set=function i(e){var t=n.SOURCES[e];r=t!=undefined?t:parseInt(e)},this.get=function e(){return r},function t(){r=n.SOURCES.production}()}).dependencies("Consts"),Cr.register("IsInEditor").asCtor(V).args([!1]),Cr.register("IconTemplates").asInstance({customImages:[],htmlImages:[]}),Cr.register("IsInScreenshot").asCtor(V).args([!1]),Cr.register("IsInWYSIWYG").asCtor(V).args([!1]),Cr.register("FeaturesManager").asCtor(function Xi(n,t){var r,i=this,o={};function a(){var e=n.get();return e&&e.Features?e.Features:function t(){return r=r||Cr.has("WalkmeConfigManager")&&Cr.get("WalkmeConfigManager")}()&&r.Data&&r.Data.Features?r.Data.Features:""}i.isFeatureEnabled=function(e){return!!i.isReady()&&(o[e]===undefined&&(o[e]=-1<a().indexOf(e)),o[e])},i.isReady=function(){return 0<a().length},i.whenFeaturesReady=function(e){i.isReady()?e():t.bind("DataLoadedEvent",function(){e()})}}).dependencies("SiteConfigManager,WmInternals"),Cr.register("LanguageManager").asCtor(function $i(n,e,s,u,l,i){var c=s.keysConfig.language.current.key,r=s.keysConfig.language.current.expiry,d="_default_",f="",p=[],g=[];function o(){var e=s.getData(c);if(e==d&&(e=f),!e&&e!==f&&n.walkme_get_language)try{e=n.walkme_get_language()}catch(t){}return e&&h(e,p)?e:f}function a(e,t){var n=e.url;if(t&&h(t,e.languages)){var r=i.getFileExtension(n);n=(n=n.substring(0,n.length-r.length-1))+"_"+t+"."+r}return n}function h(e,t){for(var n=0;n<t.length;n++)if(t[n].shortName==e)return!0;return!1}this.setLanguages=function(e){p.length=g.length=0;var t=s.getData(c);t==d&&(t=f);for(var n=!1,r=0;r<e.length;r++){var i=e[r].languages;u.raiseEvent(l.EVENTS.BeforeLanguageSet,{languages:i});for(var o=0;o<i.length;o++){var a=i[o];p.push(a),a.showInPlayer&&g.push(a),a.shortName===t&&(n=!0)}}n||t===undefined||s.removeData(c)},this.getAllLanguages=function(){return p},this.getMenuLanguages=function(){return g},this.getCurrentLanguage=function(){var e=o();return h(e,p)?e:f},this.changeLanguage=function(e){var t=e;return e===f&&(t=d),!(function n(e){var t=o();return t===f&&(t=d),t===e}(t)||!h(e,p))&&(s.saveData(c,t,r),!0)},this.fixLanguageUrlInDataFiles=function(e,t){for(var n=o(),r=0;r<e.length;r++){var i=e[r];i.url=a(i,n)}return e},this.isLanguageSupported=function(e){return h(e,p)}}).dependencies("win, Lib, ClientOrServerStorageManager, CommonEvents, Consts, CommonUtils"),Cr.register("SettingsCacheBusterActivator").asCtor(function Zi(e,t,i,o,a){this.activeIfPublishedRecently=function c(e){if(!o)return;if(function r(e){var t=((new Date).getTime()-e)/1e3,n=t<l;return s("SettingsCacheManager.shouldActivateSettingsCacheBuster - secondsSincePublish: "+t,5),n}(e)){!function n(e){s(i.formatString("SettingsCacheManager - Will fetch newset settings file until {}",e),3);var t=e.getTime()-(new Date).getTime();if(t<=0)return;o.setItem("walkMe_"+u,a.toJSON({val:"true",exp:(new Date).getTime()+t}))}(new Date(e+1e3*l))}};var s,u="wm-settings-cache-bust",l=900;(function n(){s=t.wrapCustomerLog("SettingsCacheBusterActivator")}).apply(null,arguments)}).asSingleton().dependencies("Lib, Logger, CommonUtils, LocalStorageService, JsonUtils"),Cr.register("SettingsCacheManager").asCtor(function eo(e,o,t,r,n,a,s,u,i){var l,c=1e3;function d(e){var t=o.getUrl()+"?"+e.queryStringParams;l("SettingsCacheManager - Fetching newest settings file from: "+t,3),n.execute({url:t,cache:!1,dataType:"jsonp",jsonpCallback:"fixedCallback",success:e.onSuccess,error:e.onFailure})}function f(e,t,n){l("SettingsCacheManager.settingsFileReceived - publishDate: "+new Date(e.PublishDate),5),e.PublishDate&&(s.activeIfPublishedRecently(e.PublishDate),function r(e){var t=o.getSettingsFile().PublishDate!=e.PublishDate;return l("SettingsCacheManager.shouldActivateSettingsCacheBuster - isNewPublish: "+t,5),t}(e)&&(u.raiseEvent(re.EVENTS.SettingsFileNewPublish,{settingsData:e}),function i(){a.setWalkmeTimeout(function(){d({onFailure:p,queryStringParams:"b="+(new Date).getTime()})},c)}()))}function p(e,t,n){l(r.formatString("SettingsCacheManager - Error fetching settings file. jqXHR: {0}, textStatus: {1}, errorThrown: {2}",e,t,n))}this.start=function(){l("SettingsCacheManager.start - Check if need to fetch settings ",5),i?d({onSuccess:f,onFailure:p,queryStringParams:"forceUpdate="+(new Date).getTime()}):l("SettingsCacheManager - storage is not enabled , settings file will not be checked",3)},function g(){l=t.wrapCustomerLog("SettingsCacheManager")}.apply(null,arguments)}).asSingleton().dependencies("Lib,SettingsFile,Logger,CommonUtils,WmAjax,TimerManager, SettingsCacheBusterActivator,CommonEvents, LocalStorageService"),Cr.register("EndUserDataConverter").asCtor(function to(d,i,f,p,e,u,t){this.registerConverter=function r(e){a.push(e)},this.convertData=function c(){if(i.shouldUpdateOldKeys&&i.shouldUpdateOldKeys()){var n=i.getInternalKeys(o);!function r(e){for(var t in e)if(e.hasOwnProperty(t)){var n=s(t,e);n.Key&&i.saveData(n.Key,n.Value,n.Expiry,o)}}(n),Tr.each(a,function(e,t){t.convert(n,o)})}};var o,a,n=e.get(),l=n.fixedKeys,g=n.keyNamesWithSuffixes,h=n.repeatKeysWithRelatedObject,m=n.keysWithRepeat,v="-",y=n.keysWithThreeParts;function s(e,t){var n,r={};if(l[e])n=l[e];else if(m[e])n=function a(e){var t=m[e],n=t.SettingsKey,r=t.PropertyForKey;return S(p.getSettingsValue(u.get().Settings[n],r,undefined))}(e);else{var i=function s(e){var t,n,r=e.split(v);if(1<r.length){var i,o=r[0]+v+r[1];2<r.length&&(i=o+v+r[2]),n=-1<Tr.inArray(i,y)?(t=i,r.slice(3)):(t=o,r.slice(2))}return{KeyWithoutSuffix:t,SuffixParts:n}}(e);if(i){var o=i.KeyWithoutSuffix;g[o]?n=g[o]:h[o]&&(n=function c(e){var t=h[e.KeyWithoutSuffix],n=e.SuffixParts;if("v"==n[n.length-1])return d.ONE_DAY_SECONDS;for(var r=0;r<t.length;r++){var i=t[r];if(i.Parts==n.length){var o,a,s=i.DeployableTypeIndex,u=s!==undefined?n[s]:i.DeployableType,l=f.get(parseInt(u)).getById(n[i.DeployableIdIndex]);return i.SubSettings?o=p.getSettingsValue(l.Settings,i.SubSettings,undefined):l&&(o=l.Settings),o&&(a=p.getSettingsValue(o,i.SettingsKey,undefined)),S(a)}}}(i))}}return n&&(r.Key=e,r.Value=t[e],r.Expiry=n),r}function S(e){var t;return p.isNumber(e)&&e>=d.ONE_DAY_SECONDS?t=e:"once"==e&&(t=d.COOKIE_LIFE_2_YEARS),t}(function E(){o=t.getUserGuid(),a=[]}).apply(null,arguments)}).dependencies("Consts, ClientOrServerStorageManager, DeployablesManagerFactory, CommonUtils, EndUserDataConverterConfig, SiteConfigManager, UserGuidContainer"),Cr.register("EndUserDataConverterConfig").asCtor(function no(e){this.get=function t(){return{fixedKeys:{"wm-lang":e.ONE_YEAR_SECONDS,"wm-ldv":e.COOKIE_LIFE_2_YEARS,"wm-ag-rep-v":e.ONE_DAY_SECONDS,"wm-ag-d":e.COOKIE_LIFE_2_YEARS},keyNamesWithSuffixes:{"wm-stpcond":e.COOKIE_LIFE_2_YEARS},repeatKeysWithRelatedObject:{"wm-ASRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"ASRep",DeployableType:e.DEPLOYABLE_TYPE.Tutorial},{Parts:2,DeployableTypeIndex:0,DeployableIdIndex:1,SettingsKey:"ASRep"}],"wm-SrvWtRep":[{Parts:2,DeployableIdIndex:0,SubSettings:"survey",SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Tutorial}],"wm-SrvRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Survey}]},keysWithRepeat:{"wm-ag-rep":{SettingsKey:"AG",PropertyForKey:"repeat"}},keysWithThreeParts:["wm-ag-rep"]}}}).dependencies("Consts"),Cr.register("ScriptInjector").asCtor(function ro(){var c=this;function d(e){document.getElementsByTagName("head")[0].appendChild(e)}c.addScript=function(e,t,n){if(e){var r=c.createScriptElement(e);t&&(r.onload=onloadRunner,r.onreadystatechange=onloadRunner),n&&(r.onerror=n),d(r)}},c.createScriptElement=function(e){var t=document.createElement("script");return t.async=!0,t.src=e,t.id="mt_script",t},c.addScriptWithCallback=function(e,t,n,r,i){if(e&&t){var o=c.createScriptElement(e),a=!1;n&&!function s(t,n,e){var r=e?window:window._walkmeInternals,i=r[t];r[t]=function(e){return r[t]=i,n(e)}}(t,function u(){return a=!0,n.apply(this,arguments)},i),r&&(o.readyState?o.onreadystatechange=function l(){"loaded"!=o.readyState&&"completed"!=o.readyState||timerManager.libSetTimeout(function(){!function e(){if(a)return;return r.apply(this,arguments)}()})}:o.onerror=r),d(o)}}}).dependencies(""),Cr.register("WalkmeConfigManager").asCtor(function io(t,n){var s=this;s.Data=null,s.get=function(){return s.Data},s.wasLoaded=function(){return s.Data&&s.Data.Features},s.init=function(r){var i=Cr.get("PerformanceAPI"),e=t.getSettingsFile().WalkMeConfigFile;e?(i.measure("loadWalkmeConfigStart"),n.addScriptWithCallback(e,"WalkMeConfigCallback",function o(e,t,n){i.measure("loadWalkmeConfigEnd"),window._walkmeInternals.walkmeConfig=e,s.Data=e,r&&r()},function a(e,t,n){Cr.get("Logger").error(e,"Load walkMeConfigFile failed:"+n.message)},!0)):r&&r()},function e(){}.apply(null,arguments)}).dependencies("SettingsFile, ScriptInjector"),Cr.register("DeployablesRestorer").asCtor(function oo(e,t){var i,o;function n(e,t){i.push(e),t&&o++}this.restore=function a(n){if(!t.get().enabled()){var r=0;Tr.each(i,function(e,t){t.restore(function(){(function t(e){return e==o})(++r)&&n&&n()})}),function e(){return 0==o}()&&n&&n()}},this.addRestorer=n,function r(){o=0,i=[],n(e)}()}).dependencies("BusinessSolutionsManager, CrossDomainManager"),Cr.register("RunningDeployablesStopper").asCtor(function ao(e){var t;this.stop=function r(n){Tr.each(t,function(e,t){t.stop(n)})},this.addStopper=function n(e){t.push(e)},function i(){t=[e]}()}).dependencies("FlowsPlayer"),Cr.register("DeployablesDataProvider").asCtor(function so(i){this.getDeployableName=function o(e,t){if(null!=e&&null!=t){var n=i.get(e);if(n){var r=n.getById(t);return r?r.Name:void 0}}},function e(){}.apply(null,arguments)}).dependencies("DeployablesManagerFactory"),e.register(re.PLATFORM.Web,function(){Cr.register("PlatformInitializer").asCtor(W)}),e.register(re.PLATFORM.MobileWeb,function(){Cr.register("PlatformInitializer").asCtor(W)}),e.register(re.PLATFORM.Desktop,function(){Cr.register("PlatformInitializer").asCtor(W)}),Cr.register("WindowBeforeUnloadHandler").asCtor(function uo(n){this.init=function a(){o(),function e(){r=n.onbeforeunload,n.onbeforeunload=t}()},this.register=function s(e){i.push(e)},this.cleanResources=o;var r,i=[];function t(){if(function t(){try{for(;i.length;)i.shift()()}catch(e){Cr.get("EventSenderErrorLogger").logError("WindowBeforeUnloadHandler: failed executing handlers",{errorMsg:e.message,errorStack:e.stack||""})}}(),r)return r.apply(n,arguments)}function o(){n.onbeforeunload===t&&(n.onbeforeunload=r)}}).dependencies("win"),Cr.register("CrossDomainManager").asCtor(function lo(){var t;function n(){return!!t}this.isReady=n,this.get=function r(){return n()||function e(){t=Cr.get("PassOwnershipManager")}(),t}}),Cr.register("PageIdentifiersAPI").asCtor(function co(e,t,n){this.setPageIdentifiers=function o(e){if(!r.isEnabled())return;if(r.resetCollection(),e)for(var t=0;t<e.length;t++){var n=e[t];r.addSerializedPage(n.PageDescription,n.Id)}},this.capture=function a(){if(!r.isEnabled())return null;var e=r.captureCurrentPage();return t.toJSON(e)};var r=e.getPageComparerCacheManagerEditorApi();function i(){r.isEnabled()&&r.updateCurrentPage()}!function s(){r.isEnabled()&&(n.bind(i),r.updateCurrentPage())}()}).dependencies("ElementFinder, JsonUtils, UIChangeTracker"),Cr.register("jQueryCacheCleaner").asCtor(function fo(e,t){var r;function i(){!function n(){try{for(var e in Tr.cache){o(Tr.cache[e])&&delete Tr.cache[e]}}catch(t){}}(),r=t.setWalkmeTimeout(i,1e4)}function o(e){try{if(e&&e.handle&&e.handle.elem)return n(e.handle.elem);if(e&&e.data&&e.data.iframe)return n(mtjQuery(e.data.iframe)[0])}catch(t){return!0}return!1}function n(e){if(e.documentElement&&(e=e.documentElement),!e.parentNode)return!0;var t=e.ownerDocument;return!(t.defaultView||t.parentWindow)||void 0}this.init=function a(){i()},this.destroy=function s(){r&&(r.clear(),r=null)}}).dependencies("HostData, TimerManager"),Cr.register("wmjQuerySafe").asInstance(function po(e){return Cr.create("wmjQuerySafeProxy",{element:e})});var j=function go(){function e(e,t,n,r){this.wmjQuery=e,this.wmjQuerySafe=t,this.eventBinder=n,this._element=e(r.element)}function t(i){return function(){var t=this,n=arguments,r=t;return t.safeExecute(function(){var e=t._element[i].apply(t._element,n);r=t.wmjQuerySafe(e)}),r}}return e.prototype.isSafe=function n(){try{return this._element[0].ownerDocument,!0}catch(e){return!1}},e.prototype.getDocument=function r(){var e=this,t=this;return this.safeExecute(function(){t=e.wmjQuerySafe(e._element[0].ownerDocument)}),t},e.prototype.off=function i(e,t){var n=this;return this.safeExecute(function(){n.eventBinder.unbind(n._element,e,t)}),this},e.prototype.stop=t("stop"),e.prototype.remove=t("remove"),e.prototype.find=t("find"),e.prototype.show=t("show"),e.prototype.safeExecute=function(e){try{e()}catch(t){this._element=this.wmjQuery()}},e}();Cr.register("wmjQuerySafeProxy").asCtor(j).asProto().dependencies("wmjQuery, wmjQuerySafe, EventBinder"),Cr.register("PopupStepElementProvider").asCtor(function ho(i){this.get=function o(e){var t=Cr.get("TransparentLayerProvider").tryGetWalkMeLayer(i.getTopContainer());if(0==t.length)return!1;var n=mtjQuery(".walkme-popup-element",t);if(n.length<=0||e){var r="walkme-popup-element";e&&(r+="-"+n.length),(n=mtjQuery(t[0].ownerDocument.createElement("div"))).attr("id",r),n.attr("class","walkme-popup-element"),n.css("width","0px;"),n.css("height","0px;"),mtjQuery(t.append(n))}return n}}).dependencies("TopContainerProvider"),Cr.register("UserGuidContainer").asCtor(function mo(t,n,e){this.getUserGuid=function o(){return r},this.setUserGuid=function a(e){e=t.defaultValue(e,"No-User-Guid"),-1==n.inArray(e,i)&&i.push(e);r=e},this.getAllUserGuids=function s(){return e.getAllUserGuids()||i};var r=null,i=[]}).dependencies("CommonUtils, ArrayUtils, SettingsFile"),Cr.register("TopMostCssStyleSettter").asCtor(function vo(){this.setTopMostCssStyle=function n(e,t){e.css("position","absolute"),e.css("z-index",t),e.addClass("SkipThisFixedPosition")}}),Cr.register("ElementCenterer").asCtor(function yo(u,l,c,d){function f(e,t,n,r,i,o,a,s){if(a==undefined||null==a)a={top:0,left:0};500<n&&(n=0);var u=(o-mtjQuery(e).outerHeight())/2+r+a.top,l=(i-mtjQuery(e).outerWidth())/2+n+a.left;u=Math.round(0<u?u:0),l=Math.round(0<l?l:0),Math.abs(u-mtjQuery(e).offset().top)<2&&Math.abs(l-mtjQuery(e).offset().left)<2||(u+="px",l+="px",mtjQuery(e).css({position:"absolute",margin:0}),t?(s=s||{duration:400},mtjQuery(e).animate({top:u,left:l},s)):mtjQuery(e).css({top:u,left:l}))}this.centerElementInPage=function p(e,t,n,r){var i=window;if(u.shouldHandlePageAsFramesets()&&(i=l.getBiggestFrame().contentWindow),d.isInFacebookCanvas())return function s(t,n){FB.Canvas.getPageInfo(function(e){!function r(e,t,n){f(e,t,n.scrollLeft,n.scrollTop,mtjQuery(window).width(),n.clientHeight)}(t,n,e)})}(e,t);var o={top:0,left:0};n&&(o.top+=n.top,o.left+=n.left);var a=c.calculateOffset(e.parent()[0],i);return o.top-=a.top,o.left-=a.left,f(e,t,mtjQuery(i).scrollLeft(),mtjQuery(i).scrollTop(),mtjQuery(i).width(),mtjQuery(i).height(),o,r)}}).dependencies("FramesetsUtils, BiggestFrameProvider, PositionHelper, FacebookCanvasIndicator"),Cr.register("PositionHelper").asCtor(function So(i,s,l,d,f,E,p,w,T,g,a,u,c,o,n,h,t){var m,v,e,r,y,C=this,S={ALL_POINTS:0,ANY_POINT:1},b={0:"mt_visible",1:"wm_vsb_st",2:"wm_interact_any_point",3:"wm_interact_all_points"},I="positionHelper";function _(e){var t=0,n=0,r=mtjQuery(e),i=r.offset();if(t=i.top,n=i.left,E.isFeatureEnabled("iframepadding")&&r.is("iframe")&&(n+=parseFloat(r.css("padding-left")),t+=parseFloat(r.css("padding-top"))),e.ownerDocument){var o=A(d.getBody(e.ownerDocument)),a=A(e.ownerDocument.documentElement);t-=o.top==a.top?o.top:o.top+a.top,n-=o.left==a.left?o.left:o.left+a.left}return{left:n,top:t}}function A(e){return e?{top:e.scrollTop||0,left:e.scrollLeft||0}:{top:0,left:0}}function P(e){for(var t=0,n=0;"FRAME"==p.getElementTagName(e)?(t+=mtjQuery(e).offset().top,n+=mtjQuery(e).offset().left):(t+=e.offsetTop||0,n+=e.offsetLeft||0),e=e.offsetParent;);return{left:n,top:t}}function k(e,t,n){t.top=n.top,t.left=n.left;var r=e.outerWidth(),i=e.outerHeight();if(1<e.length){var o=C.getMultipleElementsRect(e);r=o.right-o.left,i=o.bottom-o.top}t.height=i,t.width=r,t.bottom=t.top+t.height,t.right=t.left+t.width}function D(e,t,n,i,o){C.removeScrollAndResizeEvents(i);var r=x(i);mtjQuery(e).bind(r,function(){t.stop(!1,!0),n=function r(e,t){var n={offset:e,eventName:t,defaultValue:e};return a.raiseEvent(f.EVENTS.Scrolls.ScrollFired,n),n.returnValue}(n,i),o(t,n)})}function x(e){return e=e||"walkme",t.formatString("scroll.{0}, resize.{0}, scrollstop.{0}, orientationchange.{0}",e)}function N(e,t){Tr.expr.filters[e]=t}function O(e){if(L(e))return!0;var t=!1;return e.parents().each(function(){if(L(Tr(this)))return!(t=!0)}),t}function L(e){if(0==e.css("opacity"))return!0;var t=e[0].filters;return t&&t.alpha&&0===t.alpha.opacity}function F(e,t){return e("OPTION"===(t.tagName||"").toUpperCase()?Tr(t).parent()[0]:t)}function M(t){var n=Tr.expr.filters.mt_hidden;Tr.expr.filters.mt_hidden=function(e){return n(e)||t(Tr(e))}}function R(t){M(t);var n=Tr.expr.filters.wm_vsb_st,r=Tr.expr.filters.wm_interact_any_point,i=Tr.expr.filters.wm_interact_all_points;Tr.expr.filters.wm_vsb_st=function(e){return n(e)&&!t(Tr(e))},Tr.expr.filters.wm_interact_any_point=function(e){return r(e)&&!t(Tr(e))},Tr.expr.filters.wm_interact_all_points=function(e){return i(e)&&!t(Tr(e))}}function B(e){for(var t=e.parents().add(e),n=t.length-1;0<n;n--)if(U(Tr(t[n]),Tr(t[n-1])))return!1;return!0}function U(e,t){if("absolute"==e.css("position"))return!1;if("hidden"!=t.css("overflow"))return!1;var n=q(t,"border-top")+q(t,"padding-top")+t.offset().top,r=n+t.height(),i=t.offset().left,o=i+t.width();if(n==r)return!0;var a=q(e,"border-top")+q(e,"padding-top")+e.offset().top,s=a+e.height(),u=e.offset().left,l=u+e.width();return s<n||r<a||l<i||o<u}function V(e,t){var n=e.ownerDocument,r=Tr(e),i=r.parents("html"),o=r.parents("body"),a=o.scrollTop()||i.scrollTop(),s=o.scrollLeft()||i.scrollLeft(),u={element:r,html:i,topScroll:a,leftScroll:s,workingDocument:n};return t==S.ALL_POINTS?function l(e){for(var t=g.length-1;0<=t;t--)if(!W(g[t],e))return!1;return!0}(u):function c(e){for(var t=g.length-1;0<=t;t--)if(W(g[t],e))return!0;return!1}(u)}function W(e,t){var n=t.element,r=e(n),i=r.x-t.leftScroll,o=r.y-t.topScroll,a=t.workingDocument.elementFromPoint(i,o);return a==n[0]||Tr.contains(n[0],a)}function j(){var e={top:0,left:0};if(!E.isFeatureEnabled("collapsedMargins"))return e;var t=Tr("body"),i=0;if(function n(e){return e.offset().top<=0&&"relative"==e.css("position")&&(!u.isIE()||"visible"==e.css("overflow-x")&&"visible"==e.css("overflow-y"))&&(!u.isIEBrowser(9)||function i(e){try{var t=Tr("<div />");t.important({position:"absolute",top:0,visibility:"hidden"}),e.append(t);var n=t.offset().top;return t.remove(),0<n}catch(r){return!1}}(e))}(t)){t.css("margin-top");t.find("> div").each(function(){var e=Tr(this),t=e.offset().top,n=e.position().top;if(0<parseInt(e.css("margin-top"),10)){var r=t-n;i<r&&(i=r)}})}return e.top+=i,e}function G(e,t,n){"static"!=n.position&&(e.top+=C.tryParsingStyleValue(n.top),e.left+=C.tryParsingStyleValue(n.left))}function H(e,t,n,r){e.top+=C.tryParsingStyleValue(n[r+"Top"]),e.left+=C.tryParsingStyleValue(n[r+"Left"])}function Y(e,t,n){/(html|body)/i.test(t.tagName)||(e.top+=Q(n.borderTopWidth),e.left+=Q(n.borderLeftWidth))}function Q(e){var t=0;switch(e){case"thin":t=1;break;case"medium":t=3;break;case"thick":t=5;break;default:t=Math.round(parseFloat(e))}return t}function z(e){for(var t=function s(e,t){var n=e.data("iframe");t=t||[];n&&(t.push(n),s(n,t));return t}(e),n={top:0,left:0},r=0;r<t.length;r++){var i=t[r].offset(),o=t[r][0].contentWindow.document||t[r][0].contentDocument,a=d.getBody(o);n.top+=i.top,n.top-=a.scrollTop||o.documentElement.scrollTop,n.left+=i.left,n.left-=a.scrollLeft||o.documentElement.scrollLeft}return n}function q(e,t){var n=e.css(t);return n?parseFloat(n):0}C.getVisibleFilterKey=function(e){var t=e.Settings&&e.Settings.filter;return t===undefined&&(t=e.filter||0),t},C.getVisibleFilter=function(e){return":"+b[C.getVisibleFilterKey(e)]},this.getPosRelativeToWindow=function(e,t,n){var r,i,o,a,s=0,u=0;for(t=t||top,n&&!window.opera&&e&&e.tagName&&"input"==e.tagName.toLowerCase()&&(s+=e.scrollLeft,u+=e.scrollTop);e;){if(i=e.ownerDocument,o=T.getDocumentWindow(i),n&&o==t){var l=w.getScrollOffset(i);s+=l.Left,u+=l.Top}if(a=!o||o==t,s+=(r=n?_(e):P(e)).left,u+=r.top,a)break;e=o.frameElement}return{left:s,top:u}},this.getRectRelativeToWindow=function(e,t,n){var r,i,o,a,s,u,l,c,d,f,p,g,h=!1,m=undefined,v={left:0,top:0};for(o=1<e.length?C.getMultipleElementsRect(e):t.getBoundingClientRect(),n=n||top;!h;){r=t.ownerDocument,i=T.getDocumentWindow(r);var y=(p=r.documentElement,g=void 0,g=p.getBoundingClientRect(),E.isFeatureEnabled("fixContainerRect")&&(g.height=g.height||p.clientHeight,g.width=g.width||p.clientWidth),g);if(d=y,f=void 0,f={},!(o=(c=o).left>d.right||d.left>c.right?null:c.bottom<d.top||d.bottom<c.top?null:(f.left=Math.max(c.left,d.left),f.right=Math.min(c.right,d.right),f.top=Math.max(c.top,d.top),f.bottom=Math.min(c.bottom,d.bottom),f.height=f.bottom-f.top,f.width=f.right-f.left,f)))return E.isFeatureEnabled("positionHelper:takeLastAvailableIframe")?m:o;m=o,(h=!i||i==n)||(v=i.frameElement.getBoundingClientRect(),a=o,void 0,u=(s=v).left,l=s.top,a.left+=u,a.right+=u,a.top+=l,a.bottom+=l,t=i.frameElement)}return function S(e,t){var n=w.getScrollOffset(t);e.left+=n.Left,e.right+=n.Left,e.top+=n.Top,e.bottom+=n.Top}(o,r),o},this.getDrawingArea=function(e,t,n){if(!n||C.isElementInViewport(e))return function i(e){var t=p.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}(t?mtjQuery("body"):e);var r=mtjQuery(document);return{top:0,left:0,height:r.height(),width:r.width()}},this.isElementScrolledOut=function(e,t,n){var r=c.getFrameContents(t),i=e.offset().top,o=e.offset().left,a=e.outerHeight(),s=e.outerWidth(),u=parseInt(n);return u==f.POSITION_TYPE.Bottom&&(i+=a),u==f.POSITION_TYPE.Right&&(o+=s),r.scrollTop()>i||t.height()+r.scrollTop()<i||(r.scrollLeft()>o||t.width()+r.scrollLeft()<o)},C.getCenterPositionByBounds=function(e){return{left:e.left+e.width/2,top:e.top+e.height/2}},C.getEmbedInElementPosition=function(e,t){var n={},r=parseInt(h.getSettingsValue(t,"leftOffset",0));return k(e,n,{top:parseInt(h.getSettingsValue(t,"topOffset",0)),left:r}),n},this.getElementBounds=function(e,t,n,r,i){var o={},a=e[0];if(t){var s=C.getMultipleElementsRect(e),u=d.getElementDocument(e),l=C.getOffsetRect(a,u,n,i);o=C.getElementBoundsWithRectAndOffset(s,l)}else{k(e,o,C.getPosRelativeToWindow(a,n,!0))}return o=function c(e,t){var n=parseInt(h.getSettingsValue(t,"leftOffset",0)),r=parseInt(h.getSettingsValue(t,"topOffset",0));return e.top=e.top+r,e.left=e.left+n,e.right=e.right+n,e.bottom=e.bottom+r,e}(o,r)},C.getMultipleElementsRect=function(e){for(var t,n,r,i,o,a=0;a<e.length;a++)o=e[a].getBoundingClientRect(),(t===undefined||o.left<t)&&(t=o.left),(n===undefined||o.top<n)&&(n=o.top),(i===undefined||o.bottom>i)&&(i=o.bottom),(r===undefined||o.right>r)&&(r=o.right);return{top:n,left:t,right:r,bottom:i}},C.isElementVisible=function(e,t){var n=!0;try{e[0].tagName}catch(i){n=!1}if(n){var r=":"+b[t=t||0];Tr(e).filter(r).length!=Tr(e).length&&(n=!1)}return n},C.registerResizeAndScrollEvents=function(e){var t=e.callback;t=t||function(e,t){i.centerElementInPage(e,!0,t)},D(n.shouldHandlePageAsFramesets()?o.getBiggestFrame().contentWindow:window,e.element,e.offset,e.eventNameSuffix,t)},C.getWindowSize=function(){var e=Tr(n.shouldHandlePageAsFramesets()?o.getBiggestFrame().contentWindow:window);return{height:e.height(),width:e.width()}},C.removeScrollAndResizeEvents=function(e){var t=window;if(i.shouldHandlePageAsFramesets()){var n=o.getBiggestFrame();null!=n&&(t=n.contentWindow)}var r=x(e);mtjQuery(t).unbind(r)},C.centerElementInParent=function(e,t){var n=t.outerHeight()/2-e.outerHeight()/2,r=t.outerWidth()/2-e.outerWidth()/2;e.css("top",n+"px"),e.css("left",r+"px")},C.extendVisibilityFilters=function(){if(v=!1,Tr.expr.filters.mt_hidden=m,E.isFeatureEnabled("strongMtVisible")&&(v=!0,M(function(e){return!B(e)})),E.isFeatureEnabled("anyPointInteractable")&&M(function(e){return!V(e[0],S.ANY_POINT)}),E.isFeatureEnabled("nonVisibleIframe")){function e(e){var t=e.data("iframe");return!(!t||!t.is(":mt_hidden"))}M(e),R(e)}if(E.isFeatureEnabled("visibleOpacity")&&(M(O),R(O)),u.isIE()&&E.isFeatureEnabled("ieAdaptVisibility")&&function r(t){var n=Tr.expr.filters.mt_visible;Tr.expr.filters.mt_visible=function(e){return t(n,e)}}(F),window._walkmeInternals&&window._walkmeInternals.customMtHiddenFuncs)for(var t=window._walkmeInternals.customMtHiddenFuncs,n=t.length-1;0<=n;n--)M(t[n])},C.findNearestSelfOrParentByType=function(e,t){var n=e[0];if(n){for(var r=[],i=0;i<t.length;i++)r.push(t[i].toLowerCase());for(var o=n.tagName.toLowerCase();"body"!=o&&"frameset"!=o&&"head"!=o;){if(-1<Tr.inArray(o,r))return Tr(n);o=(n=n.parentNode).tagName.toLowerCase()}}},C.findFirstSelfOrChildByType=function(e,t){if(e.exist()){var n=t.join(", ");if(e.is(n))return e.first();var r=e.children(n).first();return r.exist()?r:e.is("table")?function i(e,t){var n;return(n=C.findFirstSelfOrChildByType(e.children("tr"),t))&&n.exist()?n:(n=C.findFirstSelfOrChildByType(e.children("thead").children("tr"),t))&&n.exist()?n:(n=C.findFirstSelfOrChildByType(e.children("tbody").children("tr"),t))&&n.exist()?n:(n=C.findFirstSelfOrChildByType(e.children("tfoot").children("tr"),t))&&n.exist()?n:void 0}(e,t):void 0}},C.getColumn=function(e){var t=[],n=C.findNearestSelfOrParentByType(e,["table"]);if(n){var r,i=["td","th"];if(r=e.is(i)?e:e.is("table")||e.is("tr")?C.findFirstSelfOrChildByType(e,i):C.findNearestSelfOrParentByType(e,i)){var o,a,s=null,u=r.index(),l=Tr([]);Tr.merge(l,n.children("tr")),Tr.merge(l,n.children("thead, tbody, tfoot").children("tr"));for(var c=0;c<l.length;c++)(o=l[c].cells[u])&&(null==s&&(s=o.colSpan),o.colSpan<s&&(t.length=0,s=o.colSpan),o.colSpan==s&&(a=Tr(o)).height()&&a.width()&&t.push(o));return Tr(t,n)}}},this.getBodyInheritedMargin=function(){var e={top:0,left:0};if(!E.isFeatureEnabled("calcInheritedMargin"))return e;var a=!1,t=mtjQuery("body").find("div").filter(function(){if(a)return!1;var e=mtjQuery(this);if("relative"!=e.css("position"))return!1;var t=null,n=null,r=0!=parseInt(e.css("margin-top"))&&parseInt((n=e.position()).top)==-1*parseInt((t=e.offset()).top),i=!1;r||(i=0!=parseInt(e.css("margin-left"))&&parseInt(null!=n?n.left:e.position().left)==-1*parseInt(null!=t?t.left:e.offset().left));return a=(r||i)&&function o(e){var n=!0;return e.parentsUntil("html").each(function(e,t){"relative"!=mtjQuery(t).css("position")&&(n=!1)}),n}(e)}).eq(0);return 0<t.length&&(e={top:parseInt(t.css("margin-top")),left:parseInt(t.css("margin-left"))}),e},C.fixFirefoxAutoMarginBug=function(e,t,n,r){if(u.isFirefox&&function a(e,t){if("BODY"==e.tagName&&"relative"==t.position&&"auto"==e.style.marginLeft&&"auto"==e.style.marginRight&&0==C.tryParsingStyleValue(t.marginLeft))return!0}(t,n)){e.top+=C.tryParsingStyleValue(n.marginTop);var i=s.getStyle(t.parentElement,r),o=(C.tryParsingStyleValue(i.width)-C.tryParsingStyleValue(n.width))/2;if(o<0)return;e.left+=o}},C.tryParsingStyleValue=function(e){return"string"==typeof e&&(e=e.replace("px","")),isNaN(e)?0:parseInt(e)},C.getCollapsedMargin=function(){return e&&function n(e,t){return(new Date).getTime()-e<t}(r,5e3)||(e=j(),r=(new Date).getTime()),e},C.getOffsetRect=function(e,t,n,r){try{y("getting element offset rect for element:",3),y(e,3);var i=d.getBody(t),o=r?0:w.getScrollTop(t,i),a=w.getScrollLeft(t,i);y("element scrollTop: "+o+" scrollLeft: "+a,3);var s=C.calculateOffset(i,n);return y("element parent offset top: "+s.top+" left: "+s.left,3),o-=s.top,a-=s.left,{top:Math.round(o),left:Math.round(a)}}catch(u){l.error(u)}},C.calculateOffset=function(e,t){for(var n=e,r=s.getStyle(e,t);r&&"static"==r.position;)n=n.parentNode,r=s.getStyle(n,t);var i=C.getBodyInheritedMargin();i.top=C.tryParsingStyleValue(i.top),i.left=C.tryParsingStyleValue(i.left);var o={top:i.top,left:i.left},a=C.getCollapsedMargin();if(o.top+=a.top,o.left+=a.left,r)for(H(o,0,r,"margin"),Y(o,n,r),G(o,0,r),C.fixFirefoxAutoMarginBug(o,n,r,t),n=n.parentNode,r=s.getStyle(n,t);r;)H(o,0,r,"margin"),H(o,0,r,"padding"),Y(o,n,r),G(o,0,r),n=n.parentNode,r=s.getStyle(n,t);return o},C.getElementBoundsWithRectAndOffset=function(e,t){var n=e.left+t.left;return{top:e.top+t.top,left:n,width:e.right-e.left,height:e.bottom-e.top,right:e.right+t.left,bottom:e.bottom+t.top}},C.isElementInViewport=function(e,t){t=Tr.extend({},f.DEFAULT_POSITIONS,t);var n=z(e),r=e.offset();n.top+=r.top,n.left+=r.left,C.fixOffsetForIE(e,n);var i=E.isFeatureEnabled("fixIframeScroll")?p.getElementViewport(e):p.getWindowViewport(),o=E.isFeatureEnabled("bodyClientHeight")?Tr("body")[0].clientHeight:i.height(),a=i.top()+t.top,s=i.left()+t.left,u=o-t.bottom+(i.top()-0),l=i.width()-t.right+(i.left()-0);return function c(e,t,n,r,i,o,a,s){return n<=a&&i<=e&&s<=r&&t<=o}(n.top,n.left+e.width(),n.top+e.height(),n.left,a,l,u,s)},C.fixOffsetForIE=function(e,t){if(function i(e){try{if("1.7.1"!=e.jquery)return;var t=e[0].ownerDocument.documentMode;if(7==t||8==t){var n=e.data("iframe");if(n&&"FRAME"==n[0].tagName)return!0}}catch(r){}}(e)){var n=e[0].ownerDocument,r=J.getBody(n);t.top+=r.scrollTop||n.documentElement.scrollTop,t.left+=r.scrollLeft||n.documentElement.scrollLeft}},function K(){m=Tr.expr.filters.mt_hidden,function e(){N("wm_hdn_st",function(e){var t=Tr(e);return t.is(":mt_hidden")||!v&&!B(t)}),N("wm_vsb_st",function(e){return!Tr.expr.filters.wm_hdn_st(e)}),N("wm_interact_any_point",function(e){return V(e,S.ANY_POINT)}),N("wm_interact_all_points",function(e){return V(e,S.ALL_POINTS)})}(),y=l.wrapCustomerLog(I)}.apply(null,arguments)}).dependencies("Lib, UiUtils, Logger, CommonUtils, Consts, FeaturesManager, ElementUtils, ScrollUtils, DocumentUtils, FindElementCornerFunctions, CommonEvents, HostData, FrameContentsProvider, BiggestFrameProvider, FramesetsUtils, SettingsValuesRetriever, StringUtils"),Cr.register("PopupPosition").asCtor(function Eo(l,n,e){var c,d;this.positionElementInPage=function r(e,t){c===l.Center?n.centerElementInPage(e,!1,t):function u(e,t,n){e.css({position:"fixed"});var r=null,i="",o="wm-position-",a=n.top||0,s=n.left||0;switch(c){case l.Top:i=o+"top",r={top:0,left:"50%",marginLeft:-e.outerWidth()/2+s,marginTop:a};break;case l.Right:i=o+"right",r={right:0,top:"50%",marginTop:-e.outerHeight()/2+a,marginRight:-s};break;case l.Bottom:i=o+"bottom",r={bottom:0,left:"50%",top:"auto",marginLeft:-e.outerWidth()/2+s,marginBottom:-a};break;case l.Left:i=o+"left",r={left:0,top:"50%",marginTop:-e.outerHeight()/2+a,marginLeft:s};break;case l.TopLeft:i=o+"top-left",r={left:0,top:0,marginTop:a,marginLeft:s};break;case l.TopRight:i=o+"top-right",r={right:0,top:0,marginTop:a,marginRight:-s};break;case l.BottomRight:i=o+"bottom-right",r={right:0,bottom:0,top:"auto",marginBottom:-a,marginRight:-s};break;case l.BottomLeft:i=o+"bottom-left",r={left:0,bottom:0,top:"auto",marginBottom:-a,marginLeft:s}}e.addClass(i),e.css(r),t&&d.setPagePositionOffset({marginTop:r.marginTop,marginLeft:r.marginLeft,marginBottom:r.marginBottom,marginRight:r.marginRight},c)}(e,!0,t)},function t(){d=e.animator,c=e.pagePosition}.apply(null,arguments)}).asProto().dependencies("Positions, Lib"),Cr.register("DomEventDispatcher").asCtor(function wo(t,n,r,s){var u;function i(e,t,n){if(u){var r=a(t,e,n);e.dispatchEvent(r)}else if(window.dispatchEvent){r=function o(e,t,n){var r;if(n){r=document.createEvent("MouseEvent");var i=l(t);r.initMouseEvent(e,!0,!0,window,1,i.pageX,i.pageY,i.clientX,i.clientY,!1,!1,!1,!1,0,null)}else(r=document.createEvent("UIEvents")).initUIEvent(e,!0,!0,window,1);return r}(t,e,n);e.dispatchEvent(r)}else"input"==t&&(t="propertychange"),e.fireEvent("on"+t)}function a(e,t,n){return n?new MouseEvent(e,l(t)):new Event(e,{bubbles:!0,composed:o(t)})}function l(e){var t={screenX:1,screenY:1,pageX:1,pageY:1,clientX:1,clientY:1,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0,composed:o(e)};return e&&e.getBoundingClientRect&&(t.pageX=t.clientX=e.getBoundingClientRect().left,t.pageY=t.clientY=e.getBoundingClientRect().top),t}function o(e){return!!e&&(n.isFeatureEnabled("composedTrueOnDispatchEvent")||r.fnHelpers&&r.fnHelpers.isInShadow&&r.fnHelpers.isInShadow(e))}this.dispatchEvent=function c(e,t){i(e,t,!1)},this.dispatchMouseEvent=function d(e,t){i(e,t,!0)},this.dispatchClipboardEvent=function f(e,t,n){if(u){var r;try{r=new DataTransfer}catch(o){return void s.error("dispatchClipboardEvent - DataTransfer is not supported",o)}var i=function a(e,t,n){var r=new ClipboardEvent(e,t);return r.clipboardData.setData("text/plain",n),r}(t,{clipboardData:r},n);return e.dispatchEvent(i),!0}},function p(){if(!t.isIEBrowser())try{a("click");u=!0}catch(e){u=!1}}.apply(null,arguments)}).dependencies("HostData, FeaturesManager, wmjQuery, Logger"),Cr.register("InputGenerator").asCtor(function To(r,a,e,u,n,t,s,l,i,c,d,f,p,o){var g,h=this;h.click=function C(e,t){!function n(e){return e.is("option")&&e.parent().is("select")}(e)||h.select(e.parent(),e[0].value);(function o(n){if(!n[0])return;var r=c.isFeatureEnabled("mouseEvents");p.each(function i(e){var t=f.get().Custom.modifiedClickCustomAction;if(e&&t&&t.events)return d.sync("customInputGeneratorClickEvent"),t.events;return[].concat("mousedown","mouseup").concat(c.isFeatureEnabled("autoClickNoMouseover")?[]:"mouseover").concat(e?"click":[])}(r),function(e,t){r?a.dispatchMouseEvent(n[0],t):m(n[0],t)}),r||(n[0].click(),l.raiseEvent(s.EVENTS.Walkthrus.InputGeneratedClick,{element:n}))})(e),t&&t()},h.hover=function b(e,t){(function r(n){var e=n.closest("a");n=0!==e.length?e:n,p.each(v,function(e,t){w(n,t,p),o.jQuery&&w(n,t,o.jQuery),function r(e,n){var t=T(e,!0);p.each(t,function(e,t){m(t,n)})}(n,t)})})(e),n.addElementClass(e,":hover")?i.bind(s.EVENTS.BeforeWalkmeRemoved,y):e.is("a")&&e.parent().is("li")?E(e.parent()):E(e);t&&t()},h.focus=function I(e,t){S(e,"focus",t)},h.text=function _(n,r,i,o,a,s){i=i||0,m(n[0],"focus"),u.setWalkmeTimeout(function(){var e=function t(){return c.isFeatureEnabled("injectTextPasteFirst")?["paste","inject","input"]:["inject","paste","input"]}();p.each(e,function(e,t){g[t](n,r,a)}),u.setWalkmeTimeout(function(){m(n[0],"change"),m(n[0],s?"keyup":"blur"),o&&o()},i)},i)},h.select=function A(e,t,n){e.val()!=t&&(m(e[0],"focus"),e.val(t),m(e[0],"change"));n&&n()},h.selectByText=function P(e,t,n){if(e.find("option:selected").text()!=t){m(e[0],"focus");for(var r=e[0].options,i=0;i<r.length;i++)if(r[i].text==t){p(r[i]).attr("selected","selected"),m(e[0],"change");break}}n&&n()},h.swipe=function k(e,t){S(e,"swipe",t)};var m=a.dispatchEvent,v={MouseEnter:"mouseenter",MouseOver:"mouseover",MouseMove:"mousemove"};function y(){i.unbind(s.EVENTS.BeforeWalkmeRemoved,y),n.removeElementClass()}function S(e,t,n){m(e[0],t),e[t](),n&&n()}function E(e){var t=e.find("*:mt_hidden");t.filter(function(){return"none"==p(this).css("display")}).css("display","block"),t.css("visibility","visible"),t.css("opacity","1")}function w(e,r,i){var t=T(e,!0);p.each(t,function(e,t){(function n(e,t){switch(t){case v.MouseMove:e.trigger(v.MouseMove);break;case v.MouseOver:e.trigger(v.MouseOver);break;case v.MouseEnter:default:e.trigger(v.MouseEnter)}})(t=i(t),r)})}function T(e,t){var n=e.find("*:mt_visible");return t&&n.push(e[0]),n}(function D(){g={inject:function(e,t,n){c.isFeatureEnabled("clipboardEvents")&&a.dispatchClipboardEvent(e[0],"paste",t)||r.injectText(e,t,n&&n.ElementDescription)},paste:function(e){t.isIEBrowser()||m(e[0],"paste")},input:function(e){m(e[0],"input")}}}).apply(null,arguments)}).dependencies("TextInjector, DomEventDispatcher, Logger, TimerManager, CssInjector, HostData, Consts,CommonEvents, WmInternals, FeaturesManager, EventsTriggerSyncer, SiteConfigManager, wmjQuery, win"),Cr.register("TextInjector").asCtor(function Co(e,o){var n;function r(e,t,n,r){for(var i=0;i<e.length;i++){var o=a(e[i],t,n,r);if(o!==undefined)return o}}function a(e,t,n,r){try{if(e.canInject(n))return e[t](n,r)||!1}catch(i){o.error(i,"error in executing text action "+t)}}this.injectText=function i(e,t){r(n,"inject",e,t)},this.retrieve=function t(e){return r(n,"retrieve",e)},this.adaptText=function s(e,t){return r(n,"adaptText",e,t)},function u(){n=e.get()}()}).dependencies("TextInjectorsProvider, Logger"),Cr.register("QuillTextInjector").asCtor(function bo(e){this.canInject=function t(e){return e.hasClass(".ql-container")||0<e.parents(".ql-container").length},this.inject=function a(n,e){(n.hasClass("ql-editor")?n:n.parents(".ql-editor")).focus();var t=e.split(i);(function r(e,t){var n=e.find("p");0<!n.length?o(e,t):n[0].innerText=t})(n,t[0]),t.shift(),Tr.each(t,function(e,t){o(n,t)})},this.adaptText=function n(e,t){return t},this.retrieve=e.retrieve;var i=RegExp(/[\r\n]/g);function o(e,t){e.append("<p>"+t+"</p>")}}).dependencies("JQueryTextInjector"),Cr.register("CkEditorTextInjector").asCtor(function Io(){function n(e){var t=r(e);return i(e).CKEDITOR.instances[t]}function r(e){return e.find('[style*="visibility: hidden"]').attr("id")}function i(e){var t=e[0].ownerDocument;return t.defaultView||t.parentWindow}this.inject=function o(e,t){n(e).setData(t)},this.canInject=function t(e){return i(e).CKEDITOR&&0<e.find(".cke").length&&r(e)},this.retrieve=function a(e){return n(e).getData()},this.adaptText=function s(e,t){return t.replace(/(\r\n|\r|\n)/g,"<br>")}}),Cr.register("JQueryTextInjector").asCtor(function _o(n){this.inject=function r(e,t){n.isInput(e)?e.val(t):e.text(t)},this.canInject=function e(){return!0},this.retrieve=function t(e){return n.isInput(e)?e.val():e.text()},this.adaptText=function i(e,t){return t}}).dependencies("HtmlElementsDataProvider"),Cr.register("TextInjectorsProvider").asCtor(function Ao(e,t,n){this.get=function r(){return[n,t,e]}}).dependencies("JQueryTextInjector, CkEditorTextInjector, QuillTextInjector"),__webpack_require__(692),Cr.register("GuidGenerator").asCtor(function Po(){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}this.generateGuid=function r(e){var t=e?"":"-";return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()}}),Cr.register("BalloonUtils").asCtor(function ko(s,n,t,u){var l=this;l.setStyleForBalloon=function(e,t,n){e.css("border",t.BalloonBorderWidth+"px solid "+t.BorderColor),l.fixGradientColorsInConfiguration(t,"Color"),l.fixGradientColorsInConfiguration(t,"BalloonColor2");var r=t.BalloonColor2!=undefined?t.BalloonColor2:t.Color,i=(t.BalloonRadius!=undefined?t.BalloonRadius:15)+"px";if(e.css("-moz-border-radius",i),e.css("-webkit-border-radius",i),e.css("border-radius",i),t.Color==r?e.css("background",t.Color):(e.css("background","-moz-linear-gradient(top, "+t.Color+", "+r+")"),e.css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+t.Color+"), color-stop(100%,"+r+"))"),e.css("background","-webkit-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","-o-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","-ms-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","linear-gradient(to bottom, "+t.Color+" 0%,"+r+" 100%)"),e.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t.Color+"', endColorstr='"+r+"',GradientType=0 )"),-1==e.css("background-image").indexOf("gradient")&&(e.css("background-image","url('"+u.get()+"/player/resources/images/spacer.gif')"),e.css("background-repeat","repeat")),l.isGradientWithBorderRadiusCompatible()||e.css("border-radius","0px")),!n){var o="0px 0px";switch(parseInt(t.Position)){case s.POSITION_TYPE.Top:o="-3px -3px";break;case s.POSITION_TYPE.Right:o="4px -4px";break;case s.POSITION_TYPE.Bottom:o="4px 4px";break;case s.POSITION_TYPE.Left:o="-4px 4px"}var a=" 3px rgba(0, 0, 0, 0.2)";e.css("-moz-box-shadow",o+a),e.css("-webkit-box-shadow",o+a),e.css("box-shadow",o+a)}},l.fixGradientColorsInConfiguration=function(e,t){e[t]&&"transparent"!=e[t]||(e[t]=n.isIE()?"#00000000":"transparent")},l.isGradientWithBorderRadiusCompatible=function(){return!n.isIE(9,"lte")},l.fixConfiguration=function(e){return e.BalloonColor2=t.isDefined(e.BalloonColor2)?e.BalloonColor2:e.Color,e.ButtonBgColor2=t.isDefined(e.ButtonBgColor2)?e.ButtonBgColor2:e.ButtonBgColor,e.BalloonBorderWidth=t.isDefined(e.BalloonBorderWidth)?parseInt(e.BalloonBorderWidth):1,e.BalloonButtonRadius=t.isDefined(e.BalloonButtonRadius)?parseInt(e.BalloonButtonRadius):15,e.ButtonShadowWidth=t.isDefined(e.ButtonShadowWidth)?parseInt(e.ButtonShadowWidth):0,e.BalloonRadius=t.isDefined(e.BalloonRadius)?parseInt(e.BalloonRadius):15,e.FooterTextColor=t.isDefined(e.FooterTextColor)?e.FooterTextColor:e.HeaderColor,e}}).dependencies("Consts, HostData, CommonUtils, CdnServer"),Cr.register("ElementUtils").asCtor(function Do(n,r,i){function o(e){var t=e.document,n=mtjQuery(e);return n.left=function(){return r.getScrollOffset(t).Left+r.getWinOffset(e.document.body,top,"left")},n.top=function(){return r.getScrollOffset(t).Top+r.getWinOffset(e.document.body,top,"top")},n}this.getElementTagName=function a(e){var t=e.tagName;t.toUpperCase&&(t=t.toUpperCase());return t},this.getElementViewport=function s(e){var t=n.getElementDocument(e);return o(i.getDocumentWindow(t))},this.getWindowViewport=function e(){return o(window)},this.getChildNodes=function t(e){return e.childNodes}}).dependencies("CommonUtils, ScrollUtils, DocumentUtils"),Cr.register("DynamicFontSizeService").asCtor(function xo(i,o,e,t,a){var n=!1;this.resetLineHeight=function s(e){var t=a.clone(e),r=t.children,n=i.getDictionaryKeys(r);return o.forEach(n,function(t){var e=i.getDictionaryKeys(r[t].attributes),n=o.filter(e,function(e){return"line-height"===e});o.forEach(n,function(e){delete r[t].attributes[e]})}),t},this.shouldResetLineHeight=function r(e){return n&&t.isValueTrue(e.dynamicFontSize)},function u(){n=e.isFeatureEnabled("enableDynamicFontSize")}.apply(null,arguments)}).asSingleton().dependencies("DictionaryUtils, ArrayUtils, FeaturesManager, CommonUtils, JsonUtils"),Cr.register("CleanObject").asInstance(function No(e){return"object"!=typeof e||"[object Array]"===Object.prototype.toString.call(e)?e:function r(e,t){for(var n in e)if(null===e[n]||e[n]===undefined)delete e[n];else if("[object Array]"===Object.prototype.toString.call(e[n]))0===e[n].length&&delete e[n];else if("[object String]"===Object.prototype.toString.call(e[n]))0===e[n].length&&delete e[n];else if("object"==typeof e[n]){if(G<t)throw new Error("max object depth exceeded");e[n]=r(e[n],t+1),Tr.isEmptyObject(e[n])&&delete e[n]}return e}(e,0)});var G=10;Cr.register("DocumentUtils").asCtor(function Oo(){this.getDocumentWindow=function t(e){return e.parentWindow||e.defaultView}}),Cr.register("ScrollUtils").asCtor(function Lo(a,n,s,u,l){var c=this;c.SCROLL_MODES={Animated:0,Normal:1,None:2},c.getScrollOffset=function(e){var t=a.getBody(e);return{Top:c.getScrollTop(e,t),Left:c.getScrollLeft(e,t)}},c.getScrollTop=function(e,t){return e.documentElement.scrollTop||t.scrollTop},c.getScrollLeft=function(e,t){return e.documentElement.scrollLeft||t.scrollLeft},c.jspScrollAttempt=function(e){var t=a.getJspParent(e),n=a.getClientjQuery();return!!t&&(n(t).data("jsp").scrollToElement(e,!0,!1),!0)},c.shouldScroll=function(e,t,n){return n!=s.STEP_TYPE.Popup&&t!=c.SCROLL_MODES.None&&"fixed"!=e.css("position")},c.shouldTryAnimateScroll=function(e,t,n){var r=u.isFeatureEnabled(s.FEATURES.AvoidCheckInIframe),i=t===c.SCROLL_MODES.Animated&&function o(e){return 1!=a.getSettingsValue(e,"scrollOld","0")}(n);return r||(i=i&&!l.isInIframe(e)),i},c.isBalloonPositionVisibleRelativeToParents=function(e,t){return n.isBalloonPositionVisibleRelativeToParents(e,t)},c.getWinOffset=function(e,t,n){var r=Cr.get("PositionHelper");return u.isFeatureEnabled(s.FEATURES.FixIframeViewport)?r.getPosRelativeToWindow(e,t,!0)[n]:0}}).dependencies("CommonUtils, BalloonPositionVisibilityChecker, Consts,FeaturesManager, ElementInIframeIndicator"),Cr.register("CssClassesAppender").asCtor(function Fo(){this.appendClasses=function r(e,t){if(t)for(var n=0;n<t.length;n++)e.addClass(t[n])}}),Cr.register("ImageLoader").asCtor(function Mo(a){this.getImageSize=function u(e,t){var n,r=Tr("<img />");function i(){var e={width:r[0].width,height:r[0].height};t(e),n&&n.clear(),r.unbind("load")}r.on("load",i),r.attr("src",e),n=a.playSetInterval(function o(){r[0].width&&r[0].height&&i()},s)};var s=100}).dependencies("TimerManager"),Cr.register("focusableBalloonSelectors").asInstance({TITLE:".walkme-custom-balloon-title",CONTENT:".walkme-custom-balloon-content",ACTION_BUTTON:".walkme-custom-balloon-button",CLOSE_LINK:".walkme-custom-balloon-close-button"}),Cr.register("JawsAccessibilityUtil").asCtor(function Ro(e,r,o){var a=this;a.init=function w(){e.isFeatureEnabled(n)&&!function t(){lt.bind("LauncherIsShown",v),lt.bind("show-end",y),function e(){var t=window.walkme_event;window.walkme_event=function(e){t&&t(e),"BalloonCreated"==e.Type&&function i(e){var t=g(o,e);S(e,t.selectors);var n=Tr(t.elemWithContent);n.on("focus",function(){Tr(this).addClass(u)}),n.on("blur",function(){Tr(this).removeClass(u)});var r=Tr(o.CLOSE_LINK,e);m(e,r),n.keyup(h),a.setFocus(n.first())}(e.ExtraData.Element)}}(),Tr.each(p,function(e,t){t.bindEvents()})}()},a.register=function T(e){p.push(e)};var s="alt",n="accessibility",i="body",u="walkme-accessibility",l=1,c=27,t=32,d={TITLE:".wm-title",CONTENT:".wm-template-text",ACTION_BUTTON:".wm-blue-btn",CLOSE_LINK:".wm-close-link",CLOSE_BUTTON:".wm-close-button"},f={TITLE:1,CONTENT:2,ACTION_BUTTON:3,CLOSE_LINK:7,CLOSE_BUTTON:8},p=[];function g(t,e){var n={elemWithContent:[],selectors:{}};for(var r in t){if(t.hasOwnProperty(r))Tr(t[r]+":visible",e).each(function(){var e=Tr(this);e.text()&&(n.selectors[r]=t[r],n.elemWithContent.push(e[0]))})}return n}function h(e){e.keyCode===t&&(e.srcElement?e.srcElement:e.target).click()}function m(e,t){0<t.length&&Tr(e).keyup(function(e){e.keyCode===c&&t.click()})}function v(e,t,n){var r=n.launcherDiv,i=r.attr("title");!function o(e,t,n){var r=t;n&&(t?r+=". "+n:r=n);r&&e&&e.attr(s,r)}(r,n.customText?n.customText:n.name,i)}function y(e,t){if(t&&t._uiComponent&&t._uiComponent.UiComponentId==l){var n=Tr("#wm-shoutout-"+t._uiComponent.Id),r=g(d,n),i=Tr(r.elemWithContent);S(n,r.selectors),m(n,Tr(d.CLOSE_BUTTON,n)),i.keyup(h),a.setFocus(i.first())}}function S(e,t){for(var n in e=e||Tr(i),t)if(t.hasOwnProperty(n)){var r=Tr(t[n],e);f?E(r,f[n]):E(r)}}function E(e,t){if(t===undefined)for(var n=0;n<e.length;n++)r.addTabIndex(e.eq(n),0);else for(n=0;n<e.length;n++)r.addTabIndex(e.eq(n),t+n)}a.setFocus=function(e){r.libSetTimeout(function(){e.focus()},800)}}).dependencies("FeaturesManager, CommonUtils,focusableBalloonSelectors"),Cr.register("Mapper").asCtor(function Bo(){this.setIfDefined=function r(e,t,n){t!==undefined&&null!==t&&(e[n]=t)}}),Cr.register("PromiseUtils").asCtor(function Uo(){function o(e){return Tr.when.apply(Tr,e)}this.executePromiseChain=function i(e,t){for(var n=Tr.when(t);e.length;){var r=e[0];n=n.pipe(r),e.splice(0,1)}return n},this.executeParallely=o,this.executeParallelyOnArray=function a(e,t){if(!e||0==e.length)return Tr.when();for(var n=[],r=0;r<e.length;r++){var i=t(e[r]);n.push(i)}return o(n)}}),Cr.register("ConditionTreeUtils").asCtor(function Vo(i){this.anyMatchesCondition=o,this.checkIfTreeContainsSelectedElement=function n(e){return o(e,function(e){return"Func"==e.nodeType&&0==e.funcName.indexOf(t)})};var t="SelectedElement";function o(e,t){if(e&&e.Root&&(e=i.convert(e.Root)),!e||!e.nodeType)return!1;if(t(e))return!0;var n=!1,r=!1;return e.leftSon&&(r=o(e.leftSon,t)),e.rightSon&&(n=o(e.rightSon,t)),r||n}}).dependencies("NewToOldConditionConverter"),Cr.register("DictionaryUtils").asCtor(function Wo(){this.getDictionarySize=function r(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},this.getDictionaryKeys=function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},this.getDictionaryValues=function o(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},this.reverseDictionary=function a(e){if(!e)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];n=isNaN(n)?n:parseFloat(n),t[r]=n}return t}}),Cr.register("LocationService").asCtor(function jo(e,n,r){this.getUrlResourceName=function t(){return e.remove(r.location.href)},this.getUrlLocation=function i(e){return function t(e){if(0==(e=n.decodeHtml(e,["&"])).length)return e;return"/"==e.charAt(0)?r.location.protocol+"//"+r.location.hostname+(r.location.port?":"+r.location.port:"")+e:e}(e)},this.getCurrentLocation=function o(){return r.location.href},this.getCurrentUrlPath=function a(){return r.location.pathname}}).dependencies("UrlCommonStringsRemover, HtmlDecoder, win"),Cr.register("RedirectService").asCtor(function Go(i,n,o,a){function r(e){var t=o.getUrlResourceName(),n=o.getUrlLocation(e);n=a.remove(n);var r=t.split("#"),i=n.split("#");return 1<i.length&&(1<r.length?r[0]==i[0]&&r[1]!=i[1]:r[0]==i[0])}this.redirect=function s(e){var t=r(e);return n.location=o.getUrlLocation(e),t},this.canRedirect=function u(e,t){if(!i.isValidUrl(e))return!1;var n=o.getUrlResourceName(),r=o.getUrlLocation(e);return r=a.remove(r),t||n!=r},this.isUrlDifferentFromCurrentOnlyInHash=r}).dependencies("CommonUtils, win, LocationService, UrlCommonStringsRemover"),Cr.register("UrlCommonStringsRemover").asCtor(function Ho(){this.remove=function t(e){return"/"==(e=(e=(e=e.replace("http://","")).replace("https://","")).replace("www.","")).charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}}),Cr.register("UrlComparePreparer").asCtor(function Yo(t,n,r,i){function o(e){return n.decodeHtml(e,["&"])}function a(e){var t=r.send(i.EVENTS.BeforeUsingUrl,{url:e});return t===undefined&&(t=e),t}this.processUserUrl=function s(e){return t.remove(o(a(e)).toLowerCase())},this.processSiteUrl=function u(e){return t.remove(a(e).toLowerCase())},this.processUserUrlForLike=function l(e){return t.remove(o(a(e)))},this.processUserUrlForRegex=function c(e){return e.regexText=a(e.regexText),e},this.processSiteUrlForLikeOrRegex=function d(e){return t.remove(e)}}).dependencies("UrlCommonStringsRemover, HtmlDecoder, MessageSender, Consts"),Cr.register("Stack").asCtor(function Qo(){var t;function e(e){t=e||[]}function n(){return 0==r()}function r(){return t?t.length:0}this.init=e,this.peek=function i(){return n()?null:t[t.length-1]},this.pop=function o(){return t.pop()},this.push=function a(e){t.push(e)},this.clear=function s(){e()},this.isEmpty=n,this.length=r,this.getAll=function u(){return t},function l(){e()}()}).asProto(),Cr.register("DisabledElementsRemover").asCtor(function zo(){this.remove=function r(e,t){if(e)for(var n=e.length;0<n--;){t(e[n])&&e.splice(n,1)}}}),Cr.register("PlayGuidGenerator").asCtor(function qo(n){this.generateNewPlayGuid=function r(e){var t=n.generateGuid();return t=(new Date).getTime()+"-"+e+"-"+t}}).dependencies("GuidGenerator"),Cr.register("DevModeAlertRaiser").asCtor(function Ko(n,l,c,r,o,e,d){function a(){var e=p()[0],t=e.style.left;t?(e.style.left="",e.style.right=t):(e.style.left=e.style.right,e.style.right="")}function s(){var e=p()[0];e.style["max-width"]="50px",e.style.opacity="0.7",e.children[1].style.display="none"}function f(){var e=p()[0];e.style["max-width"]="1100px",e.style.opacity="1",e.children[1].style.display="inline"}function p(){return mtjQuery("#walkme-dev-mode-alert")}this.devModeAlert=function u(){var e=Cr.get("ExternalWalkMeConfig").get("platform"),t="Lib on "+walkme_lib_notify_ServerName+": "+o.SVNRevision;window.walkme_lib_version&&(t+=", Version: "+walkme_lib_version),window.walkme_lib_upload_date&&(t+=", Uploaded On: "+walkme_lib_upload_date),window.walkme_lib_uploader&&(t+=", By: "+walkme_lib_uploader),r.isQuirksMode()?n.customerLog(t,5):function i(e,t,n){!function u(e,t,n,r){var i=e.render({popupBalloonZindex:l.POPUP_BALLOON_Z_INDEX,backgroundColor:function s(e){var t;switch(e=e.toLowerCase()){case"dev":t="lightblue";break;case"qa":t="red";break;case"test":t="yellow";break;case"local":t="lightgreen";break;default:t="pink"}return t}(walkme_lib_notify_ServerName),message:t,env:n,mobile:r}),o=c.getTopContainer(null,!0);mtjQuery("#walkme-dev-mode-alert",o).remove();var a=d.parseElement(i);o.append(a)}(__webpack_require__(693),t,n,e===l.PLATFORM.MobileWeb);var r=p();r.mouseenter(f),r.mouseleave(s),r.click(a),e===l.PLATFORM.MobileWeb&&(r.touchstart(f),r.touchend(s))}(e,t,walkme_lib_notify_ServerName)}}).dependencies("Logger, Consts, TopContainerProvider, HostData, Lib, Mustache, DomManager"),Cr.register("getTopContainer").dependencies("TopContainerProvider").asFunction(function(e){return e.getTopContainer}),Cr.register("TopContainerProvider").asCtor(function Jo(o,a,s,u,l,c){function i(e,t,n){var r;return 0!=(r=t?t.parents(e).last():l.isFeatureEnabled(c.FEATURES.ShadowRootsInspector)?mtjQuery(document.getElementsByTagName(e)).first():mtjQuery(e).first()).length&&"FRAMESET"!=function i(e){return u.getElementTagName(e)}(r[0])||(r=t?t.parents("html").last():n||!a.shouldHandlePageAsFramesets()?mtjQuery("html").first():mtjQuery(e,s.getFrameContents(mtjQuery(o.getBiggestFrame()))).first()),r}this.getTopContainer=function d(e,t,n){var r;return n&&(r=i(n,e,t)),r&&r.length||(r=i("body",e,t)),r}}).dependencies("BiggestFrameProvider, FramesetsUtils, FrameContentsProvider, ElementUtils, FeaturesManager, Consts"),Cr.register("HtmlDecoder").asCtor(function Xo(h){this.decodeHtml=function m(e,t){for(var n,r={"&amp;":"&","&apos;":"'","&#39;":"'","&quot;":'"',"&lt;":"<","&gt;":">"},i=[],o=0,a=0,s=0;o<e.length;){if(n=!1,"&"==e.charAt(o)){var u=r[e.substring(o,o+6).toLowerCase()];s=u?6:s;var l=r[e.substring(o,o+5).toLowerCase()];s=l?5:s;var c=r[e.substring(o,o+4).toLowerCase()];s=c?4:s;var d=c||l||u,f=-1!=h.inArray(d,t);if(d&&f){var p=e.substring(a,o);i.push(p),i.push(d),a=o+=s,n=!0}}n||o++}var g=e.substring(a,o);return i.push(g),i.join("")},this.decodeString=function n(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}).dependencies("ArrayUtils"),Cr.register("FacebookCanvasIndicator").asCtor(function $o(){this.isInFacebookCanvas=function t(){try{if(FB._inCanvas&&FB.Canvas.getPageInfo)return 1!=window.walkme_dont_use_fb_scroll}catch(e){return!1}}}),Cr.register("LocationMatcher").asCtor(function Zo(i,o,a){this.isLocationMatchString=function s(e){var t,n;if(a.startsWith(e,"regexp:")){e=e.substr("regexp:".length),n=o.getCurrentLocation();try{t=n.match(e)}catch(r){return!1}}else{e=(e=e.replace(new RegExp("[*]","g"),".*")).replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),n=o.getUrlResourceName(),e=i.remove(e),n=n.toLowerCase(),e=e.toLowerCase();try{t=n.match(e)}catch(r){return!1}}return null!=t&&t[0]==n}}).dependencies("UrlCommonStringsRemover, LocationService, StringUtils"),Cr.register("StringUtils").asCtor(function ea(){this.startsWith=function n(e,t){return 0==e.indexOf(t)},this.endsWith=function r(e,t){return e.length>=t.length&&e.lastIndexOf(t)+t.length==e.length},this.formatString=function i(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t]||"")}return e}}),Cr.register("Throttle").asInstance(function ta(t,n){var r=0;return function(){var e=(new Date).getTime();r<=e-n&&(r=e,t.apply(null,arguments))}}),Cr.register("PropertyUtils").asCtor(function na(e,r,t,i,n){var o=this;function a(e){var t=e.properties().hasProperty(r.UI_PROPERTIES.Visible);return n.isFeatureEnabled("displayOnlyInSearch")&&(t=t&&!e.properties().hasProperty(r.UI_PROPERTIES.DisplayOnlyInSearch)),t}o.isGroup=function(e){return!!e&&e.LinkedDeployables!==undefined},o.isCollection=function(e){return e&&e.deployableType==r.DEPLOYABLE_TYPE.Collection},o.isSearchEnabled=function(){var e=t.get();return e.Settings&&Number(e.Settings.search)},o.hasChildren=function(e){for(var t=e.LinkedDeployables,n=0;n<t.length;n++){var r=i.get(t[n].DeployableType).getById(t[n].DeployableID);if(o.isGroup(r)?o.hasChildren(r):r)return!0}return!1},o.hasVisibleChildren=function(e,t){for(var n=0;n<t.length;n++){if(a(t[n]))return!0}return!1},o.supportsDeployableType=function(e,t){var n=e.Settings;return!(!n||!n.DeployableTypes||-1==mtjQuery.inArray(t+"",e.Settings.DeployableTypes))},o.hasUncompletedChildren=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._typeId===r.DEPLOYABLE_TYPE.Category){if(o.hasUncompletedChildren(n._children))return!0}else if(a(n)&&!n.properties().hasProperty(r.UI_PROPERTIES.Completed))return!0}return!1},o.isTab=function(e){var t=e.Settings;return t&&t.DeployableTypes},o.isTasksTab=function(e){return o.isGroup(e)&&o.supportsDeployableType(e,r.DEPLOYABLE_TYPE.Task)},o.isHelpTab=function(e){return o.isGroup(e)&&o.supportsDeployableType(e,r.DEPLOYABLE_TYPE.Tutorial)},o.isCourse=function(e){return e&&e.deployableType==r.DEPLOYABLE_TYPE.Course}}).dependencies("Lib, Consts, SiteConfigManager, DeployablesManagerFactory, FeaturesManager"),Cr.register("PropertiesFactory").asCtor(function ra(n,r,i,o,a,s,e,u){var l,c;this.generateAll=function(e){var t=[new q(e,s,i),new ge(e,n,r,i,o,a,l),new de(e,i,a,s),new $(e,i,a),new oe(e,i,s),new te(e,i),new ue(e,i)];return c&&(t=t.concat(new ve(e,i,s,u))),t},function t(){l=e.wrapCustomerLog("showWidget"),de._tasksManager=s.get(i.DEPLOYABLE_TYPE.Task),c=n.isFeatureEnabled("displayOnlyInSearch")}()}).dependencies("FeaturesManager, CommonEvents, Consts, ShowInMenuCheckerFactory, SiteConfigManager, DeployablesManagerFactory, Logger, ArrayUtils");var H=(Y.prop=function(e){return e.toLowerCase()},Y.prototype.getAll=function(){return this.isLoaded||this.load(),this.properties},Y.prototype.hasProperty=function(e,t){return!t&&this.isLoaded||this.load(),-1!=Tr.inArray(e,this.properties)},Y.prototype.load=function(){this.isLoaded=!0},Y.prototype.clear=function(){this.properties=[],this.isLoaded=!1},Y.prototype.generateSingle=function(e,t){var n=t?[e]:[];this.properties=n},Y.prototype.canGenerate=function(e){return-1!=Tr.inArray(e,this.propertyNames)},Y);function Y(e){this.logger=null,this.lib=null,this.deployable=null,this.isLoaded=!1,this.properties=[],this.propertyNames=[],this.utils=null,this.children=[],this.lib=e.lib,this.deployable=e.deployable,this.utils=e.utils,this.children=e.children}var Q,q=(__extends(K,Q=H),K.prototype.load=function(){var e=this.deployable.Settings;if(this.properties=[],e&&e.DeployableTypes){for(var t=0;t<e.DeployableTypes.length;t++){var n=this.deployablesManagerFactory.get(e.DeployableTypes[t]).name();n||parseInt(e.DeployableTypes[t])!==this.consts.DEPLOYABLE_TYPE.Tutorial||(n="walkthru"),this.properties.push(H.prop("contains-"+n))}Q.prototype.load.call(this)}},K);function K(e,t,n){Q.call(this,e),this.deployablesManagerFactory=t,this.consts=n,this.propertyNames=[]}var X,$=(__extends(Z,X=H),Z.prototype.load=function(){var e=[];this.utils.isTab(this.deployable)&&this.utils.supportsDeployableType(this.deployable,this.consts.DEPLOYABLE_TYPE.Tutorial)&&(e.push(H.prop(this.consts.UI_PROPERTIES.Search)),this.isSearchEnabled()&&e.push(H.prop(this.consts.UI_PROPERTIES.SearchProviders))),this.properties=e,X.prototype.load.call(this)},Z.prototype.isSearchEnabled=function(){var e=this.siteConfigManager.get();return e.Settings&&Number(e.Settings.search)},Z);function Z(e,t,n){X.call(this,e),this.consts=t,this.siteConfigManager=n,this.propertyNames=[t.UI_PROPERTIES.Search,t.UI_PROPERTIES.SearchProviders]}var ee,te=(__extends(ne,ee=H),ne.prototype.load=function(){J.isTrue(this.deployable.Settings,this.consts.UI_PROPERTIES.Default,!1)&&this.utils.hasUncompletedChildren(this.children)&&this.generateSingle(this.consts.UI_PROPERTIES.Default,!0),ee.prototype.load.call(this)},ne);function ne(e,t){ee.call(this,e),this.consts=t,this.propertyNames=[t.UI_PROPERTIES.Default]}var ie,oe=(__extends(ae,ie=H),ae.prototype.load=function(){if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Content){var e=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.Content).types();switch(this.deployable.Type){case e.Video:this.generateSingle(ae._videoProperty,!0);break;case e.Article:this.generateSingle(ae._articleProperty,!0)}}ie.prototype.load.call(this)},ae._videoProperty=H.prop(Cr.get("Consts").UI_PROPERTIES.Video),ae._articleProperty=H.prop(Cr.get("Consts").UI_PROPERTIES.Article),ae);function ae(e,t,n){ie.call(this,e),this.consts=t,this.deployablesManagerFactory=n,this.propertyNames=[ae._videoProperty,ae._articleProperty]}var se,ue=(__extends(le,se=H),le.prototype.load=function(){var e=!this.utils.isTab(this.deployable);this.generateSingle(this.consts.UI_PROPERTIES.Accessible,e),se.prototype.load.call(this)},le);function le(e,t){se.call(this,e),this.consts=t,this.propertyNames=[t.UI_PROPERTIES.Accessible]}var ce,de=(__extends(fe,ce=H),fe.prototype.load=function(){this._isLmsDeployable?this.handleLmsCompletion():this.handleTaskCompletion(),ce.prototype.load.call(this)},fe.prototype.handleLmsCompletion=function(){Cr.get("LmsCompletionManager").isCompleted(this.deployable.deployableType,this.deployable.Id,this._parentType,this._parentId)?this.generateSingle(this.consts.UI_PROPERTIES.Completed,!0):this.generateSingle(this.consts.UI_PROPERTIES.Uncompleted,!0)},fe.prototype.handleTaskCompletion=function(){var e=[];if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Task){var t=fe._tasksManager.isTaskCompleted(this.deployable);this.handleCompletionProperties(e,t),this.handleActiveProperties(e,t),this.handlePhantomTask(e,this.deployable.Settings)}else this.utils.isTasksTab(this.deployable)&&e.push(H.prop(this.consts.UI_PROPERTIES.ProgressBar));this.properties=e},fe.prototype.handleCompletionProperties=function(e,t){if(t){e.push(H.prop(this.consts.UI_PROPERTIES.Completed));var n=this.siteConfigManager.get();Number(n.TodoListSettings.strikeOutCompletedTasks)&&e.push(H.prop(this.consts.UI_PROPERTIES.StrikedOut))}else e.push(H.prop(this.consts.UI_PROPERTIES.Uncompleted))},fe.prototype.handleActiveProperties=function(e,t){this.isActive(t)?e.push(H.prop(this.consts.UI_PROPERTIES.Active)):e.push(H.prop(this.consts.UI_PROPERTIES.Inactive))},fe.prototype.isActive=function(e){var t=fe._tasksManager.isTaskActive(this.deployable);return e&&!this.shouldPlayAfterCompletion()&&(t=!1),t},fe.prototype.shouldPlayAfterCompletion=function(){var e=this.siteConfigManager.get();return Number(e.TodoListSettings.allowPlayAfterCompletion)},fe.prototype.handlePhantomTask=function(e,t){t.Phantom&&e.push(H.prop(this.consts.UI_PROPERTIES.Phantom))},fe);function fe(e,t,n,r){ce.call(this,e),this.consts=t,this.siteConfigManager=n,this.deployablesManagerFactory=r,this._parentType=e.parentType,this._isLmsDeployable=this._parentType==t.DEPLOYABLE_TYPE.Course||this._parentType==t.DEPLOYABLE_TYPE.Lesson,this._parentId=e.parentId,this.propertyNames=[t.UI_PROPERTIES.Completed,t.UI_PROPERTIES.StrikedOut,t.UI_PROPERTIES.Uncompleted,t.UI_PROPERTIES.Active,t.UI_PROPERTIES.Inactive,t.UI_PROPERTIES.Phantom,t.UI_PROPERTIES.ProgressBar]}var pe,ge=(__extends(he,pe=H),he.prototype.load=function(){var e=!0;this.checkTasksCondition(this.deployable)&&this.checkDisplayCondition(this.deployable)||(e=!1),e&&this.utils.isGroup(this.deployable)&&(e=this.getGroupVisibility(this.deployable,this.children)),this.generateVisibleProprty(e),pe.prototype.load.call(this)},he.prototype.getGroupVisibility=function(e,t){return this.utils.isTab(e)?this.getTabVisibility(e,t):this.utils.isCourse(e)?this.getCourseVisibility(e,t):this.utils.hasVisibleChildren(e,t)},he.prototype.getCourseVisibility=function(e,t){var n=this.utils.hasVisibleChildren(e,t),r=!!e.Quiz;return n||r},he.prototype.getTabVisibility=function(e,t){var n;return(n=this.featuresManager.isFeatureEnabled("dontShowTabsWithNoVisibleChildren")?this.utils.hasVisibleChildren(e,t):this.doesSupportSearchProviders(e)||this.utils.hasChildren(e))||(this.utils.isTasksTab(e)&&this.customerLog("Show widget - not showing tasks tab because there are no tasks and the tab doesn't support search.",2),this.utils.isHelpTab(e)&&this.customerLog(J.formatString("Show widget - not showing tab named {0} because there are no children and the tab doesn't support search.",this.deployable.Name),2)),n},he.prototype.generateVisibleProprty=function(e){e?this.generateSingle(he._visiblePropertyName,!0):this.generateSingle(he._invisiblePropertyName,!0)},he.prototype.doesSupportSearchProviders=function(e){var t=!1;return this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Tutorial)&&this.utils.isSearchEnabled()&&(t=!0),t},he.prototype.checkTasksCondition=function(e){var t=!0,n=this.siteConfigManager.get().TodoListSettings,r=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Task);return n&&(r?t=(t=this.hasUncompletedChildren(n)&&1==n.isActive)&&this.checkCondition(n):this.utils.isCollection(e)&&1==n.showOnlyTasksTab&&(t=!1)),t},he.prototype.checkCondition=function(e){var t=e.activateCondition,n=!0;return t&&((n=Cr.get("ConditionTreeEvaluator").evaluate(t))||this.customerLog("Show widget - not showing tasks tab because it was segmented out by a condition in todo list settings.",2),this.commonEvents.deprecatedRaiseEvent(this.consts.EVENTS.TasksConditionEvaluated,this.siteConfigManager.get())),n},he.prototype.hasUncompletedChildren=function(e){if(e.hideComplete&&parseInt(e.hideComplete)){var t=this.utils.hasUncompletedChildren(this.children);return t||this.customerLog("Show widget - not showing tasks tab because all tasks are completed",2),t}return!0},he.prototype.checkDisplayCondition=function(e){return this.showInMenuCheckerFactory.getDisplayConditionCheckerFunc(e.deployableType)(e)},he._visiblePropertyName=H.prop(Cr.get("Consts").UI_PROPERTIES.Visible),he._invisiblePropertyName=H.prop(Cr.get("Consts").UI_PROPERTIES.Invisible),he);function he(e,t,n,r,i,o,a){pe.call(this,e),this.featuresManager=t,this.commonEvents=n,this.consts=r,this.showInMenuCheckerFactory=i,this.siteConfigManager=o,this.customerLog=a,this.propertyNames=[he._visiblePropertyName,he._invisiblePropertyName]}var me,ve=(__extends(ye,me=H),ye.prototype.getParentDeployable=function(){var e=this.deployablesManagerFactory.get(this._parentType);return e?e.getById(this._parentId):undefined},ye.prototype.load=function(){var e=!1;if(this._parentType&&this._parentId&&!this.utils.isGroup(this.deployable)){var t=this.deployable.Id,n=this.getParentDeployable();if(n&&n.LinkedDeployables){var r=this.arrayUtils.filter(n.LinkedDeployables,function(e){return e.DeployableID===t&&e.Settings})[0];e=r&&r.Settings.displayOnlyInSearch,this.generateSingle(this.consts.UI_PROPERTIES.DisplayOnlyInSearch,e)}}me.prototype.load.call(this)},ye);function ye(e,t,n,r){var i=me.call(this,e)||this;return i.consts=t,i.deployablesManagerFactory=n,i.arrayUtils=r,i.propertyNames=[t.UI_PROPERTIES.DisplayOnlyInSearch],i._parentType=e.parentType,i._parentId=e.parentId,i}var Se=(Ee.prototype.getAll=function(){var t=this,n=[];return this._lib.wrapFESession(function(){for(var e=0;e<t._properties.length;e++)n=n.concat(t._properties[e].getAll())}),n},Ee.prototype.clearCache=function(){for(var e=0;e<this._properties.length;e++)this._properties[e].clear()},Ee.prototype.hasProperty=function(e,t){for(var n=0;n<this._properties.length;n++)if(this._properties[n].canGenerate(e)&&this._properties[n].hasProperty(e,t))return!0;return!1},Ee.prototype.createNewProperties=function(){var e={lib:this._lib,deployable:this._deployable,logger:{},children:this._deployableChildren,utils:this._propertyUtils,parentType:this._parentType,parentId:this._parentId};this._properties=this._propertiesFactory.generateAll(e)},Ee);function Ee(e,t,n,r){this._lib=e,this._propertyUtils=t,this._propertiesFactory=n,this._deployable=r.deployable,this._deployableChildren=r.deployableChildren,this._parentType=r.parentType,this._parentId=r.parentId,this.createNewProperties()}Cr.register("PropertiesGeneratorFactory").asCtor(function ia(t,n,r){this.create=function(e){return new Se(t,n,r,e)}}).dependencies("Lib,PropertyUtils,PropertiesFactory");__webpack_require__(694);Cr.register("DeployableTreeNodeFactory").asCtor(function oa(a,s,u,l,c,d){this.generate=function f(e,t,n){var r=c.get(e.deployableType),i={deployable:e,deployableChildren:t};return n&&(i.parentType=n.deployableType,i.parentId=n.Id),function o(n){return u({typeId:n.deployable.deployableType,type:n.deployableManager.name(),id:n.deployable.Id,activateFunction:function r(e,t){n.deployableManager.activateById(e,t)},description:n.deployable.Description,childNodes:n.children,name:n.deployable.Name,propertiesGenerator:n.propertiesGenerator,keywords:function t(e){switch(e.deployableType){case a.DEPLOYABLE_TYPE.BusinessSolution:return e.KeyWords?s.secureEvalJSON(d.decodeHtml(e.KeyWords,['"'])):[];default:return e.Keywords}}(n.deployable)})}({deployable:e,deployableManager:r,children:t,propertiesGenerator:l.create(i)})}}).dependencies("Consts, JsonUtils, DeployableTreeNodeCreator, PropertiesGeneratorFactory, DeployablesManagerFactory, HtmlDecoder"),Cr.register("UiDataProvider").asCtor(function aa(t,n,r,e,i,o){this.uiObjectsTree=function c(){var e=s(l(a));return o.raiseEvent(t.EVENTS.UIObjectsTreeCreated,{uiObjectsTree:e}),e},this.uiTasksTree=function d(){return s(e.filter(l(a),u))};var a=t.DEPLOYABLE_TYPE.Collection;function s(e){return n.generate(e)}function u(e){return i.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Task)}function l(e){for(var t=r.get(e).getAll(),n=0;n<t.length;n++)t[n].deployableType=e;return t}}).dependencies("Consts, ObjectsTreeGenerator, DeployablesManagerFactory, ArrayUtils, PropertyUtils, CommonEvents"),Cr.register("ObjectsTreeGenerator").asCtor(function sa(s,r){function u(e){if(!e.LinkedDeployables)return null;for(var t=[],n=e.LinkedDeployables,r=0;r<n.length;r++){var i=o(n[r].DeployableType,n[r].DeployableID);i&&t.push(i)}return t}function o(e,t){var n=r.get(e).getById(t);return n&&(n.deployableType=e),n}this.generate=function n(e){return function t(e){if(!e)return;e.sort(function(e,t){return e.OrderIndex-t.OrderIndex})}(e),function a(e,t){if(!e)return;var n=[];for(var r=0;r<e.length;r++){var i=u(e[r]),o=a(i,e[r]);n.push(s.generate(e[r],o,t))}return n}(e,null)}}).dependencies("DeployableTreeNodeFactory, DeployablesManagerFactory"),Cr.register("ObjectTreePercentageCalculator").asCtor(function ua(a,s){function n(e,t){var n=a.getTree(e,t),r=function i(e){return Tr.grep(e,function(e){return s.customerLog("ObjectTreePercentageCalculator - Task "+e.id()+" completed: "+u(e),4),u(e)})}(n);return{completedPercent:function o(e,t){return 0<t?Math.round(100*e/t):0}(r&&r.length||0,n.length),completedTasks:r,visibleTasks:n}}function u(e){return e.properties().hasProperty("completed")}this.calculate=function r(e,t){return n(e,t).completedPercent},this.getCompletionData=n}).asProto().dependencies("VisibleObjectTree, Logger");var we,Te=(__extends(Ce,we=f),Ce);function Ce(e,t){var n={deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Category};we.call(this,n),this._name="Category"}Cr.register("CategoriesManager").asCtor(Te).dependencies("Lib, Consts");var be,Ie=(__extends(_e,be=f),_e);function _e(e,t){var n={deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Collection};be.call(this,n),this._name="Tab"}function Ae(n){var r;this.concat=function(e){if(n&&n.adapt(e),r)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);else r=e},this.get=function(e){for(var t=r,n=0;n<arguments.length;n++)t=t[arguments[n]];return t}}function Pe(e,t,n){if(!e)return n;n=n||{};var r=e.attributes;if(r)for(var i in r)if(r.hasOwnProperty(i)&&"string"==typeof r[i]&&(r[i]=r[i].replace("###ResourcesDir###",t),"font-family"==i)){n.fonts=n.fonts||[];var o=r[i].split(",");n.fonts.push(mtjQuery.trim(o[0]))}var a=e.children;if(a)for(var s in a)a.hasOwnProperty(s)&&Pe(a[s],t,n);return n}Cr.register("CollectionsManager").asCtor(Ie).dependencies("Lib, Consts"),__webpack_require__(695),__webpack_require__(696),__webpack_require__(697),__webpack_require__(698),Cr.register("Positions").asInstance({Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}),Cr.register("FontsData").asFunction(function(){var e=new Ae;return e.concat({"walkme-opensans":{id:"opensans",name:"opensans",url:"/player/resources/fonts/opensans"}}),e.concat({"walkme-notosans":{id:"notosans",name:"notosans",url:"/player/resources/fonts/notosans"}}),e.concat({"lib-font":{id:"libFont",name:"lib-font",url:"/player/resources/fonts/lib-font_v1",dummeyText:"&#xed50;"}}),e}),Cr.register("PluginConfigs").asCtor(function la(){var t=this;function e(){n([])}function n(e){t.value=e}t.reset=e,t.set=n,function r(){e()}()}),Cr.register("PluginConfigsGetter").asCtor(function ca(r){this.get=function i(e){if(e&&r&&r.value&&r.value.length)for(var t=0;t<r.value.length;t++){var n=r.value[t];if(n.PluginName===e)return JSON.parse(n.Config)}}}).dependencies("PluginConfigs"),Cr.register("UIVariationsAdapter").asCtor(function da(i){this.adapt=function(e){if(e)for(var t in e){var n=i.getResourcePath("/player/resources/templates/"+t),r=Pe(e[t],n);e[t].metaData=r}}}).dependencies("ResourceManager"),Cr.register("UITemplatesAdapter").asCtor(function fa(a){this.adapt=function(e){if(e)for(var t in e)if(e[t])for(var n in e[t]){var r=e[t][n];if(r&&r.Css){var i=a.getResourcePath("/player/resources/templates/"+t+"/"+n),o=Pe(r.Css,i);r.Css.metaData=o}}}}).dependencies("ResourceManager"),Cr.register("UITemplates").asCtor(Ae).dependencies("UITemplatesAdapter"),Cr.register("UIVariations").asCtor(Ae).dependencies("UIVariationsAdapter"),Cr.register("UIDisplayers").asFunction(function(){var e=new Ae;return e.concat({1:"PopupDisplayer"}),e}).asSingleton(),Cr.register("UIComponents").asFunction(function(){var e=new Ae;return e.concat({1:"ShoutOut",2:"ShoutOut",3:"Quiz",4:"QuizAnnouncement"}),e}).asSingleton();var ke=(De.prototype.setUI=function(e,t,n,r,i){var o=e.Actions?Tr(e.Actions).filter(function(e,t){return t.IsActive}).length:0,a="wm-one-button";2==o?a="wm-two-buttons":0==o&&(a="wm-no-buttons"),n.ButtonsClass=a,this.ui=Cr.get("TemplatesFactory").get(e.UITemplateId,e.UITemplateVersion,t,n,r,e.DesignTemplateId,e.DesignTemplatePlaceholderConfigs,i)},De.prototype.registerEvents=function(e,t,n,r,i){this.events[e]={name:t,actionId:n,body:r.libAction}},De.prototype.getUI=function(){return this.bindEvents(),this.ui},De.prototype.bindEvents=function(){},De);function De(){this.events={}}var xe,Ne=(__extends(Oe,xe=ke),Oe.prototype.bindEvents=function(){var n=this;Tr.safeEach(this.events,function(e,t){n.ui.find(e).on(t.name,t.body)})},Oe);function Oe(){xe.apply(this,arguments)}function Le(o,a,s){this.get=function(e,t){try{var n=a.get(e);if(!n)return;var r=Cr.create(n,t);return r.once("show-end",function(){s.deprecatedRaiseEvent("show-end",r)}),r}catch(i){o.error(i,"error generating class")}}}function Fe(){var i,s=this,u=null,o=null,a={},l={},c={},d={},f={},e={};function p(e,t,n){if(!n)return t;return d[e]=t,function r(){return d[e](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19])}}s.Extends=function(e,t,n,r,i,o,a){u=new e(t,n,r,i,o,a),s.ExtendsInstance(u)},s.ExtendsInstance=function(e){o=e.__wmoop__,function r(){var e=o.GetPublics();for(var t in e){var n=e[t];s.Public(t,n)}}(),function n(){for(var e in f){if(!o.IsVirtual(e))throw"Cannot override non-virtual method ["+e+"]. of class : "+o;o.DoOverride(e,f[e])}}();var t=function i(){var e={},t=o.GetOriginalFunctions();for(var n in t){var r=t[n];e[n]=r}return e}();s._base=t},s.Override=function(e,t){return f[e]=t},s.DoOverride=function(e,t){d[e]=t},s.IsVirtual=function(e){return d[e]!==undefined},s.GetOriginalFunctions=function(){return c},s.Public=function(e,t,n){var r=p(e,t,n);return c[e]=t,i[e]=r,a[e]=r},s.Protected=function(e,t,n){var r=p(e,t,n);return c[e]=t,l[e]=r},s.GetProperties=function(){return e},s.GetPublics=function(){return a},s.GetProtecteds=function(){return l},function t(e){((i=e).__wmoop__=s).Virtual=new Re(s),s.Prop=new Me(s)}.apply(null,arguments)}function Me(){var r;function i(t,e){return r.GetProperties()[t]=e,function n(e){if(e===undefined)return r.GetProperties()[t];r.GetProperties()[t]=e}}this.Public=function(e,t){var n=i(e,t);return r.Public(e,n),n},this.Protected=function(e,t){var n=i(e,t);return r.Protected(e,n),n},this.Private=function(e,t){return i(e,t)},function t(e){r=e}.apply(null,arguments)}function Re(){var n;function r(e){return function t(){throw"["+e+"] is pure virtual and must be overriden"}}this.Public=function(e,t){return t=t||r(e),n.Public(e,t,!0)},this.Protected=function(e,t){return t=t||r(e),n.Protected(e,t,!0)},function t(e){n=e}.apply(null,arguments)}e.register(re.PLATFORM.Web,function(){Cr.register("UICreator").asCtor(Ne).asProto()}),e.register(re.PLATFORM.MobileWeb,function(){Cr.register("UICreator").asCtor(Ne).asProto()}),e.register(re.PLATFORM.Desktop,function(){Cr.register("UICreator").asCtor(Ne).asProto()}),__webpack_require__(699),__webpack_require__(700),__webpack_require__(701),__webpack_require__(702),__webpack_require__(703),Cr.register("UIComponentsFactory").asCtor(Le).asSingleton().dependencies("Logger, UIComponents, CommonEvents"),Cr.register("DisplayersFactory").asCtor(Le).asSingleton().dependencies("Logger, UIDisplayers, CommonEvents"),Cr.register("DataFixer").asCtor(function pa(r){var i=this;i.fixSteps=function(e,t){for(var n=e.Steps,r=0;r<n.length;r++)i.fixStep(n[r],r,t)},i.fixStep=function(e,t,n){e.fixed||(e.StepIndex=t,e.Configuration&&-1!=e.Configuration?(e.End=e.Configuration.End,e.Duration=e.Configuration.Duration,e.Delay=e.Configuration.Delay,e.Position=e.Configuration.Position):e.Configuration=n.BalloonSettings,e.IgnorePosition=e.IgnorePosition!=undefined?e.IgnorePosition:parseInt(r.getSettingsValue(e.Settings,"ignorePosition",0)),e.fixed=!0)}}).dependencies("SettingsValuesRetriever"),__webpack_require__(704),__webpack_require__(706),Cr.register("PerformanceTimestampAdder").asCtor(function ga(n){this.addTimeStamp=function r(e){try{lt.addTimeStamp(e),n.deprecatedRaiseEvent("PerfTimestamp",e)}catch(t){}}}).dependencies("CommonEvents"),__webpack_require__(710),__webpack_require__(711),Cr.register("PerformanceMeasureAPI").asCtor(function ha(n){var r={};function i(e){delete r[e]}this.startMeasure=function o(e,t){if(r[e]){if(!t)return;i(e)}r[e]=n.measure(e)},this.stopMeasure=function t(e){r[e]&&(r[e].stop(),i(e))},this.clearMeasure=i}).dependencies("PerformanceAPI"),__webpack_require__(712),Cr.register("ClickTriggersListCreator").asCtor(function ma(t,n){this.get=function r(){var e=["click","mousedown","mouseup"];return t.isFeatureEnabled(n.FEATURES.ClickTriggerWithKeyboard)&&e.push("keydown"),t.isFeatureEnabled("ipad_touch_as_click")&&e.push("touchstart"),t.isFeatureEnabled("noFocusTrigger")||t.isFeatureEnabled("wmAccessibility")||e.push("focus"),e}}).dependencies("FeaturesManager, Consts"),Cr.register("StatesMachine").asCtor(function va(s,a,e){var u,l,c,t,d,f,r,p,g;function n(){u=t,f={}}function h(e,t){for(var n=0;n<e.length;n++){t(e[n])}}function m(e,t){u=e.toState;var n=function o(e){if(e.valueToReturn)return e.valueToReturn;if(g)for(var t=0;t<g.length;t++){var n=g[t],r=!n.fromState||n.fromState==e.fromState,i=!n.toState||n.toState==e.toState;if(r&&i)return n.valueToReturn}return null}(e);r(e.toState,n,t)}function v(e,t){if(!(("*"==e.fromState||e.fromState==u)&&e.onAction==t))return!1;var n=!e.ifFlagged||function i(e){return a.doesAnyMeetCondition(e,function(e){return f[e]!=undefined})}(e.ifFlagged),r=!e.ifNotFlagged||function o(e){return a.doAllMeetCondition(e,function(e){return f[e]==undefined})}(e.ifNotFlagged);return n&&r}this.evaluate=function y(e,t){!function r(e){d[e]&&d[e].addFlag&&h(d[e].addFlag,function(e){f[e]=!0})}(e),function i(e){d[e]&&d[e].removeFlag&&h(d[e].removeFlag,function(e){delete f[e]})}(e);var n=function o(e){for(var t=0;t<l.length;t++){var n=l[t];if(v(n,e))return n}return null}(e);n&&!function a(e,t){(function r(){p&&p.clear()})(),m(e,t);var n=function i(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.fromState==e.toState)return n}return null}(e);n&&!function o(e,t){p=s.libSetTimeout(e,t)}(function(){m(n,t)},n.timeout)}(n,t)},this.reset=n,function i(){t=e.initState,l=e.transitions||[],c=e.timedOutTransitions||[],g=e.defaultTransitionValuesToReturn||[],d=e.globalActionFlags||{},r=e.onStateChangedCallback||function(){},n()}()}).asProto().dependencies("TimerManager, CommonUtils"),Cr.register("StatesMachineCreator").asCtor(function ya(){this.create=function t(e){return Cr.create("StatesMachine",e)},function e(){}.apply(null,arguments)}),Cr.register("WalkMePlayerLazyAPI").asCtor(function Sa(n,e,t,r,i){var o,a=this;function s(e,t){for(var n in t.WalkMePlayerAPI)t.WalkMePlayerAPI.hasOwnProperty(n)&&(a[n]=t.WalkMePlayerAPI[n]);o=!0}function u(){Cr.get("WidgetLoader").loadWidget()}function l(t){return function(){var e=arguments;Tr(n).one("PlayerInitComplete",function(){i.setWalkmeTimeout(function(){(o?a:window.WalkMePlayerAPI)[t].apply(null,e)},0)}),u()}}function c(){return!1}a.hidePlayer=l("hidePlayer"),a.showPlayer=l("showPlayer"),a.removePlayer=l("removePlayer"),a.hideMenu=l("hideMenu"),a.showMenu=l("showMenu"),a.removeMenu=l("removeMenu"),a.toggleMenu=l("toggleMenu"),a.removeAttenGrab=l("removeAttenGrab"),a.showWalkthruPlayer=l("showWalkthruPlayer"),a.hideWalkthruPlayer=l("hideWalkthruPlayer"),a.removeWalkthruPlayer=l("removeWalkthruPlayer"),a.showWalkthruMenu=l("showWalkthruMenu"),a.hideWalkthruMenu=l("hideWalkthruMenu"),a.removeWalkthruMenu=l("removeWalkthruMenu"),a.redrawPlayer=u,a.isMenuOpen=c,a.isWalkthruMenuOpen=c,function d(){Tr(n).on(e.EVENTS.Widget.WidgetAPICreated,s)}()}).dependencies("WmInternals, Consts, UIChangeTracker, WidgetVisibilityEvaluator, TimerManager"),Cr.register("ShouldLoadWidgetInLibChecker").asCtor(function Ea(e,n,r){this.shouldLoad=function a(){var e=n.isFeatureEnabled(i),t=r.get();return e&&(o(t.Menu)||o(t.Player))};var i="widgetInLib",t="none";function o(e){return e&&e!=t}}).dependencies("Consts, FeaturesManager, SiteConfigManager"),Cr.register("LegacyWidgetApiModule").asCtor(function wa(e,r,t,n,i,o,a,u,l,c,d,f,s,p,g,h,m,v,y,S,E,w,T){var C=this;C.searchTermChangedOnWidget=function I(e){},C.widgetLoaded=function _(e){v.measure("widgetEndLoad"),e&&e.bind("on-activate",i.fixFlash)},C.sendWidgetOpenLogToServer=function A(){if(!E.isEnabled())return!0;a.SendWidgetOpen({})},C.sendSearchResultClickedToServer=function P(e,t,n,r,i,o){if(!E.isEnabled())return;var a=l.get(),s=u.execute({url:a+"/Search/SearchResultClicked",dataType:"jsonp",data:{userGuid:e,searchGuid:t,resultSearchProvider:n,selectedItem:r,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()}});s.success(i),s.error(o)},C.getSearchResultsFromServer=function k(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/Search",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get(),saveSearch:!i},timeout:b});return a.success(n),a.error(r),a},C.saveSearchToServer=function D(e,t,n,r){if(!E.isEnabled())return;var i=l.get(),o=u.execute({url:i+"/Search/SaveSearch",dataType:"jsonp",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()},timeout:b});o.success(n),o.error(r)},C.sendResultClickedBeforeSearchToServer=function x(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/ResultClickedBeforeSearch",dataType:"jsonp",data:{userGuid:t,searchQuery:e,selectedItem:n,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()}});a.success(r),a.error(i)},C.shouldShowWidgetAccordingToAbTesting=p.isWalkMeVisible,C.widgetApi=g,C.UiProperties=function N(){return s.UI_PROPERTIES},C.getAttentionGrabberManager=function O(){return h},C.getMustache=function L(){return m},C.getConsts=function F(){return s},C.getEventsTrigger=function M(){return Cr.get("EventsTrigger")},C.auditClick=a.SendClickAudit,C.getClickAuditManager=function R(){return a},C.userSawWalkMe=y.report,C.checkRepeatCookie=S.checkRepeatCookie,C.isAuditDisabled=function B(){return!E.isEnabled()},C.getBiggestFrame=w.getBiggestFrame,C.checkShowOnlyInUrl=T.checkShowOnlyInUrl,C.playerCreationComplete=function U(e){if(e)return;var t=r("#mt-menu-closed, #walkme-menu-closed"),n={config:o.get(),player:t};Cr.get("CommonUtils").attentionGrabberClass(n).setupAttenGrab()},C.triangleLoaded=function V(e){Cr.get("PostDataFileLoadedHandler").dataFinishedLoading(e)},C.mt_log=function W(e){Cr.get("Logger").customerLog(e,5)};var b=6e3;!function j(){r.extend(e,C)}()}).dependencies("Lib, wmjQuery, DebuggerManager, LoggerManager, UiUtils, SiteConfigManager, ClickAuditManager, WmAjax, RecorderServerManager, AbPermutationManager, EndUsersManager, AuditSourceManager, Consts, WalkMeVisibilityChecker, WidgetApi, AttentionGrabberManagerAPI, Mustache, PerformanceAPI, WalkmeVisibleReporter, AutoStartManager, AuditingEnabledIndicator, BiggestFrameProvider, WidgetVisibilityEvaluator"),Cr.register("WidgetVisibilityEvaluator").asCtor(function Ta(i,o,a,s,u,l,t,n,r){var c;this.init=function m(){t.bindPreListener(h),function e(){(a.get().Settings[f]||n.isFeatureEnabled(f))&&(d=!1)}(),g()},this.checkShowOnlyInUrl=function e(){c!==undefined&&d||h();return c};var d=!0,f="monitorWidget",p=5e3;function g(e){h(),d||c||r.libSetTimeout(g,p)}function h(){var e=!!function r(){var e=!0,t=a.get(),n=o.getSettingsValue(t.Settings,s.DISPLAY_WIDGET_CONDITION,null);n?(e=u.evaluateConditionTree(n),l.deprecatedRaiseEvent(s.EVENTS.Widget.WidgetConditionEvaluated,t)):null!=t.ShowInUrl&&0!=t.ShowInUrl.length&&(e=i.isLocationMatchString(t.ShowInUrl));return e}();(c===undefined?e:e!==c)&&(c=e,l.raiseEvent("WidgetVisibilityChanged",{isVisible:e}))}}).dependencies("LocationMatcher, SettingsValuesRetriever, SiteConfigManager, Consts, Lib, CommonEvents, UIChangeTracker, FeaturesManager, TimerManager"),Cr.register("WidgetApi").asCtor(function Ca(){this.getEventSender=function(){return Cr.get("EventSender")},this.getCtx=function(){return Cr}}).dependencies(),Cr.register("WidgetLoader").asCtor(function ba(t,n,r,i,o,a,s,u,l,c){var d,f;function p(){if(!f){f=!0,Tr(a).off("WidgetVisibilityChanged",p),r.measure("widgetStartLoad");var e=[d];l.isFeatureEnabled("widgetInLib")?Cr.has("WalkmeWidget")&&Cr.get("WalkmeWidget").init():e.asyncCallback=function(){t.addScript(d)},n.raiseEvent(i.EVENTS.WidgetLoad,e)}}this.init=function g(e){!function t(e){return e||c.shouldLoad()}(e)||(d=e,window.WalkMePlayerAPI=s,u.customerLog("Waiting for widget visibility evaluator"),Tr(a).one("WidgetVisibilityChanged",p),o.init(),o.checkShowOnlyInUrl())},this.loadWidget=p}).dependencies("CommonUtils, CommonEvents, PerformanceAPI, Consts, WidgetVisibilityEvaluator, WmInternals, WalkMePlayerLazyAPI, Logger, FeaturesManager, ShouldLoadWidgetInLibChecker"),Cr.register("ElementFinderExtensionsProvider").asCtor(function Ia(){this.register=function t(e){n.push(e)},this.getElementFinderExtension=function r(e){for(var t=0;t<n.length;++t)if(n[t].isEnabled(e))return n[t]};var n=[]}).dependencies(""),Cr.register("UiObjectsTreeConverter").asCtor(function _a(n,o){this.convert=function r(e){if(e&&0!=e.length){n.customerLog("converting objects tree started for root "+e[0]._name,4);var t=Tr.map(e,function(e){return function i(e,t){var n=function r(t){var n=function(){var e;return function(){return e=e||t.properties().getAll()}}();return{isProperty:function(e){return-1<n().indexOf(e)},getContentType:function(){return-1<n().indexOf(o.UI_PROPERTIES.Video)?o.UI_PROPERTIES.Video:-1<n().indexOf(o.UI_PROPERTIES.Article)&&o.UI_PROPERTIES.Article}}}(e);return{getTitle:function(){return e._name},getDescription:function(){return e._description},getKeywords:function(){return e._keywords},getType:function(){return e._type},getChildren:function(){return t},getContentType:function(){return n.getContentType()},isVisible:function(){return n.isProperty(o.UI_PROPERTIES.Visible)},isCompleted:function(){return n.isProperty(o.UI_PROPERTIES.Completed)},isActive:function(){return n.isProperty(o.UI_PROPERTIES.Active)},isAccessible:function(){return n.isProperty(o.UI_PROPERTIES.Accessible)},isSearchSupported:function(){return n.isProperty(o.UI_PROPERTIES.Search)},activate:e.activate}}(e,r(e._children))});return n.customerLog("converting objects tree ended for root "+e[0]._name,4),t}}}).dependencies("Logger, Consts"),Cr.register("WidgetUiApi").asCtor(function Aa(t,n,r){this.getObjectsTree=function i(){r.customerLog("getting objects tree",4);var e=t.uiObjectsTree();return n.convert(e)}}).dependencies("UiDataProvider, UiObjectsTreeConverter, Logger"),Cr.register("LegacyExternalApiModule").asCtor(function Pa(r,e,t,n,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y,S){var E=this;function w(){return Cr.get("HostData")}function T(){return Cr.get("ClientStorageManager")}function C(){return Cr.get("CommonUtils")}function b(){return Cr.get("PositionHelper")}function I(){return s.getFindElementPluginManager()}function _(){}E.getTimerManager=function A(){return Cr.get("TimerManager")},E.getHostData=w,E.getClientStorageManager=T,E.getStorageManagerInstance=function P(e){return e?Cr.get("StorageManagerFactory").byType(e):T()},E.getServerStorageManager=function k(){return Cr.get("ClientOrServerStorageManager")},E.getABPermutationId=Cr.get("AbPermutationManager").getPermutation,E.getEndUserGuid=t.getEndUserGuid,E.getUiTracker=function D(){return Cr.get("UIChangeTracker")},E.getSalesForceManager=function x(){return Cr.get("SalesForceManager")},E.getUiUtils=function N(){return Cr.get("UiUtils")},E.getDataFileExtraData=function O(){return Cr.get("DataFileExtraData").data},E.getFramesetsUtils=function L(){return n},E.getPlayerServer=i.get,E.getCurrentLanguage=o.getCurrentLanguage,E.addTimeStamp=function(e){a.measure(e)},E.getUiDataProvider=function F(){return Cr.get("UiDataProvider")},E.generateNewGuid=Cr.get("GuidGenerator").generateGuid,E.getBrowser=function M(){return w().browser.string},E.isQuirksMode=w().isQuirksMode,E.getBiggestFrame=Cr.get("BiggestFrameProvider").getBiggestFrame,E.injectCustomCSS=l.setCustomCssIfNeeded,E.shouldHandlePageAsFramesets=n.shouldHandlePageAsFramesets,E.getServerDataSenderManager=function R(){return Cr.get("ServerDataSenderManager")},E.getCommonUtils=C,E.getPositionHelper=b,E.getCommonEvents=function B(){return Cr.get("CommonEvents")},E.getSiteConfig=c.get,E.setSiteConfig=c.set,E.centerElementInPage=d.centerElementInPage,E.getDeployablesManager=f.get,E.isFeatureActive=p.isFeatureEnabled,E.isWalkMeVisible=g.isWalkMeVisible,E.getWmAjax=function U(){return Cr.get("WmAjax")},E.getEnvId=h.get,E.getPlayInitiatorEnum=function V(){return Cr.get("Consts").STEP_PLAY_INITIATOR_ENUM},E.elkState=function W(e){C().elementLastKeeper.setState(e)},E.getIsInEditor=function j(){return Cr.get("IsInEditor").get()},E.getCenteredElement=function G(e){return Cr.get("CenteredElementProvider").get(e)},E.startNewInteraction=function H(){Cr.get("InteractionManager").beginNewInteraction()},E.registerFindElementPlugin=function Y(e){I().registerPlugin(e)},E.getFindElementPluginManager=I,E.getTodoListManager=function Q(){return Cr.get("TodoListManager")},E.getBalloonDrawer=function z(e){return Cr.get("BalloonDrawerProvider").getBalloonDrawer(e)},E.getExecuteParallel=function q(){return C().executeParallel},E.getSurveys=function K(){return Cr.get("SurveysManager").getAll()},E.getBodyInheritedMargin=function J(){return b().getBodyInheritedMargin()},E.setIsInEditor=function X(e){Cr.get("IsInEditor").set(e)},E.setRecorderServer=function $(e){var t=Cr.get("RecorderServerManager");t.set(e);var n=Cr.get("LibInitializer").getPlayerServer();null!==n&&n!==undefined&&t.set(n)},E.getElementStrength=function Z(e){var t={score:-1},n=Cr.get("JsonUtils").secureEvalJSON(e);return Cr.get("DataFixer").fixStep(n,0,{BalloonSettings:{}}),r.findElement(n,null,t)?t.score:null},E.getUserGuid=m.getUserGuid,E.setUserGuid=m.setUserGuid,E.ConditionFunctionsObj=Cr.get("ConditionFunctions"),E.ResourceManager=Cr.get("ResourceManager"),E.Logger=u,E.lib_error=function ee(e,t){u.error(e,t)},E.releaseAllElements=v.releaseAllElements,E.releaseBalloons=v.releaseBalloons,E.releaseShoutOuts=v.releaseShoutOuts,E.releaseFlow=v.releaseFlow,E.removeWalkMe=v.removeWalkMe,E.destroyAll=v.destroyAll,E.appendDataPackage=y.appendDataPackage,E.appendWalkMeConfigData=y.appendWalkMeConfigData,E.dataFileLoaded=y.dataFileLoaded,E.dataFinishedLoading=S.dataFinishedLoading,E.setSurveysForRecorder=_,E.completeGoalById=function(e){return Cr.get("GoalsManager").completeGoalById(e)},E.getElementTextArray=Cr.get("ElementTextExtractor").getElementTextArray,E.wrapFESession=s.wrapSession,E.findElement=function te(){try{return s.findElement.apply(null,arguments)}catch(e){u.error(e)}},E.getFEVersionName=function ne(){return s.initFE(),s.getFindElementCore().VersionName},E.setAuditSource=h.set,E.evaluateConditionTree=Cr.get("ConditionTreeEvaluator").evaluate,E.getWalkmeOOP=function re(){return Fe},E.getEndUserId=function ie(){var e=!Cr.get("AbTestingManager").isAbTestingEnabled();return t.getEndUserGuid(e)},E.getStorageType=function oe(){var e=Cr.get("ClientOrServerStorageManager").getStorageType();return e.mode+" - "+e.type},E.launchLogger=function ae(){var e=Cr.get("LoggerManager");e.isLoggerActivated()||e.launchLogger()},E.getAbtestingGoalsManager=function se(){return Cr.get("AbTestingGoalsManagerInstance").value},E.getTutorials=function ue(){return[]},E.getCurrentTutorial=_,E.getState=_,function le(){e.extend(r,E)}()}).dependencies("Lib, wmjQuery, EndUsersManager, FramesetsUtils, RecorderServerManager, LanguageManager, PerformanceAPI, ElementFinder, Logger, CustomCssSetter, SiteConfigManager, ElementCenterer, DeployablesManagerFactory, FeaturesManager, WalkMeVisibilityChecker, AuditSourceManager, UserGuidContainer,LibDestroyer, DataFileDataLoader, PostDataFileLoadedHandler"),Cr.register("CenteredElementProvider").asCtor(function ka(c,i,n){this.get=function v(e){for(var t=mtjQuery(e).parents(),n=null,r=t.length-1;0<=r;r--)try{if(d(t[r])){var i=mtjQuery(t[r]),o=mtjQuery(window).width(),a=i.width(),s=i.offset().left,u=o-a;if(0<u&&u/2==s){n=i;break}if(u<0&&u==s){n=i;break}if(f(i)){n=mtjQuery(i);break}}}catch(l){c.customerLog("error-----------------------------------",5),c.error(l)}return n};var o=undefined,a=undefined;var s=function s(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?s(r.styleSheet):p(r.style)&&a.push(r.selectorText)}}catch(i){}},d=function d(e){var t=mtjQuery(e),n=t.data("mt_isElementFixedWidth");if(1==n)return!0;if(0==n)return!1;var r=u(e);return t.data("mt_isElementFixedWidth",r),r},u=function u(e){return!!g(e.style)||h(e,t())},f=function f(e){var t=mtjQuery(e),n=t.data("mt_isElementMarginAuto");if(1==n)return!0;if(0==n)return!1;var r=l(e);return t.data("mt_isElementMarginAuto",r),r},l=function l(e){return!!p(e.style)||h(e,function t(){return a==undefined&&(a=[],n.foreach(document.styleSheets,s)),a}())},p=function p(e){if(e){var t=mtjQuery.trim(e.margin),n=mtjQuery.trim(e.marginLeft),r=mtjQuery.trim(e.marginRight);if(i.startsWith(t,"0")&&i.endsWith(t,"auto")||"auto"==n&&"auto"==r)return!0}return!1},g=function g(e){var t=e.width;if(t){for(var n="",r=0;r<t.length;r++)isNaN(t[r])||(n+=t[r]);if(n&&700<parseInt(n)&&(-1!=t.indexOf("p")||-1!=t.indexOf("e")||-1!=t.indexOf("m")||-1!=t.indexOf("i")))return!0}return!1},h=function h(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(n=mtjQuery(e).is(mtjQuery(i)))return n}return n},t=function t(){return o==undefined&&(o=[],n.foreach(document.styleSheets,m)),o},m=function m(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?m(r.styleSheet):g(r.style)&&o.push(r.selectorText)}}catch(i){}}}).dependencies("Logger, StringUtils, ArrayUtils"),Cr.register("CustomVariableAuditor").asCtor(function Da(r,i,o,a){var s=[];function u(e,t){var n=function r(e){var t={};return t.name=e,t.value=i.getWindowVar(e),t.defaultValue=t.value,o.raiseEvent(a.EVENTS.CustomAuditVar,t),t.returnValue}(t);"string"==typeof n?WalkMeAPI.setAnalyticsCustomField(e,n):"boolean"==typeof n||"number"==typeof n&&!isNaN(n)?WalkMeAPI.setAnalyticsCustomField(e,n.toString()):n==undefined&&WalkMeAPI.setAnalyticsCustomField(e,"")}this.handleSfVars=function(){for(var e=0;e<s.length;e++){var t=s[e];u(t.index,t.value)}},function l(){var e=r.get().Settings.customAuditVars;if(e)for(var t=0;t<e.length;t++){var n=e[t];n.value&&""!=n.value&&(-1<n.value.indexOf("walkme_sf_vars")?s.push({index:t+1,value:n.value}):u(t+1,n.value))}}()}).dependencies("SiteConfigManager,CommonUtils,CommonEvents,Consts"),Cr.register("ElementInIframeIndicator").asCtor(function xa(t,n){this.isInIframe=function r(e){return t.isFeatureEnabled(n.FEATURES.OldIsInIframeIndication)?!!e.data("iframe"):e[0].ownerDocument!=window.document}}).dependencies("FeaturesManager, Consts"),Cr.register("AuditSourceProvider").asCtor(function Na(e,t){this.isInPreviewMode=function n(){return e.get()===t.SOURCES.preview},this.isInPlayMode=function r(){return e.get()===t.SOURCES.play},this.isProductionEnv=function i(){return e.get()===t.SOURCES.production}}).dependencies("AuditSourceManager, Consts"),Cr.register("CorsSupportIndicator").asCtor(function Oa(){this.hasCorsSupport=function e(){return"withCredentials"in new XMLHttpRequest}}),Cr.register("BiggestFrameProvider").asCtor(function La(r,e,i){this.getBiggestFrame=function a(){var e=!1;try{e=!o||!r.isFrameActive(o)||0<mtjQuery("frameset",o.contentWindow.document).length}catch(n){e=!0}var t=o;e&&(t=r.findBiggestFrame(),i.isFeatureEnabled("noBiggestFrameCache")||(o=t));return t};var o=null}).dependencies("FramesetsUtils, Logger, FeaturesManager"),Cr.register("DirectHeadProvider").asCtor(function Fa(n,r,i,o,a){this.getDirectHead=function s(e){var t;return e?i.get()||o.isInIframe(e)?e.parents("html").children("head"):void 0:(n.shouldHandlePageAsFramesets()&&(t=r.getFrameContents(Tr(a.getBiggestFrame()))),Tr("head",t))}}).dependencies("FramesetsUtils, FrameContentsProvider, IsInEditor, ElementInIframeIndicator, BiggestFrameProvider"),Cr.register("FrameContentsProvider").asCtor(function Ma(i){this.getFrameContents=function o(e){var t,n=e[0];if(n==undefined)return[];try{t=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:[],t=mtjQuery(t)}catch(r){i.handleCrossDomainError(r),t=[]}return t}}).dependencies("CommonUtils"),Cr.register("WhiteListChecker").asCtor(function Ra(o,a,s,u){this.isUserInWhiteList=function f(e,t){var n=Tr.Deferred();if(s.isFeatureEnabled("whitelist")){var r=a.getData(c);1===r?n.resolve():0===r?n.reject():function i(e,t,n){u.execute({dataType:"jsonp",url:o.get()+"/EndUser/IsEndUserInWhiteList",data:{endUserGuid:t,walkmeUserGuid:e},timeout:l,success:function(e){"true"==e.result?(d(e,1),n.resolve()):("false"==e.result&&d(e,0),n.reject())},error:function(){n.reject()}})}(e,t,n)}else n.resolve();return n.promise()};var l=1e4,c=a.keysConfig.whitelist.general.key;function d(e,t){a.saveData(c,t,e.cacheTimeInSeconds)}}).dependencies("RecorderServerManager, ClientStorageManager, FeaturesManager, WmAjax"),Cr.register("AbTestingManager").asCtor(function Ba(s,e,t,n,i,o,r,a,u,l,c){var d,f,p,g,h=this;function m(e){try{if(u.isFeatureEnabled("noAnalyticsAudit")&&(g||!a.isEnabled()))return!0;var t=d.Settings.abTesting.testNumber,n=window.wm_customData!=undefined?wm_customData.abTestingData:null;o.execute({url:i.get()+"/Statistics/AddAbTestingWidgetVisible",data:{userGuid:l.getUserGuid(),endUserId:p(),testNumber:t,isVisible:e,customDataSerialized:c.toJSON(n)}})}catch(r){f(r,"Could not report ab testing result to server")}}function v(e,t,n,r){var i=e+"-"+d.Settings.abTesting.testNumber,o=s.getData(i);return!0===o||!1===o||(o=function a(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(1,100)<=n,s.saveData(i,o,t),r&&r(o)),o}h.shouldLoadWalkme=function(){try{if(!h.isAbTestingEnabled())return!0;var e=s.keysConfig.abTesting.shouldLoadWalkme;return v(e.key,e.expiry,d.Settings.abTesting.loadPercentage)}catch(t){return f(t,"Could not check if Walkme should be loaded according to AB Testing"),!0}},h.shouldShowWidget=function(){try{if(!h.isAbTestingEnabled())return!0;var e=s.keysConfig.abTesting.shouldShowWidget,t=e.key;return window.walkme_ab_imp_cookie&&(t+="-"+p()),v(t,e.expiry,d.Settings.abTesting.showPercentage,m)}catch(n){return f(n,"Could not check if widget should be shown according to AB Testing"),!0}},h.isAbTestingEnabled=function(){var e=d.Settings&&d.Settings.abTesting&&parseInt(d.Settings.abTesting.enabled);return u.isFeatureEnabled("abtesting")&&e&&!r.isInPreviewMode()&&!r.isInPlayMode()},h.disableReport=function(){g=!0},function y(){d=e.get(),p=t.getEndUserId,f=n.error}.apply(null,arguments)}).dependencies("ClientStorageManager, SiteConfigManager, Lib, Logger, RecorderServerManager, WmAjax, AuditSourceProvider, AuditingEnabledIndicator, FeaturesManager, UserGuidContainer, JsonUtils"),Cr.register("AbTestingGoalsManagerInstance").asInstance({value:undefined}),Cr.register("DataFileKeyToDeployableType").asCtor(function Ua(e){var t=this;t.Tutorials=e.Tutorial,t.Tasks=e.Task,t.Launchers=e.Launcher,t.Labels=e.LabelGroup,t.Surveys=e.Survey,t.Categories=e.Category,t.Contents=e.Content,t.Collections=e.Collection,t.Shuttles=e.Shuttle,t.Tags=e.Tag,t.ShoutOuts=e.ShoutOut,t.ConditionBlocks=e.ConditionBlock,t.BusinessSolutions=e.BusinessSolution,t.Lessons=e.Lesson,t.Courses=e.Course,t.TrackedPages=e.TrackedPage,t.TrackedElements=e.TrackedElement,t.SearchProviderUrls=e.SearchProviderUrl}).dependencies("DeployableTypes"),Cr.register("DeployablesContainersFacade").asCtor(function Va(e,r){function t(n){Tr.each(e,function(e,t){t!=r.Tutorial&&t!=r.Launcher&&n(e,t)})}function i(e,t){var n=e+"Container";t(Cr.get(n))}this.emptyAllDeployablesContainers=function n(){t(function(e){!function n(e,t){i(e,function(e){e.set(t)})}(e,[])})},this.addRangeToAllDeployablesContainers=function o(r){t(function(e,t){!function n(e,t){i(e,function(e){e.addRange(t)})}(e,r[t])})}}).dependencies("DataFileKeyToDeployableType, DeployableTypes"),Cr.register("SupportToolkitInitializer").asCtor(function Wa(t,n,r){this.init=function i(e){__webpack_require__(714).init(t,n,r,Cr,e)}}).dependencies("LocalStorageService, JsonUtils, WmInternals"),Cr.register("LibInitializer").asCtor(function ja(u,l,t,c,e,r,i,o,n,d,a,s,f,p,g,h,m,v,y,S,E,w,T,C,b){var I,_,A,P="wm-customWidgetUrl",k=null,D=[],x=[],N=null,O=!1,L=!1,F=!1;function M(e,n){p.releaseAllElements({isDuringLanguageChange:!0}).then(R(function(){!function t(e){a.raiseEvent(s.EVENTS.LanguageChanged,{language:e})}(e),n&&n(!0)}))}function R(e,t){t&&(D=t),L=F=!0,N=e,k=0;var n=l.getPermutation();W(D,n)}function B(){var n=r.getSettingsFile();if(n)if(Cr.get("PetaServerNameManager").set(n.PetaServer),n.IsInEditor&&h.set(!0),y.setUserGuid(n.UserGuids&&n.UserGuids[0]),A=n.PlayerServer,t.init(),b.isPlayMode()){if(n.data){var e=[g.BalloonStyles,g.DeepUI];n.data.tutorials&&(e.push(g.Walkthru),n.data.tutorials),Cr.get("DynamicComponentsLoader").loadByTypes(e,n.data).then(function(){!function t(e){e.data.tutorials?(S.set(e.data.siteConfig),u.setTutorialsForEditor(e.data.tutorials,e.UserGuids[0]),f.setWalkmeTimeout(function(){Cr.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1)):e.data.flows&&(S.set(e.data.siteConfig),Cr.get("BusinessSolutionsContainer").set(e.data.flows),f.setWalkmeTimeout(function(){Cr.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1))}(n)})}}else!function s(e,t){var n=d.Data;if(null==n||n.Permutations==undefined)t();else{var r=n.DefaultPermutation,i=n.Permutations;l.setPermutations(i,r);var o=function a(e){for(var t=0;t<e.length;t++){var n=e[t];if(!0===c.evaluate(n.Settings.conditionTree))return n.PermutationIds[0]}return null}(n.ActivationRules);l.initGetPermutation(o,function(e){if(0===l.getPermutationById(e).LoadWalkMe)return v.customerLog("WalkMe ABTesting - WalkMe Loading canceled. Stopping execution"),void p.removeWalkMe("AbTesting - LoadWalkMe is false");u.appendWalkMeConfigData(n),t(e)})}}(0,function(e){!function i(e,t){for(var n=e.DataFiles,r=0;r<n.length;r++)if(n[r].metaData)return void U(e,n[r]);V(e.DataFiles,e.WidgetFile,t)}(n,e)})}function U(o,e){n.loadTextFile(e.url,"fixedCallback",function a(e,t,n){var r=[];e=b.getSnippet().fixAutoDetectPaths(e);for(var i=0;i<o.DataFiles.length;i++)1==o.DataFiles[i].metaData?r=r.concat(e.DataFiles):r.push(o.DataFiles[i]);V(r,o.WidgetFile)},undefined,!1)}function V(e,t,n){D=T.secureEvalJSON(T.toJSON(e)),function r(e){if(i&&i.localWidgetUrl)return void(_=i.localWidgetUrl);if(w){var t=w.getItem(P);if(t)return void(_=t)}_=e}(t),W(e,n)}function W(e,t){o.setLanguages(e),x=o.fixLanguageUrlInDataFiles(T.secureEvalJSON(T.toJSON(e)),L),t!==undefined&&-1<t&&(x=function a(e,t){for(var n=0;n<e.length;n++)e[n].url=(r=e[n],i=t,o=void 0,o=r.url,".js",o.substring(0,o.length-".js".length)+"_"+i+".js");var r,i,o;return e}(x,t)),j()}function j(){try{var e=x[k].url;O=x[k].isHidden!=undefined&&x[k].isHidden,function t(e){m.measure("dataFileStartLoad"),E.send(s.EVENTS.BeforeDataFileLoaded,{dataFileUrl:e})||C.load(e)}(e)}catch(n){v.error(n,"faild to load data file")}}function G(){var e={newLanguageFlag:L,asyncCallback:function(){Cr.get("PostDataFileLoadedHandler").dataFinishedLoading()&&(L?(L=!1,N&&N(!0)):Cr.get("WidgetLoader").init(_))}};a.raiseEvent("DataLoadedEvent",e)}this.releaseResources=p.releaseAllElements,this.isNextDataPackageIsHidden=function(){return O},this.getPlayerServer=function(){return A},this.changeLanguage=function(e,t){var n=o.changeLanguage(e,D);return n?M(e,t):t&&t(n),n},this.forceChangeLanguage=function(e,t){M(e,t)},this.reloadDataFileAfterRelease=R,this.isNewLanguage=function(){return F},this.startInitializer=function(e){!function n(e){var t=r.getSettingsFile();t.PostLibJsFile&&""!=t.PostLibJsFile?(window.walkme_post_lib_loaded=function(){e()},m.measure("postLibStartLoad"),I(t.PostLibJsFile)):e()}(function(){!function n(e){var t=v.timer("init data files and widget");if(k=0,a.raiseEvent(s.EVENTS.WalkmeLoaded),window[s.EVENTS.WalkmeLoaded]!=undefined)_walkMe=_makeTutorial=u,window._walkmeInternals.continueLoad=function(){B(e)},window[s.EVENTS.WalkmeLoaded](u);else{if(!b.isSnippetExist())return;window.document.dontLoadTriangle&&b.isPublishMode()?(window._walkmeInternals.blocked=!0,window._walkmeInternals.continueLoad=function(){B(e)}):B(e)}t.stop()}(e)})},this.dataFileLoadedWrapper=function(){if(m.measure("dataFileEndLoad"),F=O=!1,++k==x.length){var e=Cr.get("CustomVariableAuditor");lt.bind("SfVarsExposed",e.handleSfVars),function i(e){var t=Cr.get("IncomingIntegrationConditions");if(!t.isEnabled())return e();var n=S.get();if(n.EndUserSettings){var r=Cr.get("EndUsersManager");r.setEndUserSettings(n.EndUserSettings),r.createEndUserGuid()}t.awaitIncomingIntegration().then(e)}(G)}else j()},function H(){I=e.addScript,i&&!i.isSelfHosted||!1}.apply(null,arguments)}).dependencies("Lib, AbPermutationManager, WalkMeInfo, ConditionTreeEvaluator, CommonUtils, SettingsFile, WmInternals,LanguageManager, WmAjax, WalkmeConfigManager, CommonEvents, Consts, TimerManager, LibDestroyer, DynamicComponentTypes,IsInEditor, PerformanceAPI, Logger, UserGuidContainer, SiteConfigManager, MessageSender, LocalStorageService, JsonUtils, DataFileDataLoader, SnippetModeIdentifier"),Cr.register("DataFileExtraData").asInstance({data:{}}),Cr.register("DataFileDataLoader").asCtor(function Ga(m,v,y,S,E,t,e){var n=this;n.error=function r(e){},n.appendDataPackage=function a(e,t){!function r(){var e;window.wmPreviewSnippet&&wmPreviewSnippet.getServerSettings?e=wmPreviewSnippet.getServerSettings():window.wmSnippet&&wmSnippet.getServerSettings?e=wmSnippet.getServerSettings():window.mt_cdn_server_name&&window.mt_recorder_server_name&&((e={}).cdnServerName=mt_cdn_server_name,e.recorderServer=mt_recorder_server_name);window.wmContext=window.wmContext||e}();var n=function i(e){window.walkme_special_tutorials&&(e.Tutorials=walkme_special_tutorials);window.walkme_special_site_config&&(e.SiteConfig=walkme_special_site_config);return e}(e);e.Tutorials===undefined&&(n={Tutorials:e,SiteConfig:t});return T(n.SiteConfig,!0),Cr.has("IntegrationCenterEndUserIDPInitializer")?o(n):Cr.get("DynamicComponentsLoader").loadOneByType(Cr.get("DynamicComponentTypes").IntegrationCenterEndUserIDP,n).then(function(){return o(n)})},n.appendWalkMeConfigData=function i(e){Cr.get("AbExperimentsContainer").addRange(e.Experiments)},n.dataFileLoaded=function s(){},n.registerDataAppender=function u(e){w.push(e)},n.load=function l(e){"json"===m.getFileExtension(e)?Tr.ajax({url:e,dataType:"json",success:n.appendDataPackage,error:n.error}):m.addScriptWithCallback(e,"dataFileLoadedCallback",n.appendDataPackage,n.error)};var w=[];function o(e){return t.load(e).then(function(){!function h(n){var i={},e=m.defaultValue(n.LauncherCustomImages,[]),t=m.defaultValue(n.LauncherHtmlImages,[]),r=m.defaultValue(n.DesignTemplates,[]),o=m.defaultValue(n.PluginConfigs,[]),a=m.defaultValue(n.AccessibilityGeneral,{}),s=m.defaultValue(n.Attributes,[]),u=n.TeachMeConfig,l=Cr.get("AccessibilityGeneralManager"),c=Cr.get("UserAttributes");Tr.each(y,function(e,t){i[t]=m.defaultValue(n[e],[])});var d=Cr.get("PlatformsService");i[S.ShoutOut]=d.filterByCurrentPlatform(i[S.ShoutOut]);var f=m.defaultValue(n.ExtraData,{isOldDataFile:!0});Cr.get("DataFileExtraData").data=f,Cr.get("PublishDataManager").init(f),v.setUserGuid(n.UserGuid),Cr.get("LibInitializer").isNewLanguage()&&(Cr.get("SiteConfigManager").set([]),Cr.get("IconTemplates").customImages=[],Cr.get("IconTemplates").htmlImages=[],Cr.get("DesignTemplates").reset(),Cr.get("PluginConfigs").reset(),l.reset(),Cr.get("TeachMeConfigManager").set([]),E.emptyAllDeployablesContainers());Cr.get("IconTemplates").customImages=Cr.get("IconTemplates").customImages.concat(e),Cr.get("IconTemplates").htmlImages=Cr.get("IconTemplates").htmlImages.concat(t),Cr.get("DesignTemplates").set(r),Cr.get("PluginConfigs").set(o),Cr.get("PageIdentifiersAPI").setPageIdentifiers(n.PageIdentifiers),Cr.get("CustomCssSetter").setUiTemplates(n.UITemplates),T(n.SiteConfig),l.set(a),c.init(s);var p=Cr.get("TeachMeConfigManager");u&&0==p.get().length&&p.set(u);Tr.each(y,function(e,t){!function r(e,t){for(var n=0;n<e.length;n++)e[n].userGuid=t}(i[t],v.getUserGuid())}),E.addRangeToAllDeployablesContainers(i),Cr.get("UITemplates").concat(n.UITemplates),Cr.get("UIVariations").concat(n.UIVariations),Cr.get("DisabledSmartTipsRemover").remove(Cr.get("BusinessSolutionsContainer").get()),Cr.get("DisabledCourseQuizzesRemover").remove(Cr.get("CoursesContainer").get()),Tr.each(w,function(e,t){t.append(n,i)}),function g(){Cr.get("LibInitializer").dataFileLoadedWrapper()}()}(e)})}function T(e,t){var n=Cr.get("SiteConfigManager");!e||0!=n.get().length&&n.wasCustomCssSet()||n.set(e,t)}}).dependencies("CommonUtils, UserGuidContainer, DataFileKeyToDeployableType, DeployableTypes, DeployablesContainersFacade, ComponentsLoader, Logger"),Cr.register("PostDataFileLoadedHandler").asCtor(function Ha(c,d,f,p,g,h,m,v,i,o,y,t,a,S,E,w,T,s,u,n){this.dataFinishedLoading=function k(e,t){var n=m.timer("lib init");if(Cr.get("SessionPersister").startPersisting(),Cr.get("SettingsCacheBusterActivator").activeIfPublishedRecently(Cr.get("SettingsFile").getPublishDate()),Cr.register("sfVarsRemovedFromLib").asInstance(function(){}),p.raiseEvent(f.EVENTS.DATA_FILES_LOADED),function a(){var e=E.get();if(e.Settings&&e.Settings.rmWMCond&&Cr.get("ConditionTreeEvaluator").evaluate(e.Settings.rmWMCond)&&!window.editorAPI)return m.customerLog("Remove walkme condition is true. Removing WalkMe.",3),h.removeWalkMe("Removed by condition"),!0;return!1}())return;g.isFeatureEnabled("tagBody")&&d.setBodyUtils(Cr.get("TagBodyUtils"));try{window.walkme_data_finished_loading_callback&&walkme_data_finished_loading_callback()}catch(s){}var r=Cr.get("WalkmeClassesInitializer").initWalkMeClasses();if(!r.Succeeded)return h.removeWalkMe(r.ErrorMessage||"initWalkMeClassesFailed",{sendLog:!0,errorCode:r.ErrorCode}),!(c.initFailed=!0);Cr.get("EndUserDataConverter").convertData();var i=function u(e,t){m.customerLog("after loading storage",4),p.raiseEvent(f.EVENTS.StorageLoaded);var n=e?b:I;!t&&e||(!function o(){if(g.isFeatureEnabled("noDebugger"))return!1;var e=y.getData(f.DEBUGGER.STATE_NAME,f.DEBUGGER.STATE.Deactive,T.getUserGuid());return e==f.DEBUGGER.STATE.Active||e==f.DEBUGGER.STATE.ActiveAndReset}()||function a(){return v.isDebuggerOnWindow()}()||(w.dbgr={debuggerWasLoaded:n},n=v.loadDebuggerFromStorage),function s(){return y.getData(C,!1,T.getUserGuid())}()&&c.launchLogger());var r=Cr.get("TodoListManager");if(r.hasTaskGoalCompletionCondition()){var i=n;n=function(){S.isInPlayMode()||r.didTasksFinishLoading()?i():r.setTasksFinishedLoadingCallback(i)}}return n}(e,t);n.stop();var o=function l(t){return function(){var e={asyncCallback:t};p.raiseEvent(f.EVENTS.BeforeStorageLoadedCallback,e)}}(i);return!1!==Cr.get("ClientOrServerStorageManager").init(o)||(h.removeWalkMe("storageManagerInitFailed",{sendLog:!0}),!1)};var C="wm-lg-act";function b(){m.customerLog("after loading storage for play",4),i.init(),r(e),o.get().enabled()&&(g.isFeatureEnabled("stopCrossDomainAfterLoadForPlay")&&o.get().stop(),o.get().start(e))}function e(){m.customerLog("sending editor event: StorageManagerInitialized",4),p.raiseEvent("StorageManagerInitialized")}function I(){Cr.get("FlowStartFailureListener").listen(),r(),Cr.get("WhiteListChecker").isUserInWhiteList(T.getUserGuid(),c.getEndUserGuid()).then(l,A)}function r(e){Cr.get("ServerDataSenderManager").start(),n.restore(e)}function l(){var e=m.timer("after loading storage"),t=[];if(o.get().enabled()&&t.push(o.get().start),S.isProductionEnv()){var n=c.getEndUserGuid(),r=lt.walkme_userGuid_to_replace||T.getUserGuid();Cr.get("AnalyticsManager").auditUniqueEndUser(r,Cr.get("AbPermutationManager").getPermutation(),n)}t.push(s.value?s.value.startWatching:_),t.push(u.isReady),d.executeParallel({functionsToExecute:t,successCallback:function(){i.init(o.get().enabled()),a.measure("walkmeReady"),function n(e){var t={asyncCallback:e};p.raiseEvent(f.EVENTS.BeforeWalkmeReady,t)}(P),w.isSelfHosted?m.customerLog("Self Hosted - no need to check settings file",3):Cr.get("TimerManager").setWalkmeTimeout(function(){Cr.get("SettingsCacheManager").start()},5e3),e.stop()}})}function _(e){e()}function A(){h.removeWalkMe("user is not in the white list"),c.initFailed=!0}function P(){try{walkme_ready()}catch(e){}try{mt_ready()}catch(e){}try{lt.walkme_ready()}catch(e){}p.raiseEvent(f.EVENTS.WalkmeReady),t.isWalkMeVisible()&&(Cr.get("PlatformInitializer").run(),Cr.get("PermalinkManager").run(),Cr.get("AutoStartManager").run(),Cr.get("StartupDeployablesRunner").showStartUpDeployables()),p.raiseEvent(f.EVENTS.ElementsTrackingReady),a.measure("walkmeReadyEnd"),Cr.get("LoadingTimeInformer").run()}}).dependencies("Lib, CommonUtils, Consts, CommonEvents, FeaturesManager, LibDestroyer, Logger, DebuggerManager, WalkMeGoalsManager, CrossDomainManager, ClientStorageManager, WalkMeVisibilityChecker, PerformanceAPI, AuditSourceProvider, SiteConfigManager, WmInternals, UserGuidContainer, AbTestingGoalsManagerInstance, EngagementRulesRepository, DeployablesRestorer"),Cr.register("StartupDeployablesRunner").asCtor(function Ya(){this.showStartUpDeployables=function e(){Cr.get("FramesetsUtils").waitForFramesToLoad().then(function(){Cr.get("ElementFinder").wrapSession(function(){!function e(){Cr.get("WalkMeVisibilityChecker").isWalkMeVisible()&&Cr.get("SmartTipSetActivationInitiator").start();Cr.get("TrackedPagesManager").start(),Cr.get("TrackedElementsManager").start(),Tr.each(t,function(e,t){t.start()})}()})})},this.registerDeployablesRunner=function n(e){t.push(e)};var t=[]}),Cr.register("WalkmeClassesInitializer").asCtor(function Qa(d,f,p,g,h,m,v,y,S,E,w,T,C,b){this.initWalkMeClasses=function I(){var e={Succeeded:!0},t=p.get();if(C.init(),Cr.get("JawsAccessibilityUtil").init(),function l(){return w.isIEBrowser(8,"lt")&&!window.postMessage}())return e.Succeeded=!1,e.ErrorMessage="WalkMe is not supported on that browser",f.customerLog(e.ErrorMessage),e;Cr.get("InteractionInitiationEventListener").init(),Cr.get("DataSenderInitializer").initAnalyticsProperties({settings:t.Settings,features:{stickyCustomVars:function(){return g.isFeatureEnabled(S.FEATURES.StickyCustomVars)},strongStickyCustomVars:function(){return g.isFeatureEnabled(S.FEATURES.StrongStickyCustomVars)}},logger:Cr.get("Logger"),consts:Cr.get("Consts"),getCookie:function(e){return Cr.get("CookiesManager").getCookie(e)},getjQueryElementText:function(e){return Cr.get("JQueryElementFinder").getjQueryElementText(e)},getLocalStorageItem:function(e){var t=Cr.get("LocalStorageService");return t?t.getItem(e):undefined},getWindowVar:function(e){return Cr.get("CommonUtils").getWindowVar(e)},wmjQuery:Cr.get("wmjQuery")}),Cr.get("BalloonDrawerProvider").getBalloonDrawer(t.BalloonSettings).loadResources(T.getTopContainer().siblings("head")),function c(){E.setDefault(p.get(),"TodoListSettings",{})}(),Cr.get("WmAjax").setFeatures(g.isFeatureEnabled("blockJsonp"),g.isFeatureEnabled("corsJsonpFallback"));var n=Cr.get("AbTestingManager");if(!n.shouldLoadWalkme())return e.Succeeded=!1,e;if(h.overrideTimeouts(),t.EndUserSettings){var r=Cr.get("EndUsersManager");r.setEndUserSettings(t.EndUserSettings),r.createEndUserGuid()}b.init();var i=Cr.get("endUserGuidValidator").validate();if(i)return{Succeeded:!1,ErrorMessage:i.message,ErrorCode:i.code};var o=Cr.get("AbExperimentsContainer").get();if(0<o.length){m.enableMultiUserStorage();var a=Cr.get("ExperimentsManager");a.setDeployables(o),Cr.get("AbTestingGoalsManagerInstance").value=new F({deployablesGoalManager:m,experiments:a.getAll(),lib:d,getEndUserGuid:d.getEndUserGuid,getPermutationId:Cr.get("AbPermutationManager").getPermutation,getAuditSource:Cr.get("AuditSourceManager").get,serverAddress:Cr.get("RecorderServerManager").get(),storageManager:Cr.get("ClientStorageManager"),commonEvents:Cr.get("CommonEvents"),userGuidContainer:Cr.get("UserGuidContainer")})}Cr.get("ContentsManager").setDeployables(Cr.get("ContentsContainer").get()),Cr.get("CategoriesManager").setDeployables(Cr.get("CategoriesContainer").get()),Cr.get("CollectionsManager").setDeployables(Cr.get("CollectionsContainer").get()),Cr.get("ConditionBlocksManager").setDeployables(Cr.get("ConditionBlocksContainer").get()),Cr.get("SurveysManager").setDeployables(Cr.get("SurveysContainer").get()),Cr.get("ShoutOutsManager").setDeployables(Cr.get("ShoutOutsContainer").get()),Cr.get("BusinessSolutionsManager").setDeployables(Cr.get("BusinessSolutionsContainer").get()),Cr.get("TrackedPagesManager").setDeployables(Cr.get("TrackedPagesContainer").get()),Cr.get("CoursesManager").setDeployables(Cr.get("CoursesContainer").get()),Cr.get("LessonsManager").setDeployables(Cr.get("LessonsContainer").get()),v.setDeployables(Cr.get("TagsContainer").get()),Cr.get("TrackedElementsManager").setDeployables(Cr.get("TrackedElementsContainer").get()),Cr.get("SearchProviderUrlsManager").setDeployables(Cr.get("SearchProviderUrlsContainer").get());var s=Cr.get("TodoListManager");if(s.setDeployables(Cr.get("TasksContainer").get()),v.injectTagsToDeployables(),s.shouldTrackAbTasks()){var u=Cr.get("TasksGoalsManager");s.init(),s.loadTasks(function(){u.startWatchingTasks()})}else lt.abTasksBlocked=!0,y.raiseEvent(S.EVENTS.AbTasksBlocked),f.customerLog("Not tracking ab testing and tasks - blocked in this browser."),n.disableReport();return n.isAbTestingEnabled()&&C.setAnalyticsCustomFields(0,d.getEndUserId()),Cr.get("BizFlowOnBeforeUnloadChecker").init(),Cr.get("UIChangeTracker").init(),Cr.get("PageChangeTracker").init(),Cr.get("jQueryCacheCleaner").init(),Cr.get("FlowLinkedTaskCompletionHandler").init(),Cr.get("BalloonLogEventHandler").init(),e}}).dependencies("Lib, Logger, SiteConfigManager, FeaturesManager, TimerManager, WalkMeGoalsManager, TagsManager, CommonEvents, Consts, CommonUtils, HostData, TopContainerProvider, WalkMeInfo, EngagementRulesRepository"),Cr.register("ComponentsLoader").asCtor(function za(i,o,a){var s;this.load=function l(e){!function r(){s||(s=!0,o.init())}();var t=e&&e.UserGuid;if(!u[t]){var n=Tr.Deferred();u[t]=n,i.load(e).then(n.resolve)["catch"](a.error)}return u[t]};var u={}}).dependencies("DynamicComponentsLoader, StaticComponentsLoader, Logger"),Cr.register("DynamicComponentsLoader").asCtor(function qa(n,t){function r(t,e){return i(Tr.grep(n.get(),function(e){return-1!=Tr.inArray(e.type,t)}),e)}function i(e,n){return ct.all(Tr.map(e,function(e){return function t(n,r){try{!n.wasLoaded&&n.shouldLoad(r)&&(n.promise=new ct(function(e){n.wasLoaded=!0,function t(n,r,o){try{n.load(function(e){try{n.promise=undefined,function i(e,t,n){if(e){var r=e.init(n);r?r.then(t):t()}else t()}(e,r,o)}catch(t){a(t),r()}})}catch(e){a(e),r()}}(n,e,r)}))}catch(e){a(e)}return n.promise||ct.resolve()}(e,n)}))}function a(e){t.error(e,"error loading component")}this.load=function o(e){return i(n.get(),e)},this.loadOneByType=function s(e,t){return r([e],t)},this.loadByTypes=r}).dependencies("DynamicComponentsProvider, Logger"),__webpack_require__(717),Cr.register("WalkmeOOP").asCtor(Fe).asProto(),Cr.register("SpotlightChecker").asCtor(function Ka(t){this.isSpotlight=function n(e){return 1==t.getSettingsValue(e,"fadeBackground",1)||1==t.getSettingsValue(e,"fadeBackground",!0)||"True"==t.getSettingsValue(e,"fadeBackground","True")}}).dependencies("CommonUtils");var Be=(Ue.prototype.follow=function(e){return e in this.children||(this.children[e]=new Ue(this,e)),this.children[e]},{stringify:function Ja(e){var t,n,r;return r=function a(e,t){var n,r,i,o;if(null!==t&&"object"==typeof t)if(Ve(t))for(n=[],r=0;r<t.length;r++)n.push(a(e,t[r]));else{for(i in o=e,n={"":[]},t)Object.hasOwnProperty.call(t,i)&&(o=o.follow(i),n[""].push(a(e,t[i])));o.links.push(n)}else n=t;return n}(t=new Ue(null,""),e),0<(n=function l(e){var t,n,r,i,o,a,s=[],u=[];for(o in e.templateIndex=0,e.children)Object.hasOwnProperty.call(e.children,o)&&u.push(e.children[o]);for(;0<u.length;){for(o in a=0,(t=u.shift()).children)Object.hasOwnProperty.call(t.children,o)&&(u.push(t.children[o]),a+=1);if(1<a||0<t.links.length){for(n=[],r=t;null===r.templateIndex;)n.unshift(r.key),r=r.parent;for(n.unshift(r.templateIndex),s.push(n),t.templateIndex=s.length,i=0;i<t.links.length;i++)t.links[i][""].unshift(t.templateIndex)}}return s}(t)).length?Cr.get("JsonUtils").toJSON({f:"cjson",t:n,v:r},null,null):Cr.get("JsonUtils").toJSON(e)},parse:function Xa(e){var t=Cr.get("JsonUtils").secureEvalJSON(e);return null!==t&&"object"==typeof t&&"f"in t&&"cjson"===t.f?function s(e,t){var n,r,i;if(null!==t&&"object"==typeof t)if(Ve(t))for(n=[],r=0;r<t.length;r++)n.push(s(e,t[r]));else for(n={},i=function a(e,t){for(var n=[];0<t;)n=e[t-1].slice(1).concat(n),t=e[t-1][0];return n}(e,t[""][0]),r=0;r<i.length;r++){var o=s(e,t[""][r+1]);null!==o&&o!==undefined&&(n[i[r]]=o)}else n=t;return n}(t.t,t.v):t}});function Ue(e,t){this.parent=e,this.key=t,this.children=[],this.templateIndex=null,this.links=[]}function Ve(e){return"undefined"!=typeof Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}Cr.register("WalkmeLoadTimeManager").asCtor(function $a(e){var t;function n(){t=(new Date).getTime()}this.init=function r(){n(),e.bind("NewWalkMeLoadTime",n)},this.getWalkmeLoadTime=function i(){return t}}).dependencies("WmInternals"),Cr.register("WalkmeInternalsPersistWhitelist").asInstance(["removeWalkMeReason","dbgr"]),Cr.register("NoPublishStepsLoader").asCtor(function Za(u,l,c,d,f){this.load=function t(n){e[n]||(e[n]=new ct(function(e,t){return function s(t,e,n){var r=l.getPublishDirectory(),i=l.getPublishVersion(),o=r+function a(e,t){var n="data_"+e+"_"+f.fileNamePrefix+"_"+t,r=d.getCurrentLanguage();r&&(n+="_"+r);return n+".js"}(i,t);c.customerLog("Retrieving steps for : "+t,3),u.execute({url:o,dataType:"jsonp",cache:!0,jsonpCallback:"walkme_"+f.jsonpCallbackPrefix+"_"+t,success:e,error:function(e){c.error(e,"Error: unable to receive data for: "+t,3),n(e)}})}(n,e,t)}));return e[n]};var e={}}).asProto().dependencies("WmAjax, SettingsFile, Logger, LanguageManager");var We=(je.prototype.parseCss=function(e){var t=this.cssUtils.clearComments(e),n=this.secureScreen(t),r=this.replaceJQuerySelectors(n),i=r.pureCss,o=r.jSelectors;this._jSelectors=o,this._css=i},je.prototype.secureScreen=function(e){return this.cssUtils.isSecure(e)?e:(this._logger.customerLog("[Dynamic Css] - Forbidden tokens detected - css reset to empty",3),"")},je.prototype.add=function(){try{0==this.getStyleSheet().length&&this.resourceManager.injectCss(this._css,this.getStyleSheetId()),this.jSelectorsOn(),this.uiChangeTracker.bind(this.uiChangeListener),this.listenToMutations()}catch(e){this._logger.customerLog("[Dynamic Css] - Faied to add css",3)}},je.prototype.remove=function(){this.getStyleSheet().remove(),this.jSelectorsOff(),this.uiChangeTracker.unbind(this.uiChangeListener),this.observer&&this.observer.disconnect()},je.prototype.replaceJQuerySelectors=function(e){var n=this,t=this.cssUtils.getSelectors(e),r=Tr.grep(t,function(e){return e&&!n.isCss(e)}).map(function(e,t){return{selector:e,"class":""+n.DYNAMIC_CSS_CLASS+t}});return{pureCss:Tr(r).reduce(function(e,t){return e.replace(t.selector,"."+t["class"])},e),jSelectors:r}},je.prototype.isCss=function(e){try{return document.querySelector(e),!0}catch(t){return!1}},je.prototype.listenToMutations=function(){var e=this;window.MutationObserver&&(this.observer=new MutationObserver(function(){return e.timerManager.libSetTimeout(e.uiChangeListener,0)}),this.observer.observe(document,{childList:!0,subtree:!0}))},je.prototype.jSelectorsOn=function(){Tr(this._jSelectors).safeEach(function(e,t){Tr(t.selector).addClass(t["class"])})},je.prototype.jSelectorsOff=function(){Tr(this._jSelectors).safeEach(function(e,t){Tr("."+t["class"]).removeClass(t["class"])})},je.prototype.getStyleSheet=function(){return Tr("#"+this.getStyleSheetId())},je.prototype.getStyleSheetId=function(){return"wm-dymanic-css-"+this.Id},je);function je(e,t,n,r,i,o){var a=this,s=o.css,u=o.Id;this.resourceManager=e,this.uiChangeTracker=t,this.timerManager=n,this.cssUtils=r,this._logger=i,this.uiChangeListener=function(){a.jSelectorsOff(),a.jSelectorsOn()},this.Id=u,this.DYNAMIC_CSS_CLASS="wm-dynamic-css-"+u+"-",this.parseCss(s)}Cr.register("DynamicCss").asCtor(We).asProto().dependencies("ResourceManager, UIChangeTracker, TimerManager, CssUtils, Logger");var Ge=(He.prototype.diffElementFound=function(e,t){var n=t();return!n||0<n.length&&e&&!n.is(e)},He.prototype.elementChanged=function(e,t){var n=this;if(!this.featuresManager.isFeatureEnabled("refindElement"))return!1;var r=!1;return this.elementFinder.wrapSession(function(){n.diffElementFound(e,t)&&(n._log("elementChangeChecker - Current element found is not same as the previous element",3),r=!0)}),r},He.LOG_FEATURE="elementChangeChecker",He);function He(e,t,n){this.logger=e,this.elementFinder=t,this.featuresManager=n,this._log=e.wrapCustomerLog(He.LOG_FEATURE)}Cr.register("ElementChangeChecker").asCtor(Ge).asProto().dependencies("Logger, ElementFinder, FeaturesManager"),Cr.register("ElementIframesAttachedIndicator").asCtor(function es(){this.areIframesAttached=function i(e){try{for(var t=!0,n=e.data("iframe");n&&t;)t=t&&n&&0<n.parents("html").length,n=n.data("iframe");return t}catch(r){return!1}}}),Cr.register("ElementInteractionEvents").asFunction(function ts(e,t){var n=[e.EVENT_SENDER_EVENT_TYPES.Click,e.EVENT_SENDER_EVENT_TYPES.Blur];t.isFeatureEnabled("extendedEvents")&&(n.push(e.EVENT_SENDER_EVENT_TYPES.MouseEnter),n.push(e.EVENT_SENDER_EVENT_TYPES.Focus));return n}).dependencies("Consts, FeaturesManager"),Cr.register("ElementInteractionEventsBinder").asCtor(function ns(t,o){this.bind=function a(e,n,t){var r=Tr(e);function i(e){t(e.data.eventName)}Tr(o).each(function(e,t){r.off(t+n),r.on(t+n,{eventName:t},i)})},this.unbind=function i(e,n){var r=t(e);Tr(o).each(function(e,t){r.off(t+n)})}}).asProto().dependencies("wmjQuerySafe, ElementInteractionEvents");var Ye=(Qe.prototype.evaluateElementVisibilityAsynch=function(e){this._log(this.stringUtils.formatString("ElementVisibilityEvaluator evaluateElementVisibility for {0}",this._logContext),Qe.DEFAULT_LOG_LEVEL),this._isStopEvaluate=!1,this.handleUIChangeTracking(),this._watchElementTimeoutTime<0?e||this.evaluateElementVisibility():this.evaluateElementVisibilityAsynchLoop()},Qe.prototype.handleUIChangeTracking=function(){var e=this;this._trackUIChanges&&(this._onUIChange=function(){e._isStopEvaluate||e.evaluateElementVisibility()},this.uiChangeTracker.bind(this._onUIChange))},Qe.prototype.evaluateElementVisibility=function(){var e=this.findByState();return this._log(this.stringUtils.formatString("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} new state is {1}",this._logContext,["visible","hidden"][e]),Qe.DEFAULT_LOG_LEVEL),e!=this._state&&(this._log(this.stringUtils.formatString("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} state changed from {1} to {2}",this._logContext,this._state,e),Qe.DEFAULT_LOG_LEVEL),this.callOnValueChangeIfExist(e)),this._state=e,this.getElementVisibility()},Qe.prototype.getElementVisibility=function(){return this._state},Qe.prototype.calculateElementVisibility=function(){return this.findIfVisible()},Qe.prototype.getElement=function(){return this._element},Qe.prototype.setOnVisibilityChanged=function(e){this._onVisibilityChanged=e},Qe.prototype.cleanResources=function(){this._log(this.stringUtils.formatString("ElementVisibilityEvaluator cleanResources for {0}",this._logContext),Qe.DEFAULT_LOG_LEVEL),this._elementTimeoutObject&&(this._elementTimeoutObject.clear(),this._elementTimeoutObject=undefined),this._state=this.consts.VISIBILITY_STATE.HIDDEN,this._isStopEvaluate=!0,this._watchElementTimeoutTime=Qe.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._element=undefined,this._onVisibilityChanged=undefined,this.uiChangeTracker.unbind(this._onUIChange)},Qe.prototype.cleanElement=function(){this._log(this.stringUtils.formatString("ElementVisibilityEvaluator cleanElement for {0}",this._logContext),Qe.DEFAULT_LOG_LEVEL),this._element=undefined},Qe.prototype.findByState=function(){var e;switch(this._state){case this.consts.VISIBILITY_STATE.VISIBLE:e=this.findIfHidden();break;case this.consts.VISIBILITY_STATE.HIDDEN:e=this.findIfVisible();break;default:this._log(this.stringUtils.formatString("ElementVisibilityEvaluator findByState unknown state {0} for {1}",this._state,this._logContext),1)}return e},Qe.prototype.evaluateElementVisibilityAsynchLoop=function(){this.evaluateElementVisibility(),this.scheduleEvaluateElementVisibilityAsynchLoop()},Qe.prototype.scheduleEvaluateElementVisibilityAsynchLoop=function(){var e=this;this._isStopEvaluate||(this._elementTimeoutObject=this.timerManager.setWalkmeTimeout(function(){e.evaluateElementVisibilityAsynchLoop()},this._watchElementTimeoutTime))},Qe.prototype.findIfVisible=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN;return this.elementFinder.wrapSession(function(){e._element=e.findElementByParams()}),this._element&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},Qe.prototype.findIfHidden=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN,n=this.positionHelper.getVisibleFilterKey(this._findElementParams.IdentifySettings),r=this.positionHelper.isElementVisible(this._element,n);return r&&this.elementIframesAttachedIndicator.areIframesAttached(this._element)&&(t=this.consts.VISIBILITY_STATE.VISIBLE),r&&this._findElementParams.IdentifySettings.IsJquerySelector&&(t=this.elementChangeChecker.elementChanged(this._element,function(){return e.findElementByParams()})?this.consts.VISIBILITY_STATE.HIDDEN:t),t},Qe.prototype.callOnValueChangeIfExist=function(e){this._onVisibilityChanged&&(this._log(this.stringUtils.formatString("ElementVisibilityEvaluator callOnValueChangeIfExist calling onValueChange for {0}",this._logContext),5),this._onVisibilityChanged(e))},Qe.prototype.findElementByParams=function(){return this.elementFinder.findElement(this._findElementParams.IdentifySettings,this._findElementParams.isVisible,this._findElementParams.score,this._findElementParams.mode,undefined,this._findElementParams.ownerChain)},Qe.WATCH_ELEMENT_DEFAULT_TIMEOUT=-1,Qe.DEFAULT_LOG_LEVEL=3,Qe.LOG_FEATURE="elementVisibility",Qe);function Qe(e,t,n,r,i,o,a,s,u,l){this.logger=e,this.consts=t,this.elementFinder=n,this.positionHelper=r,this.timerManager=i,this.uiChangeTracker=o,this.elementIframesAttachedIndicator=a,this.elementChangeChecker=s,this.stringUtils=u,this._log=e.wrapCustomerLog(Qe.LOG_FEATURE),this._logContext=l.logContext,this._findElementParams=l.findElementParams,this._watchElementTimeoutTime=l.elementEvaluationIntervalMs||Qe.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._trackUIChanges=l.trackUIChanges,l.element?(this._element=l.element,this._state=this.consts.VISIBILITY_STATE.VISIBLE):this._state=this.consts.VISIBILITY_STATE.HIDDEN}Cr.register("ElementVisibilityEvaluator").asCtor(Ye).asProto().dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator, ElementChangeChecker, StringUtils");var ze=__webpack_require__(116).MEASUREMENT_KEYS;Cr.register("UIChecksTriggerer").asCtor(function rs(e,n,r,t,i,o){this.bindCheckByState=function v(e){t.bind(a,e)},this.bindCheckIfShouldShow=function y(e){t.bind(s,e)},this.bindCheckIfShouldHideOrReposition=h,this.unbindCheckByState=function S(e){t.unbind(a,e)},this.unbindCheckIfShouldShow=function E(e){t.unbind(s,e)},this.unbindCheckIfShouldHideOrReposition=m,this.bindCheckRemoveForElement=function w(e,t){return h(t),{unbind:function(){m(t)}}};var a="CheckByState",s="CheckIfShouldShow",u="CheckIfShouldHideOrReposition",l=2e3,c=800;function d(){o.fuse(),t.trigger(a),o.check()}function f(){o.fuse();var e=i.measure(ze.PollForShow);t.trigger(s,function(){e.stop(),function t(){o.check();var e=r.sync("pollForShowLoop");n.setWalkmeTimeout(f,e||l)}()})}function p(){o.fuse();var e=i.measure(ze.PollForRemove);t.trigger(u,g),e.stop()}function g(){o.check();var e=r.sync("pollForRemoveLoopStart");n.setWalkmeTimeout(p,e||c)}function h(e){t.bind(u,e)}function m(e){t.unbind(u,e)}!function T(){e.bind(d),f(),p()}()}).dependencies("UIChangeTracker, TimerManager, EventsTriggerSyncer, UIEventRaiser, PerformanceAPI, Killswitch"),Cr.register("UiElementPositionTracker").asCtor(function is(n,e,t){var r,i,o,a;function s(){var e=n.getElementPosition(o,r);!function t(e){return a.top!=e.top||a.left!=e.left||a.height!=e.height||a.width!=e.width}(e)||(a=e,i&&i())}this.track=function u(){a=n.getElementPosition(o,r),e.bindCheckIfShouldHideOrReposition(s)},this.destroy=function l(){e.unbindCheckIfShouldHideOrReposition(s)},function c(){r=t.element,i=t.positionChangedCallback,o=t.embedmentType}()}).asProto().dependencies("ElementPositionCalculator, UIChecksTriggerer"),Cr.register("UiElementPositionTrackerCreator").asCtor(function os(r){this.create=function i(e,t){var n={element:e,positionChangedCallback:t,embedmentType:r.get(!1,e)};return Cr.create("UiElementPositionTracker",n)}}).dependencies("EmbedmentTypeProvider"),Cr.register("UIElementVisibilityAttributes").asCtor(function as(r,i){this.getStickyType=function o(e){var t=i.getSettingsValue(e,r.IS_STICKY_SETTING_KEY,!1),n=r.STICKY_TYPE.ONCE;return t&&(n=parseInt(i.getSettingsValue(e,r.STICKINESS_TYPE_SETTING_KEY,null))==r.OLD_STICKIES.STICKINESS_TYPES.soft?r.STICKY_TYPE.SOFT:r.STICKY_TYPE.STRONG),n},this.getIsRemoveByCondition=function t(e){return e.condHide==undefined?!!e.isEvaluationFrequency:!!e.condHide}}).dependencies("Consts, CommonUtils"),Cr.register("UIEventRaiser").asCtor(function ss(r){this.trigger=function o(e,t){var n;r.wrapSession(function(){n=i.triggerHandler(e)}),t&&ct.all(n||[]).then(t)},this.bind=function n(e,t){i.on(e,t)},this.unbind=function a(e,t){i.off(e,t)};var i=Tr(this)}).dependencies("ElementFinder");var qe=function us(){var M=function(n,r,i,o,a,e,t,s,u){var l=this;this.watchForVisibility=function L(){h=!1,n.customerLog(s.formatString("UIVisibilityManager watchForVisibility for {0} with stickyType {1}, with condition {2}, isRemoveByCondition {3}",u.logContext,u.stickyType,!!c,u.isRemoveByCondition),v,y),a.bindCheckByState(T),a.bindCheckIfShouldHideOrReposition(D),O()&&a.bindCheckIfShouldShow(C);c&&(c.evaluateAsyncAndDontEvaluateImmediately(u.conditionTree),c.onSonar(C));return C()},this.getVisibilityState=E,this.shouldShow=I,this.cleanResources=w;var c,d,f,p,g,h,m,v=3,y=o.FEATURES_LOGS.Flows;function S(){return d&&d.getElement()}function E(){return f}function w(){N(),a.unbindCheckByState(T),a.unbindCheckIfShouldHideOrReposition(D),a.unbindCheckIfShouldShow(C),e.remove(I),m=null,c&&c.cleanResources(),M.unregisterInstance(l),h=!0}function T(){E()==o.VISIBILITY_STATE.HIDDEN?b():function e(){A()&&P()||x()}()}function C(e){var t=ct.resolve();if(E()==o.VISIBILITY_STATE.HIDDEN&&(t=b()),e){var n=e.result||[];return n.push(t),n}return t}function b(){return m?m.then(C):m=e.measure(I).then(_)}function I(){var e=p?[A,P]:[P,A],n=!0;return Tr.each(e,function(e,t){n=n&&t()}),n}function _(e){m=null,h||(e?function t(){if(h)return;f=o.VISIBILITY_STATE.VISIBLE,d&&(g=a.bindCheckRemoveForElement(S(),k));(function e(){u.onShow&&(n.customerLog(s.formatString("UIVisibilityManager elementIsShown for {0}",u.logContext),v,y),u.onShow(S()))})(),u.stickyType!=o.STICKY_TYPE.STRONG&&a.unbindCheckIfShouldShow(C)}():O()||u.trackUIChanges?N():w())}function A(){return!d||d.evaluateElementVisibility()==o.VISIBILITY_STATE.VISIBLE}function P(){return!c||c.getValue()}function k(){A()||x()}function D(){E()==o.VISIBILITY_STATE.VISIBLE&&u.isRemoveByCondition&&!P()&&x()}function x(){N(),function e(){u.onRemove&&(n.customerLog(s.formatString("UIVisibilityManager elementWasRemoved for {0}",u.logContext),v,y),u.onRemove())}(),u.stickyType==o.STICKY_TYPE.STRONG||u.trackUIChanges?t.isFeatureEnabled(o.FEATURES.CleanElementMemory)&&d&&d.cleanElement():w()}function N(){f=o.VISIBILITY_STATE.HIDDEN,d&&d.cleanResources(),g&&(g.unbind(),g=null)}function O(){return u.stickyType==o.STICKY_TYPE.SOFT||u.stickyType==o.STICKY_TYPE.STRONG}(function F(){!function e(){u.elementVisibilityParams&&(u.elementVisibilityParams.logContext=u.logContext,d=Cr.create("ElementVisibilityEvaluator",u.elementVisibilityParams))}(),function t(){u.conditionCheckerParams&&(u.conditionCheckerParams.evaluationPollingIntervalMs=2e3,u.conditionCheckerParams.onlyPollConditionFunctions=!0,u.conditionCheckerParams.evaluateSonar=!1,u.conditionCheckerParams.stopPollingAfterEvaluateTrue=!1,u.conditionCheckerParams.getSelectedElement=S,u.elementVisibilityParams&&(u.conditionCheckerParams.ownerChain=u.elementVisibilityParams.findElementParams.ownerChain),c=r.createConditionChecker(u.conditionTree,u.conditionCheckerParams))}(),f=o.VISIBILITY_STATE.HIDDEN,p=i.checkIfTreeContainsSelectedElement(u.conditionTree),M.registerInstance(l)}).apply(null,arguments)};return M.instances={},M.sequence=0,M.registerInstance=function(e){e._id=M.sequence,++M.sequence,M.instances[e._id]=e},M.unregisterInstance=function(e){delete M.instances[e._id]},M.cleanResources=function(){for(var e in M.instances)M.instances.hasOwnProperty(e)&&M.instances[e].cleanResources();M.instances={}},M}();Cr.register("UIVisibilityManagerType").asInstance(qe),Cr.register("UIVisibilityManager").asCtor(qe).asProto().dependencies("Logger, ConditionCheckerFactory, ConditionTreeUtils, Consts, UIChecksTriggerer, DOMSessionManager, FeaturesManager, StringUtils"),Cr.register("UiWindowSizeTracker").asCtor(function ls(o,e,t,a,n){var r,s,u,i;function l(e){!function i(){var e=a(o),t=e.width(),n=e.height(),r=s!=t||u!=n;return s=t,u=n,r}()||r.apply(undefined,arguments)}this.track=function c(){i=t.registerEventHandler(e.WINDOW_EVENTS.Resize,l,!1,o)},this.destroy=function d(){i&&i()},function f(){r=n.callback}()}).asProto().dependencies("win, Consts, CommonUtils, wmjQuery"),Cr.register("wmjQuery").asInstance(Tr),Cr.get("SimpleNLP").setJQuery(Tr),Cr.register("WmInternals").asInstance(lt),Cr.register("CJson").asInstance(Be),Cr.register("Lib").asInstance(this),Cr.register("win").asInstance(window),Cr.register("requestAnimationFrame").asInstance(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||!1),Cr.register("cancelAnimationFrame").asInstance(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||!1),lt.addTimeStamp&&lt.addTimeStamp("libStartInit"),function cs(){Cr.get("StaticComponentsLoader").load(),Cr.get("WmInternalsOverloader").init(),Cr.get("LibCtorService").init()}.apply(null,arguments)}
/*!
 * WalkMe
 * http://www.walkme.com/
 *
 * Copyright 2012, WalkMe LTD
 */
window._walkmeInternals=window._walkmeInternals||{},_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeStart"),window.wmjQuery=mtjQuery,mtjQuery&&(mtjQuery.expr&&mtjQuery.expr.filters&&(mtjQuery.expr.filters.mt_hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!mtjQuery.support.reliableHiddenOffsets&&"none"===(e.style.display||mtjQuery.css(e,"display"))||"hidden"===mtjQuery.css(e,"visibility")},mtjQuery.expr.filters.mt_visible=function(e){return!mtjQuery.expr.filters.mt_hidden(e)},mtjQuery.expr.filters.wm_can_embed=function(e){var t=wmjQuery(e);return!t.hasClass("walkme-not-embed")&&"static"!=t.css("position")}),mtjQuery.trim=function(e){return null==e?"":e.toString().replace(/^\s+/,"").replace(/\s+$/,"")}),ma=wmjQuery,ma.extend({safeEach:function(n,r){return ma.each(n,function(e,t){n.hasOwnProperty(e)&&r(e,t)})}}),ma.fn.safeEach=function(e){return ma.safeEach(this,e)},ma.fn.important=function(r,i){var n=this;return"object"==typeof r?(ma.safeEach(r,function(e,t){n.important(e,t)}),n):n.safeEach(function(e,t){if(i!=undefined)try{t.style.setProperty(r,i,"important")}catch(n){t.style[r]=i}else t.style.removeProperty(r)})},ma.fn.cssReset=function(r,i){if(r){var o,n=this;return"object"==typeof r?(ma.safeEach(r,function(e,t){n.cssReset(e,t)}),n):("string"==typeof i&&(o=-1<i.indexOf("!important"),i=ma.trim(i.replace("!important",""))),n.safeEach(function(e,t){t.style[r]||t.style[function n(e){return e.replace(/^-+$/g,"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}(r)]||(o?ma(t).important(r,i):ma(t).css(r,i))}))}},ma.fn.exist=function(){return!!this.length},ma.fn.or=function(e,t){return this.length?this:ma(e,t)},ma.fn.allCss=function(){if(1==this.length){var e={},t=this.attr("style");if(!t)return e;for(var n=t.split(";"),r=n.length-1;0<=r;r--){var i=n[r].split(":"),o=ma.trim(i[0]);o&&(e[o]=ma.trim(i[1]))}return e}},ma.extend(ma.expr[":"],{textEquals:function(e,t,n){return ma(e).text()==n[3]}}),ma.fn.reduce=function(n,r){return this.each(function(e,t){r=n.apply(t,[r,t])}),r},
/**
	 * @license
	 * This material is licensed under the MIT License (see https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest/blob/master/LICENSE.txt)
	 */
function na(l){if(window._walkmeInternals.jQueryCompatability=window._walkmeInternals.jQueryCompatability||{},!l.support.cors&&l.ajaxTransport&&window.XDomainRequest){var t=/^(https?:)?\/\//i,i=/^get|post$/i,o=new RegExp("^(//|"+location.protocol+")","i");_walkmeInternals.jQueryCompatability.wmIECorsSupport=!0,l.ajaxTransport("* text html xml json",function(n,r,e){if(n.crossDomain&&n.async&&i.test(n.type)&&t.test(n.url)&&o.test(n.url)){var u=null;return{send:function(e,a){var t="",s=(r.dataType||"").toLowerCase();u=new XDomainRequest,/^\d+$/.test(r.timeout)&&(u.timeout=r.timeout),u.ontimeout=function(){a(500,"timeout")},u.onload=function(){var e="Content-Length: "+u.responseText.length+"\r\nContent-Type: "+u.contentType,t={code:200,message:"success"},n={text:u.responseText};try{if("html"===s||/text\/html/i.test(u.contentType))n.html=u.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(u.contentType))try{n.json=l.parseJSON(u.responseText)}catch(i){t.code=500,t.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(u.contentType)){var r=new ActiveXObject("Microsoft.XMLDOM");r.async=!1;try{r.loadXML(u.responseText)}catch(i){r=undefined}if(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+u.responseText;n.xml=r}}catch(o){throw o}finally{a(t.code,t.message,n,e)}},u.onprogress=function(){},u.onerror=function(){a(500,"error",{text:u.responseText})},r.data&&(t="string"===l.type(r.data)?r.data:l.param(r.data)),u.open(n.type,n.url),u.send(t)},abort:function(){u&&u.abort()}}}})}else _walkmeInternals.jQueryCompatability.wmIECorsSupport=!1}(ma),function pa(e){var t={},n=0,r=e.camelCase;e.camelCase=function(e){return t[e]===undefined&&(t[e]=r(e),1e3<++n&&(n=0,t={})),t[e]}}(ma),function qa(e){!e.fn.addBack&&e.fn.andSelf&&(e.fn.addBack=e.fn.andSelf)}(ma),
/**
* @license
* jQuery Mobile v1.4.5
* http://jquerymobile.com
*
* Copyright 2010, 2014 jQuery Foundation, Inc. and other contributors
* Released under the MIT license.
* http://jquery.org/license
*
*/
Eb=this,Fb=document,function(e,t,r){(function(p,e,t,g){var u,n,o="virtualMouseBindings",l="virtualTouchID",r="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),h="clientX clientY pageX pageY screenX screenY".split(" "),i=p.event.mouseHooks?p.event.mouseHooks.props:[],m=p.event.props.concat(i),a={},s=0,c=0,d=0,f=!1,v=[],y=!1,S=!1,E="addEventListener"in t,w=p(t),T=1,C=0;function b(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function I(e){for(var t,n,r={};e;){for(n in t=p.data(e,o))t[n]&&(r[n]=r.hasVirtualBinding=!0);e=e.parentNode}return r}function _(){S=!0}function A(){!function e(){S=!1}()}function P(){k(),s=setTimeout(function(){s=0,function e(){C=0,v.length=0,y=!1,_()}()},p.vmouse.resetTimerDuration)}function k(){s&&(clearTimeout(s),s=0)}function D(e,t,n){var r;return(n&&n[e]||!n&&function i(e,t){var n;for(;e;){if((n=p.data(e,o))&&(!t||n[t]))return e;e=e.parentNode}return null}(t.target,e))&&(r=function f(e,t){var n,r,i,o,a,s,u,l,c,d=e.type;(e=p.Event(e)).type=t,n=e.originalEvent,r=p.event.props,-1<d.search(/^(mouse|click)/)&&(r=m);if(n)for(u=r.length;u;)o=r[--u],e[o]=n[o];-1<d.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1);if(-1!==d.search(/^touch/)&&(i=b(n),d=i.touches,a=i.changedTouches,s=d&&d.length?d[0]:a&&a.length?a[0]:g))for(l=0,c=h.length;l<c;l++)o=h[l],e[o]=s[o];return e}(t,e),p(t.target).trigger(r)),r}function x(e){var t,n=p.data(e.target,l);y||C&&C===n||(t=D("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}function N(e){var t,n,r,i=b(e).touches;i&&1===i.length&&(t=e.target,(n=I(t)).hasVirtualBinding&&(C=T++,p.data(t,l,C),k(),A(),f=!1,r=b(e).touches[0],c=r.pageX,d=r.pageY,D("vmouseover",e,n),D("vmousedown",e,n)))}function O(e){S||(f||D("vmousecancel",e,I(e.target)),f=!0,P())}function L(e){if(!S){var t=b(e).touches[0],n=f,r=p.vmouse.moveDistanceThreshold,i=I(e.target);(f=f||Math.abs(t.pageX-c)>r||Math.abs(t.pageY-d)>r)&&!n&&D("vmousecancel",e,i),D("vmousemove",e,i),P()}}function F(e){if(!S){_();var t,n,r=I(e.target);D("vmouseup",e,r),f||(t=D("vclick",e,r))&&t.isDefaultPrevented()&&(n=b(e).changedTouches[0],v.push({touchID:C,x:n.clientX,y:n.clientY}),y=!0),D("vmouseout",e,r),f=!1,P()}}function M(e){var t,n=p.data(e,o);if(n)for(t in n)if(n[t])return!0;return!1}function R(){}function B(n){var r=n.substr(1);return{setup:function(){M(this)||p.data(this,o,{});var e=p.data(this,o);e[n]=!0,a[n]=(a[n]||0)+1,1===a[n]&&w.bind(r,x),p(this).bind(r,R),E&&(a.touchstart=(a.touchstart||0)+1,1===a.touchstart&&w.bind("touchstart",N).bind("touchend",F).bind("touchmove",L).bind("scroll",O))},teardown:function(){--a[n],a[n]||w.unbind(r,x),E&&(--a.touchstart,a.touchstart||w.unbind("touchstart",N).unbind("touchmove",L).unbind("touchend",F).unbind("scroll",O));var e=p(this),t=p.data(this,o);t&&(t[n]=!1),e.unbind(r,R),M(this)||e.removeData(o)}}}for(p.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},n=0;n<r.length;n++)p.event.special[r[n]]=B(r[n]);if(E){var U=function(e){var t,n,r,i,o,a=v.length,s=e.target;if(a)for(t=e.clientX,n=e.clientY,u=p.vmouse.clickDistanceThreshold,r=s;r;){for(i=0;i<a;i++)if(o=v[i],0,r===s&&Math.abs(o.x-t)<u&&Math.abs(o.y-n)<u||p.data(r,l)===o.touchID)return e.preventDefault(),void e.stopPropagation();r=r.parentNode}};t.addEventListener("click",U,!0),wmjQuery(e._walkmeInternals).bind("removeWalkMe",function(){t.removeEventListener("click",U,!0)})}})(e,t,r),function(e){e.mobile={}}(e),function(e){var t={touch:"ontouchend"in r};e.mobile.support=e.mobile.support||{},e.extend(e.support,t),e.extend(e.mobile.support,t)}(e),function(l,o,a){var c=l(r),e=l.mobile.support.touch,s="touchmove scroll",n=e?"touchstart":"mousedown",u=e?"touchend":"mouseup",d=e?"touchmove":"mousemove";function f(e,t,n,r){var i=n.type;n.type=t,r?l.event.trigger(n,a,e):l.event.dispatch.call(e,n),n.type=i}l.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){l.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},l.attrFn&&(l.attrFn[t]=!0)}),l.event.special.scrollstart={enabled:!0,setup:function(){var n,t,r=this,e=l(r);function i(e,t){f(r,(n=t)?"scrollstart":"scrollstop",e)}e.bind(s,function(e){l.event.special.scrollstart.enabled&&(n||i(e,!0),clearTimeout(t),t=setTimeout(function(){i(e,!1)},50))})},teardown:function(){l(this).unbind(s)}},l.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var a=this,s=l(a),u=!1;s.bind("vmousedown",function(e){if(u=!1,e.which&&1!==e.which)return!1;var t,n=e.target;function r(){clearTimeout(t)}function i(){r(),s.unbind("vclick",o).unbind("vmouseup",r),c.unbind("vmousecancel",i)}function o(e){i(),u||n!==e.target?u&&e.preventDefault():f(a,"tap",e)}s.bind("vmouseup",r).bind("vclick",o),c.bind("vmousecancel",i),t=setTimeout(function(){l.event.special.tap.emitTapOnTaphold||(u=!0),f(a,"taphold",l.Event("taphold",{target:n}))},l.event.special.tap.tapholdThreshold)})},teardown:function(){l(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),c.unbind("vmousecancel")}},l.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=o.pageXOffset,n=o.pageYOffset,r=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(r)>Math.floor(e.pageX)?(r-=t,i-=n):(i<e.pageY-n||r<e.pageX-t)&&(r=e.pageX-t,i=e.pageY-n),{x:r,y:i}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=l.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:l(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=l.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(e,t,n,r){if(t.time-e.time<l.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>l.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<l.event.special.swipe.verticalDistanceThreshold){var i=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return f(n,"swipe",l.Event("swipe",{target:r,swipestart:e,swipestop:t}),!0),f(n,i,l.Event(i,{target:r,swipestart:e,swipestop:t}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,o=this,t=l(o),a={};(e=l.data(this,"mobile-events"))||(e={length:0},l.data(this,"mobile-events",e)),e.length++,(e.swipe=a).start=function(e){if(!l.event.special.swipe.eventInProgress){l.event.special.swipe.eventInProgress=!0;var t,n=l.event.special.swipe.start(e),r=e.target,i=!1;a.move=function(e){n&&!e.isDefaultPrevented()&&(t=l.event.special.swipe.stop(e),i||(i=l.event.special.swipe.handleSwipe(n,t,o,r))&&(l.event.special.swipe.eventInProgress=!1),Math.abs(n.coords[0]-t.coords[0])>l.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},a.stop=function(){i=!0,l.event.special.swipe.eventInProgress=!1,c.off(d,a.move),a.move=null},c.on(d,a.move).one(u,a.stop)}},t.on(n,a.start)},teardown:function(){var e,t;(e=l.data(this,"mobile-events"))&&(t=e.swipe,delete e.swipe,e.length--,0===e.length&&l.removeData(this,"mobile-events")),t&&(t.start&&l(this).off(n,t.start),t.move&&c.off(d,t.move),t.stop&&c.off(u,t.stop))}},l.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){l.event.special[e]={setup:function(){l(this).bind(t,l.noop)},teardown:function(){l(this).unbind(t)}}})}(e,this)}(window.wmjQuery,Eb,Fb),
/**
 * @license
 * brute-select
 * https://github.com/grassator/jquery-brute-select
 *
 * Copyright (c) 2013 Dmitriy Kubyshkin
 * Licensed under the MIT license.
 */
function(r){"use strict";function i(e,t){r.extend(this,t),this.$select=e,r.extend(this,this.markup(e)),this.bindEvents()}function e(n){return"string"!=typeof n&&(n=r.extend({},e.options,n)),this.filter("select").each(function(){var e=r(this),t=e.data(n.baseName);"string"==typeof n?t[n].apply(e,[].slice.call(arguments,1)):t||e.data(n.baseName,new i(e,n))}),this}i.prototype={getValue:function(e){return"function"==typeof this[e]?this[e]():this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},updateTitle:function(){var e=this.$select.find(":selected"),t=this.formatter(e.text(),this.$select.val(),e,this.$select);this.allowHtmlInTitle?this.$title.html(t):this.$title.text(t)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,r.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,r.proxy(this.updateTitle,this)),this.$select.on("keyup."+this.baseName,r.proxy(this.updateTitle,this)),this.updateTitle()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}},e.klass=i,e.formatter=function(e,t,n,r){return e},e.markup=function(e){var t=e.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return r('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(t),{$el:t,$title:r('<span class="'+this.generateClassName("title")+'"/>').prependTo(t)}},e.options={baseName:"brute-select",generateClassName:e.generateClassName=function(e,t){return this.getValue("baseName")+(e?"-"+e:"")},markup:e.markup,formatter:e.formatter,allowHtmlInTitle:!1},r.fn.bruteSelect=e}(mtjQuery),mtjQuery.fn.fixedPosition=function(e){},
/*
 * @license
 * jQuery Highlight plugin
 *
 * Based on highlight v3 by Johann Burkard
 * http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html
 *
 * Code a little bit refactored and cleaned (in my humble opinion).
 * Most important changes:
 *  - has an option to highlight only entire words (wordsOnly - false by default),
 *  - has an option to be case sensitive (caseSensitive - false by default)
 *  - highlight element tag and class names can be specified in options
 *
 * Usage:
 *   // wrap every occurrance of text 'lorem' in content
 *   // with <span class='highlight'> (default options)
 *   $('#content').highlight('lorem');
 *
 *   // search for and highlight more terms at once
 *   // so you can save some time on traversing DOM
 *   $('#content').highlight(['lorem', 'ipsum']);
 *   $('#content').highlight('lorem ipsum');
 *
 *   // search only for entire word 'lorem'
 *   $('#content').highlight('lorem', { wordsOnly: true });
 *
 *   // don't ignore case during search of term 'lorem'
 *   $('#content').highlight('lorem', { caseSensitive: true });
 *
 *   // wrap every occurrance of term 'ipsum' in content
 *   // with <em class='important'>
 *   $('#content').highlight('ipsum', { element: 'em', className: 'important' });
 *
 *   // remove default highlight
 *   $('#content').unhighlight();
 *
 *   // remove custom highlight
 *   $('#content').unhighlight({ element: 'em', className: 'important' });
 *
 *
 * Copyright (c) 2009 Bartek Szopka
 *
 * Licensed under MIT license.
 *
 */
rf=mtjQuery,rf.extend({highlight:function(e,t,n,r){if(3===e.nodeType){var i=e.data.match(t);if(i){var o=document.createElement(n||"span");o.className=r||"walkme-highlight";var a=e.splitText(i.index);a.splitText(i[0].length);var s=a.cloneNode(!0);return o.appendChild(s),a.parentNode.replaceChild(o,a),1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&(e.tagName!==n.toUpperCase()||e.className!==r))for(var u=0;u<e.childNodes.length;u++)u+=rf.highlight(e.childNodes[u],t,n,r);return 0}}),rf.fn.unhighlight=function(e){var t={className:"walkme-highlight",element:"span"};return rf.extend(t,e),this.find(t.element+"."+t.className).each(function(){var e=this.parentNode;e&&(e.replaceChild(this.firstChild,this),rf(e).text(rf(e).text()))}).end()},rf.fn.highlight=function(e,t){var n={className:"walkme-highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(rf.extend(n,t),e.constructor===String&&(e=[e]),e=rf.grep(e,function(e,t){return""!=e}),0==(e=rf.map(e,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})).length)return this;var r=n.caseSensitive?"":"i",i="("+e.join("|")+")";n.wordsOnly&&(i="\\b"+i+"\\b");var o=new RegExp(i,r);return this.each(function(){rf.highlight(this,o,n.element,n.className)})},
/* @license
 * jScrollPane - v2.0.23 - 2016-01-28
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2013 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 *
 * http://jscrollpane.kelvinluck.com/MIT-LICENSE.txt
 * http://jscrollpane.kelvinluck.com/GPL-LICENSE.txt
 */
Of=wmjQuery,Pf=this,Of.fn.jScrollPane=function(n){function r(b,e){var I,_,A,P,k,D,x,N,O,L,F,M,R,B,U,V,W,j,G,t,H,Y,Q,z,q,K,J,X,$,Z,ee,te,ne,re,ie=this,a=!0,s=!0,u=!1,l=!1,r=b.clone(!1,!1).empty(),oe=oe,ae=Of.fn.mwheelIntent?"mwheelIntent.walkme-jsp":"mousewheel.walkme-jsp";function se(e){var t,n,r,i,o,a,s=!1,u=!1;if(I=e,_===Qf)o=b.scrollTop(),a=b.scrollLeft(),b.important({overflow:"hidden",padding:0}),A=b.innerWidth()+ne,P=b.innerHeight(),b.width(A),_=Of('<div class="walkme-jspPane" />').css("padding",te).append(b.children()),k=Of('<div class="walkme-jspContainer" />').css({width:A+"px",height:P+"px"}).append(_).appendTo(b),ue(b);else{if(b.css("width",""),s=I.stickToBottom&&function l(){var e=x-P;return 20<e&&e-Ce()<10}(),u=I.stickToRight&&function c(){var e=D-A;return 20<e&&e-Te()<10}(),(i=b.innerWidth()+ne!=A||b.outerHeight()!=P)&&(A=b.innerWidth()+ne,P=b.innerHeight(),k.css({width:A+"px",height:P+"px"})),!i&&re==D&&_.outerHeight()==x)return void b.width(A);re=D,_.css("width",""),b.width(A),k.find(">.walkme-jspVerticalBar,>.walkme-jspHorizontalBar").remove().end()}_.css("overflow","auto"),D=e.contentWidth?e.contentWidth:_[0].scrollWidth,x=_[0].scrollHeight,_.css("overflow",""),N=D<A?1:D/A,L=1<(O=x<P?1:x/P)||I.alwaysScrollVertical,(F=1<N||I.alwaysScrollHorizontal)||L?(b.addClass("walkme-jspScrollable"),(t=I.maintainPosition&&(B||W))&&(n=Te(),r=Ce()),function d(){if(L){j=Of('<div class="walkme-jspVerticalBar" />'),G=Of('<div class="walkme-jspTrack" />'),M=Of('<div class="walkme-jspDrag" />');var e=Of('<div class="walkme-jspCap walkme-jspCapTop" />'),t=Of('<div class="walkme-jspCap walkme-jspCapBottom" />');k.append(j.append(e,G.append(M.append(Of('<div class="walkme-jspDragTop" />'),Of('<div class="walkme-jspDragBottom" />'))),t)),ue(k),H=P,I.showArrows&&(Q=Of('<a class="walkme-jspArrow walkme-jspArrowUp" />').bind("mousedown.walkme-jsp",fe(0,-1)).bind("click.walkme-jsp",be),z=Of('<a class="walkme-jspArrow walkme-jspArrowDown" />').bind("mousedown.walkme-jsp",fe(0,1)).bind("click.walkme-jsp",be),H-=Q.outerHeight()+z.outerHeight(),I.arrowScrollOnHover&&(Q.bind("mouseover.walkme-jsp",fe(0,-1,Q)),z.bind("mouseover.walkme-jsp",fe(0,1,z))),de(G,I.verticalArrowPositions,Q,z)),e.add(t).each(function(){var e=Of(this);"none"!=e.css("display")&&(H-=e.outerHeight())}),M.hover(function(){M.addClass("walkme-jspHover")},function(){M.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(e){var t=Of(I.containerDoc).find("html");t.bind("dragstart.walkme-jsp selectstart.walkme-jsp",be),M.addClass("walkme-jspActive");var n=e.pageY-M.position().top;return t.bind("mousemove.walkme-jsp",function(e){he(e.pageY-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",ge),!1}),le()}}(),function f(){F&&(k.append(Of('<div class="walkme-jspHorizontalBar" />').append(Of('<div class="walkme-jspCap walkme-jspCapLeft" />'),Of('<div class="walkme-jspTrack" />').append(Of('<div class="walkme-jspDrag" />').append(Of('<div class="walkme-jspDragLeft" />'),Of('<div class="walkme-jspDragRight" />'))),Of('<div class="walkme-jspCap walkme-jspCapRight" />'))),ue(k),q=k.find(">.walkme-jspHorizontalBar"),K=q.find(">.walkme-jspTrack"),U=K.find(">.walkme-jspDrag"),I.showArrows&&($=Of('<a class="walkme-jspArrow walkme-jspArrowLeft" />').bind("mousedown.walkme-jsp",fe(-1,0)).bind("click.walkme-jsp",be),Z=Of('<a class="walkme-jspArrow walkme-jspArrowRight" />').bind("mousedown.walkme-jsp",fe(1,0)).bind("click.walkme-jsp",be),I.arrowScrollOnHover&&($.bind("mouseover.walkme-jsp",fe(-1,0,$)),Z.bind("mouseover.walkme-jsp",fe(1,0,Z))),de(K,I.horizontalArrowPositions,$,Z)),U.hover(function(){U.addClass("walkme-jspHover")},function(){U.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(e){Of(I.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",be),U.addClass("walkme-jspActive");var t=e.pageX-U.position().left;return Of(I.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){ve(e.pageX-t,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",ge),!1}),J=k.innerWidth(),ce())}(),function p(){if(F&&L){var e=K.outerHeight(),t=G.outerWidth();H-=e,Of(q).find(">.walkme-jspCap:visible,>.walkme-jspArrow").each(function(){J+=Of(this).outerWidth()}),J-=t,P-=t,A-=e,K.parent().append(Of('<div class="walkme-jspCorner" />').css("width",e+"px")),ue(K.parent()),le(),ce()}F&&_.width(k.outerWidth()-ne+"px"),x=_.outerHeight(),O=x<P?1:x/P,F&&((X=Math.ceil(1/N*J))>I.horizontalDragMaxWidth?X=I.horizontalDragMaxWidth:X<I.horizontalDragMinWidth&&(X=I.horizontalDragMinWidth),U.width(X+"px"),V=J-X,ye(W)),L&&((Y=Math.ceil(1/O*H))>I.verticalDragMaxHeight?Y=I.verticalDragMaxHeight:Y<I.verticalDragMinHeight&&(Y=I.verticalDragMinHeight),M.height(Y+"px"),R=H-Y+I.dragMaxYOffset,me(B))}(),t&&(Ee(u?D-A:n,!1),Se(s?x-P:r,!1)),function g(){_.find(":input,a").unbind("focus.walkme-jsp").bind("focus.walkme-jsp",function(e){we(e.target,!1)})}(),function h(){k.unbind(ae).bind(ae,function(e,t,n,r){var i=W=W||0,o=B=B||0,a=e.deltaFactor||I.mouseWheelSpeed;return ie.scrollBy(n*a,-r*a,!1),i==W&&o==B})}(),function m(){var i,o,a,s,u,l=!1;k.unbind("touchstart.walkme-jsp touchmove.walkme-jsp touchend.walkme-jsp click.walkme-jsp-touchclick").bind("touchstart.walkme-jsp",function(e){var t=e.originalEvent.touches[0];i=Te(),o=Ce(),a=t.pageX,s=t.pageY,l=!(u=!1)}).bind("touchmove.walkme-jsp",function(e){if(l){var t=e.originalEvent.touches[0],n=W,r=B;return ie.scrollTo(i+a-t.pageX,o+s-t.pageY),u=u||5<Math.abs(a-t.pageX)||5<Math.abs(s-t.pageY),n==W&&r==B}}).bind("touchend.walkme-jsp",function(e){l=!1}).bind("click.walkme-jsp-touchclick",function(e){if(u)return u=!1})}(),I.enableKeyboardNavigation&&function v(){var r,i,o=[];function a(){var e=W,t=B;switch(r){case 40:ie.scrollByY(I.keyboardSpeed,!1);break;case 38:ie.scrollByY(-I.keyboardSpeed,!1);break;case 34:case 32:ie.scrollByY(P*I.scrollPagePercent,!1);break;case 33:ie.scrollByY(-P*I.scrollPagePercent,!1);break;case 39:ie.scrollByX(I.keyboardSpeed,!1);break;case 37:ie.scrollByX(-I.keyboardSpeed,!1)}return i=e!=W||t!=B}F&&o.push(q[0]),L&&o.push(j[0]),_.bind("focus.jsp",function(){b.focus()}),I.setTabIndex&&b.attr("tabindex",0),b.unbind("keydown.walkme-jsp keypress.walkme-jsp").bind("keydown.walkme-jsp",function(e){if(e.target===this||o.length&&Of(e.target).closest(o).length){var t=W,n=B;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:r=e.keyCode,a();break;case 35:Se(x-P),r=null;break;case 36:Se(0),r=null}return!(i=e.keyCode==r&&t!=W||n!=B)}}).bind("keypress.walkme-jsp",function(e){if(e.keyCode==r&&a(),e.target===this||o.length&&Of(e.target).closest(o).length)return!i}),I.hideFocus?(b.css("outline","none"),"hideFocus"in k[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in k[0]&&b.attr("hideFocus",!1))}(),I.clickOnTrack&&function y(){pe(),L&&G.bind("mousedown.walkme-jsp",function(i){if(i.originalTarget===Qf||i.originalTarget==i.currentTarget){var o,a=Of(this),e=a.offset(),s=i.pageY-e.top-B,u=!0,l=function(){var e=a.offset(),t=i.pageY-e.top-Y/2,n=P*I.scrollPagePercent,r=R*n/(x-P);if(s<0)t<B-r?ie.scrollByY(-n):he(t);else{if(!(0<s))return void c();B+r<t?ie.scrollByY(n):he(t)}o=setTimeout(l,u?I.initialDelay:I.trackClickRepeatFreq),u=!1},c=function(){o&&clearTimeout(o),o=null,Of(I.containerDoc).unbind("mouseup.walkme-jsp",c)};return l(),Of(I.containerDoc).bind("mouseup.walkme-jsp",c),!1}}),F&&K.bind("mousedown.walkme-jsp",function(i){if(i.originalTarget===Qf||i.originalTarget==i.currentTarget){var o,a=Of(this),e=a.offset(),s=i.pageX-e.left-W,u=!0,l=function(){var e=a.offset(),t=i.pageX-e.left-X/2,n=A*I.scrollPagePercent,r=V*n/(D-A);if(s<0)t<W-r?ie.scrollByX(-n):ve(t);else{if(!(0<s))return void c();W+r<t?ie.scrollByX(n):ve(t)}o=setTimeout(l,u?I.initialDelay:I.trackClickRepeatFreq),u=!1},c=function(){o&&clearTimeout(o),o=null,Of(I.containerDoc).unbind("mouseup.walkme-jsp",c)};return l(),Of(I.containerDoc).bind("mouseup.walkme-jsp",c),!1}})}(),function S(){if(location.hash&&1<location.hash.length){var e,t,n=escape(location.hash.substr(1));try{e=Of("#"+n+', a[name="'+n+'"]')}catch(r){return}e.length&&_.find(n)&&(0===k.scrollTop()?t=setInterval(function(){0<k.scrollTop()&&(we(e,!0),Of(I.containerDoc).scrollTop(k.position().top),clearInterval(t))},50):(we(e,!0),Of(I.containerDoc).scrollTop(k.position().top)))}}(),I.hijackInternalLinks&&function E(){Of(oe(I.containerDoc)).data("walkme-jspHijack")||(Of(oe(I.containerDoc)).data("walkme-jspHijack",!0),Of(oe(I.containerDoc)).delegate('a[href*="#"]',"click",function(e){var t,n,r,i,o,a=this.href.substr(0,this.href.indexOf("#")),s=location.href;if(-1!==location.href.indexOf("#")&&(s=location.href.substr(0,location.href.indexOf("#"))),a===s){t=escape(this.href.substr(this.href.indexOf("#")+1));try{n=Of("#"+t+', a[name="'+t+'"]')}catch(u){return}n.length&&((r=n.closest(".walkme-jspScrollable")).data("walkme-jsp").scrollToElement(n,!0),r[0].scrollIntoView&&(i=Of(Pf).scrollTop(),((o=n.offset().top)<i||o>i+Of(Pf).height())&&r[0].scrollIntoView()),e.preventDefault())}}))}()):(b.removeClass("walkme-jspScrollable"),_.css({top:0,left:0,right:0,width:k.width()-ne}),function w(){k.unbind(ae)}(),function T(){_.find(":input,a").unbind("focus.walkme-jsp")}(),function C(){I.setTabIndex&&b.attr("tabindex","-1").removeAttr("tabindex"),b.unbind("keydown.walkme-jsp keypress.walkme-jsp"),_.unbind(".jsp")}(),pe()),I.autoReinitialise&&!ee?ee=setInterval(function(){se(I)},I.autoReinitialiseDelay):!I.autoReinitialise&&ee&&clearInterval(ee),o&&b.scrollTop(0)&&Se(o,!1),a&&b.scrollLeft(0)&&Ee(a,!1),b.trigger("walkme-jsp-initialised",[F||L])}function ue(e){Of(e).find('div[class*="walkme-jsp"]').add(e).each(function(e,t){var n="class",r=Of(t),i=r.attr(n);r.attr(n,"").attr(n,i)})}function le(){G.height(H+"px"),B=0,t=I.verticalGutter+G.outerWidth(),_.width(A-t-ne);try{0===j.position().left&&_.css("margin-left",t+"px")}catch(e){}}function ce(){k.find(">.walkme-jspHorizontalBar>.walkme-jspCap:visible,>.walkme-jspHorizontalBar>.walkme-jspArrow").each(function(){J-=Of(this).outerWidth()}),K.width(J+"px"),W=0}function de(e,t,n,r){var i,o="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?a=t:t==a&&(o=t,i=n,n=r,r=i),e[o](n)[a](r)}function fe(e,t,n){return function(){return function u(e,t,n,r){n=Of(n).addClass("walkme-jspActive");var i,o,a=!0,s=function(){0!==e&&ie.scrollByX(e*I.arrowButtonSpeed),0!==t&&ie.scrollByY(t*I.arrowButtonSpeed),o=setTimeout(s,a?I.initialDelay:I.arrowRepeatFreq),a=!1};s(),i=r?"mouseout.walkme-jsp":"mouseup.walkme-jsp",(r=r||Of(I.containerDoc).find("html")).bind(i,function(){n.removeClass("walkme-jspActive"),o&&clearTimeout(o),o=null,r.unbind(i)})}(e,t,this,n),this.blur(),!1}}function pe(){K&&K.unbind("mousedown.walkme-jsp"),G&&G.unbind("mousedown.walkme-jsp")}function ge(){Of(I.containerDoc).find("html").unbind("dragstart.walkme-jsp selectstart.walkme-jsp mousemove.walkme-jsp mouseup.walkme-jsp mouseleave.walkme-jsp"),M&&M.removeClass("walkme-jspActive"),U&&U.removeClass("walkme-jspActive")}function he(e,t){L&&(e<0?e=0:R<e&&(e=R),t===Qf&&(t=I.animateScroll),t?ie.animate(M,"top",e,me):(M.css("top",e),me(e)))}function me(e){e===Qf&&(e=M.position().top),k.scrollTop(0);var t=0===(B=e||0),n=B==R,r=-e/R*(x-P);a==t&&u==n||(a=t,u=n,b.trigger("walkme-jsp-arrow-change",[a,u,s,l])),function i(e,t){I.showArrows&&(Q[e?"addClass":"removeClass"]("walkme-jspDisabled"),z[t?"addClass":"removeClass"]("walkme-jspDisabled"))}(t,n),_.css("top",r);try{b.trigger("walkme-jsp-scroll-y",[-r,t,n]).trigger("scroll")}catch(o){}}function ve(e,t){F&&(e<0?e=0:V<e&&(e=V),t===Qf&&(t=I.animateScroll),t?ie.animate(U,"left",e,ye):(U.css("left",e),ye(e)))}function ye(e){e===Qf&&(e=U.position().left),k.scrollTop(0);var t=0===(W=e||0),n=W==V,r=-e/V*(D-A);s==t&&l==n||(s=t,l=n,b.trigger("walkme-jsp-arrow-change",[a,u,s,l])),function i(e,t){I.showArrows&&($[e?"addClass":"removeClass"]("walkme-jspDisabled"),Z[t?"addClass":"removeClass"]("walkme-jspDisabled"))}(t,n),_.css("left",r);try{b.trigger("walkme-jsp-scroll-x",[-r,t,n]).trigger("scroll")}catch(o){}}function Se(e,t){he(e/(x-P)*R,t)}function Ee(e,t){ve(e/(D-A)*V,t)}function we(e,t,n){var r,i,o,a,s,u,l,c,d,f=0,p=0;try{r=Of(e)}catch(g){return}for(i=r.outerHeight(),o=r.outerWidth(),k.scrollTop(0),k.scrollLeft(0);!r.is(".walkme-jspPane");)if(f+=r.position().top,p+=r.position().left,r=r.offsetParent(),/^body|html$/i.test(r[0].nodeName))return;u=(a=Ce())+P,f<a||t?c=f-I.horizontalGutter:u<f+i&&(c=f-P+i+I.horizontalGutter),isNaN(c)||Se(c,n),l=(s=Te())+A,p<s||t?d=p-I.horizontalGutter:l<p+o&&(d=p-A+o+I.horizontalGutter),isNaN(d)||Ee(d,n)}function Te(){return-_.position().left}function Ce(){return-_.position().top}function be(){return!1}ne="border-box"===b.css("box-sizing")?te=0:(te=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)),Of.extend(ie,{reinitialise:function(e){se(e=Of.extend({},I,e))},scrollToElement:function(e,t,n){we(e,t,n)},scrollTo:function(e,t,n){Ee(e,n),Se(t,n)},scrollToX:function(e,t){Ee(e,t)},scrollToY:function(e,t){Se(e,t)},scrollToPercentX:function(e,t){Ee(e*(D-A),t)},scrollToPercentY:function(e,t){Se(e*(x-P),t)},scrollBy:function(e,t,n){ie.scrollByX(e,n),ie.scrollByY(t,n)},scrollByX:function(e,t){ve((Te()+Math[e<0?"floor":"ceil"](e))/(D-A)*V,t)},scrollByY:function(e,t){he((Ce()+Math[e<0?"floor":"ceil"](e))/(x-P)*R,t)},positionDragX:function(e,t){ve(e,t)},positionDragY:function(e,t){he(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:I.animateDuration,easing:I.animateEase,queue:!1,step:r})},getContentPositionX:function(){return Te()},getContentPositionY:function(){return Ce()},getContentWidth:function(){return D},getContentHeight:function(){return x},getPercentScrolledX:function(){return Te()/(D-A)},getPercentScrolledY:function(){return Ce()/(x-P)},getIsScrollableH:function(){return F},getIsScrollableV:function(){return L},getContentPane:function(){return _},scrollToBottom:function(e){he(R,e)},hijackInternalLinks:Of.noop,destroy:function(){!function n(){var e=Ce(),t=Te();b.removeClass("walkme-jspScrollable").unbind(".walkme-jsp"),_.unbind(".jsp"),b.replaceWith(r.append(_.children())),r.scrollTop(e),r.scrollLeft(t),ee&&clearInterval(ee)}()}}),se(e)}return n=Of.extend({},Of.fn.jScrollPane.defaults,n),Of.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=Of(this),t=e.data("walkme-jsp");t?t.reinitialise(n):(Of("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new r(e,n),e.data("walkme-jsp",t))})},Of.fn.jScrollPane.defaults={containerDoc:document,setTabIndex:!0,alwaysScrollVertical:!1,alwaysScrollHorizontal:!1,dragMaxYOffset:0,showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:Qf,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8},
/**
 * @license
 * Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */
function(l){var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(l.event.fixHooks)for(var n=e.length;n;)l.event.fixHooks[e[--n]]=l.event.mouseHooks;function r(e){var t,n,r,i=e||window.event,o=[].slice.call(arguments,1),a=0,s=0,u=0;return(e=l.event.fix(i)).type="mousewheel",i.wheelDelta&&(a=i.wheelDelta),i.detail&&(a=-1*i.detail),i.deltaY&&(a=u=-1*i.deltaY),i.deltaX&&(a=-1*(s=i.deltaX)),i.wheelDeltaY!==undefined&&(u=i.wheelDeltaY),i.wheelDeltaX!==undefined&&(s=-1*i.wheelDeltaX),t=Math.abs(a),(!c||t<c)&&(c=t),n=Math.max(Math.abs(u),Math.abs(s)),(!d||n<d)&&(d=n),r=0<a?"floor":"ceil",a=Math[r](a/c),s=Math[r](s/d),u=Math[r](u/d),o.unshift(e,a,s,u),(l.event.dispatch||l.event.handle).apply(this,o)}l.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null}},l.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(wmjQuery),
/**
 * @license
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
function(f){function p(e){var t,n=f(window),r=m.test(e[0].nodeName);return{border:r?{top:0,left:0,bottom:0,right:0}:function(e,t){t=t||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),r={top:parseFloat(n?t.borderTopWidth:f.css(e,"borderTopWidth"))||0,left:parseFloat(n?t.borderLeftWidth:f.css(e,"borderLeftWidth"))||0,bottom:parseFloat(n?t.borderBottomWidth:f.css(e,"borderBottomWidth"))||0,right:parseFloat(n?t.borderRightWidth:f.css(e,"borderRightWidth"))||0};return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,vertical:r.top+r.bottom,horizontal:r.left+r.right}}(e[0]),scroll:{top:(r?n:e).scrollTop(),left:(r?n:e).scrollLeft()},scrollbar:{right:r?0:e.innerWidth()-e[0].clientWidth,bottom:r?0:e.innerHeight()-e[0].clientHeight},rect:(t=e[0].getBoundingClientRect(),{top:r?0:t.top,left:r?0:t.left,bottom:r?e[0].clientHeight:t.bottom,right:r?e[0].clientWidth:t.right})}}var g={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},h={duration:"fast",direction:"both"},m=/^(?:html)$/i,v=function(e,t){f.isFunction(e)&&e.call(t)},y=function(e){return e.is("html,body,:wm_interact_all_points")};f.fn.extend({scrollintoview:function(t){(t=f.extend({},h,t)).direction=g["string"==typeof t.direction&&t.direction.toLowerCase()]||g.both;var e="";!0===t.direction.x&&(e="horizontal"),!0===t.direction.y&&(e=e?"both":"vertical"),m="html"==t.rootElement?/^(?:html)$/i:/^(?:body)$/i;var n="";t.customScrollElement&&(n=","+t.customScrollElement);var r=this.eq(0),i=t.elementToFindScrollableFor.parent().closest(":scrollable("+e+")"+n);if(!(0<i.length))return!1;"html"==t.rootElement&&i[0].tagName&&i[0].tagName.toUpperCase&&"BODY"==i[0].tagName.toUpperCase()&&(i=i.parent()),i=i.eq(0);var o=p(r),a=p(i);if(t.heightLimit&&i.height()<200)return!1;var s={top:o.rect.top-(a.rect.top+a.border.top),bottom:a.rect.bottom-a.border.bottom-a.scrollbar.bottom-o.rect.bottom,left:o.rect.left-(a.rect.left+a.border.left),right:a.rect.right-a.border.right-a.scrollbar.right-o.rect.right},u=0,l={top:s.top,bottom:s.bottom};if(t.endScroll){var c=t.endScroll.scrollOptions;u="px"==c.unit?c.distance:(a.rect.bottom-t.endScroll.balloonHeight)*parseFloat(c.distance)/100,0<s.top&&s.bottom<0&&(u+=t.endScroll.totalDrawnHeight-a.rect.bottom),c.force&&(l.top-=u)}else s.top-=50,s.bottom-=50;var d={};return!0===t.direction.y&&(l.top<0?d.scrollTop=a.scroll.top+s.top-u:0<l.top&&l.bottom<0&&(d.scrollTop=a.scroll.top+Math.min(s.top,-s.bottom)-u)),!0===t.direction.x&&(s.left<0?d.scrollLeft=a.scroll.left+s.left:0<s.left&&s.right<0&&(d.scrollLeft=a.scroll.left+Math.min(s.left,-s.right))),!(!d.scrollTop&&!d.scrollLeft)&&(m.test(i[0].nodeName)&&(i=f("html,body")),i.animate(d,t.duration).eq(0).queue(function(e){t.forceFindScrollable&&!t.isElementInIFrame?function(e,t,n){y(e)?v(t.complete,n[0]):(t.elementToFindScrollableFor=n,e.scrollintoview(t))}(r,t,i):v(t.complete,i[0]),e()}),!0)}});var u={auto:!0,scroll:!0,visible:!1,hidden:!1};f.extend(f.expr[":"],{scrollable:function(e,t,n,r){var i=g["string"==typeof n[3]&&n[3].toLowerCase()]||g.both,o=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,a={x:u[o.overflowX.toLowerCase()]||!1,y:u[o.overflowY.toLowerCase()]||!1,isRoot:m.test(e.nodeName)};if(!a.x&&!a.y&&!a.isRoot||"hidden"==o.overflowY.toLowerCase())return!1;var s={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(a.x||a.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(a.y||a.isRoot)&&this.height.scroll>this.height.client}};return i.y&&s.scrollableY()||i.x&&s.scrollableX()}})}(mtjQuery),mtjQuery.fn.focusable=function(e,t,n){var r=this[0],i=wmjQuery.attr(r,"tabindex"),o=null!=i;return(!o||0<=i)&&function c(e,t,n,r){var i,o,a,s=e.nodeName.toLowerCase(),u=r||"none"!=wmjQuery.css(e,"display");return"area"!==s?(/input|select|textarea|button|object|iframe/.test(s)?!e.disabled:"a"===s&&e.href||t)&&u&&(n||wmjQuery(e).is(":visible")&&l(e)):(i=e.parentNode,o=i.name,!(!e.href||!o||"map"!==i.nodeName.toLowerCase())&&!!(a=wmjQuery("img[usemap='#"+o+"']")[0])&&l(a))}(r,o,t,n);function l(e){for(var t=(e=wmjQuery(e)).css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}},window._makeTutorialEv={Ev:function(src){return eval(src)}},window._makeTutorial==undefined&&(window._walkMe=window._makeTutorial=new ClassMakeTutorial(window.wmjQuery,window._walkmeInternals),_makeTutorial.initFailed&&(window._walkMe=window._makeTutorial=undefined)),_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeEnd")}).call(window)}).call(this,__webpack_require__(1))},function(e,t){(function(){e.exports=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}).call(window)},function(e,t,n){(function(){window._walkmeInternals.ctx||n(3)(window._walkmeInternals),e.exports=_walkmeInternals.ctx}).call(window)},function(i,e,t){!function(){function n(e,t){this._object=undefined,this._name=e,this._ctx=t,this.properties={strategy:o.defaults.strategy,factory:o.defaults.factory,injector:o.defaults.injector,load:o.defaults.load,wasReady:!1,initialize:!0}}n.prototype.name=function(){return this._name},n.prototype.asFactory=function(e,t){return t!=undefined&&this.type(t),this.factory(e),this},n.prototype.loadDependencies=function(e,t){return t!=undefined&&this.dependencies(t),this.load(e),this},n.prototype.asFunction=function(e){return this.asFactory(o.factory.func,e)},n.prototype.asInstance=function(e){return this.asFactory(o.factory.instance,e)},n.prototype.asCtor=function(e){return this.asFactory(o.factory.constructor,e)},n.prototype.asSingleton=function(){return this.strategy(o.strategy.singleton)},n.prototype.asProto=function(){return this.strategy(o.strategy.proto)},n.prototype.injectToCtor=function(){return this.injector(o.injector.ctor)},n.prototype.injectToReady=function(){return this.injector(o.injector.ready)},n.prototype.injectToProperty=function(){return this.injector(o.injector.property)},n.prototype.flatDependencies=function(e){return this.loadDependencies(o.load.flat,e)},n.prototype.recursiveDependencies=function(e){return this.loadDependencies(o.load.recursive,e)},n.prototype.useOnce=function(){var e=this.getObject;return this.getObject=function(){return this._ctx.map[this.name()]=null,e.apply(this,arguments)},this},n.prototype.depsDictionary=function(e){return arguments.length?(this.properties.depsDictionary=e,this):(this.properties.depsDictionary||this.depsDictionary(this._ctx.resolve(this)),this.properties.depsDictionary)},n.prototype.create=function(e,t,n){n=n||o.load.recursive;var r=this.properties.strategy.test(this._object,n);if(t)return r;r&&(e=this.properties.injector.create(e||this.properties.args,this,this._ctx,n));var i=this.properties.strategy.create(this._object,this.properties.factory,this.properties.type,e,this._ctx,this,n);return this._ctx.ready(i,this)},n.prototype.getObject=function(e){return this.create(undefined,undefined,e)},n.prototype.object=function(e){return arguments.length?(this._object=e,this):this.create()};for(var e=["load","wasReady","strategy","injector","type","dependencies","args","factory","initialize"],t=0;t<e.length;t++){r(e[t])}function r(t){n.prototype[t]=function(e){return arguments.length?(this.properties[t]=e,this):this.properties[t]}}
/**
 * @license
 *  Copyright 2013 the original author or authors.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  You may obtain a copy of the License at
 *
 *		http://www.apache.org/licenses/LICENSE-2.0
    *
    *  Unless required by applicable law or agreed to in writing, software
    *  distributed under the License is distributed on an "AS IS" BASIS,
    *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    *  See the License for the specific language governing permissions and
    *  limitations under the License.
    */
var o=function(u){(u=u||{}).version="0.3.3";function s(e,t,n,r,i){var o=e(t,n,i),a=r.decorators[i.name()]!==undefined?r.decorators[i.name()]:r.fallbackCtx&&r.fallbackCtx.decorators[i.name()];if(a)for(var s=0;s<a.length;s++)o=a[s](o);return o}return u.logger=function(e,t){},u.log=function(e,t,n){t&&(e="[class="+t.name()+"] "+e),u.logger("DI - "+e,n||4)},u.error=function(e,t,n){u.log(e,t,n)},u.createContext=function(t){var n,a={map:{},decorators:{},fallbackCtx:t};function r(e){var t=a.entry(e);t?t.initialize()&&t.strategy().initialize()&&a.get(e):u.error("Object["+e+"] is not registered")}return a.decorate=function(e,t){a.decorators[e]||(a.decorators[e]=[]),a.decorators[e].push(t)},a.entry=function(e){return a.map[e]!==undefined?a.map[e]:t&&t.entry(e)},a.register=function(e,t,n){var r=u.entry(e,a).type(t).args(n);return a.map[e]=r},a.has=function(e){return null!=a.entry(e)},a.remove=function(e){return!!a.has(e)&&!(a.map[e]=null)},a.isEntryRemoved=function(e){return null===a.entry(e)},a.get=function(e,t){return a.isEntryRemoved(e)&&u.error("Object["+e+"] was removed"),a.has(e)||u.error("Object["+e+"] is not registered"),a.entry(e).getObject(t)},a.create=function(e,t){if(a.entry(e).strategy()==u.strategy.singleton&&u.error("Attempt to create singleton object ["+e+"]"),a.has(e))return a.entry(e).create(t);u.error("Object["+e+"] is not registered")},a.initialize=function(e){if(e)r(e);else for(var e in a.map)r(e)},a.clear=function(){this.map={},this.decorators={},this.fallbackCtx=undefined},a.resolve=function(r){var i=r.load(),o={};return a.eachDependency(r.dependencies(),function(e,t){var n=a.get(e,i);a.ready(n,a.entry(e)),null==n&&u.error("Dependency ["+r.name()+"."+t+"]->["+e+"] can not be satisfied",r),o[t]=n}),o},a.eachDependency=function(e,t){if(e)for(var n=function a(e){for(;0<=e.indexOf(" ");)e=e.replace(" ","");return e}(e).split(","),r=0;r<n.length;r++){var i=n[r];if(i){var o=u.dependencyExpression(i);try{t(o.name,o.property,r)}catch(s){u.error("An exception was thrown while the DI tried to resolve class '"+o.name+"'. Check the class name, or if it was registred correctly. \r\n inner exception: \r\n"+s.message)}}}},a.ready=function(e,t){if(null===t&&e)return e;var n=t.wasReady();if(t.wasReady(!0),!n){var r=a.createCallback();r&&r(t.name(),e),e&&"function"==typeof e.ready&&e!=window&&e!=window.document&&e!=window.document.body&&(t.wasReady(!0),e.ready.apply(e,t.injector().ready(e,t)||[]))}return e},a.createCallback=function(e){return 0==arguments.length?n:(n=e,a)},a},u.dependencyExpression=function(e){var t={},n=e,r=e;if(0<e.indexOf("=")){var i=e.split("=");n=i[0],r=i[1]}return t.name=r,t.property=n,t},u.entry=function(e,t){return new n(e,t)},u.strategy={proto:{test:function(e,t){return!t||t()},initialize:function(){return!1},create:function(e,t,n,r,i,o,a){return e=s(t,n,r,i,o),a()&&o.injector().ready(e,o),o.depsDictionary(undefined),o.wasReady(!1),e}},singleton:{test:function(e,t){return!e&&(!t||t())},initialize:function(){return!0},create:function(e,t,n,r,i,o,a){return e||(e=s(t,n,r,i,o),o.object(e),o.wasReady(!0),a()&&o.injector().ready(e,o),o.wasReady(!1)),e}}},u.factory={constructor:function(e,t,n){return t instanceof Array?t.length<=10?new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]):t.length<=30?new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29]):void u.error("trying to create a class with too many args!",n):new e(t)},func:function(e,t,n){return t instanceof Array?e.apply(e,t):e(t)},instance:function(e,t,n){return e}},u.injector={property:{create:function(e,t,n){return e},ready:function(e,t){var n=t.depsDictionary();for(var r in n)e[r]=n[r];var i=t.args();i==undefined||n.hasOwnProperty("args")||(e.args=i)}},ready:{create:function(e,t,n){return e},ready:function(e,t){var n=t.args(),r=[],i=t.depsDictionary();if(a.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),n){n=n instanceof Array?n:[n];for(var o=0;o<n.length;o++)r.push(n[o])}return r}},ctor:{create:function(e,t,n){var r=[],i=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),e){e=e instanceof Array?e:[e];for(var o=0;o<e.length;o++)r.push(e[o])}return r},ready:function(e,t){}}},u.load={flat:function(e,t,n){return!1},recursive:function(e,t,n){return!0}},u.defaults={strategy:u.strategy.singleton,factory:u.factory.constructor,injector:u.injector.ctor,load:u.load.recursive},u}(),a=o.createContext();i.exports=function(e,t){e.di=o,e.ctx=t?o.createContext(t):a}}()},function(e,t){
/*! wm-simple-nlp - v1.0.8 - 2016-09-13
* Copyright (c) 2016 WalkMe; Licensed ISC */
var n;!function(e){var r,i,t;function o(e){return 0===e.search("[a-zA-Z]")?i.Alphabet:0===e.search("[0-9]")?i.Digit:i.Other}(t=i=i||{})[t.Digit=0]="Digit",t[t.Alphabet=1]="Alphabet",t[t.Other=2]="Other",e.setJQuery=function d(e){r=e},e.isPhraseHuman=function f(e){var t=new l,n=new a(e);return t.isHuman(n)};var a=(n.prototype.buildWords=function(){this.splitCategories()},n.prototype.addWord=function(e){var n=this;if(e=r.trim(e))if(o(e[0])!==i.Alphabet)this.words.push(e);else{var t=this.splitCamelCase(e);r.each(t,function(e,t){return n.words.push(t.toLowerCase())})}},n.prototype.splitCamelCase=function(e){return e.replace(/([a-z](?=[A-Z]))/g,"$1 ").split(" ")},n.prototype.splitCategories=function(){for(var e,t=o(this.raw[0]),n=0,r=0;r<this.raw.length;r++){var i=o(this.raw[r]);i!=t&&(e=this.raw.substring(r,n),this.addWord(e),n=r,t=i)}e=this.raw.substring(n,r+1),this.addWord(e)},n);function n(e){this.words=[],this.raw=e,this.buildWords()}e.Sentence=a;var s=(u.prototype.numberPred=function(e){return!1},u.prototype.otherPred=function(e){return!0},u.prototype.alphabetPred=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(-1==this.VOWELS.indexOf(r)?t++:t=0,5<=t)return!1}return!0},u.prototype.isHuman=function(e){if(this.contains(this.WHITE_LIST,e))return!0;var t=o(e[0]);return(0,this.pointers[t])(e)},u.prototype.contains=function(e,t){return-1!==r.inArray(t,e)},u);function u(){var t=this;this.WHITE_LIST=["html","css","btn","js","http","a"],this.VOWELS="aeiou",this.pointers={},this.pointers[i.Alphabet]=function(e){return t.alphabetPred(e)},this.pointers[i.Digit]=function(e){return t.numberPred(e)},this.pointers[i.Other]=function(e){return t.otherPred(e)}}e.WordClassifier=s;var l=(c.prototype.isHuman=function(e){if(e.raw.length<=2)return!1;if(this.isUrl(e))return!1;var n=new s,t=r.map(e.words,function(e,t){return n.isHuman(e)});return this.all(t)},c.prototype.all=function(e){for(var t=e.length-1;0<=t;t--)if(!e[t])return!1;return!0},c.prototype.isUrl=function(e){return 0==e.raw.indexOf("/")||0==e.raw.indexOf("http")},c);function c(){}e.SentanceClassifier=l}(n=n||{}),e.exports=n},function(e,t,n){var r,i;r=this,i=function(){var e=new(n(6));return{objectJpath:e,objectMapper:new(n(7))(e)}},"object"==typeof e.exports?e.exports=i:r.mapper=i},function(e,t){e.exports=function n(){var u="@dot@",l=new RegExp(u,"g");this.getValue=function c(e,t){for(var n=(t=function a(e){return e.replace(/[\'\"\]]|&quot;|&#39;/g,"").replace(/\[/g,".")}(t=function s(e){return e.replace(/(["']|&quot;|&#39;).*?\1/g,function(e){return e.replace(/\./g,u)})}(t))).split("."),r=e,i=0;i<n.length;i++){var o=n[i].replace(l,".");if(r==undefined)return undefined;r=r[o]}return r},this.setValue=function a(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++){var o=r[i];e[o]||(e[o]={}),e=e[r[i]]}e[r[r.length-1]]=n}}},function(e,t){e.exports=function n(u){this.merge=function l(t,e,n){for(var r in n){var i=n[r],o=s(r);if(i.transform&&(o=i.transform(o)),!i.where||i.where(o,s)){var a="string"==typeof i?i:i.destination;u.setValue(e,a,o)}}function s(e){return u.getValue(t,e)}}}},function(e,t,n){var r=new(n(9)),i=new(n(10))(r),o=new(n(11)),a=new(n(12))(i,o),s=new(n(13))(o,a),u=new(n(14)),l=new(n(15))(s,u);e.exports={bizFlowConsts:r,bizFlowExtensions:i,baseGraphDfsService:l,baseGraphDfsServiceWithRevisiting:s}},function(e,t){e.exports=function n(){this.FLOW_NODE_TYPE={UI:"UI",Action:"Action"},this.FLOW_NODE_ACTION_TYPE={Split:"Split",Redirect:"Redirect",WaitForCondition:"WaitForCondition",Stop:"Stop",Refresh:"Refresh",SetData:"SetData",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",ConnectToBizflow:"ConnectToBizflow",Survey:"Survey",Popup:"Popup",ErrorHandling:"ErrorHandling",OnPageAction:"OnPageAction",RestartSwt:"RestartSwt"}}},function(e,t){e.exports=function s(t){function n(e){return e.Type==t.FLOW_NODE_TYPE.UI}function r(e){return!n(e)}function i(e,t){return r(e)&&e.ActionType==t}this.isUiNode=n,this.getNodeConnectors=function o(e){return n(e)?function i(e){for(var t=[],n=0;n<e.UIElements.length;n++){var r=e.UIElements[n];t.push.apply(t,r.Triggers)}return t}(e):function t(e){return e.Links}(e)},this.isActionNode=r,this.getErrorHandlingConnectorIndex=function a(e){if(i(e,t.FLOW_NODE_ACTION_TYPE.ErrorHandling))return e.Links.length-1},this.isActionNodeOfType=i}},function(e,t){e.exports=function n(){function i(e,t,n,r,i,o){return{node:e,point:t,connectors:n,parentConnector:r,parentConnectorIndex:i,parentPoint:o}}this.createNodeData=function o(e,t,n,r){return i(e,e,e.Links,t,n,r)},this.createUiElementData=function r(e,t){var n=i(t.node,e,e.Triggers,t.parentConnector,t.parentConnectorIndex,t.parentPoint);return n.uiElement=e,n}}},function(e,t){e.exports=function n(o,a){this.traverse=function s(e,t){var n=e.node;if(o.isActionNode(n))t(e);else for(var r=0;r<n.UIElements.length;r++){var i=n.UIElements[r];t(a.createUiElementData(i,e))}}}},function(e,t){e.exports=function n(f,p){this.runDfs=function g(a,n,e){for(var s=!0,u={},l={},t=0;t<o.length;t++)i(o[t]);function c(e,t,n,r){if(e&&s){var i=a.Nodes[e],o=f.createNodeData(i,t,n,r);l.visitNode(o),p.traverse(o,d),l.afterNodeDescendantsVisited(o)}}function d(e){l.visitPoint(e);var t=function o(e){return e.uiElement?e.node.Id+"-"+e.uiElement.Id:e.node.Id}(e);if(!u[t]){u[t]=!0;for(var n=e.connectors,r=0;r<n.length;r++){var i=n[r];c(i.TargetFlowNodeId,i,r,e)}}l.afterPointDescendantsVisited(e)}function r(){}function i(e){var t=n[e]||r;l[e]=function(){s&&t&&(s=!1!==t.apply(null,arguments))}}c(e=e||a.RootFlowNodeId)};var o=["visitNode","visitPoint","afterPointDescendantsVisited","afterNodeDescendantsVisited"]}},function(e,t){e.exports=function n(){var s,u;this.wrapHandlers=function c(e){u={};function t(){}for(var r=e.visitNode||t,n=e.afterNodeDescendantsVisited||t,i=0;i<l.length;i++){var o=l[i];e[o]=a(e[o])}function a(e){if(e)return function(){if(!s)return e.apply(null,arguments)}}e.visitNode=function(e){if(!s){var t=function n(e){return e.node&&e.node.Id}(e);if(!u[t])return u[t]=!0,r(e);s=e}},e.afterNodeDescendantsVisited=function(e){if(!s)return n(e);e==s&&(s=undefined)}};var l=["visitPoint","afterPointDescendantsVisited"]}},function(e,t){e.exports=function n(r,i){this.runDfs=function o(e,t,n){return i.wrapHandlers(t),r.runDfs(e,t,n)}}},function(e,t,n){var r,i;r=this,i=function(){return{DEPLOYABLE_TYPE:{Walkthru:0,Task:1,Launcher:2,LabelGroup:3,Survey:4,AbExperiment:5,Category:6,Content:7,Collection:8,Shuttle:9,Tag:10,TestCase:11,PreTestSet:12,Template:13,ShoutOut:14,TestSuite:16,ConditionBlock:17,BusinessSolution:19,Lesson:20,Course:21,TrackedPage:22,Spotlight:23,Tooltip:24,TrackedElement:25,SearchProviderUrl:26}}},"object"==typeof e.exports?e.exports=i:r.deployableConsts=i},function(e,t,o){var n,r;n=this,r=function(e){var t=o(18)(),n=o(19),r=o(20)(e,t),i=o(22)(r);return{eventBasedObject:t,idisplayer:n,uiComponentBase:r,popupBase:i,shoutOutBase:o(23)(i)}},"object"==typeof e.exports?e.exports=r:n.uiComponents=r},function(e,t){e.exports=function(){return n};var n=(r.prototype.once=function(e,t){this.eventBase.one(e,t)},r.prototype.bind=function(e,t){this.eventBase.bind(e,t)},r.prototype.unbind=function(e,t){this.eventBase.unbind(e,t)},r.prototype.trigger=function(e,t){this.eventBase.trigger(e,t)},r);function r(){this.eventBase=wmjQuery({})}},function(e,t){},function(e,t,n){var i,o=n(21)();e.exports=function(e,t){var n;function r(e){var t=n.call(this)||this;return t.LocalSVNRevision="$Rev: 4206 $",t._uiComponent=e,t._settings=e.Settings||{},t._variations=t.createVariations(),t._uiCreator=i.get("UICreator"),t}return i=e,o(r,n=t),r.prototype.getComponent=function(){return this._uiComponent},r.prototype.getUI=function(){return this._uiCreator.getUI()},r.prototype.createUi=function(){this._displayer=i.get("DisplayersFactory").get(this._uiComponent.DisplayerId,[this._uiComponent.Settings,this._uiComponent]);var e=this._displayer.getContainer(),t=e?e[0].document:document;this._uiCreator.setUI(this._uiComponent,this._variations,this.createConfig(),t,this),this.registerEvents(),this._displayer.setUiObject(this._uiCreator.getUI())},r.prototype.registerEvents=function(){},r.prototype.createVariations=function(){for(var e=i.get("UIVariations"),t=[],n=this._uiComponent.UIVariationsIds||[],r=0;r<n.length;r++)t.push(e.get(n[r]));return this._settings.variation&&t.push(this._settings.variation),t},r.prototype.createConfig=function(){return{}},r.prototype.append=function(){this._insert("append")},r.prototype.prepend=function(){this._insert("prepend")},r.prototype._insert=function(e){var t=this;this.trigger(e+"-begin");var n=wmjQuery.proxy(function(){t._displayer[e](wmjQuery.proxy(function(){return t.trigger(e+"-end")},t))},this);i.get("TemplatesFactory").addResources(this._uiComponent.UITemplateId,this._uiComponent.UITemplateVersion,this._variations,n)},r.prototype.destroy=function(){var e=this;this._isDead||(this.trigger("destroy-begin"),this._displayer.remove(wmjQuery.proxy(function(){e._isDead=!0,e.trigger("destroy-end")},this)))},r.prototype.show=function(){this.trigger("show-begin"),this._displayer.show(wmjQuery.proxy(function(){this.trigger("show-end")},this))},r.prototype.hide=function(){this.trigger("hide-begin"),this._displayer.hide(wmjQuery.proxy(function(){this.trigger("hide-end")},this))},r.prototype.toggle=function(){this._displayer.isVisible()?this.hide():this.show()},r}},function(e,t,n){var r,i;r=this,i=function(){return function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}},"object"==typeof e.exports?e.exports=i:r.typescriptHelper=i},function(e,t,n){var r=n(21)();e.exports=function(e){var n;function t(e,t){n.call(this,e),this.LocalSVNRevision="$Rev: 4206 $",this.CLASS_X_BUTTON="walkme-x-button",this._consts=t}return r(t,n=e),t.prototype.registerEvents=function(){n.prototype.registerEvents.call(this),this.registerXButton()},t.prototype.registerXButton=function(){var e=wmjQuery.proxy(function(){this.trigger("x-clicked"),this.destroy()},this);this._uiCreator.registerEvents("."+this.CLASS_X_BUTTON,"click",this._consts.MOBILE_COMMANDS.ACTION.libAction,{libAction:e},"Close")},t.prototype.createConfig=function(){var e=n.prototype.createConfig.call(this);return e.Id=this._uiComponent.Id,e.Name=this._uiComponent.Name,e.XButtonClass=this.CLASS_X_BUTTON,e.Settings=this._uiComponent.Settings,e},t}},function(e,t,n){var r=n(21)();e.exports=function(e){var s;function t(e,t,n,r,i,o){var a=s.call(this,o,r)||this;return a.LocalSVNRevision="$Rev: 4206 $",a.CLOSE_ACTIONS_TYPE="destroy",a.CLASS_ACTION_PREFIX="walkme-action-",a._actionsFactory=e,a._bbCodeParser=n,a._commonUtils=t,a._designTemplateHtmlGetter=i,a._actions=a.getActions(o),a._position=0==o.Settings.position?"top":"bottom",a}return r(t,s=e),t.prototype.getActions=function(e){return this.hasHtmlTemplate(e)?this.getActionsFromPlaceholderConfigs(e):this.getActionsFromActionsProperty(e)},t.prototype.getActionsFromPlaceholderConfigs=function(e){var t=[];if(!e.DesignTemplatePlaceholderConfigs)return t;for(var n=0;n<e.DesignTemplatePlaceholderConfigs.length;n++){var r=e.DesignTemplatePlaceholderConfigs[n],i=r.Config,o='[wm-action-placeholder="'+r.Name+'"]',a=this.getHandledAction(i,t.length,o);a&&t.push(a)}return t},t.prototype.getActionsFromActionsProperty=function(e){var t=[];if(!e.Actions)return t;for(var n=0;n<e.Actions.length;n++){var r=e.Actions[n],i=this.getHandledAction(r,t.length);i&&t.push(i)}return t},t.prototype.getHandledAction=function(e,t,n){if(void 0===n&&(n=undefined),e.IsActive)return e[this.isCloseAction(e)?this.CLOSE_ACTIONS_TYPE:e.Type]=!0,e.CssClass=this.generateActionClass(t,e),e.elementSelector=n||"."+e.CssClass,e},t.prototype.registerEvents=function(){s.prototype.registerEvents.call(this),this.registerActions()},t.prototype.registerActions=function(){for(var e=0;e<this._actions.length;e++){var t=this._actions[e],n=t.CssClass.replace(/-/gi,"_");t.Args=t.Args||{};var r=(t.Args.uiComponent=this)._actionsFactory.get(t.Type,t.Args,this.getInitiatorType(),this._uiComponent),i=r.args||{};i.libAction=this.getActionCallback(r,t);var o=r.mobileAction||this._consts.MOBILE_COMMANDS.ACTION.libAction;this._uiCreator.registerEvents(t.elementSelector,"click",o,i,n||"")}},t.prototype.getActionCallback=function(e,t){return wmjQuery.proxy(e.mobileAction?function n(e){this.trigger("action-start",e.Type),this.destroy()}:function r(e){var t=e.actionFunc,n=e.action;this.trigger("action-start",{actionType:t.Type,action:n}),t.doAction(),t.Type!=this._consts.DEPLOYABLE_ACTION_TYPES.Close&&this.destroy()},this,{actionFunc:e,action:t})},t.prototype.getInitiatorType=function(){},t.prototype.isCloseAction=function(e){var t=this._actionsFactory.get(e.Type).Type;return t===this._consts.DEPLOYABLE_ACTION_TYPES.Close||t===this._consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater},t.prototype.generateActionClass=function(e,t){return this.CLASS_ACTION_PREFIX+t.Type+"-"+e},t.prototype.createConfig=function(){var e=s.prototype.createConfig.call(this);return e.Title=this.handleText(this._uiComponent.Title),e.Description=this.handleText(this._uiComponent.Description),e.Actions=this.handleActions(this._actions),e.Position=this._position,e},t.prototype.handleText=function(e){return this._bbCodeParser.parse(this._commonUtils.nl2br(e),this._settings.v)},t.prototype.handleActions=function(e){if(e)for(var t=0;t<e.length;t++)e[t].Text=this.handleText(e[t].Text);return e},t.prototype.hasHtmlTemplate=function(e){return!!this._designTemplateHtmlGetter.get(e.DesignTemplateId)},t}},function(e,t,n){var r=n(25),i=n(27);e.exports={oldToNewConditionConverter:r,newToOldConditionConverter:i}},function(e,t,n){var o=n(26);e.exports=new function r(){function i(e){return e?"Func"==e.nodeType?function t(e){return{Type:o.NEW_CONDITION_NODE_TYPE.Condition,Id:e.ConditionId,Settings:{funcName:e.funcName,funcArgs:e.funcArgs}}}(e):e.rightSon?function n(e){var t={Type:o.NEW_CONDITION_NODE_TYPE[e.nodeType],Nodes:[]};return t.Nodes.push(i(e.leftSon)),t.Nodes.push(i(e.rightSon)),t}(e):function r(e){return i(e.leftSon)}(e):undefined}this.convert=function t(e){return e?{Root:i(e)}:undefined}}},function(e,t){e.exports={NEW_CONDITION_NODE_TYPE:{Condition:0,And:1,Or:2,Group:3}}},function(e,t,n){var a=n(26);e.exports=new function r(){function o(e,t){switch(e.Type){case a.NEW_CONDITION_NODE_TYPE.Condition:return function n(e,t){return{nodeType:"Func",nodeDepth:t,ConditionId:e.Id,funcName:e.Settings.funcName,funcArgs:e.Settings.funcArgs}}(e,t);case a.NEW_CONDITION_NODE_TYPE.Group:return function r(e,t){return o(e.Nodes[0],t+1)}(e,t);default:return function i(e,t){return{nodeType:e.Type==a.NEW_CONDITION_NODE_TYPE.And?"And":"Or",nodeDepth:t,ConditionId:e.Id,leftSon:o(e.Nodes[0],t),rightSon:o(e.Nodes[1],t)}}(e,t)}}this.convert=function t(e){return e?o(e,0):undefined}}},function(e,t,n){function s(e){this.message=e}var r,u;r=t,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",(s.prototype=new Error).name="InvalidCharacterError",r.btoa||(r.btoa=function(e){for(var t,n,r=String(e),i=0,o=u,a="";r.charAt(0|i)||(o="=",i%1);a+=o.charAt(63&t>>8-i%1*8)){if(255<(n=r.charCodeAt(i+=.75)))throw new s("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return a}),r.atob||(r.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)&&(a+=String.fromCharCode(255&n>>(-2*i&6))))r=u.indexOf(r);return a})},function(e,t,z){e.exports=function(){"use strict";function d(e){return"function"==typeof e}undefined;var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,n=undefined,o=undefined,a=function a(e,t){c[i]=e,c[i+1]=t,2===(i+=2)&&(o?o(f):p())};var e="undefined"!=typeof window?window:undefined,t=e||{},s=t.MutationObserver||t.WebKitMutationObserver,u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var e=setTimeout;return function(){return e(f,1)}}var c=new Array(1e3);function f(){for(var e=0;e<i;e+=2){var t=c[e],n=c[e+1];t(n),c[e]=undefined,c[e+1]=undefined}i=0}var p=undefined;function g(e,t){var n=arguments,r=this,i=new this.constructor(v);i[m]===undefined&&F(i);var o=r._state;return o?function(){var e=n[o-1];a(function(){return O(o,i,e,r._result)})}():k(r,i,e,t),i}function h(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(v);return I(t,e),t}p=s?function B(){var e=0,t=new s(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():u?function U(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}():e===undefined?function V(){try{var e=z(!function(){var e=new Error("Cannot find module 'vertx'");throw e.code="MODULE_NOT_FOUND",e}());return void 0===(n=e.runOnLoop||e.runOnContext)?l():function(){n(f)}}catch(t){return l()}}():l();var m=Math.random().toString(36).substring(16);function v(){}var y=void 0,S=1,E=2,w=new x;function T(e){try{return e.then}catch(t){return w.error=t,w}}function C(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function b(e,t,n){t.constructor===e.constructor&&n===g&&t.constructor.resolve===h?function r(t,e){e._state===S?A(t,e._result):e._state===E?P(t,e._result):k(e,undefined,function(e){return I(t,e)},function(e){return P(t,e)})}(e,t):n===w?(P(e,w.error),w.error=null):n===undefined?A(e,t):d(n)?function o(e,r,i){a(function(t){var n=!1,e=C(i,r,function(e){n||(n=!0,r!==e?I(t,e):A(t,e))},function(e){n||(n=!0,P(t,e))},t._label);!n&&e&&(n=!0,P(t,e))},e)}(e,t,n):A(e,t)}function I(e,t){e===t?P(e,function n(){return new TypeError("You cannot resolve a promise with itself")}()):!function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}(t)?A(e,t):b(e,t,T(t))}function _(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){e._state===y&&(e._result=t,e._state=S,0!==e._subscribers.length&&a(D,e))}function P(e,t){e._state===y&&(e._state=E,e._result=t,a(_,e))}function k(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+S]=n,i[o+E]=r,0===o&&e._state&&a(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=undefined,i=undefined,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?O(n,r,i,o):i(o);e._subscribers.length=0}}function x(){this.error=null}var N=new x;function O(e,t,n,r){var i=d(n),o=undefined,a=undefined,s=undefined,u=undefined;if(i){if((o=function l(e,t){try{return e(t)}catch(n){return N.error=n,N}}(n,r))===N?(u=!0,a=o.error,o.error=null):s=!0,t===o)return void P(t,function c(){return new TypeError("A promises callback cannot return that same promise.")}())}else o=r,s=!0;t._state!==y||(i&&s?I(t,o):u?P(t,a):e===S?A(t,o):e===E&&P(t,o))}var L=0;function F(e){e[m]=L++,e._state=undefined,e._result=undefined,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[m]||F(this.promise),r(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):P(this.promise,function n(){return new Error("Array Methods must be provided an Array")}())}function R(e){this[m]=function t(){return L++}(),this._result=this._state=undefined,this._subscribers=[],v!==e&&("function"!=typeof e&&function n(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof R?function r(t,e){try{e(function(e){I(t,e)},function(e){P(t,e)})}catch(n){P(t,n)}}(this,e):function i(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===y&&n<e;n++)this._eachEntry(t[n],n)},M.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var i=T(t);if(i===g&&t._state!==y)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===R){var o=new n(v);b(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},M.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===y&&(this._remaining--,e===E?P(r,n):this._result[t]=n),0===this._remaining&&A(r,this._result)},M.prototype._willSettleAt=function(e,t){var n=this;k(e,undefined,function(e){return n._settledAt(S,t,e)},function(e){return n._settledAt(E,t,e)})},R.all=function W(e){return new M(this,e).promise},R.race=function j(i){var o=this;return r(i)?new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},R.resolve=h,R.reject=function G(e){var t=new this(v);return P(t,e),t},R._setScheduler=function H(e){o=e},R._setAsap=function Y(e){a=e},R._asap=a,R.prototype={constructor:R,then:g,"catch":function(e){return this.then(null,e)}},R.polyfill=function Q(){var e=undefined;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(r){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(r){}if("[object Promise]"===n&&!t.cast)return}e.Promise=R},R.Promise=R}()},function(e,t,n){var r=new(n(31)),i=new(n(32)),o=new(n(33)),a=new(n(34)),s=new(n(35)),u=new(n(36)),l=new(n(37)),c=new(n(38)),d=new(n(39)),f=new(n(40)),p=new(n(41)),g=new(n(42)),h=new(n(43)),m=new(n(44)),v=new(n(45)),y=new(n(46)),S=new(n(47)),E=new(n(48)),w=new(n(49)),T=new(n(50)),C=new(n(51)),b=new(n(52)),I=new(n(53)),_=new(n(54)),A=new(n(55)),P=new(n(56)),k=new(n(57));e.exports={conditionBuilderPreview:r,drawablePosition:i,stepTrigger:o,stepType:a,ENTITY_TYPE:s,surveyQuestionType:u,contentType:l,POPUP_BUTTON_ACTIONS:{NextDone:0,Start:1,Back:2,Cancel:3},designTemplateType:c,designTemplateCssClassPrefix:"wm-design-template-",smarttipMode:d,stickinessType:f,flowNodeType:p,searchProvider:g,screenshotMode:h,scrollType:m,deployableGroupType:v,teachMeCompletionType:y,teachMeQuestionType:S,templateEntityType:E,designTemplateDefaultFieldText:w,defaultSelectors:T,editorCommunication:C,publishEnvironment:b,userType:I,onPageActionType:_,designTemplateCategory:A,deployableDefaultAttributes:P,balloonLogicVersion:k}},function(e,t){e.exports=function n(){var e={TYPES:{BAD_INPUT:-2,NO_INPUT:-1,TRUE:0,FALSE:1,CANNOT_ASSERT:2,CONTEXT_ERROR:3,CANT_INTERACT:4,DIFFERENT_RESULTS:5},TOOLTIPS:{"true-indicator":"The statement is true for the current user and page settings","false-indicator":"The statement is not true for the current user and page settings","not-defined-indicator":"Waiting. Complete the condition to evaluate the status","cannot-assert-indicator":"The validity of this statement can only be assessed when played","cannot-assert-context-error-indicator":"The validity of this statement cannot be determined because the related Switch Step cannot be played in current page","cannot-interact-error-indicator":"The validity of this statement cannot be determined because we can't interact with this page","different-results-indicator":"Different results from iframes"},INDICATOR_CLASSES:{}},t=e.INDICATOR_CLASSES;return t[e.TYPES.NO_INPUT]="no-input",t[e.TYPES.BAD_INPUT]="bad-input",t[e.TYPES.TRUE]="true",t[e.TYPES.FALSE]="false",t[e.TYPES.CANNOT_ASSERT]="cannot-assert",t[e.TYPES.CONTEXT_ERROR]="cannot-assert-context-error",t[e.TYPES.CANT_INTERACT]="cannot-interact-error",t[e.TYPES.DIFFERENT_RESULTS]="different-results",e}},function(e,t){e.exports=function n(){return{Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}}},function(e,t){e.exports=function n(){return{Nothing:0,Button:1,Click:2,Hover:3,PageChanged:4,Text:5,Delay:6,SelectAny:7,SelectValue:8,Swipe:9,PeerStep:10,Custom:11,BbCode:12}}},function(e,t){e.exports=function n(){return{Simple:0,Popup:1,Action:2}}},function(e,t){e.exports=function n(){return{step:0,launcher:1,conditionBuilder:2,smartTip:3,balloon:4,balloonTrigger:5,flowNode:6,flowLink:7,smartTipUiComponent:8,conditionNode:9,trackedElementsSet:10,businessSolution:11,trackedElement:12,onScreenElement:13,shoutout:17,surveyMessage:18}}},function(e,t){e.exports=function n(){return{FreeText:0,RadioButtons:1,CheckBoxes:2,PersonalDetails:3}}},function(e,t){e.exports=function n(){return{Article:0,Video:1}}},function(e,t){e.exports=function n(){return{Shared:0,Copied:1,Specific:2}}},function(e,t){e.exports=function n(){return{Info:0,Validation:1,InfoAndValidation:2}}},function(e,t){e.exports=function n(){return{soft:0,strong:1}}},function(e,t){e.exports=function n(){return{UI:0,Action:1}}},function(e,t){e.exports=function n(){return{NoAction:-1,WalkMe:0,Google:1,Bing:2,Desk:3,Zendesk:4,Custom:5,SalesForce:6,Parature:7}}},function(e,t){e.exports=function n(){return{Regular:0,Blurred:1,None:2}}},function(e,t){e.exports=function n(){return{Animated:0,Normal:1,None:2}}},function(e,t){e.exports=function n(){return{Label:0,Category:1,Collection:2,Tag:3,Course:4,Lesson:5}}},function(e,t){e.exports=function n(){return{byComplete:0,byGoal:1}}},function(e,t){e.exports=function n(){return{SingleSelection:0,MultipleSelection:1}}},function(e,t){e.exports=function n(){return{balloon:0,popup:17}}},function(e,t){e.exports=function n(){return{TITLE:"Put your title here",CONTENT:"Put your text here",ACTION_BUTTON:"Action",CLOSE_BUTTON:"Close",ACTION_PLACEHOLDER:"Click Here",X_BUTTON:"x",NEXT_BUTTON:"Next",BACK_BUTTOM:"Back"}}},function(e,t){e.exports=function n(){return{embedInContainerSelector:"dialog[open], .modal-dialog .modal-content"}}},function(e,t){e.exports=function n(){return{communicators:{electronSocketIO:"electronSocketIO",electronMainToRenderer:"electronMainToRenderer",electronRendererToMain:"electronRendererToMain",electronRendererToEditor:"electronRendererToEditor",editorExtensionSocketIO:"editorExtensionSocketIO",editorExtensionBackgroundToContent:"editorExtensionBackgroundToContent",editorExtensionContentToBackground:"editorExtensionContentToBackground",editorExtensionContentToPageScript:"editorExtensionContentToPageScript",editorToElectron:"editorToElectron",pageScriptToContent:"pageScriptToContent"},destinations:{electronMain:"electronMain",electronRenderer:"electronRenderer",editorExtensionBackground:"editorExtensionBackground",editorExtensionContent:"editorExtensionContent",allEditorExtensionContents:"alleditorExtensionContents",pageScript:"pageScript",allPageScripts:"allPageScripts",editor:"editor"},actions:{editorAPI:"wm.editorAPI",takeScreenshot:"takeScreenshot",executeDynamicAction:"wm.executeDynamicAction",tabSelect:"wm.TabSelect",tabClose:"wm.TabClose",windowSelect:"wm.WindowSelect",keyUp:"wm.keyUp",topDomContentLoaded:"wm.topDomContentLoaded",contentApiInit:"contentScriptApi/init/all",contentApiDestroy:"contentScriptApi/destroy/all",setDataEntry:"dataService/setEntry/all",initFramescripts:"INIT_FRAMESCRIPT",frameScriptCreated:"wm.framescriptCreated",destroyFramescripts:"DESTROY_FRAMESCRIPT",socketConnect:"wm.socketConnect",socketDisconnect:"wm.socketDisconnect",socketsConnected:"wm.socketsConnected",socketsDisconnected:"wm.socketsDisconnected",socketStatus:"WM.socketStatus",getBrowserLeft:"getBrowserLeft",openUrl:"urlOpener",openUrlInNewTab:"wm.openUrlInNewTab",maximizeBrowser:"maximizeBrowser",minimizeBrowser:"minimizeBrowser",restoreBrowser:"restoreBrowser",focusBrowser:"focusBrowser",log:"log",appStart:"wm.appStart",extensionDownloader:"extensionDownloader",takeEditorScreenshot:"wm.takeEditorScreenshot",shutdownEditorWindow:"wm.shutdownEditorWindow",shutdownEditor:"wm.shutdownEditor",reloadEditorWindow:"wm.reloadEditorWindow",copyToClipboard:"copyUrlToClipboard",updateLayoutButton:"wm.updateLayoutButton",getEditorSize:"wm.getEditorSize",authorized:"WM.authorized",unauthorized:"WM.unauthorized",authorize:"WM.authorize",newConnection:"wm.newConnection",customProtocolCalled:"wm.customProtocolCalled",dockEditorWindow:"dockEditorWindow",minimizeEditorWindow:"minimizeEditorWindow",maximizeEditorWindow:"maximizeEditorWindow",rearrangeLayout:"rearrangeLayout",updateUserPreferences:"wm.updateUserPreferences",activeSocketsChanged:"wm.activeSocketsChanged",requestWorkMode:"requestWorkMode",requestState:"requestState",pageNotSynced:"wm.PageNotSynced",afterLibInjectionToTopDocument:"wm.afterLibInjectionToTopDocument",afterLibInjectedOnAnyDocument:"wm.afterLibInjectedOnAnyDocument",libModeExited:"wm.libModeExited",libRemoved:"wm.libRemoved",errorHappened:"wm.errorHappened",captureConfigChanged:"wm.captureConfigChanged",beforeExecutingFlowStage:"wm.libEvent.beforeExecutingFlowStage",afterExecutingFlowStage:"wm.libEvent.afterExecutingFlowStage",changeWindowSize:"wm.changeWindowSize",getVersions:"wm.getVersions",queryRegistry:"registryQuerier",executeChildProcess:"childProcessExecuter",setServerSecurity:"wm.setServerSecurity",enableSpellChecker:"wm.enableSpellChecker"},channels:{wmEvent:"WMEvent",logs:"WMLogs",routes:"WMRoutes",actions:"WMActions"},extensionDownloader:{openUrl:"openUrl",copyToClipboard:"copyToClipboard"}}}},function(e,t){e.exports=function n(){return{PRODUCTION:0,PREVIEW:1,TEST:3,SUCCESS:32}}},function(e,t){e.exports=function n(){return{NO_MATCH:null,INTERNAL:0,PAYING:1,SE:2,USED_TO_BE_PAYING:3,USED_TO_BE_SE:4}}},function(e,t){e.exports=function n(){return{Click:"Click",Tap:"Tap",Hover:"Hover",Swipe:"Swipe",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"}}},function(e,t){e.exports=function n(){return{AnnouncementBar:0}}},function(e,t){e.exports=function n(){var e={simpleStep:2147483630,popupStep:2147483631,shoutOut:2147483632,icon:2147483627};return e.launcher=e.icon,e.smarttip=e.icon,{zIndex:e}}},function(e,t){e.exports=function n(){return{lv1:1,lv2:2,latest:2}}},function(e,t,n){var r=n(59),i=n(60),o=n(61),a=n(62);e.exports={TemplateWrap:r,TopArrow:i,CssResetRules:o,ShoutOutTemplateWrap:a}},function(e,t){e.exports="<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 {{designTemplateCssClass}}' style='{{{cssReset}}} width: auto; min-width: 190px; position: absolute; direction: {{direction.basic}};'><div class='walkme-custom-balloon-mid-div' style='{{{cssReset}}} direction: {{direction.basic}}; position: relative; {{#shadow}}-webkit-box-shadow: {{shadow}}; -moz-box-shadow: {{shadow}}; box-shadow: {{shadow}};{{/shadow}} font-family: {{{font}}}; border-radius:{{radiuses.balloon}}; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='{{{cssReset}}} direction: {{direction.basic}}; background-color:{{colors.mainBg}}; border:{{border.size}} solid {{colors.border}}; border-radius:{{radiuses.balloon}}; border-{{position.side}}: none; overflow: hidden;'><div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='{{{cssReset}}} font-size: 12px; color: {{colors.xBtn}}; position: absolute; {{direction.oppositeSide}}: 0px; top: 0px; padding-{{direction.oppositeSide}}: {{xBtn.marginHorizental}}; margin-top: {{xBtn.marginTop}}; cursor: pointer;font-weight:normal;' title='{{data.balloonCloseTooltip}}'>&#215;</div>{template}</div></div><div class='walkme-custom-side-border' style='{{{cssReset}}} background-color:{{colors.buttonBg}}; width: 4px; height: 100%;  top:0px; {{direction.side}}:0px; border:{{border.side.size}} solid {{colors.buttonBg}}; border-{{direction.oppositeSide}}: none; border-top: none; border-bottom: none;position: absolute;border-radius: 5px 0 0 5px;'></div></div>"},function(e,t){e.exports="<div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-outer walkme-custom-balloon-arrow-outer-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 11px 11px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(198, 198, 198); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 137px; left: 319px;'></div><div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-inner walkme-custom-balloon-arrow-inner-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 10px 10px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(255, 255, 255); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 138px; left: 320px;'></div>"},function(e,t){e.exports="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit; letter-spacing: normal; text-transform: none; outline: invert none medium; width: auto; box-shadow:none; text-shadow:none; border-top: none; border-right: none; border-bottom: none; border-left: none; position: static; top: auto; left: auto; transition: none;"},function(e,t){e.exports='<div class="wm-outer-div wm-shoutout wm-shoutout-{{Id}} wm-template-bg {{designTemplateCssClass}}" id="wm-shoutout-{{Id}}" style="z-index: 2147483630;">{template}</div>'},function(e,t,n){var r=n(64);e.exports={abPermutation:{currentPermutation:{key:"wm-ABPer",expiry:r.twoYears},forcedPermutation:{key:"wm-frcd",expiry:r.twoYears},permutationOverride:{key:"wm-force-permutation",expiry:r.twoYears}},abTesting:{shouldLoadWalkme:{key:"wm-absl",expiry:r.twoYears},shouldShowWidget:{key:"wm-abss",expiry:r.twoYears}},abTestingGoals:{endUserUniqueKey:{key:"wm_abg_"}},analytics:{lastAuditedUser:{key:"wm-ueuT",expiryFunc:r.todayFunc}},autoStart:{repeat:{key:"wm-ASRep"}},wmDebugger:{config:{key:"wm-ftr-cnf",expiry:r.oneYear},state:{key:"wm-ftr",expiry:r.oneYear}},endUserLogging:{auditFreq:{key:"wm-euaf",expiryFunc:r["60times"]}},endUser:{guid:{key:"wm-ueug",expiry:r.twoYears},forcedGenerate:{key:"wm-fgug",expiry:r.twoYears}},goals:{blocked:{key:"wm-gb",expiry:r.oneDay}},hiddenIframe:{popupHackTries:{key:"wm-popup",expiry:r.twoYears}},publishData:{lastDataVersion:{key:"wm-ldv",expiry:r.twoYears}},serverDataSender:{serverSick:{key:"wm-sk"},serverSickAttempts:{key:"wm-sat"},serverSickTimestamp:{key:"wm-sst"}},serverStorage:{invalidateIntervalKey:{key:"ss_ii"},currentEndUserGuid:{key:"wm-ceug",expiry:r.twoYears},currentEnvironment:{key:"wm-cenv",expiry:r.twoYears},lastGetDataTime:{key:"wm-lgt",expiry:r.oneYear}},versions:{appVersion:{key:"wm-av",expiry:r.oneYear},appWasUpdated:{key:"wm-awu",expiry:r.oneYear}},visits:{numberOfVisits:{key:"wm-nov",expiry:r.oneYear},lastVisit:{key:"wm-lv",expiry:r.oneYear}},passOwnership:{newWindowTime:{key:"wm-cond-win",expiry:r.oneHour},stopOwnership:{key:"wm-cdstop",expiry:2},play:{key:"wm-cdplay",expiry:r.oneHour}},tabbedOwnership:{priorityCheck:{key:"wm-po-pc",expiry:r.oneHour},lastPriority:{key:"wm-po-p",expiry:r.oneHour},currentOwner:{key:"wm-po-r",expiry:r.oneHour},prioritiesQueue:{key:"wm-po-q",expiry:r.oneHour},priority:{key:"priority"}},remindMeLater:{remindMeLater:{key:"wm-RML"}},attentionGrabber:{data:{key:"wm-ag-d",expiry:r.twoYears},sessionLength:{key:"wm-ag-sl"},repeat:{key:"wm-ag-rep"}},engagementRules:{uniqueData:{key:"wm-engagementRules",expiry:r.thirtyMinutes},fileExists:{key:"wm-engagementRulesFileExists",expiry:r.oneWeek}},flow:{stack:{key:"wm-flow-stack",expiry:r.tenMinutes},initiator:{key:"wm-flow-initiator",expiry:r.tenMinutes},lastStage:{key:"wm-nls",expiry:r.thirtyMinutes},beforePlay:{key:"wm-flw-preplay",expiry:r.oneMonth}},language:{current:{key:"wm-lang",expiry:r.oneYear}},session:{session:{key:"wm-ssn",expiry:r.thirtyMinutes},sessionCreationTime:{key:"wm-ssn-ct"}},heartbeat:{eventStorage:{key:"wm-hb"},backoffTimer:{key:"wm-hb-bt",expiry:r.thirtyMinutes}},teachMe:{quizResult:{key:"wm-lms-quiz-res",expiry:r.twoYears}},walkthru:{waitForOtherWindow:{key:"wm-wfow",expiry:r.tenMinutes},persistenceData:{key:"wm-prsst",expiry:r.tenMinutes}},survey:{repeat:{key:"wm-SrvRep",expiry:r.tenMinutes}},whitelist:{general:{key:"wm-wl"}},storage:{dataPrefix:{key:"wm-dt"},numberOfEntries:{key:"wm-ne"}},typedDataSender:{nextItemNumber:{key:"wm-nx"}},todoList:{endUserUniqueKey:{key:"wm_ct_"},endUserDataSyncKey:{key:"wm_ct_ds",expiry:r.oneHour},progressPercentDataKey:{key:"wm_ct_pp",expiry:r.oneDay}},walkmeVisibleReporter:{walkmeVisibleReported:{key:"wm-wmv",expiry:r.oneDay}},flowSurveyActivator:{surveyRepeat:{key:"wm-SrvWtRep-"}},walkthruSurveyActivator:{surveyRepeat:{key:"wm-SrvWtRep-"}},smartTipSet:{initiator:{key:"wm-smtp-init",expiry:r.tenMinutes}},superScript:{loadSuperScript:{key:"wm-lss",expiry:r.oneDay}}}},function(e,t){e.exports={todayFunc:function r(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0),n=Math.floor((t.getTime()-e.getTime())/1e3);0==n&&(n=1);return n},oneHour:3600,oneDay:86400,oneWeek:604800,oneMonth:2678400,oneYear:31536e3,tenMinutes:600,thirtyMinutes:1800,twoYears:63072e3,"60times":function(e){return 60*e}}},function(e,t){e.exports={decode:function n(e){return e=(e=(e=(e=(e=(e=e.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&")).replace(/&gt;/gi,">")).replace(/&lt;/gi,"<")}}},function(e,t,n){function r(o){this.decodeJsonNodes=function n(e,t){return function i(e,t){t=t||0;if(10<t)throw new Error("decodeHtml: json is too deep, defensively throwing: "+e);for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"string"==typeof r&&(e[n]=o(r)),"object"==typeof r&&i(r,t+1)}}(e)}}e.exports=function(e){return new r(e=e||n(65).decode)}},function(e,t,n){var r,i;r=this,i=function(){"use strict";if("object"==typeof window){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){var e=window.IntersectionObserverEntry;return"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(e,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}),{IntersectionObserver:window.IntersectionObserver,IntersectionObserverEntry:e}}var h=window.document,t=[];return n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},n.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},n.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(h,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(h,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(window,"resize",this._checkForIntersections,!0),i(h,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var u=this._rootIsInDom(),l=u?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,n=m(t),r=this._rootContainsTarget(t),i=e.entry,o=u&&r&&this._computeTargetAndRootIntersection(t,l),a=e.entry=new c({time:function s(){return window.performance&&performance.now&&performance.now()}(),target:t,boundingClientRect:n,rootBounds:l,intersectionRect:o});i?u&&r?this._hasCrossedThreshold(i,a)&&this._queuedEntries.push(a):i&&i.isIntersecting&&this._queuedEntries.push(a):this._queuedEntries.push(a)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=window.getComputedStyle(e).display){for(var n,r,i,o,a,s,u,l,c=m(e),d=v(e),f=!1;!f;){var p=null,g=1==d.nodeType?window.getComputedStyle(d):{};if("none"==g.display)return;if(d==this.root||d==h?(f=!0,p=t):d!=h.body&&d!=h.documentElement&&"visible"!=g.overflow&&(p=m(d)),p&&(n=p,r=c,void 0,i=Math.max(n.top,r.top),o=Math.min(n.bottom,r.bottom),a=Math.max(n.left,r.left),s=Math.min(n.right,r.right),l=o-i,!(c=0<=(u=s-a)&&0<=l&&{top:i,bottom:o,left:a,right:s,width:u,height:l})))break;d=v(d)}return c}},n.prototype._getRootRect=function(){var e;if(this.root)e=m(this.root);else{var t=h.documentElement,n=h.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},n.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),t={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},n.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},n.prototype._rootIsInDom=function(){return!this.root||o(h,this.root)},n.prototype._rootContainsTarget=function(e){return o(this.root||h,e)},n.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},n.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},{IntersectionObserver:n,IntersectionObserverEntry:c}}function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function n(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function r(e,t){var n=null;return function(){n=n||setTimeout(function(){e(),n=null},t)}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function m(e){var t;try{t=e.getBoundingClientRect()}catch(n){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function o(e,t){for(var n=t;n;){if(n==e)return!0;n=v(n)}return!1}function v(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}},"object"==typeof e.exports?e.exports=i():(r.IntersectionObserver=i().IntersectionObserver,r.IntersectionObserverEntry=i().IntersectionObserverEntry)},function(o,e,a){(function(){"use strict";var e=a(69),t=a(70),n={init:function r(){},services:["GoalsManager","WalkMeGoalsManager","TasksGoalsManager"],types:[]};!function i(){a(71),a(74),a(75)}(),e.registerApi(n,t.privateCtx),o.exports=n}).call(window)},function(e,n,o){(function(i){(function(){"use strict";n.__esModule=!0,n.create=function t(){var e={};return o(3)(e,i),e.ctx},n.registerApi=function r(e,n){e.services&&wmjQuery.each(e.services,function(e,t){i.register(t).asFunction(function(){return n.get(t)})}),e.types&&wmjQuery.each(e.types,function(e,t){i.register(t).asProto().asFunction(function(e){return n.create(t,e)})})}}).call(window)}).call(this,o(2))},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(70),t=a(73);e.privateCtx.register("GoalsManagerParams").asInstance({checkInterval:2e3});var n=(r.prototype.addGoalCompletionParams=function(e,t,n){this.goalsCompletionParams[e.Id]={relatedObjectId:e.RelatedObjectId,goalType:e.GoalType,evaluator:n,goalCompletedFunc:t.goalCompletedFunc,identifier:t.identifier,interactionGuid:t.interactionGuid}},r.prototype.addGoalWatch=function(o,e){var a=this;if(this.goalsToCheck[o.Id]){if(o.IsLinkedGoal){var t=this.stringUtils.formatString("Skipping goal watch - Goal is already watched : {0}, type: {1}",o.Name,o.GoalType);return this.customerLog(t,3),null}this.removeGoalWatch(o.Id)}var n={trackUIChange:!0,evaluationPollingIntervalMs:this.checkGoalsInterval,featureName:this.consts.GOALS.LOG_FEATURE,elementName:"Goal: "+o.Name},r=this.conditionCheckerFactory.createOld(n);this.goalsToCheck[o.Id]=o,this.totalGoalsToCheckCount++,this.addGoalCompletionParams(o,e,r);var s=e.identifier,i=s?this.stringUtils.formatString(", PlayGuid of : {0}",s):"",u=this.stringUtils.formatString("Start watching Goal : {0}, type: {1} {2}",o.Name,o.GoalType,i);return this.customerLog(u,3),r.onValueChanged(function(e){e&&a.completeGoal(o)}),r.onPreEvaluation(function(e,t){t||(a.firstGoalCompletedDuringCheckIteration?a.firstGoalCompletedDuringCheckIteration=!1:0===a.goalsCheckedThisIterationCount&&(a.totalTime=0,a.stopwatch=a.performanceAPI.measure(a.performanceAPI.keys.Goals),a.customerLog("===== CHECKING GOALS =====",2)),o.goalStart=(new Date).getTime()),a.commonEvents.sendAutomationEvent("CheckingGoal",{GoalId:o.Id,GoalName:o.Name});var n=t?" (async)":"",r=a.stringUtils.formatString("Goal: {0} - Checking Goal , id : {1}, type: {2}, RelatedObjectId: {3}{4}",o.Name,o.Id,o.GoalType,o.RelatedObjectId,n);a.customerLog(r,3)}),r.onEvaluated(function(e,t){var n=(new Date).getTime()-o.goalStart,r=t?" (async)":"";if(u=a.stringUtils.formatString("Goal: {0} - checking finished, id : {1}, took {2} ms{3}",o.Name,o.Id,n,r),a.customerLog(u,4),a.commonEvents.deprecatedRaiseEvent(a.consts.EVENTS.Goals.ConditionEvaluated,{goal:o},{playGUID:s}),!t&&(a.goalsCheckedThisIterationCount++,a.totalTime=a.totalTime+n,a.goalsCheckedThisIterationCount>=a.totalGoalsToCheckCount&&(a.customerLog("Done checking "+a.goalsCheckedThisIterationCount+" Goals. took: "+a.totalTime+" ms",2),a.customerLog("===== DONE CHECKING GOALS =====",2),a.goalsCheckedThisIterationCount=0,a.stopwatch&&(a.stopwatch.stop(),a.stopwatch=null)),500<a.totalTime)){a.customerLog("Goals tracking time until now is "+a.totalTime+" ms. It broke the time limit of 500 ms. Stopped tracking current goals.");var i=a._clientStorageManager.keysConfig.goals.blocked;a._clientStorageManager.getData(i.key)||(u=a.stringUtils.formatString("Goals tracking broke limit and was stopped - user id: {0}, end user id: {1}, time: {2}, browser: {3}, url: {4}",a.userGuidContainer.getUserGuid(),_makeTutorial.getEndUserId(),a.totalTime,a._host.browser.string,window.location.href),_makeTutorial.Logger.error({},u),a._clientStorageManager.saveData(i.key,!0,i.expiry)),a.removeAllGoalsWatch()}}),o},r.prototype.addGoalsWatch=function(e,t){for(var n=e.length-1;0<=n;n--)for(var r=e[n],i=e.length-1;n<i;i--){var o=e[i];r.Id==o.Id&&e.splice(i,1)}var a=[];for(n=0;n<e.length;n++){var s=this.addGoalWatch(e[n],t);s&&a.push(s)}for(n=0;n<a.length;n++){var u=a[n];this.getGoalEvaluator(u.Id).evaluateAsync(u.Settings.Conditions)}},r.prototype.cleanResources=function(){for(var e in this.goalsToCheck){var t=this.getGoalEvaluator(e);t&&t.cleanResources()}},r.prototype.removeGoalWatch=function(e){if(this.customerLog(e,5,"goalProblem"),this.customerLog(this.goalsToCheck[e],5,"goalProblem"),this.goalsToCheck[e]){var t=this.getGoalEvaluator(e);--this.goalsCheckedThisIterationCount,--this.totalGoalsToCheckCount,0==this.goalsCheckedThisIterationCount&&0<this.totalGoalsToCheckCount&&(this.firstGoalCompletedDuringCheckIteration=!0),t&&t.cleanResources(),delete this.goalsToCheck[e],delete this.goalsCompletionParams[e]}},r.prototype.removeAllGoalsWatch=function(){this.cleanResources(),this.goalsToCheck={},this.goalsCompletionParams={},this.totalGoalsToCheckCount=0,this.goalsCheckedThisIterationCount=0},r.prototype.completeGoalById=function(e){var t=this.goalsToCheck[e];t?this.completeGoal(t):this.customerLog("Could not complete goal with id "+e+" - it was already completed or does not exist.",3)},r.prototype.getGoalEvaluator=function(e){return this.goalsCompletionParams[e].evaluator},r.prototype.completeGoal=function(e){this.customerLog('Goal "'+e.Name+'" Reached! ',1);var t=e.Id,n=this.goalsCompletionParams[t],r=this.createGoalCompletedParams(e,n);try{n.goalCompletedFunc&&n.goalCompletedFunc(r)}catch(i){this._logger.error(i,"completing goal callback threw an exception.")}this.removeGoalWatch(e.Id),this.commonEvents.raiseEvent(this.consts.EVENTS.Goals.GoalReached,this.getGoalInternalEventParams(n,e)),this.commonEvents.sendAutomationEvent(this.consts.EVENTS.Goals.GoalReached,{GoalId:e.Id,GoalName:e.Name})},r.prototype.getGoalInternalEventParams=function(e,t){return{goal:t,identifier:e.identifier,interactionGuid:e.interactionGuid,GoalId:t.Id,GoalName:t.Name}},r.prototype.createGoalCompletedParams=function(e,t){return{Id:e.Id,GoalType:t.goalType,RelatedObjectId:t.relatedObjectId,Name:e.Name,identifier:t.identifier,interactionGuid:t.interactionGuid}},r.prototype.getGoalsCountFromDictionary=function(){var e=this.getCheckedGoals(),t=0;for(var n in e)this.goalsToCheck[n]!=undefined&&this.goalsToCheck[n].Id!=undefined&&this.goalsToCheck[n].Settings!=undefined&&t++;return t},r.prototype.getCheckedGoals=function(){return this.goalsToCheck},r.prototype.getGoalsCompletionParams=function(){return this.goalsCompletionParams},r=i([t.ProvideLocal("GoalsManager",{ctx:e.privateCtx,dependencies:"GoalsManagerParams, Logger, HostData, ClientStorageManager, Consts, CommonEvents, ConditionCheckerFactory, UserGuidContainer, StringUtils, PerformanceAPI"})],r));function r(e,t,n,r,i,o,a,s,u,l){this._logger=t,this._host=n,this._clientStorageManager=r,this.consts=i,this.commonEvents=o,this.conditionCheckerFactory=a,this.userGuidContainer=s,this.stringUtils=u,this.performanceAPI=l,this.checkGoalsInterval=e.checkInterval==undefined?5e3:e.checkInterval,this.customerLog=t.wrapCustomerLog(i.TASKS.LOG_FEATURE),this.goalsToCheck={},this.totalGoalsToCheckCount=0,this.goalsCompletionParams={},this.totalTime,this.goalsCheckedThisIterationCount=0,this.firstGoalCompletedDuringCheckIteration=!1,this.stopwatch}o.GoalsManager=n}).call(window)}).call(this,a(72))},function(e,t,n){e.exports=function(){"use strict";return this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);for(var i,o=e.length-1,a=arguments.length,s=a<3?t:r;0<=o;o--)(i=e[o])&&(s=(a<3?i(s):3<a?i(t,n,s):void i(t,n))||s);return s}}()},function(e,t,n){(function(o){(function(){"use strict";function n(n,r,e){var i=e.proto,o=e.dependencies,a=e.platforms,u=e.injectToReady;return function(e){var t=function s(t,n,r,i,o,a){return void 0===i&&(i=!1),function(){var e=t.register(n).asCtor(r);i&&(e=e.asProto()),o&&e.dependencies(o),a&&e.injectToReady()}}(r,n,e,i,o,u);a?r.get("PlatformDI").register(a,t):t()}}t.__esModule=!0,t.PLATFORM=o.get("Consts").PLATFORM,t.Provide=function r(e,t){return void 0===t&&(t={}),n(e,o,t)},t.ProvideLocal=function i(e,t){return n(e,t.ctx,t)},t.internalProvide=n}).call(window)}).call(this,n(2))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var h,e=a(70),t=a(73),n=((h=r).getLocalTimeMs=function(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return e.getTime()-t},r.prototype.onGoalCompleted=function(e){this._goalCompletedCallbacks.push(e)},r.prototype.enableMultiUserStorage=function(){this._multiUserStorage=!0},r.prototype.startWatchingDeployable=function(e,t){var n=this.getGoalsFromDeployable(e);if(0<n.length){var r=n[0].GoalType,i=this.createWatchedDeployableObject(e,t);this.addToWatchedDeployableDictionary(e,r,t,i);var o=this.getGoalWatchParams(i);this._goalsManager.addGoalsWatch(n,o);var a=this.deployableTypeNameProvider.getDeployableTypeNameByTypeNumber(r),s=this.stringUtils.formatString("Started watching {0} : {1}",a,e.Name);this.customerLog(s,2)}},r.prototype.getGoalWatchParams=function(e){var t=this,n=e.plgd;return e.fnsh,{identifier:n,interactionGuid:e.igd,goalCompletedFunc:function(e){return t.goalCompleted(e)}}},r.prototype.stopWatchingDeployables=function(e){this.removeWatchedDeployablesOfType(e)},r.prototype.init=function(e){var t=this,n=this.restoreWatchedDeployables(!0);this.customerLog("Restoring watched Goals... "+n+" Walk-Thrus are watched.",2),e&&this._timerManager.libSetTimeout(function(){return t.updateWatchedDeployables()},2e3)},r.prototype.updateWatchedDeployables=function(){var e=this,t=this.restoreWatchedDeployables(!1);t&&this.customerLog("New watched deploybles... "+t+" more items are now watched.",2),this._timerManager.libSetTimeout(function(){return e.updateWatchedDeployables()},2e3)},r.prototype.restoreWatchedDeployables=function(o){var a=this,s=0;return this.wmjQuery.each(this.consts.DEPLOYABLE_TYPE,function(e,t){var n=a.getWatchedDeployablesOfType(t);for(var r in n)if(n[r]!=undefined&&n[r].tID!=undefined){var i=n[r];(o||a.isNewDeployableWatch(t,i))&&(a.restoreWatchedDeployable(i,t),s++)}}),s},r.prototype.isNewDeployableWatch=function(e,t){if(!this._deployablesInvokedByMe[e])return!0;var n=t.tID;return this._deployablesInvokedByMe[e][n]!=t.plgd},r.prototype.technicalSuccessHandler=function(e,t,n,r){"true"==e?r(parseInt(e)):"error"==e?(this.customerLog("Completed goal - Internal Error",3),n()):(this.customerLog("Completed goal - Unknown Error",3),t())},r.prototype.getCompletedGoals=function(e,t){if(e!=undefined&&t){var n=this.getWatchedDeployablesOfType(e);if(n){var r=n[t];if(r)return{playGuid:r.plgd,finishedGoals:r.fnsh}}}},r.prototype.getGoalsFromDeployable=function(e){var t=e.Goals;return(t=t||[]).slice()},r.prototype.addToWatchedDeployableDictionary=function(e,t,n,r){var i=this.getDeployableId(e);this.updateWatchedDeployableDictionary(t,this.getDeployableId(e),r),this.markDeployableAsWatchedByThisLibInstance(t,i,n)},r.prototype.markDeployableAsWatchedByThisLibInstance=function(e,t,n){this._deployablesInvokedByMe[e]=this._deployablesInvokedByMe[e]||{},this._deployablesInvokedByMe[e][t]=n},r.prototype.updateWatchedDeployableDictionary=function(e,t,n){var r=this.getWatchedDeployableTypeCookieName(e);this._clientStorageManager.addToDictionary(r,t,n,3600)},r.prototype.getDeployableId=function(e){return e.Id?e.Id:e.TutorialId},r.prototype.createWatchedDeployableObject=function(e,t){var n={};return n.tID=this.getDeployableId(e),n.plgd=t,n.fnsh=[],n.igd=this.interactionManager.getCurrentInteractionGuid(),n},r.prototype.getDeployableGoalsByIdAndType=function(e,t){var n=this._deployablesManagerFactory.get(t).getById(e);return n?this.getGoalsFromDeployable(n):[]},r.prototype.getGoalById=function(e,t){for(var n,r=0;r<e.length;r++)if(e[r].Id==t){n=e[r];break}return n},r.prototype.restoreWatchedDeployable=function(e,t){var n=e.tID,r=this.getDeployableGoalsByIdAndType(n,t);if(0<r.length){var i=e.plgd,o=e.fnsh;this.removeGoalsByIds(r,o),this.markDeployableAsWatchedByThisLibInstance(t,n,i);var a=this.getGoalWatchParams(e);this._goalsManager.addGoalsWatch(r,a)}},r.prototype.goalCompleted=function(e){this._walkMeInfo.getEnvironmentId()!=this.consts.SOURCES.preview&&this.sendGoalCompletedToServer(e),this.succeedSavingGoalCompleted(e)},r.prototype.sendGoalCompletedToServer=function(e){return this.auditingEnabledIndicator.isEnabled()&&(this.customerLog("Sending completed Goal info to server ("+e.Name+", "+e.identifier+")",3),this._dataSender.sendData({Id:e.Id,GoalType:e.GoalType,identifier:e.identifier})),!0},r.prototype.succeedSavingGoalCompleted=function(e){var t=this.getWatchedDeployablesOfType(e.GoalType)[e.RelatedObjectId];if(t&&e.identifier==t.plgd){t.fnsh.push(e.Id);var n=t.fnsh.length;this.getDeployableGoalsByIdAndType(e.RelatedObjectId,e.GoalType).length==n?this.removeDeployableFromWatched(e.GoalType,e.RelatedObjectId):this.updateWatchedDeployableDictionary(e.GoalType,e.RelatedObjectId,t)}for(var r=0;r<this._goalCompletedCallbacks.length;r++)this._goalCompletedCallbacks[r](e)},r.prototype.getWatchedDeployablesOfType=function(e){var t=this.getWatchedDeployableTypeCookieName(e);return this._clientStorageManager.getData(t,{})},r.prototype.removeDeployableFromWatched=function(e,t){var n=this.getWatchedDeployableTypeCookieName(e);this._clientStorageManager.removeFromDictionary(n,t,3600)},r.prototype.removeWatchedDeployablesOfType=function(e){var t=this.getWatchedDeployableTypeCookieName(e);this._clientStorageManager.removeData(t)},r.prototype.getWatchedDeployableTypeCookieName=function(e){var t=this.stringUtils.formatString("{0}-{1}","wm-wtchd",e);if(this._multiUserStorage){var n=this._walkMeInfo.getEndUserGuid();n&&(t+="-"+n)}return t},r.prototype.removeGoalsByIds=function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++)if(e[i].Id==r){e.splice(i,1);break}},r=h=i([t.ProvideLocal("WalkMeGoalsManager",{ctx:e.privateCtx,dependencies:"ClientStorageManager,GoalsManager,DeployablesManagerFactory,WalkMeInfo,ServerDataSenderManager,Logger,TimerManager, InteractionManager, Consts, AuditingEnabledIndicator, SafeFullUrlProvider, DeployableTypeNameProvider,StringUtils, wmjQuery"})],r));function r(e,t,n,r,i,o,a,s,u,l,c,d,f,p){var g=this;this._clientStorageManager=e,this._goalsManager=t,this._deployablesManagerFactory=n,this._walkMeInfo=r,this._timerManager=a,this.interactionManager=s,this.consts=u,this.auditingEnabledIndicator=l,this.deployableTypeNameProvider=d,this.stringUtils=f,this.wmjQuery=p,this._multiUserStorage=!1,this._goalCompletedCallbacks=[],this._deployablesInvokedByMe={},this.customerLog=o.wrapCustomerLog(u.TASKS.LOG_FEATURE),this._dataSender=i.register("go",{actionUrl:"/Statistics/AddCompletedGoal",technicalSuccessHandler:function(e,t,n,r){return g.technicalSuccessHandler(e,t,n,r)},defaultDataStorageLifeSeconds:3600,prefixForStorage:"go",sendingThreshold:1,dataType:"deployable goal",requestParamsFunc:function(e){var t=e[0],n=t.GoalType==g.consts.DEPLOYABLE_TYPE.AbExperiment;return{goalId:t.Id,playGuid:t.identifier,permutationId:g._walkMeInfo.getPermutationId(),endUserGuid:g._walkMeInfo.getEndUserGuid(),source:g._walkMeInfo.getEnvironmentId(),localTime:h.getLocalTimeMs(),url:c.get(),isAbTesting:n}}})}o.WalkMeGoalsManager=n}).call(window)}).call(this,a(72))},function(e,a,s){(function(o){(function(){"use strict";a.__esModule=!0;var i,t=s(70),e=s(73),n=((i=r).getGoalsFromTask=function(e){return e.GoalsNotCompleted?e.GoalsNotCompleted:[]},r.prototype.goalCompleted=function(e){t.privateCtx.get("TodoListManager").updateGoalCompleted(e)},r.prototype.startWatchingTasks=function(){var n=this,e=t.privateCtx.get("TodoListManager").getTasksGoalsNotCompleted();this.wmjQuery.each(e,function(e,t){t.TaskId&&n.startWatchingTask(t)})},r.prototype.startWatchingTask=function(e){var t=this,n=i.getGoalsFromTask(e);if(0<n.length){var r={goalCompletedFunc:function(e){return t.goalCompleted(e)}};this._goalsManager.addGoalsWatch(n,r)}this.customerLog("Started watching Task : "+e.Name,2)},r=i=o([e.ProvideLocal("TasksGoalsManager",{ctx:t.privateCtx,dependencies:"Consts, Logger, GoalsManager, wmjQuery"})],r));function r(e,t,n,r){this.wmjQuery=r,this._goalsManager=n,this.customerLog=t.wrapCustomerLog(e.TASKS.LOG_FEATURE)}a.TasksGoalsManager=n}).call(window)}).call(this,s(72))},function(o,e,a){(function(){"use strict";var e=a(69),t=a(77),n={init:function r(){},services:["PermalinkDeployableProvider","PermalinkManager"],types:["PermalinkString"]};!function i(){a(78),a(79)}(),e.registerApi(n,t.privateCtx),o.exports=n}).call(window)},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(77),t=a(73),n=(r.prototype.getByString=function(e){var t=this.getPermalinkRegex().exec(e);if(t&&1<t.length){var n=t[2]||t[1],r=t[2]?t[1]:this.deployableTypes.Tutorial,i={type:parseInt(r,10),id:parseInt(n,10)};if(this.validateDeployable(i))return i}},r.prototype.getPermalinkRegex=function(){return this.siteConfigManager.get().IsDisplayPoweredBy===this.consts.IS_DISPLAY_POWERED_BY.Hide?/(?:walkme|walkthroughid)=([0-9]+)-?([0-9]*)/:/walkme=([0-9]+)-?([0-9]*)/},r.prototype.validateDeployable=function(e){var t=this.deployablesManagerFactory.get(e.type);if(t&&t.getById(e.id))return!0},r=i([t.ProvideLocal("PermalinkDeployableProvider",{ctx:e.privateCtx,dependencies:"DeployablesManagerFactory, DeployableTypes, Consts, SiteConfigManager"})],r));function r(e,t,n,r){this.deployablesManagerFactory=e,this.deployableTypes=t,this.consts=n,this.siteConfigManager=r}o.PermalinkDeployableProvider=n}).call(window)}).call(this,a(72))},function(e,i,o){(function(r){(function(){"use strict";i.__esModule=!0;var a=o(77),e=o(73);a.privateCtx.register("PermalinkString").asFunction(function(e){return e.location.href}).asProto();var t=(n.prototype.run=function(){var e=this;if(this.canExecute()){var t=this.permalinkDeployableProvider.getByString(a.privateCtx.create("PermalinkString",this.window));if(t){var n=-1!=wmjQuery.inArray(t.type,this._trainingDeployableTypes),r=this.deployablesManagerFactory.get(t.type),i=r.getById(t.id),o=this.calculateWaitTime(i,n);this.timerManager.libSetTimeout(function(){e.commonEvents.raiseEvent(e.consts.EVENTS.PermalinkClicked),r.activateById(t.id,{type:e.consts.STEP_PLAY_INITIATOR_ENUM.PERMALINK}),n&&(e._isStarting=!1)},o),n&&(this._isStarting=!0)}}},n.prototype.canExecute=function(){return!this.crossDomainManager.get().enabled()||this.crossDomainManager.get().isOwnerByDefault()},n.prototype.calculateWaitTime=function(e,t){var n=1e3*parseFloat(this.commonUtils.getSettingsValue(e.Settings,"Delay",0)),r=t&&this.crossDomainManager.get().enabled()?2*this.crossDomainManager.get().getSampleRate():1;return Math.max(n,r)},n.prototype.isTrainingInStartingMode=function(){return this._isStarting},n=r([e.ProvideLocal("PermalinkManager",{ctx:a.privateCtx,dependencies:"CrossDomainManager, DeployablesManagerFactory, DeployableTypes, CommonUtils, Consts, CommonEvents, TimerManager, PermalinkDeployableProvider"})],n));function n(e,t,n,r,i,o,a,s){this.crossDomainManager=e,this.deployablesManagerFactory=t,this.commonUtils=r,this.consts=i,this.commonEvents=o,this.timerManager=a,this.permalinkDeployableProvider=s,this._isStarting=!1,this.window=window,this._trainingDeployableTypes=[n.Tutorial,n.BusinessSolution]}i.PermalinkManager=t}).call(window)}).call(this,o(72))},function(o,e,a){(function(i){(function(){"use strict";var e=a(81),t={init:function n(){},services:[],types:[]};!function r(){a(83),a(84),a(85),a(83),a(86),a(88),a(89),a(90),a(91),a(92),a(93),a(95),a(96),i.register("ActionsFactory").asCtor(e.ActionsFactory).dependencies("wmjQuery")}(),o.exports=t}).call(window)}).call(this,a(2))},function(e,n,r){(function(){"use strict";n.__esModule=!0;var o=r(82),e=(t.prototype.get=function(e,t,n,r){var i=this.actionFunctions[e]||this.actionFunctions.none;return"string"==typeof i?o.privateCtx.create(i,[t||{},n,r]):new i(t||{},n,r)},t.prototype.addActions=function(e){this.wmjQuery.extend(this.actionFunctions,e)},t);function t(e){this.wmjQuery=e,this.actionFunctions={none:"DoNothingAction",playBf:"PlayBizflowAction",openMenu:"OpenMenuAction",playContent:"PlayContentAction",playSurvey:"PlaySurveyAction",shoutOut:"ShoutOutAction",destroy:"DestroyDeployableAction",playShuttle:"PlayShuttleAction",remindMeNextDay:"RemindMeNextDayAction",remindMeNextTime:"RemindMeNextTimeAction",openTeachMe:"OpenTeachMeAction",checkMyForm:"CheckMyFormAction"}}n.ActionsFactory=e}).call(window)},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){try{var e=this.smartTipSetsManager.getSetManagerById(this.args.businessSolutionId);e?e.turnOnWithImmediateValidations():this.logger.customerLog("Failed to run set's validation. No set for Id : "+this.args.businessSolutionId)}catch(n){var t=this.stringUtils.formatString("Failed to run set's validations",this.args.businessSolutionId,this.jsonUtils.toJSON(n));this.logger.customerLog(t)}},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("CheckMyFormAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger, SmartTipSetsManager"})],r));function r(e,t,n,r,i,o,a,s){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.smartTipSetsManager=i,this.args=o,this.initiatorType=a,this.initiator=s,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.CheckMyFormAction=n}).call(window)}).call(this,a(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){this.args&&this.args.uiComponent&&this.args.uiComponent.destroy()},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("DestroyDeployableAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts"})],r));function r(e,t){this.consts=e,this.args=t,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Close}o.DestroyDeployableAction=n}).call(window)}).call(this,a(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("DoNothingAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts"})],r));function r(e){this.consts=e,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.DoNothingAction=n}).call(window)}).call(this,a(72))},function(e,u,l){(function(a,s){(function(){"use strict";u.__esModule=!0;var t,e=l(82),n=l(73),r=l(87),i=(t=r.OpenMenusActions,a(o,t),o=s([n.ProvideLocal("OpenMenuAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger"})],o));function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.menuAPI="WalkMePlayerAPI",e}u.OpenMenuAction=i}).call(window)}).call(this,l(1),l(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){try{var e=window[this.menuAPI];e!=undefined&&e.toggleMenu(this.getInitiatorObject())}catch(t){this.logger.customerLog(this.stringUtils.formatString("Failed opening menu. Exception: {0}",this.jsonUtils.toJSON(t)))}},r.prototype.isValid=function(){return undefined},r.prototype.getInitiatorObject=function(){var e={type:this.initiatorType,objectId:undefined,collectionId:undefined};if(this.initiator){e.objectId=this.initiator.Id;var t=this.initiator.Settings.action;e.collectionId=t&&t.arguments&&t.arguments.collectionId}return e},r=i([t.ProvideLocal("OpenMenusActions",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger"})],r));function r(e,t,n,r,i,o,a){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.args=i,this.initiatorType=o,this.initiator=a,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.OpenMenusActions=n}).call(window)}).call(this,a(72))},function(e,u,l){(function(a,s){(function(){"use strict";u.__esModule=!0;var t,e=l(82),n=l(73),r=l(87),i=(t=r.OpenMenusActions,a(o,t),o=s([n.ProvideLocal("OpenTeachMeAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger"})],o));function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.menuAPI="TeachMePlayerAPI",e}u.OpenTeachMeAction=i}).call(window)}).call(this,l(1),l(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){var e=this.args&&this.args.playBfFromBeginning?undefined:this.args.NodeId;try{this.businessSolutionsManager.activateById(this.args.bfId,{type:this.initiatorType,objectId:this.initiator.Id},e)}catch(n){var t=this.stringUtils.formatString("Failed playing BizFlow with id {0} starting from step {1}. Exception is: {2}",this.args.bfId,e,this.jsonUtils.toJSON(n));this.logger.customerLog(t)}},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("PlayBizflowAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, BusinessSolutionsManager, StringUtils,JsonUtils,Logger"})],r));function r(e,t,n,r,i,o,a,s){this.consts=e,this.businessSolutionsManager=t,this.stringUtils=n,this.jsonUtils=r,this.logger=i,this.args=o,this.initiatorType=a,this.initiator=s,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.PlayBizflowAction=n}).call(window)}).call(this,a(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){try{var e=this.args.contentId;WalkMeAPI.startContentById(e,this.initiatorType,this.initiator.Id)}catch(n){var t=this.stringUtils.formatString("Failed playing content with id {0}. Exception is: {1}",this.args.wtId,this.jsonUtils.toJSON(n));this.logger.customerLog(t)}},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("PlayContentAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger"})],r));function r(e,t,n,r,i,o,a){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.args=i,this.initiatorType=o,this.initiator=a,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.PlayContentAction=n}).call(window)}).call(this,a(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){try{var e={type:this.initiatorType,objectId:undefined};this.initiator&&(e.objectId=this.initiator.Id);var t=this.args.shuttleId;this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.Shuttle).activateById(t,e)}catch(r){var n=this.stringUtils.formatString("Failed playing shuttle with id {0}. Exception is: {1}",this.args.wtId,this.jsonUtils.toJSON(r));this.logger.customerLog(n)}},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("PlayShuttleAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger, DeployablesManagerFactory"})],r));function r(e,t,n,r,i,o,a,s){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.deployablesManagerFactory=i,this.args=o,this.initiatorType=a,this.initiator=s,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.PlayShuttleAction=n}).call(window)}).call(this,a(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){try{var e=this.args.surveyId,t={type:this.initiatorType,objectId:this.initiator?this.initiator.Id:undefined};WalkMeAPI.startSurveyById(e,t)}catch(r){var n=this.stringUtils.formatString("Failed playing survey with id {0}. Exception is: {1}",this.args.surveyId,this.jsonUtils.toJSON(r));this.logger.customerLog(n)}},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("PlaySurveyAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger"})],r));function r(e,t,n,r,i,o,a){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.args=i,this.initiatorType=o,this.initiator=a,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.PlaySurveyAction=n}).call(window)}).call(this,a(72))},function(e,u,l){(function(a,s){(function(){"use strict";u.__esModule=!0;var e,t=l(82),n=l(73),r=l(94),i=(e=r.RemindMeActions,a(o,e),o.prototype.doAction=function(){var e=new Date;e.setDate(e.getDate()+1),this.setRemindMeLaterCookie(e)},o=s([n.ProvideLocal("RemindMeNextDayAction",{ctx:t.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger, ClientOrServerStorageManager, InitiatorTypeToDeployableTypeMapper"})],o));function o(){return null!==e&&e.apply(this,arguments)||this}u.RemindMeNextDayAction=i}).call(window)}).call(this,l(1),l(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.setRemindMeLaterCookie=function(e){var t=this.initiatorTypeToDeployableTypeMapper.map(this.initiatorType),n=this.clientOrServerStorageManager.keysConfig.remindMeLater.remindMeLater.key+"-"+t+"-"+this.initiator.Id,r={expiry:e.getTime()};this.clientOrServerStorageManager.saveData(n,this.jsonUtils.toJSON(r),this.consts.ONE_YEAR_SECONDS)},r.prototype.isValid=function(){return undefined},r.prototype.doAction=function(){},r=i([t.ProvideLocal("RemindMeActions",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger, ClientOrServerStorageManager, InitiatorTypeToDeployableTypeMapper"})],r));function r(e,t,n,r,i,o,a,s,u){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.clientOrServerStorageManager=i,this.initiatorTypeToDeployableTypeMapper=o,this.args=a,this.initiatorType=s,this.initiator=u,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater}o.RemindMeActions=n}).call(window)}).call(this,a(72))},function(e,u,l){(function(a,s){(function(){"use strict";u.__esModule=!0;var e,t=l(82),n=l(73),r=l(94),i=(e=r.RemindMeActions,a(o,e),o.prototype.doAction=function(){this.setRemindMeLaterCookie(new Date)},o=s([n.ProvideLocal("RemindMeNextTimeAction",{ctx:t.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger, ClientOrServerStorageManager, InitiatorTypeToDeployableTypeMapper"})],o));function o(){return null!==e&&e.apply(this,arguments)||this}u.RemindMeNextTimeAction=i}).call(window)}).call(this,l(1),l(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(82),t=a(73),n=(r.prototype.doAction=function(){try{this.shoutOutsManager.activateById(this.args.id,{type:this.initiatorType,objectId:this.initiator.Id})}catch(e){this.logger.customerLog(this.stringUtils.formatString("Failed playing deployable with id {0}. Exception is: {1}",this.args.wtId,this.jsonUtils.toJSON(e)))}},r.prototype.isValid=function(){return!0},r=i([t.ProvideLocal("ShoutOutAction",{ctx:e.privateCtx,proto:!0,dependencies:"Consts, StringUtils,JsonUtils,Logger, ShoutOutsManager"})],r));function r(e,t,n,r,i,o,a,s){this.consts=e,this.stringUtils=t,this.jsonUtils=n,this.logger=r,this.shoutOutsManager=i,this.args=o,this.initiatorType=a,this.initiator=s,this.Type=this.consts.DEPLOYABLE_ACTION_TYPES.Action}o.ShoutOutAction=n}).call(window)}).call(this,a(72))},function(o,e,a){(function(){"use strict";var e=a(69),t=a(98),n={init:function r(){},services:["ContentsManager"],types:[]};!function i(){a(99),a(101),a(103),a(102)}(),e.registerApi(n,t.privateCtx),o.exports=n}).call(window)},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},function(e,u,l){(function(a,s){(function(){"use strict";u.__esModule=!0;var f,i=l(98),e=l(73),t=l(100),o={Article:0,Video:1},n=(f=t.DeployablesManager,a(r,f),r.prototype.onActivated=function(e){this._activateCallbacks.push(e)},r.prototype.activateById=function(e,t){try{t=t||{};var n=this.deployablesDict[e];if(!n)return void this.logger.customerLog(this.stringUtils.formatString("Content with id {0} doesn't exist",e),3);var r={clickAuditManager:this._clickAuditManager,content:n};this.removeContent(),this.commonEvents.raiseEvent(this.consts.EVENTS.Contents.ActivatingContent,{content:n}),this._currentContentActivator=this.getContentActivator(n.Type,r),this._currentContentActivator.activateContent(n,t.type,t.objectId),this._walkmeVisibleReporter.report(),this._walkMeGoalsManager.startWatchingDeployable(n,this._playGuidGenerator.generateNewPlayGuid(n.Id));for(var i=0;i<this._activateCallbacks.length;i++)this._activateCallbacks[i](n.Id,this.consts.DEPLOYABLE_TYPE.Content)}catch(o){this.logger.customerLog(this.stringUtils.formatString("Failed playing content with id {0}. Exception is {1}",e,o),3)}},r.prototype.getContentActivator=function(e,t){var n=null;switch(e){case o.Video:var r=this.getVideoIdAndVendor(t.content.Url);n=r?(t.videoId=r.videoId,t.vendorName=r.vendorName,i.privateCtx.create("VideoActivator",t)):i.privateCtx.create("ArticleActivator",t);break;case o.Article:n=i.privateCtx.create("ArticleActivator",t);break;default:throw this.stringUtils.formatString("Invalid content type : {0}",e)}return n},r.prototype.getVideoIdAndVendor=function(r){var i,e=[{regex:/^(?:http|https):\/\/.*youtube\..*v=([\w-]+)/i,vendorName:"youtube"},{regex:/^(?:http|https):\/\/.*youtu.be\/([\w-]+)/i,vendorName:"youtube"},{regex:/^(?:http|https):\/\/.*youtube.*\/embed\/([\w-]+)/i,vendorName:"youtube"},{regex:/^(?:http:\/\/|https:\/\/).*vimeo.*\/([\w-]+)/i,vendorName:"vimeo"}];return this.wmjQuery.each(e,function(e,t){var n=r.match(t.regex);if(n&&1<n.length)return!(i={videoId:n[1],vendorName:t.vendorName})}),!i&&this._featuresManager.isFeatureEnabled("html5video")&&(i={vendorName:"html5video"}),i},r.prototype.removeContent=function(){this._currentContentActivator&&this._currentContentActivator.removeContent()},r.prototype.types=function(){return o},r=s([e.ProvideLocal("ContentsManager",{ctx:i.privateCtx,dependencies:"Lib, Consts, WalkMeGoalsManager, ClickAuditManager, FeaturesManager, PlayGuidGenerator,WalkmeVisibleReporter, Logger, CommonEvents, StringUtils, wmjQuery"})],r));function r(e,t,n,r,i,o,a,s,u,l,c){var d=f.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Content})||this;return d.consts=t,d.logger=s,d.commonEvents=u,d.stringUtils=l,d.wmjQuery=c,d._currentContentActivator=null,d._activateCallbacks=[],d._name="Content",d._clickAuditManager=r,d._walkMeGoalsManager=n,d._featuresManager=i,d._playGuidGenerator=o,d._walkmeVisibleReporter=a,d}u.ContentsManager=n}).call(window)}).call(this,l(1),l(72))},function(e,n){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.setDeployables=function(e){if(e)for(var t=0;t<e.length;t++)this.deployablesDict[e[t].Id]=e[t]},t.prototype.getActionData=function(e){return{Type:"",ItemId:"",Name:""}},t.prototype.isWithAction=function(e){return!1},t.prototype.activateById=function(e,t,n){},t.prototype.getById=function(e){return this.deployablesDict[e]},t.prototype.getAll=function(){var e=[],t=this.deployablesDict;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(e,t){return e.OrderIndex===undefined||t.OrderIndex===undefined?0:e.OrderIndex-t.OrderIndex})},t.prototype.getDeployablesDict=function(){return this.deployablesDict},t.prototype.releaseAll=function(e){},t.prototype.autoStartEnabled=function(e){return!1},t.prototype.name=function(){return this._name},t);function t(e){this.deployablesDict={},this.lib=e.lib,this.setDeployables(e.deployables)}n.DeployablesManager=e}).call(window)},function(e,u,l){(function(a,s){(function(){"use strict";u.__esModule=!0;var o,e=l(98),t=l(102),n=l(73),r=(o=t.ContentActivator,a(i,o),i.prototype.getContentTypeName=function(){return"article"},i.prototype.createContentElement=function(e){return this.createArticleIframe(e)},i.prototype.needsNewTabButton=function(){return!0},i.prototype.defaultLightboxSize=function(){return{width:900,height:500}},i.prototype.createArticleIframe=function(e){if(this.commonUtils.isValidUrl(e.Url)){var t=this.getLightboxSize(),n=this.mustache.to_html('<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',{width:t.width,height:t.height,url:encodeURI(e.Url)});return this.domManager.parseElementAsJquery(n)}},i=s([n.ProvideLocal("ArticleActivator",{ctx:e.privateCtx,dependencies:"DomManager, CommonUtils, Mustache",proto:!0})],i));function i(e,t,n,r){var i=o.call(this,r)||this;return i.domManager=e,i.commonUtils=t,i.mustache=n,i}u.ArticleActivator=r}).call(window)}).call(this,l(1),l(72))},function(e,n,r){(function(){"use strict";n.__esModule=!0;var i=r(98),e=(t.prototype.cannotPlayInLightbox=function(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://");return t&&this.customerLog("Can't play content in lightbox"),t},t.prototype.activateContent=function(e,t,n){var r=parseInt(i.privateCtx.get("SettingsValuesRetriever").getSettingsValue(e.Settings,this.PLAY_MODE_SETTING_KEY,this.PLAY_MODE.NewTab));switch(this.customerLog(this._stringUtils.formatString("Started playing content, play mode is :{0}",r)),this._clickAuditManager.SendClickAudit(this._consts.DEPLOYABLE_TYPE.Content,e.Id,{type:t,id:n},{contentType:e.Type}),e.Url=i.privateCtx.get("HtmlDecoder").decodeHtml(e.Url,["&"]),this.customerLog(this._stringUtils.formatString("Content url is :{0}",e.Url)),this._commonEvents.deprecatedRaiseEvent(this._consts.EVENTS.LoadingContent,e),r){case this.PLAY_MODE.Widget:this.activateContentInWidget(e);break;case this.PLAY_MODE.LightBox:this.cannotPlayInLightbox(e.Url)?(this.customerLog("Falling back to playing content in a new tab instead"),this.activateContentInNewTab(e)):this.activateContentInLightBox(e);break;case this.PLAY_MODE.NewTab:this.activateContentInNewTab(e)}},t.prototype.removeContent=function(e){this._lightbox&&this._lightbox.remove()},t.prototype.getLightboxSize=function(){return this._lightbox.getSize()},t.prototype.activateContentInLightBox=function(e){var t=this;this._lightbox=i.privateCtx.create("LightboxDisplayer"),this._lightbox.activate(e,this.defaultLightboxSize(),this.getContentTypeName(),this.needsNewTabButton(),function(e){return t.createContentElement(e)},function(e){return t.activateContentInNewTab(e)})},t.prototype.activateContentInNewTab=function(e){i.privateCtx.get("CommonUtils").isValidUrl(e.Url)?(this._commonEvents.deprecatedRaiseEvent(this._consts.EVENTS.LoadingContentInNewTab),this.customerLog(this._stringUtils.formatString("Opening content in new tab. Url: {0}",e.Url)),window.open(e.Url,"_blank")):this.customerLog(this._stringUtils.formatString("Content url is invalid: {0}",e.Url))},t.prototype.activateContentInWidget=function(e){throw"activateContentInWidget is unimplemented"},t);function t(e){this._stringUtils=i.privateCtx.get("StringUtils"),this._consts=i.privateCtx.get("Consts"),this.PLAY_MODE_SETTING_KEY="ContentPlayMode",this.PLAY_MODE=this._consts.PLAY_MODE,this._clickAuditManager=e.clickAuditManager,this.customerLog=i.privateCtx.get("Logger").wrapCustomerLog(this._consts.RESOURCES.LOG_FEATURE_CONTENT_ACTIVATOR),this._commonEvents=i.privateCtx.get("CommonEvents")}n.ContentActivator=e}).call(window)},function(e,u,l){(function(o,s){(function(){"use strict";u.__esModule=!0;var a,e=l(102),t=l(73),n=l(98).privateCtx,r=(a=e.ContentActivator,o(i,a),i.prototype.getContentTypeName=function(){return"video"},i.prototype.createContentElement=function(e){return this.createVideoIframeElement(e)},i.prototype.needsNewTabButton=function(){return!1},i.prototype.defaultLightboxSize=function(){return{width:900,height:500}},i.prototype.createVideoIframeElement=function(e){var t=this.getVideoParameters(e);if("html5video"==this._vendorName){var n="";n+=this.getLightboxSizeString();var r=mtjQuery("<video controls "+n+' src="'+this._content.Url+'"></video>');return-1<t.indexOf("autoplay")&&r.attr("autoplay",1),r}var i=this.stringUtils.formatString("[{0} {1}]{2}[/{3}]",this._vendorName,t,this._videoId,this._vendorName),o=this.bbCodeParser.parse(i);return this.domManager.parseElementAsJquery(o)},i.prototype.getVideoParameters=function(e){var t=this.settingsValuesRetriever.getSettingsValue(e.Settings,"VideoParameters","");return t=this.handleHeightAndWidth(t,e),t+=' wmode="opaque"'},i.prototype.handleHeightAndWidth=function(e,t){return e=(e=e.replace(/&quot;/gi,'"')).replace(/((width|height)="[^\\"]+)"/gi,""),e+=" "+this.getLightboxSizeString()},i.prototype.getLightboxSizeString=function(){var e=this.getLightboxSize();return this.stringUtils.formatString('width="{0}" height="{1}"',e.width,e.height)},i=s([t.ProvideLocal("VideoActivator",{ctx:n,proto:!0,dependencies:"StringUtils, BBCodeParser, SettingsValuesRetriever, DomManager"})],i));function i(e,t,n,r,i){var o=a.call(this,i)||this;return o.stringUtils=e,o.bbCodeParser=t,o.settingsValuesRetriever=n,o.domManager=r,o._vendorName=i.vendorName,o._videoId=i.videoId,o._content=i.content,o}u.VideoActivator=r}).call(window)}).call(this,l(1),l(72))},function(o,e,a){(function(){"use strict";var e=a(69),t=a(105),n={init:function r(){},services:["TodoListManager"],types:[]};!function i(){a(106),a(107),a(108)}(),e.registerApi(n,t.privateCtx),o.exports=n}).call(window)},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},function(t,e,n){(function(){function e(e,t,u,n,l,c,f,r,p,s,g,d,i,h,o,a,m){var v,y,S,E,w,T,C,b,I,_,A,P,k=this,D="/ToDoList/UserCompletedTasksByIdsAndGoalsIds";function x(e){return{userCompletedTasksSerialized:g.toJSON(e),userGuid:c.getUserGuid()}}function N(e,t){return O(A,e,t)}function O(e,t,n){return n=n||c.getUserGuid(),e+c.getEnvironmentId()+"_"+n+"_"+t}function L(e,t,n){return{userGuid:n||c.getUserGuid(),endUserId:e,taskGoalsIds:g.toJSON(t),source:c.getEnvironmentId()}}function F(e){var r=[];return mtjQuery.each(e,function(e,t){if(t.TaskId){var n=mtjQuery.extend(!0,{},t);B(n,"TaskId","t"),B(n,"CompletionDate","td"),B(n,"IsCompleted","c"),B(n,"CompletedGoals","g"),r.push(n)}}),r}function M(e){e.endUserId=encodeURIComponent(e.endUserId)}function R(e){var r={};return mtjQuery.each(e,function(e,t){if(t.t){var n=mtjQuery.extend(!0,{},t);B(n,"t","TaskId"),B(n,"td","CompletionDate"),B(n,"c","IsCompleted"),B(n,"g","CompletedGoals"),r[n.TaskId]=n}}),r}function B(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}function U(t,n,r,i,e){var o=V(t,(i=i||{}).userGuid),a=u.getData(N(t),!0);return o&&!a?(l.customerLog("getCompletedTasks - found up to date local data",4),n&&n(o),o):v?(l.customerLog(p.formatString("getCompletedTasks - going to fetch data from DB. Local data exists: {0}",!!o),4),function s(e,t,n,r){var i=wmjQuery.Deferred();if(_)return i.reject("Player server calls are blocked");return l.customerLog("syncTasksCompletionData - fetching data from server",4),y.loadServerData(v+D,r,k.getEndUserUniqueDataKey(e,t.userGuid),i.resolve,i.reject,!0,n),i.promise()}(t,i,!!o,e).then(function(e){!function o(e,t,n){var r;l.customerLog("syncTasksCompletionData - got data from server",4);var i=V(t,n.userGuid)||{};wmjQuery.safeEach(e,function(e,t){var n=i[e];n&&(!t.IsCompleted||n.IsCompleted)||(l.customerLog(p.formatString("todoListDataSynchronizer - task {0} status should be updated in local data",e),4),i[e]=t,r=!0)}),r&&y.updateLocalData(k.getEndUserUniqueDataKey(t),i);u.saveData(N(t),!1,P)}(e,t,i),n&&n(e)},function(e){r&&r(e,V(t,i.userGuid)||{})}),o):null}function V(e,t){return y.retrieveLocalData(k.getEndUserUniqueDataKey(e,t))}function W(e){try{var t=Y.get("UiDataProvider").uiTasksTree(),n=s.getCompletionData(t[0],"task"),r=Number((n.completedPercent/100).toFixed(2));!function o(e){var t=e.completedTasks.map(function(e){return e.id()}),n=e.visibleTasks.filter(function(e){return-1==t.indexOf(e.id())}).map(function(e){return e.id()});m.log.info("Tasks progressUpdate: visible tasks",{completedTasks:t,uncompletedTasks:n})}(n),d.saveData(j(e),!0,b.expiry);var i={type:f.EVENT_APPS.Task};c.setAnalyticsCustomFields(1,n.visibleTasks.length),c.setAnalyticsCustomFields(2,r),f.postEvent(f.EVENT_TYPES.ProgressUpdate,i)}catch(a){S(a),m.log.error("Tasks progressUpdate error",{errorMessage:a.message,stackTrace:a.stack})}}function j(e){return b.key+c.getEnvironmentId()+"_"+c.getUserGuid()+"_"+e}function G(e,t){if(e&&0!==e.length)for(var n=e.length-1;0<=n;n--)e[n].taskId==t.taskId&&e[n].goalId==t.goalId&&e[n].permutationId==t.permutationId&&e[n].source==t.source&&e[n].endUserGuid==t.endUserGuid&&e.splice(n,1)}k.init=function(e,t){w=T.register("tg",{beforeSendingManipulationFunc:G,actionUrl:"/ToDoList/UpdateUserTasksCompleted",prefixForStorage:"tg",sendingThreshold:1,dataType:"task goal",dataIdFieldName:"Id",requestParamsFunc:x}),I&&h.shouldAudit()&&a.one(o.EVENTS.WalkmeReady,function(){!function r(e,t){var n=j(e);d.getData(n,!1)||k.asyncRetrieveCompletedTasks(e,t,function(){W(e)})}(e,t)})},k.getEndUserUniqueDataKey=function(e,t){return O(C,e,t)},this.asyncRetrieveCompletedTasks=function(e,t,n,r,i){var o=L(e,t,i&&i.userGuid);1948<wmjQuery.param(o).length&&(o.taskGoalsIds=null),U(e,n,r,i,o)},this.syncRetrieveCompletedTasks=function(e,t,n){return U(e,null,null,n,L(e,t,n&&n.userGuid))},this.updateTaskCompleted=function(e,t,n,r,i){l.customerLog(p.formatString("updateTaskCompleted for {0} {1}",t?"task":"goal",t?t.Id:n.Id),4);var o=k.getEndUserUniqueDataKey(e);l.customerLog("Mark task as completed in storage, data = "+g.toJSON(r),4),y.updateLocalData(o,r);var a=Y.get("DictionaryUtils").getDictionaryKeys(i).length;!_&&h.shouldAudit()&&(w.sendData(function s(e,t,n,r){return{endUserId:e,taskId:t||-1,goalId:n||-1,tasksCount:r,permutationId:c.getPermutationId(),endUserGuid:c.getEndUserGuid(),source:c.getEnvironmentId()}}(e,t&&t.Id,n&&n.Id,a)),f.isReportingEnabled()&&(function d(e,t,n,r){try{if(e&&e!=={}){var i=Y.get("DeployablesManagerFactory").get(e.RelatedDeployableType).getById(e.RelatedDeployableId),o=function l(e,t){var n=0;for(var r in e){var i=e[r];e.hasOwnProperty(r)&&i.IsCompleted&&t[i.TaskId]&&n++}return n}(t,n),a=Number((o/r).toFixed(2)),s=Y.get("DeployableTypeToEventSenderAppTypeMapper"),u={type:f.EVENT_APPS.Task,oId:e.Id,oName:e.Name,pId:"-1",total:n?r:-1,aoId:i.Id,aoName:i.Name,aAppType:s.map(e.RelatedDeployableType),ratio:a};f.postEvent(f.EVENT_TYPES.Complete,u)}}catch(c){S(c)}}(t,r,i,a),I&&W(e)))},function H(){E=r.get(),v=t.get(),y=Y.create("RemoteDataSynchronizer",{storageManager:u,storageLifetime:o.COOKIE_LIFE_2_YEARS,encodeStorageData:F,decodeStorageData:R,encodeServerData:M}),S=l.error,T=n,C=u.keysConfig.todoList.endUserUniqueKey.key,b=u.keysConfig.todoList.progressPercentDataKey,A=u.keysConfig.todoList.endUserDataSyncKey.key,P=p.getSettingsValue(E.Settings,"remoteDataLifeTime",u.keysConfig.todoList.endUserDataSyncKey.expiry),I=i.isFeatureEnabled("tasksProgressUpdates"),_=i.isFeatureEnabled("blockGetTasksFromServer")}.apply(null,arguments)}var Y=n(105).privateCtx;Y.register("TodoListDataSynchronizer").asCtor(e).dependencies("Lib, RecorderServerManager, ClientStorageManager, ServerDataSenderManager, Logger, WalkMeInfo,EventSender, SiteConfigManager, CommonUtils, ObjectTreePercentageCalculator, JsonUtils,ClientOrServerStorageManager, FeaturesManager, AuditingEnabledIndicator, Consts, WmInternals,EventCollectorLogger"),t.exports=e}).call(window)},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var T,r=u(105),e=u(73),t=u(100),n=(T=t.DeployablesManager,o(i,T),i.prototype.init=function(){this.todoListDataSynchronizer.init(this._endUserId,this.getTaskGoalsIds(this.deployablesDict))},i.prototype.setDeployables=function(e){if(e){T.prototype.setDeployables.call(this,e);var t=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition);t=t&&e&&0<e.length,this.setActiveState(t),this.removeInvalidTasks()}},i.prototype.activateById=function(e,t){var n=this.getById(e),r=this.deployablesManagerFactory.get(n.RelatedDeployableType);try{(t=t||{type:this.consts.STEP_PLAY_INITIATOR_ENUM.NONE}).objectId=t.id==undefined?t.objectId:t.id,this.auditTasksManager.auditTaskPlayed(n,t)}catch(o){this._logError(o)}var i={type:this.consts.STEP_PLAY_INITIATOR_ENUM.TASK,objectId:e};r.activateById(n.RelatedDeployableId,i)},i.prototype.getById=function(e){var t=T.prototype.getById.call(this,e);return t&&this.validateTask(t)?t:undefined},i.prototype.isTaskCompleted=function(e){var t=this.getCompletedTasks();return!!t&&-1<this.arrayUtils.inArray(e.Id,t)},i.prototype.isTaskConditionsPassed=function(e){var t=!0;switch(e.RelatedDeployableType){case this.consts.DEPLOYABLE_TYPE.Tutorial:if(e.RelatedDeployableId){var n=r.privateCtx.get("WalkthrusContainer").getWalkthruById(e.RelatedDeployableId);t=_makeTutorial.canShowTutorial(n)}}return t},i.prototype.isTaskActive=function(e){var t=e.Settings;return!parseInt(t.ActivateConditionEnabled)||this.conditionTreeEvaluator.evaluate(t.ActivateCondition)},i.prototype.isTaskDisplayed=function(e){var t=e.Settings;return!parseInt(t.DisplayConditionEnabled)||this.conditionCheckerFactory.createOld({bypassUIChange:!0,featureName:this.consts.TASKS.LOG_FEATURE,elementName:e.Name}).getCurrentEvaluationValueAndStopEvaluating(t.DisplayCondition)},i.prototype.compareTasks=function(e,t){return e.Index<t.Index?-1:e.Index>t.Index?1:0},i.prototype.areAllTaskGoalsCompleted=function(e,t){for(var n=0;n<e.Goals.length;n++){var r=e.Goals[n];if(r.Id&&-1===this.arrayUtils.inArray(r.Id,t.CompletedGoals))return 0}return 1},i.prototype.deactivateIfAllTasksCompleted=function(e,t){this.areAllTasksCompleted(e,t)&&this.deactivate()},i.prototype.areAllTasksCompleted=function(e,t){for(var n in e){var r=e[n];if(this.validateTask(r)){var i=t[r.Id];if(!i)return!1;if(!i.IsCompleted)return!1}}return!0},i.prototype.validateTask=function(e){return!(!e.Id||(e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Tutorial&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Content&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.BusinessSolution?(this.customerLog("Task (id: "+e.Id+") is of unknown type: "+e.RelatedDeployableType),1):e.RelatedDeployableId?!this.deployablesManagerFactory.get(e.RelatedDeployableType).getById(e.RelatedDeployableId)&&(this.customerLog("Task (id: "+e.Id+") related deployable ("+e.RelatedDeployableType+") (id: "+e.RelatedDeployableId+") does not exist"),1):(this.customerLog("Task (id: "+e.Id+") does not have any related Walk-Thru id"),1)))},i.prototype.syncTaskCompletionWithLocalData=function(e){for(var t in this.customerLog("syncing local tasks completion data",3),this.customerLog(e,5),e)if(e.hasOwnProperty(t)){var n=e[t];if(n.IsCompleted)continue;var r=n.CompletedGoals,i=this.getById(t);if(i&&i.Goals){var o=i.Goals;o&&r&&0<r.length&&0<o.length&&this.areAllTaskGoalsCompleted(i,n)&&(n.IsCompleted=1,this.completeTask(i,e))}}},i.prototype.getGoalFromTask=function(e,t){for(var n=0;n<e.Goals.length;n++)if(e.Goals[n].Id==t)return e.Goals[n]},i.prototype.hasTaskGoalCompletionCondition=function(){return this._hasTaskGoalCompletionConditionCache===undefined&&(this._hasTaskGoalCompletionConditionCache=this.hasTaskGoalCompletionConditionInner()),this._hasTaskGoalCompletionConditionCache},i.prototype.hasTaskGoalCompletionConditionInner=function(){return this.checkForDeployablesAutostartConditions()||this.checkForWidgetConditions()||this.checkForAbExpermintesGoalsConditions()},i.prototype.checkForDeployablesAutostartConditions=function(){var e,t,n,r,i;for(var o in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(o)&&(i=this.consts.DEPLOYABLE_TYPE[o],t=(n=this.deployablesManagerFactory.get(i))&&n.getAll()))for(var a=0;a<t.length;a++)if(e=t[a],this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCTEnabled",0)&&(r=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCT",""),this.isTaskGoalFunctions(r)))return!0;return!1},i.prototype.checkForWidgetConditions=function(){var e=this.settingsValuesRetriever.getSettingsValue(this._siteConfig.Settings,this.consts.DISPLAY_WIDGET_CONDITION,"");return this.isTaskGoalFunctions(e)},i.prototype.checkForAbExpermintesGoalsConditions=function(){var e,t,n,r=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.AbExperiment);if(!r)return!1;for(var i=r.getAll(),o=0;o<i.length;o++){t=i[o].Goals;for(var a=0;a<t.length;a++)if(e=t[a],n=this.settingsValuesRetriever.getSettingsValue(e.Settings,"Conditions",""),this.isTaskGoalFunctions(n))return!0}},i.prototype.isTaskGoalFunctions=function(e){return null!=e&&function t(e){return"Func"==e.nodeType?"TaskGoalReached"==e.funcName||"TaskGoalNotReached"==e.funcName:("And"==e.nodeType||"Or"==e.nodeType)&&(t(e.leftSon)||t(e.rightSon))}(e)},i.prototype.completeTask=function(e,t,n){try{var r=n?n.Id:-1;t[e.Id]={TaskId:e.Id,CompletionDate:(new Date).getTime(),IsCompleted:1,CompletedGoals:[]},this.commonEvents.raiseEvent(this.consts.EVENTS.TaskCompleted,{TaskId:e.Id}),this.todoListDataSynchronizer.updateTaskCompleted(this._endUserId,e,n,t,this.deployablesDict),this.deactivateIfAllTasksCompleted(this.deployablesDict,t),this.customerLog("Server update completed TASK (taskId: "+e.Id+", goalId: "+r+")",3)}catch(i){this.deactivate(),this._logError(i,"An error occurred while trying to complete a Task")}},i.prototype.didTasksFinishLoading=function(){return this._tasksFinishedLoading},i.prototype.setTasksFinishedLoadingCallback=function(e){this._tasksFinishedLoadingCallback=e},i.prototype.raiseTasksFinishedCallback=function(e){this._tasksFinishedLoading=!0,this._tasksFinishedLoadingCallback&&this._tasksFinishedLoadingCallback(e),this._tasksFinishedLoadingCallback=null},i.prototype.loadTasks=function(t,n){var r=this;if(this.customerLog("loadTasks - start loading completion data",3),this._isPlayMode)return this.customerLog("loadTasks - Play mode - returning empty tasks completion data",3),this.deactivateIfAllTasksCompleted(this.deployablesDict,{}),void t({});if(!this._endUserId)return this.customerLog("loadTasks - No end user - Deactivating",3),void this.deactivate();try{var i=function(e){r.syncTaskCompletionWithLocalData(e),r.customerLog("Tasks completion data loaded successfully",3),r.commonEvents.raiseEvent(r.consts.EVENTS.TasksLoaded,{completedTasks:e}),r.deactivateIfAllTasksCompleted(r.deployablesDict,e),t&&t(e),r.raiseTasksFinishedCallback()};this.shouldRetrieveCompletedTasks()?this.todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),i,function(e,t){t?i(t):(r.customerLog("Tasks completion data failed loading",3),r.deactivate(),n&&n(e))}):i({})}catch(e){this.deactivate(),this._logError(e,"An error occurred while trying to load completed tasks to the local storage")}},i.prototype.getTaskGoalsIds=function(e){var n={};return mtjQuery.each(e,function(e,t){n[e]=t.Goals?mtjQuery.map(t.Goals,function(e){return e.Id}):[]}),n},i.prototype.getTaskIdByGoalId=function(e){for(var t=this.dictionaryUtils.getDictionaryKeys(this.deployablesDict),n=t.length-1;0<=n;n--){var r=this.deployablesDict[t[n]];if(this.hasWantedGoal(r,e))return r.Id}},i.prototype.hasWantedGoal=function(e,t){for(var n=e.Goals.length-1;0<=n;n--)if(e.Goals[n].Id==t)return t},i.prototype.getCompletedTasks=function(){if(this.customerLog("Getting completed tasks",3),this._isPlayMode)return this.customerLog("Play mode - returning empty array of completed tasks",3),[];if(!this._endUserId)return this.deactivate(),null;if(!this.shouldRetrieveCompletedTasks())return null;try{var e=this.todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!e)return null;var n=[];return mtjQuery.each(e,function(e,t){t.TaskId&&t.IsCompleted&&n.push(t.TaskId)}),this.customerLog("Returning completed tasks ("+n+")",3),n}catch(t){this.deactivate(),this._logError(t,"An error occurred while trying to retrieve completed tasks")}return null},i.prototype.updateGoalCompleted=function(e){var n=this,r=e.RelatedObjectId,i=e.Id,t=e.Name;if(this.customerLog("Updating completed goal (taskId: "+r+", goalId: "+i+", goalName: "+t+")",3),this.commonEvents.sendAutomationEvent(this.consts.EVENTS.Goals.GoalReached,{GoalId:i,GoalName:t}),this._isPlayMode)this.customerLog("Play mode - exiting without updating",3);else if(this._endUserId)try{this.todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){n.completeGoal(e,r,i)},function(e,t){n.completeGoal(t,r,i)})}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to update task completed")}else this.deactivate()},i.prototype.updateDeployableCompleted=function(t,r){var i=this;this.customerLog("Updating completed deployable ("+r+") deployableId: "+t+")",3),this._isPlayMode?this.customerLog("Play mode - exiting without updating",3):this._endUserId?mtjQuery.each(this.deployablesDict,function(e,n){!n.Id||n.RelatedDeployableType!==r||parseInt(n.RelatedDeployableId)!==t||n.Goals&&0<n.Goals.length||i.todoListDataSynchronizer.asyncRetrieveCompletedTasks(i._endUserId,i.getTaskGoalsIds(i.deployablesDict),function(e){e[n.Id]&&e[n.Id].IsCompleted||i.completeTask(n,e)},function(e,t){i.completeTask(n,t)})}):this.deactivate()},i.prototype.getTasksGoalsNotCompleted=function(){var a=this;if(this._isPlayMode)return this.customerLog("Play mode - not getting tasks not completed goals",3),[];this.customerLog("Getting tasks uncompleted goals",3);var n=this.shouldRetrieveCompletedTasks()?this.todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict)):[];n=n||[];var r=[];return mtjQuery.each(this.deployablesDict,function(e,t){if(t.Id){var i=n[t.Id];if(!i||!i.IsCompleted){var o={TaskId:t.Id,Name:t.Name,GoalsNotCompleted:[]};mtjQuery.each(t.Goals,function(e,t){if(t.Id){var n=i&&i.CompletedGoals?i.CompletedGoals:[];if(-1===a.arrayUtils.inArray(t.Id,n)){var r=mtjQuery.extend(!0,{},t);o.GoalsNotCompleted.push(r)}}}),r.push(o)}}}),r},i.prototype.getApiTasks=function(i){var o=this;this.customerLog("Getting tasks fot the API",3);var a=this.getCompletedTasks();a=a||[];var s=[];return mtjQuery.each(this.deployablesDict,function(e,t){if(o.validateTask(t)){var n=a&&-1<o.arrayUtils.inArray(t.Id,a)?1:0,r={Index:t.OrderIndex,Name:t.Name,Id:t.Id,IsCompleted:n,Settings:o.jsonUtils.clone(t.Settings),Description:t.Description,RelatedDeployableType:t.RelatedDeployableType,RelatedDeployableId:t.RelatedDeployableId};i&&(r.ConditionsPassed=o.isTaskConditionsPassed(t),r.IsActive=o.isTaskActive(t),r.IsDisplayed=o.isTaskDisplayed(t)),delete r.Settings.ActivateConditionEnabled,delete r.Settings.ActivateCondition,s.push(r)}}),s.sort(this.compareTasks),s},i.prototype.isTaskGoalReached=function(e,t){var n=this.getCompletedTask(e);return!(!n||!n.IsCompleted&&-1===this.arrayUtils.inArray(t,n.CompletedGoals))},i.prototype.isTaskGoalReachedWithin=function(e,t){var n=!1,r=this.getCompletedTask(e);return r&&r.IsCompleted&&t&&r.CompletionDate&&this.isCompletedWithin(r.CompletionDate,t)&&(n=!0),n},i.prototype.completeGoal=function(e,t,n){var r=e[t];if(r||(r={TaskId:t,IsCompleted:0,CompletedGoals:[]},e[t]=r),!(r.IsCompleted||-1<this.arrayUtils.inArray(n,r.CompletedGoals))){r.CompletedGoals.push(n);var i=this.deployablesDict[t],o=this.getGoalFromTask(i,n);r.IsCompleted=this.areAllTaskGoalsCompleted(i,r),r.IsCompleted?this.completeTask(i,e,o):(e[r.TaskId]=r,this.customerLog("Server update completed GOAL (taskId: "+t+", goalId: "+n+")",3),this.todoListDataSynchronizer.updateTaskCompleted(this._endUserId,null,o,e,this.deployablesDict))}},i.prototype.getCompletedTask=function(e){var t=this.todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(t)return t[e]},i.prototype.isCompletedWithin=function(e,t){var n=new Date(e),r=new Date;return r.setDate(r.getDate()-t),r<n},i.prototype.isActive=function(){return this._isActive},i.prototype.setActiveState=function(e){this.customerLog("Setting todo list active state to: "+e,3),this._isActive=e},i.prototype.activate=function(){var t=this;this.todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){t.areAllTasksCompleted(t.deployablesDict,e)||t.setActiveState(!0)})},i.prototype.deactivate=function(){this.raiseTasksFinishedCallback(!1),this.setActiveState(!1)},i.prototype.toggleActiveState=function(){this.setActiveState(!this.isActive())},i.prototype.removeInvalidTasks=function(){for(var e=this.getAll(),t=0;t<e.length;t++)this.validateTask(e[t])||delete this.deployablesDict[e[t].Id]},i.prototype.shouldRetrieveCompletedTasks=function(){return!wmjQuery.isEmptyObject(this.deployablesDict)||this.featuresManager.isFeatureEnabled("forceRetrieveCompletedTasks")},i.prototype.shouldTrackAbTasks=function(){return!!this.hasTaskGoalCompletionCondition()||r.privateCtx.get("AbTasksValidator").shouldTrackAbTasks()},i=a([e.ProvideLocal("TodoListManager",{ctx:r.privateCtx,dependencies:"Lib, Consts, SiteConfigManager, RecorderServerManager, ClientStorageManager, Logger, WalkMeInfo, ContentsManager, CommonEvents, AuditTasksManager, DeployablesManagerFactory, DictionaryUtils,ConditionCheckerFactory, SettingsValuesRetriever, ArrayUtils, ConditionTreeEvaluator, TodoListDataSynchronizer, FeaturesManager, JsonUtils"})],i));function i(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y){var S=T.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.Task})||this;S.consts=t,S.siteConfigManager=n,S.recorderServerManager=r,S.clientStorageManager=i,S.logger=o,S.walkMeInfo=a,S.contentsManager=s,S.commonEvents=u,S.auditTasksManager=l,S.deployablesManagerFactory=c,S.dictionaryUtils=d,S.conditionCheckerFactory=f,S.settingsValuesRetriever=p,S.arrayUtils=g,S.conditionTreeEvaluator=h,S.todoListDataSynchronizer=m,S.featuresManager=v,S.jsonUtils=y,S._name="Task",S.customerLog=_makeTutorial.Logger.wrapCustomerLog(t.TASKS.LOG_FEATURE),S._isPreviewMode=a.getEnvironmentId()==t.SOURCES.preview,S._isPlayMode=a.getEnvironmentId()==t.SOURCES.play,S._siteConfig=n.get();var E=parseInt(S._siteConfig.TodoListSettings.isActive)&&S.conditionTreeEvaluator.evaluate(S._siteConfig.TodoListSettings.activateCondition),w=r.get();return S._endUserId=e.getEndUserId(),S._logError=o.error,S.setDeployables([]),S.customerLog('Initializing TodoListManager (isActive: "'+E+'", serverAddress: "'+w+'", userGuid: "'+a.getUserGuid()+'", endUserId: "'+S._endUserId+'")',3),window.walkMeRemoveTasksData&&(i.removeData(S.todoListDataSynchronizer.getEndUserUniqueDataKey(S._endUserId)),window.walkMeRemoveTasksData=!1),s.onActivated(function(e,t){S.updateDeployableCompleted(e,t)}),S}s.TodoListManager=n,r.privateCtx.register("TodoListManager").asCtor(n).dependencies("Lib, Consts, SiteConfigManager, RecorderServerManager, ClientStorageManager, Logger, WalkMeInfo, ContentsManager, CommonEvents, AuditTasksManager, DeployablesManagerFactory, DictionaryUtils,ConditionCheckerFactory, SettingsValuesRetriever, ArrayUtils, ConditionTreeEvaluator, TodoListDataSynchronizer, FeaturesManager, JsonUtils")}).call(window)}).call(this,u(1),u(72))},function(e,t,n){(function(){n(105).privateCtx.register("AbTasksValidator").asCtor(function t(r,i,o,a){function s(e){if("task"==e.type())return!0;var t=e.children();if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++)if(s(t[n]))return!0;return!1}this.shouldTrackAbTasks=function(){var e=parseInt(r.get().TodoListSettings.isActive);return!(!e||!function n(){for(var e=o.uiTasksTree(),t=0;t<e.length;t++)if(s(e[t]))return!0;return!1}())||!(a.isFeatureEnabled("untrack_tasks")&&!e)&&function t(){if(!i.isIEBrowser(9,"lte"))return!0;var e="abTasksIE"+i.browser.version;return!!a.isFeatureEnabled(e)}()},function e(){}.apply(null,arguments)}).dependencies("SiteConfigManager, HostData, UiDataProvider, FeaturesManager")}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(69),r=a(110);function t(e){var t=e&&e.Settings&&e.Settings.performance;!function n(e){return e.killswitch&&(e.killswitch.kill||e.killswitch.monitor)}(t)||(r.privateCtx.register("Config").asInstance(t.killswitch),a(114),a(117),a(118),a(119),a(121),r.privateCtx.get("Killswitch").init(r.privateCtx.get("KillSwitchImpl")))}a(111),e.registerApi({services:["Killswitch"]},r.privateCtx),o.init=function n(){i.get("AsyncSiteConfig").get().then(t)}}).call(window)}).call(this,a(2))},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(69);t.privateCtx=e.create()}).call(window)},function(e,a,s){(function(o){(function(){"use strict";a.__esModule=!0;var e=s(73),t=s(112),n=s(110),r=(i.prototype.init=function(e){this._impl=e},i.prototype.fuse=function(){this._impl.fuse()},i.prototype.check=function(){this._impl.check()},i=o([e.ProvideLocal("Killswitch",{ctx:n.privateCtx})],i));function i(){this._impl=t.dummyKillswitch}a.KillswitchWrapper=r}).call(window)}).call(this,s(72))},function(e,t,n){(function(){"use strict";t.__esModule=!0;var e=n(113);t.dummyKillswitch={check:e.noop,fuse:e.noop}}).call(window)},function(e,t){(function(){"use strict";t.__esModule=!0,t.noop=function e(){}}).call(window)},function(e,s,u){(function(a){(function(){"use strict";s.__esModule=!0;var e=u(110),t=u(73),r=u(115),i=u(116),n=o=a([t.ProvideLocal("KillswitchReporter",{ctx:e.privateCtx,dependencies:"Logger,ThrottledBILogger"})],o);function o(e,t){var n=this;this.logger=e,this.biLogger=t,this.trigger=r.once(function(e){n.logger.customerLog("killswitch activated ("+e.duration+" ms)"),n.biLogger.send("feperf",{key:i.MEASUREMENT_KEYS.Killswitch,duration:Math.round(e.duration)})})}s.KillswitchReporter=n}).call(window)}).call(this,u(72))},function(e,n){(function(){"use strict";n.__esModule=!0,n.once=function t(e){return function(){e&&(e.apply(null,arguments),e=null)}}}).call(window)},function(e,t){(function(){"use strict";var e;t.__esModule=!0,(e=t.MEASUREMENT_KEYS||(t.MEASUREMENT_KEYS={}))[e.FpsBeforeWalkMeReady=1]="FpsBeforeWalkMeReady",e[e.FpsAfterWalkMeReady=2]="FpsAfterWalkMeReady",e[e.PollForShow=3]="PollForShow",e[e.WidgetOpen=4]="WidgetOpen",e[e.DomSessionManagerFlush=5]="DomSessionManagerFlush",e[e.Goals=6]="Goals",e[e.PollForRemove=7]="PollForRemove",e[e.Killswitch=8]="Killswitch"}).call(window)},function(e,s,u){(function(a){(function(){"use strict";s.__esModule=!0;var e=u(73),t=u(110),n=u(115),r=u(113),i=o=a([e.ProvideLocal("KillswitchKiller",{ctx:t.privateCtx,dependencies:"LibDestroyer"})],o);function o(e){var t=this;this.libDestroyer=e,this.trigger=r.noop,this.trigger=n.once(function(){t.libDestroyer.removeWalkMe("killswitch")})}s.KillswitchKiller=i}).call(window)}).call(this,u(72))},function(e,t,r){(function(){"use strict";t.__esModule=!0;var n=r(110);function e(e){var t=[];return e.monitor&&t.push(n.privateCtx.get("KillswitchReporter")),e.kill&&t.push(n.privateCtx.get("KillswitchKiller")),t}t.createHandlers=e,n.privateCtx.register("Handlers").dependencies("Config").asFunction(e)}).call(window)},function(e,n,r){(function(){"use strict";n.__esModule=!0;var e=r(110),t=r(120);e.privateCtx.register("ThresholdChecker").asCtor(t.ConfigThresholdChecker).dependencies("Config")}).call(window)},function(e,n){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.check=function(e,t){return t-e>this._threshold},t);function t(e){this._threshold=e.threshold?e.threshold:1e3}n.ConfigThresholdChecker=e}).call(window)},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var n=u(122),e=u(73),t=u(110),r=(i.prototype.fuse=function(){var e=this;this._fuseTime||(this._fuseTime=n.now(),o.resolve().then(function(){return e.defuse()}))},i.prototype.check=function(){var e=n.now();if(this._fuseTime&&this._thresoldChecker.check(this._fuseTime,e)){var t={duration:e-this._fuseTime};this.callHandlers(t)}},i.prototype.defuse=function(){this._fuseTime=null},i.prototype.callHandlers=function(e){for(var t=0;t<this._handlers.length;t++)this._handlers[t].trigger(e)},i=a([e.ProvideLocal("KillSwitchImpl",{ctx:t.privateCtx,dependencies:"ThresholdChecker,Handlers"})],i));function i(e,t){void 0===t&&(t=[]),this._thresoldChecker=e,this._handlers=t}s.KillSwitchImpl=r}).call(window)}).call(this,u(29),u(72))},function(e,t){(function(){"use strict";t.__esModule=!0,t.now=function e(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}}).call(window)},function(e,u,l){(function(){"use strict";u.__esModule=!0;var e=l(124),t=l(125),n=l(126),r=l(130),i=l(133),o=l(134),a=l(135),s=l(136);u.component={init:function(){},services:[{name:"TooltipControllerCreator","class":n.TooltipControllerCreator},{name:"TooltipCreator","class":r.TooltipCreator},{name:"TooltipStatesMachineConfigProvider","class":i.TooltipStatesMachineConfigProvider,dependencies:["HtmlElementsDataProvider","HostData","wmjQuery"]},{name:"TooltipVisibilityEventsProvider","class":o.TooltipVisibilityEventsProvider,dependencies:["Consts","HtmlElementsDataProvider"]}],types:[{name:"TooltipDrawerV1","class":a.TooltipDrawerV1,dependencies:["CommonUtils","ResourceManager","UiUtils","Consts","BalloonPositionProvider","PlatformsService","FeaturesManager","wmjQuery"]},{name:"TooltipV1","class":s.TooltipV1,dependencies:["ShadowCalculator","HostData"]}],functions:[{name:"TooltipActions",callback:function(){return t.TooltipActions}}]},u.register=function(){return e.registerComponentOnCtx(u.component)}}).call(window)},function(e,n,r){(function(p){(function(){"use strict";n.__esModule=!0,n.create=function t(){var e={};return r(3)(e,p),e.ctx},n.registerComponentOnCtx=function f(e){for(var t=e.services||[],n=e.types||[],r=e.functions||[],i=0,o=t;i<o.length;i++){var a=(d=o[i]).dependencies||[];p.register(d.name).asCtor(d["class"]).dependencies(a.join(","))}for(var s=0,u=n;s<u.length;s++){a=(d=u[s]).dependencies||[];p.register(d.name).asProto().asCtor(d["class"]).dependencies(a.join(","))}for(var l=0,c=r;l<c.length;l++){var d;a=(d=c[l]).dependencies||[];p.register(d.name).asFunction(d.callback).dependencies(a.join(","))}return e}}).call(window)}).call(this,r(2))},function(e,t){(function(){"use strict";t.__esModule=!0,t.TooltipActions={actions:{element:{mouseover:"mouseover.element",mouseout:"mouseout.element",focus:"focus.element",blur:"blur.element",click:"click.element"},tooltip:{show:"show.tooltip",hide:"hide.tooltip"},document:{click:"click.document",touchstart:"touchstart.document"}}}}).call(window)},function(e,n,i){(function(){"use strict";n.__esModule=!0;var r=i(127),e=(t.prototype.create=function(e,t,n){return new r.TooltipController(e,t,n)},t);function t(){}n.TooltipControllerCreator=e}).call(window)},function(e,r,i){(function(){"use strict";r.__esModule=!0;var c=i(128),d=i(129),e=i(125),t=(n.prototype.clean=function(){var e=c.privateCtx.get("wmjQuerySafe")(this.boundElement);return this.unregisterToEvents(e,this.eventsForElement),this.unregisterToEvents(e.getDocument(),this.eventsForDocument),this.stateMachine.reset(),this.tooltipDrawer.destroy()},n.prototype.show=function(){this.stateMachine.evaluate(e.TooltipActions.actions.tooltip.show)},n.prototype.hide=function(){this.stateMachine.evaluate(e.TooltipActions.actions.tooltip.hide)},n.prototype.setEvents=function(){var e=c.privateCtx.get("wmjQuery");this.registerToEvents(this.boundElement,this.eventsForElement,this.getElementActivationStateMachineFunc),this.registerToEvents(e(this.boundElement[0].ownerDocument),this.eventsForDocument,this.getDocumentActivationStateMachineFunc)},n.prototype.drawTooltip=function(){var t=this;this.tooltipDrawer.draw(this.boundElement).then(function(e){e&&t.registerToEvents(e,t.eventsForTooltip,t.getElementActivationStateMachineFunc)})},n.prototype.registerToEvents=function(e,t,n){if(t)for(var r=c.privateCtx.get("EventBinder"),i=t.length-1;0<=i;i--){var o=t[i];r.bind(e,o+this.eventPostFix,n.call(this,o))}},n.prototype.unregisterToEvents=function(e,t){if(t)for(var n=c.privateCtx.get("EventBinder"),r=t.length-1;0<=r;r--){var i=t[r];n.unbind(e,i+this.eventPostFix)}},n.prototype.getElementActivationStateMachineFunc=function(e){var t=this;return function(){t.stateMachine.evaluate(e)}},n.prototype.getDocumentActivationStateMachineFunc=function(t){var n=this,r=c.privateCtx.get("wmjQuery");return function(e){e.target==n.boundElement[0]||r.contains(n.boundElement[0],e.target)||n.stateMachine.evaluate(t)}},n.prototype.onStateChanged=function(e,t){t&&(t.shouldShow?this.drawTooltip():t.shouldHide&&this.tooltipDrawer.destroy())},n);function n(e,t,n){var r=this;this.tooltipDrawer=e,this.boundElement=t,this.events=n;var i=c.privateCtx.get("TooltipStatesMachineConfigProvider"),o=c.privateCtx.get("StatesMachineCreator");this.tooltipId=Math.floor(1e7*Math.random()),this.eventPostFix=".Walkme.Tooltip."+this.tooltipId;var a=i.getConfig(function(e,t){return r.onStateChanged(e,t)}),s=d.TooltipEventsConfiguration.get(n);this.eventsForElement=s.eventsForElement,this.eventsForDocument=s.eventsForDocument,this.eventsForTooltip=s.eventsForTooltip,this.stateMachine=o.create(a);for(var u=0;u<a.stateMachineInitialActions.length;u++){var l=a.stateMachineInitialActions[u];l.shouldSimulateAction(this.boundElement)&&this.stateMachine.evaluate(l.action)}}r.TooltipController=t}).call(window)},function(e,n,r){(function(){"use strict";n.__esModule=!0;var e=r(124);n.create=e.create;var t=e.create();n.privateCtx=t}).call(window)},function(e,n,r){(function(){"use strict";n.__esModule=!0;var s=r(128),u=r(125),e=(t.get=function(e){var t=s.privateCtx.get("Consts"),n=s.privateCtx.get("PlatformDI").isMobileWeb(),r=[],i=[],o=[],a=n?[u.TooltipActions.actions.element.click]:[u.TooltipActions.actions.element.mouseover,u.TooltipActions.actions.element.mouseout];return e[t.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat(a),o=o.concat(a),n&&(i=i.concat([u.TooltipActions.actions.document.click,u.TooltipActions.actions.document.touchstart]))),!n&&e[t.TOOLTIPS_ACTIVATION_MODES.Focus]&&(r=r.concat([u.TooltipActions.actions.element.focus,u.TooltipActions.actions.element.blur])),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}},t);function t(){}n.TooltipEventsConfiguration=e}).call(window)},function(e,n,r){(function(){"use strict";n.__esModule=!0;var i=r(131),e=(t.prototype.create=function(e,t,n,r){return new i.Tooltip(e,t,n,r)},t);function t(){}n.TooltipCreator=e}).call(window)},function(e,r,o){(function(){"use strict";r.__esModule=!0;var i=o(132),t=o(128),e=(n.prototype.show=function(){var n=t.privateCtx.get("wmjQuery").Deferred();return this.balloon.Show(!1,function(e,t){n.resolve(t)}),n.promise()},n.prototype.destroy=function(){var e=t.privateCtx.get("wmjQuery").Deferred();return this.balloon.destroy(!1,function(){e.resolve()}),e.promise()},n);function n(e,t,n,r){this.balloon=i.TooltipBalloonAdapter.createBalloon({element:e,text:t,styling:n,drawingOptions:r})}r.Tooltip=e}).call(window)},function(e,t,n){(function(){"use strict";t.__esModule=!0;var a=n(128),e=(s.createBalloon=function(e){var t=a.privateCtx.get("SiteConfigManager").get(),n=s.getBalloonSettings(t,e.styling),r=a.privateCtx.get("wmjQuery").extend(!0,{},e.drawingOptions);r.balloonSettings=n;var i=a.privateCtx.create("TooltipDrawerV1",r),o={element:e.element,forceEmbedBalloonInIframe:!1,positionHelper:a.privateCtx.get("PositionHelper"),stepSettings:r.stepSettings||{},text:{title:"",content:e.text,subText:""},data:{type:a.privateCtx.get("Consts").STEP_TYPE.Normal},configuration:n,logger:a.privateCtx.get("Logger"),drawer:i,siteConfig:t,bindButtonsFunc:a.privateCtx.get("BalloonButtonsEventsBinder").addButtonEventsToBalloon};return a.privateCtx.create("Balloon",o)},s.getBalloonSettings=function(e,t){var n=a.privateCtx.get("JsonUtils").clone(e.BalloonSettings);return s.setTooltipStyle(n,t),n.Vibrate=!1,s.disableTooltipAnimation(n),n},s.setTooltipStyle=function(e,t){e.Color=t.backColor,e.BorderColor=t.borderColor,e.ContentColor=t.textColor,e.BalloonBorderWidth=1},s.disableTooltipAnimation=function(e){e.Animation&&(e.Animation={Id:a.privateCtx.get("Consts").ANIMATION_TYPES.None,InitCSS:{display:"block"},MetaData:{},Options:{},Properties:{}})},s);function s(){}t.TooltipBalloonAdapter=e}).call(window)},function(e,n,i){(function(){"use strict";n.__esModule=!0;var r=i(125),e=(t.prototype.getConfig=function(e){var t=this.baseTransitions;return t=(t=t.concat(this.mouseEventsTransitions)).concat(this.focusEventsTransitions),{initState:this.states.hidden,transitions:t,timedOutTransitions:this.timedOutTransitions,globalActionFlags:this.globalActionFlags,defaultTransitionValuesToReturn:this.defaultTransitionValuesToReturn,onStateChangedCallback:e,stateMachineInitialActions:this.stateMachineInitialActions}},t.prototype.initStateMachineInitialActions=function(){var t=this;this.stateMachineInitialActions=[{shouldSimulateAction:function(e){return t.htmlElementsDataProvider.isInput(e)&&t.wmjQuery(e).is(":focus")},action:r.TooltipActions.actions.element.focus}],this.hostData.isIEOlderThan(9)||this.stateMachineInitialActions.push({shouldSimulateAction:function(e){return t.wmjQuery(e).is(":hover")},action:r.TooltipActions.actions.element.mouseover})},t);function t(e,t,n){this.htmlElementsDataProvider=e,this.hostData=t,this.wmjQuery=n,this._flags={mouseInside:1,focused:2},this.states={hidden:"hidden",delayShow:"delayShow",visible:"visible",delayHide:"delayHide"},this.globalActionFlags={},this.globalActionFlags[r.TooltipActions.actions.element.mouseover]={addFlag:[this._flags.mouseInside]},this.globalActionFlags[r.TooltipActions.actions.element.mouseout]={removeFlag:[this._flags.mouseInside]},this.globalActionFlags[r.TooltipActions.actions.element.focus]={addFlag:[this._flags.focused]},this.globalActionFlags[r.TooltipActions.actions.element.blur]={removeFlag:[this._flags.focused]},this.defaultTransitionValuesToReturn=[{fromState:this.states.delayShow,toState:this.states.visible,valueToReturn:{shouldShow:1}},{fromState:this.states.delayHide,toState:this.states.hidden,valueToReturn:{shouldHide:1}},{fromState:this.states.visible,toState:this.states.hidden,valueToReturn:{shouldHide:1}},{fromState:this.states.hidden,toState:this.states.visible,valueToReturn:{shouldShow:1}}],this.timedOutTransitions=[{fromState:this.states.delayShow,timeout:300,toState:this.states.visible},{fromState:this.states.delayHide,timeout:300,toState:this.states.hidden}],this.baseTransitions=[{fromState:this.states.hidden,onAction:r.TooltipActions.actions.tooltip.show,toState:this.states.delayShow},{fromState:this.states.delayHide,onAction:r.TooltipActions.actions.tooltip.show,toState:this.states.visible},{fromState:this.states.visible,onAction:r.TooltipActions.actions.tooltip.hide,toState:this.states.hidden,ifNotFlagged:[this._flags.focused,this._flags.mouseInside]},{fromState:this.states.delayShow,onAction:r.TooltipActions.actions.tooltip.hide,toState:this.states.hidden}],this.mouseEventsTransitions=[{fromState:this.states.hidden,onAction:r.TooltipActions.actions.element.mouseover,toState:this.states.delayShow},{fromState:this.states.delayShow,onAction:r.TooltipActions.actions.element.mouseout,toState:this.states.hidden},{fromState:this.states.visible,onAction:r.TooltipActions.actions.element.mouseout,toState:this.states.delayHide,ifNotFlagged:[this._flags.focused]},{fromState:this.states.delayHide,onAction:r.TooltipActions.actions.element.mouseover,toState:this.states.visible},{fromState:this.states.hidden,onAction:r.TooltipActions.actions.element.click,toState:this.states.visible},{fromState:this.states.visible,onAction:r.TooltipActions.actions.element.click,toState:this.states.hidden},{fromState:this.states.visible,onAction:r.TooltipActions.actions.document.click,toState:this.states.hidden,ifNotFlagged:[this._flags.focused]},{fromState:this.states.visible,onAction:r.TooltipActions.actions.document.touchstart,toState:this.states.hidden,ifNotFlagged:[this._flags.focused]}],this.focusEventsTransitions=[{fromState:this.states.hidden,onAction:r.TooltipActions.actions.element.focus,toState:this.states.visible},{fromState:this.states.visible,onAction:r.TooltipActions.actions.element.blur,toState:this.states.hidden,ifNotFlagged:[this._flags.mouseInside]},{fromState:this.states.delayShow,onAction:r.TooltipActions.actions.element.focus,toState:this.states.visible},{fromState:this.states.delayHide,onAction:r.TooltipActions.actions.element.focus,toState:this.states.visible}],this.initStateMachineInitialActions()}n.TooltipStatesMachineConfigProvider=e}).call(window)},function(e,n){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.getEventsByElement=function(e){var t={};return t[this.consts.TOOLTIPS_ACTIVATION_MODES.Mouse]=!0,this.htmlElementsDataProviderMock.isInput(e)&&(t[this.consts.TOOLTIPS_ACTIVATION_MODES.Focus]=!0),t},t);function t(e,t){this.consts=e,this.htmlElementsDataProviderMock=t}n.TooltipVisibilityEventsProvider=e}).call(window)},function(t,e,n){(function(){var v=n(128).privateCtx;n(136),t.exports={TooltipDrawerV1:function e(r,i,o,s,a,n,u,l,c){var p,d=v.create("WalkmeOOP",this),f=[];d.Override("addBalloonDiv",function(e,t){var n=r.createElementInDocument(e,t[0].ownerDocument);return u.isFeatureEnabled("accessibility")&&(focusableElements=n.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),r.addTabIndex(focusableElements),focusableElements.on("focus",function(){l(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){l(this).css({outline:"none","outline-offset":"0px"})})),o.setLangAttribute(n),n.css("display","none"),n}),d.Override("decideWhereToPop",function(e,t,n,r,i,o){return c.tooltipPosition!=undefined?a.getPredefinedPosition(e,t,r,i,c.tooltipPosition,c.tooltipPositionOffset):a.findBestPosition(e,t,r,i,c.directionToAvoid)}),d.Override("loadResources",function(e,t){var n=p.balloonSettings().FontsData;n?i.fonts(n,e,t,t):t&&t()}),d.Override("getArrowsColors",function(e){var t=p.balloonSettings();return{innerArrow:t.Color,outterArrow:t.BorderColor}}),d.Override("fixArrows",function(e){var t=e.balloonDiv,n=e.arrowsDivs,r=e.result,i=e.isInCaptureMode;e.isQuirksMode,p.balloonSettings().direction;r.positionType==s.POSITION_TYPE.Left||r.positionType==s.POSITION_TYPE.Right?function f(e,t,n,r,i){e.show();var o=p.arrowBaseWidth(),a=parseFloat(t[0].css("top")),s=parseFloat(e.css("top")),u=e[0]?e[0].offsetHeight:0,l=a-s,c=u;if(e.hide(),c-l<o&&l<c){var d=s-(c-l);e.css("top",d+"px")}}(t,n):i&&r.positionType==s.POSITION_TYPE.Top&&function o(e){e[0].css("border-top-color",p.balloonSettings().Color)}(n),e.isQuirksMode&&function a(e){var t,n=l(".walkme-tooltip-arrow-inner",e.parent()),r=l(".walkme-tooltip-arrow-outer",e.parent());if(n.hasClass("walkme-tooltip-arrow-right"))t="right";else{if(!n.hasClass("walkme-tooltip-arrow-left"))return;t="left"}n.css("border-"+t+"-color",p.balloonSettings().Color),r.css("border-"+t+"-color",p.balloonSettings().BorderColor)}(t)}),d.Override("fixQuirksMode",function(e){}),d.Override("finalizeArrowsPosition",function(e,t,n){switch(e){case s.POSITION_TYPE.Top:t.top--;break;case s.POSITION_TYPE.Bottom:t.top++;break;case s.POSITION_TYPE.Left:t.left--;break;case s.POSITION_TYPE.Right:t.left++}}),d.Override("handleWiderElement",function(e,t){return mtjQuery(".walkme-tooltip-content",t).css("width",e+"px"),t.css("width","auto"),{width:t.width(),height:t.height()}}),d.Override("generateIdForBalloon",function t(e){return"walkme-tooltip-"+c.itemId}),d.Override("generateClassesForBallon",function g(e,t,n){return f}),d.Override("generateClassesForArrows",function h(e,t,n){return["walkme-custom-tooltip-arrow","walkme-custom-tooltip-arrow-"+t,"walkme-custom-tooltip-arrow-"+e,"walkme-custom-tooltip-arrow-"+e+"-"+t,"walkme-custom-tooltip-item-"+c.itemId]}),function m(){d.ExtendsInstance(v.create("BaseBalloonDrawer",c));var e=c.balloonSettings.minPopupWidth?c.balloonSettings.minPopupWidth:300;f=c.cssClasses||[],p=d._base,function t(){n.getCurrentPlatform()==s.PLATFORM.MobileWeb&&p.defaultMaxWidth(230)}(),p.balloonClass("TooltipV1"),p.minWidth(0),p.minPopupWidth(e),p.arrowHeight(5),p.arrowBaseWidth(9),p.hasBorder(!1),p.shouldScrollToElement(!1),p.balloonTitleSelector(".walkme-tooltip-content"),p.balloonContentSelector(".walkme-tooltip-content")}.apply(null,arguments)}}}).call(window)},function(e,t,n){(function(){var s=n(128).privateCtx;e.exports={TooltipV1:function u(t,n,e){var r,i=s.create("WalkmeOOP",this),o=i.Prop.Public("contentMargin",15);i.Override("manipulationsForInlineCss",function(e){if(!n.isIE(8,"lte"))r.balloonSettings()}),i.Override("createTemplateData",function(){var e=r.createTemplateData();return e.outerDiv=r.getCustomDivHtml("inner-div"),e.colors.xBtn=r.balloonSettings().XButtonColor,e.top={minHeight:30,textAlign:e.direction.side,content:{sideMargin:o(),oppositeSideMargin:o()-2}},e.shadow=t.calculate(r.balloonSettings().ShadowType,r.balloonSettings().ShadowLevel,r.balloonSettings().ShadowColor),e.isNotIe7=!n.isIEBrowser(7),e}),i.Override("createHtmlTemplate",function(){return"<div class='walkme-tooltip-outer-div walkme-tooltip-v1' style='{{{cssReset}}} width: auto; position: absolute; direction: {{direction.basic}};'><div class='walkme-tooltip-mid-div' style='{{{cssReset}}} direction: {{direction.basic}}; position: relative; -webkit-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); -moz-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); font-family: walkme-opensans; border-radius:3px; overflow: hidden;'><div class='walkme-tooltip-inner-div' style='{{{cssReset}}} direction: {{direction.basic}}; background-color:{{colors.mainBg}}; border:{{border.size}} solid {{colors.border}}; border-radius: 3px; border-{{position.side}}: none; overflow: hidden;'>{{{outerDiv}}}<div class='walkme-tooltip-top-div' style='{{{cssReset}}} direction: {{direction.basic}}; background-color:{{colors.mainBg}}; border-radius: 3px;'><div class='walkme-tooltip-content-wrapper' style='{{{cssReset}}} direction: {{direction.basic}};'>{{#data.content}}<div class='walkme-tooltip-content' style='{{{cssReset}}} direction: {{direction.basic}}; text-align: {{direction.side}}; padding: 9px 9px 8px 9px; line-height: 18px; font-size:12px; color:{{colors.content}}; overflow: auto;zoom: 1;'>{{{data.content}}}</div>{{/data.content}}</div></div></div></div></div>"}),function a(){i.ExtendsInstance(s.create("BaseBalloon",e)),r=i._base}.apply(null,arguments)}}}).call(window)},function(o,e,a){(function(i){(function(){var e=a(138),t={init:function n(){i.register("ComponentAPI").dependencies("AccessibilityGeneralManager, UserAttributes, EndUserDataEvaluator").asCtor(function(e,t,n){this.accessibilityGeneralManager=e,this.userAttributes=t,this.endUserDataEvaluator=n})},services:["AccessibilityGeneralManager","UserAttributes","EndUserDataEvaluator"],types:[]};!function r(){a(139),a(140),a(141),a(142),a(143),a(144),a(145),a(146)}(),a(69).registerApi(t,e),o.exports=t}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(138).register("AccessibilityGeneralManager").asCtor(function i(){var t;function e(e){t=e}this.reset=function n(){e({})},this.set=e,this.getValue=function r(e){return t[e]}})}).call(window)},function(e,t,n){(function(){n(138).register("UserAttributes").asCtor(function e(t){this.init=function i(e){return n=t.reduce(e,{},function(e,t){return e[t.Name]=t,e}),r()},this.getAll=r,this.getByName=function o(e){return n[e]||{}};var n={};function r(){return n}}).dependencies("ArrayUtils")}).call(window)},function(e,t,n){(function(){n(138).register("CookieEvaluator").asCtor(function e(t){this.evaluate=function n(e){return t.getWindowCookie(e,"")}}).dependencies("CommonUtils")}).call(window)},function(e,t,n){(function(){n(138).register("JQueryEvaluator").asCtor(function e(t){this.evaluate=function n(e){return t.getjQueryElementText(e)}}).dependencies("JQueryElementFinder")}).call(window)},function(e,t,r){(function(){r(138).register("TextEvaluator").asCtor(function n(e){this.evaluate=function t(e){return e}}).dependencies("UserAttributes")}).call(window)},function(e,t,n){(function(){n(138).register("VariableEvaluator").asCtor(function e(t){this.evaluate=function n(e){return t.getWindowVar(e)}}).dependencies("CommonUtils")}).call(window)},function(e,t,n){(function(){n(138).register("WalkMeDataEvaluator").asCtor(function e(t){this.evaluate=function n(e){return t.getData(e)}}).dependencies("ClientStorageManager")}).call(window)},function(e,t,n){(function(){n(138).register("EndUserDataEvaluator").asCtor(function e(t,n,r,i,o,a,s){var u={};this.evaluate=function l(e,t){return function r(e){var t=function n(e){return e===undefined||"undefined"===e||null===e||"function"==typeof e?"":e}(e);return(t=s.encodeText(t)).toString()}(u[e]&&u[e].evaluate(t))},function c(){var e=t.USER_ATTRIBUTES;u[e.VARIABLE]=o,u[e.WALK_ME_DATA]=a,u[e.COOKIE]=n,u[e.JQUERY]=r,u[e.TEXT]=i}.apply(this,arguments)}).dependencies("Consts, CookieEvaluator, JQueryEvaluator, TextEvaluator, VariableEvaluator, WalkMeDataEvaluator, CommonUtils")}).call(window)},function(o,e,a){(function(i){(function(){var e=a(148),t={init:function n(){i.register("ComponentAPI").dependencies("ElementMarkerManager").asCtor(function(e){this.markElements=e.markElements,this.unmarkElements=e.unmarkElements})},services:["ElementMarkerManager"],types:[]};!function r(){a(149),a(150)}(),a(69).registerApi(t,e),o.exports=t}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(l){(function(){var s=n(148);s.register("ElementMarker").asCtor(function u(n,c,d){var r=this,i=s.has("ElementsTether")&&s.get("ElementsTether"),f="3",p="#3B9DD7",g="rgba(59,157,215,0.15)",h="px",m=undefined,o=undefined;r.mark=function t(){return function e(){return new l(function(u,l){return n.measure(function(){try{var e=d.getBoundingClientRect();if(!function r(e){return!(0===e.top&&0===e.left&&0===e.height&&0===e.width)}(e))return l();var t=function i(){var e;"object"==typeof d?e=d[0]||d:"string"==typeof d&&(e=document.querySelector(d));for(;"object"==typeof e&&"body"!==e.nodeName.toLowerCase();){if("fixed"===window.getComputedStyle(e).getPropertyValue("position").toLowerCase())return!0;e=wmjQuery(e).parent().get(0)}return!1}(),n=function o(e){var t={top:0,left:0};if(!e){var n=d.ownerDocument,r=n!=c.document;t.top=(r?n.documentElement.scrollTop:c.scrollY||c.pageYOffset)||0,t.left=(r?n.documentElement.scrollLeft:c.scrollX||c.pageXOffset)||0}return t}(t);return function a(e,t,n,r){e.position=t?"fixed":"absolute",e.outline="solid "+p+" "+f+h,e.zIndex="2147483647",e["background-color"]=g,e["pointer-events"]="none",e.top=n.top+r.top+h,e.left=n.left+r.left+h,e.height=n.height+h,e.width=n.width+h}((m=m||document.createElement("DIV")).style,t,e,n),m.className="walkme-marker walkme-to-remove",u()}catch(s){return l()}})})}().then(function(){return function t(e){return n.mutate(function(){return e.ownerDocument.body.appendChild(m),i&&(i.detach(o),o=i.attach(m,e)),r})}(d)})},r.unmark=function e(){return n.mutate(function(){return m&&(i&&i.detach(o),wmjQuery(m).parent().get(0).removeChild(m),m=undefined,d=undefined),r})},function a(){}.apply(null,arguments)}).dependencies("DOMSessionManager, win").asProto()}).call(window)}).call(this,n(29))},function(e,t,n){(function(d){(function(){var c=n(148);c.register("ElementMarkerManager").asCtor(function e(n,r,i,o){var a=this,s=[];function u(){var e=n.map(s,function(e){return e.mark()});return d.all(e).then(function(){})}a.markElements=function l(e){var t=n.map(e,function(e){return c.create("ElementMarker",e).mark()["catch"](function(){return null})});return a.unmarkElements().then(function(){return d.all(t).then(function(e){r.addEventListener(i.WINDOW_EVENTS.Resize,o.debounce(u,60));var t=n.filter(e,function(e){return null!==e});return s=s.concat(t)})})},a.unmarkElements=function t(){var e=n.map(s,function(e){return e.unmark()});return d.all(e).then(function(){s=[],r.removeEventListener(i.WINDOW_EVENTS.Resize,u)})}}).dependencies("ArrayUtils, win, Consts, WalkMeDebounce")}).call(window)}).call(this,n(29))},function(i,e,o){(function(){var t=o(152),n={init:function r(){var e=t.get("OverlayManager");n.create=e.create},services:["OverlayManager"],types:[]};!function e(){o(153)}(),o(69).registerApi(n,t),i.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(152).register("OverlayManager").asCtor(function e(n){var o,a,s=[];function r(e){(o=o||function t(){return n.parseElementAsJquery('<div id="walkme-overlay-all" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0;"/>')}()).css({zIndex:e.zIndex,backgroundColor:e.color||"#000",opacity:e.opacity||.7})}function u(e){r(e),o.insertBefore(e.element)}function l(e,t){return e.zIndex>t.zIndex||e.zIndex==t.zIndex&&e.index>t.index}this.create=function(e,t,n){var i={element:e,color:n,opacity:t};return{remove:function(){!function n(e){var t=wmjQuery.inArray(e,s);-1<t&&s.splice(t,1)}(i),i==a&&((a=function r(){if(s.length){for(var e=s[0],t=1;t<s.length;t++)l(s[t],e)&&(e=s[t]);return e}}())?u(a):(o.remove(),o=null))},show:function(){i.zIndex=e[0].style.zIndex,i.index=e.index(),wmjQuery.inArray(i,s)<0&&s.push(i),a&&a!=i&&!l(i,a)||u(a=i)},getOverlayElement:function(){return o||r(i),o}}}}).asSingleton().dependencies("DomManager")}).call(window)},function(o,e,a){(function(i){(function(){var t=a(155),e={init:function n(){i.register("ComponentAPI").asCtor(function(){this.createScrollObserver=function(e){return t.create("ScrollObserver",e)}})},services:[],types:["ScrollObserver"]};!function r(){a(156)}(),a(69).registerApi(e,t),o.exports=e}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(C){(function(){n(155).register("ScrollObserver").asCtor(function T(e,t,n,r,i){var o,a,s,u,l,c,d,f,p;function g(){d=!0,c(),t.mutate(function(){h().then(function(e){var n=e-a;wmjQuery.each(l,function(e,t){t.style.transform="translateY("+n+"px)",t.style.webkitTransform="translateY("+n+"px)",t.style.msTransform="translateY("+n+"px)",t.style.mozTransform="translateY("+n+"px)"})})})}function h(){return t.measure(function(){return p?u[0].getBoundingClientRect().top:u.offset().top})}function m(e,t){wmjQuery.each(e,function(e,n){wmjQuery.each(l,function(e,t){t.style.display=n.isIntersecting?"block":"none"})})}this.observe=function v(){f||(c=r.debounce(function(){d=!1},800),function e(){return t.measure(function(){return u.closest(":scrollable")})}().then(function(e){var t={root:(s=e).is("html")||s.is("body")?null:s[0],rootMargin:"0px",threshold:0};o=new C(m,t),s.on("scroll",g),o.observe(u[0])}))},this.updateElements=function y(e){h().then(function(e){a=e}),l=e},this.destroy=function S(){!function e(){s&&s.off("scroll",g),o&&o.disconnect(),f=!0}(),o=l=u=s=a=null},this.isScrolling=function E(){return d},function w(){p=n.isFeatureEnabled(e.FEATURES.NoScrollTop),u=i.capturedElement,l=i.elements,h().then(function(e){a=e}),f=d=!1}()}).asProto().dependencies("Consts, DOMSessionManager, FeaturesManager, WalkMeDebounce")}).call(window)}).call(this,n(67).IntersectionObserver)},function(e,t,n){(function(ln,cn){(function(){var r,e,t,n,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y,S,E,w,T,C,b,I,_,A,P,k,D,x,N,O,L,F,M,R,B,U,V,W,j,G,H,Y,Q,z,q,K,J,X,$,Z,ee,te=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ne=(re.prototype.get=function(){if(null===this.settings){var e=this.wmInternals.ctx.get("SiteConfigManager").get(),t=e&&e.Custom&&e.Custom.insightsConfig||{},n=this.getEnvironment();this.settings=t[n]||{}}return this.settings},re.prototype.getEnvironment=function(){var e=this.wmInternals.captureEnvironment;return e!==undefined?e:this.wmInternals.ctx.get("SettingsFile").getSettingsFile().Environment},re);function re(e){this.wmInternals=e,this.settings=null}function ie(e){this.buffer=[],this.reduceFn=e.reduceArray}function oe(e){this.buffer={},this.runningId=0,this.getDictionaryKeys=e.getDictionaryKeys}function ae(e,t,n,r){this.buffer={},this.inputMapper=n,this.outputMapper=r,this.getDictionaryKeys=e.getDictionaryKeys,this.mapFn=t.map,this.reduceFn=t.reduceArray}function se(e){this.jsonUtils=e}function ue(){}function le(e,t){this.callback=t,this.timeoutMs=e}function ce(e,t,n,r,i){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.expiresSeconds=e.expiresSeconds||600,this.storageTypesEnum=n.STORAGE_TYPE,this.clientStorageManager=t,this.buffer=r,this.jsonUtils=i}function de(e,t,n,r,i){return b.call(this,e,t,n,r,i)||this}function fe(e,t,n,r,i){return P.call(this,e,t,n,r,i)||this}function pe(e,t,n,r,i){return N.call(this,e,t,n,r,i)||this}function ge(e,t){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.buffer=t}function he(e,t,n){var r=U.call(this,e,t)||this;return r.utils=n,r}function me(e,t,n,r,i){return G.call(this,e,r,i)||this}function ve(e,t,n,r,i){return z.call(this,e,r,i)||this}function ye(e,t,n,r,i){return X.call(this,e,r,i)||this}function Se(e){this.defaultConfig={healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r",sendingIntervalMs:250,maxRetries:3,isLogFailed:!1,maxStaticDataLength:0,maxDynamicDataLength:50,channelType:"AjaxChannel",baseUrl:e.get()}}ln&&ln.register("DataCollectionSettings").asCtor(ne).dependencies("WmInternals"),e=Ft=Ft||{},t=e.Storage||(e.Storage={}),ie.prototype.getStorageType=function(){return"ArrayBuffer"},ie.prototype.push=function(e){this.buffer.push(e)},ie.prototype.pull=function(){return this.buffer.shift()},ie.prototype.peek=function(){return this.buffer[0]},ie.prototype.count=function(){return this.buffer.length},ie.prototype.clear=function(){this.buffer=[]},ie.prototype.dataSize=function(){return this.reduceFn(this.buffer,function(e,t){return e+t.length},0)},ie.prototype.isEmpty=function(){return 0===this.count()},ie.prototype.getRawData=function(){return this.buffer},ie.prototype.set=function(e){this.pushAll(e)},ie.prototype.pushAll=function(e){if(wmjQuery.isArray(e))for(var t=0,n=e.length;t<n;t++)this.push(e[t])},ie.prototype.pullAll=function(){var e=this.buffer;return this.clear(),e},n=ie,t.ArrayBuffer=n,i=Ft=Ft||{},o=i.Storage||(i.Storage={}),oe.prototype.getStorageType=function(){return"DictionaryBuffer"},oe.prototype.generateId=function(){return""+ ++this.runningId},oe.prototype.push=function(e){var t=this.generateId();return this.buffer[t]=e,t},oe.prototype.pull=function(e){var t=this.buffer[e];return delete this.buffer[e],t},oe.prototype.peek=function(e){return this.buffer[e]},oe.prototype.count=function(){return this.getAllIds().length},oe.prototype.clear=function(){this.buffer={}},oe.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=this.buffer[t].length);return e},oe.prototype.isEmpty=function(){return 0===this.count()},oe.prototype.getRawData=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&e.push(this.peek(t));return e},oe.prototype.set=function(e){return this.pushAll(e)},oe.prototype.pushAll=function(e){var t=[];if(wmjQuery.isArray(e))for(var n=0,r=e.length;n<r;n++)t.push(this.push(e[n]));return t},oe.prototype.pullAll=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++)t.push(this.pull(e[n]));else for(var i in this.buffer)this.buffer.hasOwnProperty(i)&&t.push(this.pull(i));return t},oe.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},a=oe,o.DictionaryBuffer=a,s=Ft=Ft||{},u=s.Storage||(s.Storage={}),ae.prototype.getStorageType=function(){return"ReduceBuffer"},ae.prototype.count=function(){return this.getAllIds().length},ae.prototype.clear=function(){this.buffer={}},ae.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=t.length+(""+this.buffer[t]).length);return e},ae.prototype.isEmpty=function(){return 0===this.count()},ae.prototype.getRawData=function(){return this.buffer},ae.prototype.set=function(e){this.buffer=e},ae.prototype.pushAll=function(e){var t=this,n=this.mapFn(e,function(e){return t.inputMapper.convert(e)}),r=this.reduceFn(n,function(e,t){return e[t]=(e[t]||0)+1,e},this.buffer);this.set(r)},ae.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},ae.prototype.pullAll=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e.push(this.format(t)),delete this.buffer[t]);return e},ae.prototype.format=function(e){return this.outputMapper.convert({type:e,count:this.buffer[e]})},l=ae,u.ReduceBuffer=l,c=Ft=Ft||{},d=c.Manipulation||(c.Manipulation={}),se.prototype.convert=function(e){var t=this.jsonUtils.secureEvalJSON(e);return t.data.type+":"+t.type},f=se,d.EventTypeMapper=f,p=Ft=Ft||{},g=p.Manipulation||(p.Manipulation={}),ue.prototype.convert=function(e){return{message:"Event failed to send [type "+e.type+", count "+e.count+"]",extraData:{evType:e.type,count:e.count}}},h=ue,g.EventLogMapper=h,ln&&ln.register("EventTypeMapper").asCtor(Ft.Manipulation.EventTypeMapper).dependencies("JsonUtils"),ln&&ln.register("EventLogMapper").asCtor(Ft.Manipulation.EventLogMapper),ln&&ln.register("ArrayBuffer").asCtor(Ft.Storage.ArrayBuffer).asProto().dependencies("ArrayUtils"),ln&&ln.register("DictionaryBuffer").asCtor(Ft.Storage.DictionaryBuffer).asProto().dependencies("DictionaryUtils"),ln&&ln.register("ReduceBuffer").asCtor(Ft.Storage.ReduceBuffer).asProto().dependencies("DictionaryUtils,ArrayUtils,EventTypeMapper,EventLogMapper"),m=Ft=Ft||{},le.prototype.start=function(e){var t=this;if(!this.enabled){this.enabled=!0;var n=e||this.timeoutMs;this.timerHandle=ln.get("TimerManager").setWalkmeTimeout(function(){t.onTick()},n)}},le.prototype.onTick=function(){this.enabled=!1,this.callback()},le.prototype.stop=function(){this.timerHandle&&(this.timerHandle.clear(),this.timerHandle=null),this.enabled=!1},le.prototype.restart=function(){this.stop(),this.start()},le.prototype.isEnabled=function(){return this.enabled},y=le,m.SimpleTimer=y,(v=m.BrowserConnectionLimit||(m.BrowserConnectionLimit={}))[v.Chrome=6]="Chrome",ln&&ln.register("EventsCollectorAuditingEnabledIndicator").asCtor(function Jt(e,t){this.isEnabled=function n(){return e.isFeatureEnabled()&&t.shouldAudit()}}).dependencies("EventsCollectorFeatureEnabledIndicator, AuditingEnabledIndicator"),S=Ft=Ft||{},E=S.Storage||(S.Storage={}),ce.prototype.save=function(){var e=this.jsonUtils.toJSON(this.getRawData());this.clientStorageManager.saveData(this.keyName,e,this.expiresSeconds)},ce.prototype.load=function(){this.buffer.clear();var e=this.clientStorageManager.getData(this.keyName);if(e)try{this.set(this.jsonUtils.secureEvalJSON(e))}catch(t){this.buffer.clear()}},ce.prototype.count=function(){return this.buffer.count()},ce.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},ce.prototype.dataSize=function(){return this.buffer.dataSize()},ce.prototype.maxSize=function(){var e;switch(this.clientStorageManager.getStorageType().type){case this.storageTypesEnum.JStorage:case this.storageTypesEnum.CrossDomainLocalStorage:case this.storageTypesEnum.CrossDomain:e=2621440;break;case this.storageTypesEnum.Extension:case this.storageTypesEnum.ProxyIframe:e=524288;break;case this.storageTypesEnum.CrossDomainCookies:case this.storageTypesEnum.Cookie:default:e=2048}return.5*e},ce.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},ce.prototype.isEmpty=function(){return 0===this.count()},ce.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},ce.prototype.getRawData=function(){return this.buffer.getRawData()},w=ce,E.BaseClientStorageBuffer=w,T=Ft=Ft||{},C=T.Storage||(T.Storage={}),b=C.BaseClientStorageBuffer,te(de,b),de.prototype.getStorageType=function(){return"ClientStorageArrayBuffer::"+this.getBuffer().getStorageType()},de.prototype.getBuffer=function(){return this.buffer},de.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},de.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},de.prototype.peek=function(){return this.getBuffer().peek()},de.prototype.set=function(e){this.getBuffer().set(e)},de.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},de.prototype.pullAll=function(){return this.getBuffer().pullAll()},I=de,C.ClientStorageArrayBuffer=I,_=Ft=Ft||{},A=_.Storage||(_.Storage={}),P=A.BaseClientStorageBuffer,te(fe,P),fe.prototype.getStorageType=function(){return"ClientStorageDictionaryBuffer::"+this.buffer.getStorageType()},fe.prototype.getBuffer=function(){return this.buffer},fe.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},fe.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},fe.prototype.peek=function(e){return this.getBuffer().peek(e)},fe.prototype.set=function(e){return this.getBuffer().set(e)},fe.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},fe.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},k=fe,A.ClientStorageDictionaryBuffer=k,D=Ft=Ft||{},x=D.Storage||(D.Storage={}),N=x.BaseClientStorageBuffer,te(pe,N),pe.prototype.getStorageType=function(){return"ClientStorageReduceBuffer::"+this.getBuffer().getStorageType()},pe.prototype.getBuffer=function(){return this.buffer},pe.prototype.set=function(e){this.getBuffer().set(e)},pe.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},pe.prototype.pullAll=function(){return this.getBuffer().pullAll()},O=pe,x.ClientStorageReduceBuffer=O,L=Ft=Ft||{},F=L.Storage||(L.Storage={}),ge.prototype.count=function(){return this.buffer.count()},ge.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},ge.prototype.dataSize=function(){return this.buffer.dataSize()},ge.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},ge.prototype.isEmpty=function(){return 0===this.count()},ge.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},ge.prototype.getRawData=function(){return this.buffer.getRawData()},M=ge,F.BaseStorageBuffer=M,R=Ft=Ft||{},B=R.Storage||(R.Storage={}),U=B.BaseStorageBuffer,te(he,U),he.prototype.save=function(){var e=this.utils.toJSON(this.getRawData());sessionStorage[this.keyName]=e},he.prototype.load=function(){this.buffer.clear();var e=sessionStorage[this.keyName];if(e)try{this.set(this.utils.secureEvalJSON(e))}catch(t){this.buffer.clear()}},he.prototype.maxSize=function(){return 2621440},V=he,B.BaseSessionStorageBuffer=V,W=Ft=Ft||{},j=W.Storage||(W.Storage={}),G=j.BaseSessionStorageBuffer,te(me,G),me.prototype.getStorageType=function(){return"SessionStorageArrayBuffer::"+this.getBuffer().getStorageType()},me.prototype.getBuffer=function(){return this.buffer},me.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},me.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},me.prototype.peek=function(){return this.getBuffer().peek()},me.prototype.set=function(e){this.getBuffer().set(e)},me.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},me.prototype.pullAll=function(){return this.getBuffer().pullAll()},H=me,j.SessionStorageArrayBuffer=H,Y=Ft=Ft||{},Q=Y.Storage||(Y.Storage={}),z=Q.BaseSessionStorageBuffer,te(ve,z),ve.prototype.getStorageType=function(){return"SessionStorageDictionaryBuffer::"+this.buffer.getStorageType()},ve.prototype.getBuffer=function(){return this.buffer},ve.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},ve.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},ve.prototype.peek=function(e){return this.getBuffer().peek(e)},ve.prototype.set=function(e){return this.getBuffer().set(e)},ve.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},ve.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},q=ve,Q.SessionStorageDictionaryBuffer=q,K=Ft=Ft||{},J=K.Storage||(K.Storage={}),X=J.BaseSessionStorageBuffer,te(ye,X),ye.prototype.getStorageType=function(){return"SessionStorageReduceBuffer::"+this.getBuffer().getStorageType()},ye.prototype.getBuffer=function(){return this.buffer},ye.prototype.set=function(e){this.getBuffer().set(e)},ye.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},ye.prototype.pullAll=function(){return this.getBuffer().pullAll()},$=ye,J.SessionStorageReduceBuffer=$,Z=Ft=Ft||{},Se.generateCtxName=function(e){return"DataSender"+e},Se.prototype.generateEventsSender=function(e){if(!e.ctxName&&!e.name)throw new Error("property 'ctxName' or 'name' must be defined in sender config");var t=wmjQuery.extend({},this.defaultConfig,e);switch(t.ctxName||(t.ctxName=Se.generateCtxName(t.name)),t.dataSender){case"accumulation":Se.generateAccumulationSender(t);break;case"immediate":Se.generateImmediateSender(t);break;default:throw new Error("Wrong data sender provided. Please use either accumulation or immediate")}return t},Se.prototype.generateAndGetEventsSender=function(e){var t=this.generateEventsSender(e);return ln.get(t.ctxName)},Se.generateImmediateSender=function(l){var c=this;ln&&ln.register(l.ctxName).asCtor(function(e,t,n,r,i,o){var a=new Z.Channels[l.channelType]({postEventAction:l.postEventAction,healthCheckAction:l.healthCheckAction,requestTimeoutMs:l.requestTimeoutMs,retryParameterName:l.retryParameterName,baseUrl:l.baseUrl,retryIntervalMs:l.retryIntervalMs}),s=new c.STORAGE_CLASSES[l.storageType].storageTypeClass(l.storageConfig,ln.get(l.clientStorageManager),e,t,n),u={sendingIntervalMs:l.sendingIntervalMs,retryIntervalMs:l.retryIntervalMs,maxRetries:l.maxRetries,isLogFailed:l.isLogFailed};return new Z.Managers.ImmediateSender(a,s,u,n,o,r,i)}).dependencies("Consts, ArrayBuffer, JsonUtils, Logger, EventSenderErrorLogger, CleanObject")},Se.generateAccumulationSender=function(h){var m=this;ln&&ln.register(h.ctxName).asCtor(function(e,t,n,r,i,o,a,s,u,l){var c=new Z.Channels[h.channelType]({postEventAction:h.postEventAction,healthCheckAction:h.healthCheckAction,requestTimeoutMs:h.requestTimeoutMs,retryParameterName:h.retryParameterName,baseUrl:h.baseUrl,retryIntervalMs:h.retryIntervalMs}),d=new m.STORAGE_CLASSES[h.storageType].storageTypeClass(h.storageConfig,ln.get(h.clientStorageManager),e,t,n),f=new m.STORAGE_CLASSES[h.storageType].stagingStorageTypeClass(h.stagingStorageConfig,ln.get(h.clientStagingStorageManager),e,r,n),p={sendingIntervalMs:h.sendingIntervalMs,maxRetries:h.maxRetries,isLogFailed:h.isLogFailed,maxStaticDataLength:h.maxStaticDataLength,maxDynamicDataLength:h.maxDynamicDataLength},g=new m.STORAGE_CLASSES[h.storageType].dataSenderStorageLogFailureClass(h.failureStorageConfig,i,e,o,n);return new Z.Managers.AccumulationSender(c,d,f,t,r,p,g,a,n,l,s,u)}).dependencies("Consts, ArrayBuffer, JsonUtils, DictionaryBuffer, ClientStorageManager, ReduceBuffer, EventCollectorLoggerPixel, Logger, EventSenderErrorLogger, CleanObject")},Se.STORAGE_CLASSES={client:{storageTypeClass:Z.Storage.ClientStorageArrayBuffer,stagingStorageTypeClass:Z.Storage.ClientStorageDictionaryBuffer,dataSenderStorageLogFailureClass:Z.Storage.ClientStorageReduceBuffer},session:{storageTypeClass:Z.Storage.SessionStorageArrayBuffer,stagingStorageTypeClass:Z.Storage.SessionStorageDictionaryBuffer,dataSenderStorageLogFailureClass:Z.Storage.SessionStorageReduceBuffer}},ee=Se,ln&&ln.register("EventsSenderFactory").asCtor(ee).dependencies("EventServerBaseUrlProvider"),ln&&ln.register("ActivityIndicator").asCtor(function Xt(o,e){var a,t=["blur","change","click","dblclick","focus","focusin","focusout","hover","keydown","keypress","keyup","mousedown","mouseup","resize","scroll","select","submit"],n=this;this.bindEvents=function r(i){o.each(t,function(e,t){document.addEventListener?function n(e,t){a.addEventListener.apply(document,[e,t,!0])}(t,i):function r(e,t){o(document).on(e+".wm-heartbeat",t)}(t,i)}),e.on("removeWalkMe",function(){n.unbindEvents(i)})},this.unbindEvents=function s(i){o.each(t,function(e,t){document.addEventListener?function n(e,t){a.removeEventListener.apply(document,[e,t,!0])}(t,i):function r(e,t){o(document).off(e+".wm-heartbeat",t)}(t,i)})},function i(){a=e.ctx.has("NativeEventListenerFunctionsProvider")?e.ctx.get("NativeEventListenerFunctionsProvider").get():{addEventListener:document.addEventListener,removeEventListener:document.removeEventListener}}()}).dependencies("wmjQuery, WmInternals");var Ee=(we.prototype.next=function(){return null===this.currentTimeout?this.currentTimeout=this.MIN_TIMEOUT:this.currentTimeout=Math.min(2*this.currentTimeout,this.MAX_TIMEOUT),this.currentTimeout},we.prototype.reset=function(){this.currentTimeout=null},we);function we(){this.MIN_TIMEOUT=3e4,this.MAX_TIMEOUT=96e4,this.currentTimeout=null}ln&&ln.register("HeartbeatBackoffTimer").asCtor(Ee);var Te=(Ce.prototype.init=function(){var e=this;this.wmInternals.one(this.consts.EVENTS.WalkmeReady,function(){e.auditingEnabledIndicator.isEnabled()&&!e.featuresManager.isFeatureEnabled("disableHeartBeatEvent")?(e.storageKey=e.clientStorageManager.keysConfig.heartbeat.eventStorage.key,e.saveState=e.debounce.create(function(){e.clientStorageManager.saveData(e.storageKey,e.state,Ce.WeekInSeconds)},3e3),e.loadState(e.sessionPersister.isNewSession()),e.bindEvents()):e.isEnabled=!1})},Ce.prototype.loadState=function(e){this.state=this.clientStorageManager.getData(this.storageKey),this.state&&this.state.pendingEvent?this.scheduleEvent():this.state&&this.state.sendBaseTime&&!e||(this.state={sendBaseTime:Ce.now()},this.saveState(!0))},Ce.prototype.bindEvents=function(){function e(){return t.onNewSession()}var t=this,n=this.throttle(function(){return t.onUserInteraction()},1e3);this.activityIndicator.bindEvents(n),this.wmInternals.on(this.consts.EVENTS.NewSession,e),this.unbindArray.push(function(){return t.activityIndicator.unbindEvents(n)}),this.unbindArray.push(function(){return t.wmInternals.off(t.consts.EVENTS.NewSession,e)})},Ce.prototype.unbindEvents=function(){for(var e=0;e<this.unbindArray.length;e++)this.unbindArray[e]();this.unbindArray=[]},Ce.prototype.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.unbindEvents())},Ce.prototype.onNewSession=function(){this.clearEventSchedule(),this.flushPendingEvent(),this.heartbeatBackoffTimer.reset()},Ce.prototype.onUserInteraction=function(){var e=Ce.now(),t=!1;this.state.pendingEvent?this.state.pendingEvent.time=e:(t=!0,this.createEvent(e),this.scheduleEvent(e)),this.saveState(t)},Ce.prototype.scheduleEvent=function(e){var t=this;e=e||Ce.now();var n=this.state.sendBaseTime+this.heartbeatBackoffTimer.next();n<=e?this.flushPendingEvent():this.timeoutHandler=this.timerManager.setWalkmeTimeout(function(){return t.flushPendingEvent()},n-e)},Ce.prototype.clearEventSchedule=function(){this.timeoutHandler&&(this.timeoutHandler.clear(),this.timeoutHandler=null)},Ce.prototype.flushPendingEvent=function(){this.isEnabled&&(this.state.pendingEvent&&this.dataSenderHeartbeat.send(this.state.pendingEvent),this.state={sendBaseTime:Ce.now()},this.saveState(!0))},Ce.prototype.createEvent=function(e){var t=this.commonEventAttributesProvider.get();this.state.pendingEvent={time:e,type:"activity",sId:t.sId,wm:{uId:t.wm.uId,euId:t.wm.euId,env:t.wm.env},version:t.version}},Ce.now=function(){return(new Date).getTime()},Ce.WeekInSeconds=604800,Ce);function Ce(e,t,n,r,i,o,a,s,u,l,c,d,f){this.activityIndicator=e,this.dataSenderHeartbeat=t,this.clientStorageManager=n,this.timerManager=r,this.commonEventAttributesProvider=i,this.featuresManager=o,this.auditingEnabledIndicator=a,this.heartbeatBackoffTimer=s,this.wmInternals=u,this.consts=l,this.sessionPersister=c,this.throttle=d,this.debounce=f,this.isEnabled=!0,this.unbindArray=[]}ln&&ln.register("HeartbeatEventSender").asCtor(Te).dependencies("ActivityIndicator, DataSenderHeartbeat, ClientStorageManager, TimerManager, CommonEventAttributesProvider, FeaturesManager, AuditingEnabledIndicator, HeartbeatBackoffTimer, WmInternals, Consts, SessionPersister, Throttle, Debounce");var be=(Ie.prototype.create=function(t,n){var r=this,i=null;return function(e){e?(t(),null!==i&&(i.clear(),i=null)):null===i&&(i=r.timerManager.setWalkmeTimeout(function(){i=null,t()},n))}},Ie);function Ie(e){this.timerManager=e}ln&&ln.register("Debounce").asCtor(be).dependencies("TimerManager");var _e=(Ae.prototype.init=function(e,t){if(this.valueProviderFactory=t,e&&e.analyticsProperties)for(var n=0;n<e.analyticsProperties.length;n++){var r=e.analyticsProperties[n],i=this.valueProviderFactory.get(r);this.propertiesDictionary[r.name]=i}},Ae.prototype.setPredefinedPropertyValue=function(e,t){var n=new Pe({value:t});this.propertiesDictionary[e]=n},Ae.prototype.getPropertyValue=function(e){return this.propertiesDictionary[e]?this.propertiesDictionary[e].get():undefined},Ae);function Ae(){this.propertiesDictionary={}}function Pe(e){var t;this.get=function n(){return t},function r(e){t=e.value}.apply(this,[e])}function ke(e){var t,n;function r(){t=n()}this.get=function i(){t===undefined&&r();return t},function o(e){n=e.calculateValueFunc,r()}.apply(this,[e])}function De(e){var t,n;this.get=function r(){return function e(){t=n()}(),t},function i(e){n=e.calculateValueFunc}.apply(this,[e])}var xe=(Ne.prototype.get=function(e){switch(e){case this.consts.VALUE_CALCULATOR_TYPE.JQuery:return this.calculators.jQueryValueCalculator;case this.consts.VALUE_CALCULATOR_TYPE.Cookie:return this.calculators.cookieValueCalculator;case this.consts.VALUE_CALCULATOR_TYPE.Variable:return this.calculators.variableValueCalculator;case this.consts.VALUE_CALCULATOR_TYPE.LocalStorage:return this.calculators.localStorageValueCalculator;default:this.logger.error(new Error("Unknown calculation method"))}},Ne);function Ne(e,t,n){this.consts=e,this.calculators=t,this.logger=n}var Oe=(Le.prototype.calculate=function(e){var t=this.getCookie(e);return!1===t?undefined:t},Le);function Le(e){this.getCookie=e}var Fe=(Me.prototype.calculate=function(e){var t=this.getjQueryElementText(e);return""===t?undefined:t},Me);function Me(e){this.getjQueryElementText=e}var Re=(Be.prototype.calculate=function(e){return this.getLocalStorageItem(e)},Be);function Be(e){this.getLocalStorageItem=e}var Ue=(Ve.prototype.calculate=function(e){return this.getWindowVar(e)},Ve);function Ve(e){this.getWindowVar=e}var We=(je.prototype.get=function(e){var t=this.getCalculateValueFunc(e);return this.isStickyCustomVars()?new ke({calculateValueFunc:t}):this.isStrongStickyCustomVars()?new De({calculateValueFunc:t}):new Pe({value:t()})},je.prototype.getCalculateValueFunc=function(e){var t=this.valueCalculatorFactory.get(e.calculationMethod),n=e.variable;return function r(){return t.calculate(n)}},je);function je(e,t,n){this.valueCalculatorFactory=e,this.isStickyCustomVars=t,this.isStrongStickyCustomVars=n}var Ge=(He.prototype.track=function(e){var t;"object"==typeof e?t=e:(t={})[this.consts.CUSTOM_EVENTS.DEFAULT_DATA_KEY]=e;try{this.customEventSender.send(t)}catch(n){this.eventSenderErrorHandler.logAndRethrow(n)}},He);function He(e,t,n){this.customEventSender=e,this.eventSenderErrorHandler=t,this.consts=n}ln.register("WalkMeDataAPI").asCtor(Ge).dependencies("CustomEventSender, EventSenderErrorHandler, Consts");var Ye,Qe,ze,qe,Ke,Je,Xe,$e,Ze,et,tt,nt,rt,it,ot,at=(st.prototype.censor=function(e){this.collectionSettins=this.collectionSettins||this.dataCollectionSettings.get();var t=this.wmjQuery.extend(!0,{},e);return this.censorPage(t)},st.prototype.censorPage=function(e){var t=this.collectionSettins&&this.collectionSettins.page&&this.collectionSettins.page.censorship;return t&&(t.url&&(e.ctx.location&&(e.ctx.location=this.censorObject(t.url,e.ctx.location)),e.ctx.referrer&&(e.ctx.referrer=this.censorObject("remove",e.ctx.referrer))),t.title&&e.ctx.title&&(e.ctx.title=this.censorObject(t.title,e.ctx.title))),e},st.prototype.censorObject=function(e,t){if("string"!=typeof e){for(var n in e)"remove"===e[n]&&t[n]&&(t[n]=st.EMPTY_VALUE);return t}if("remove"===e)return st.EMPTY_VALUE},st.EMPTY_VALUE=null,st);function st(e,t){this.dataCollectionSettings=e,this.wmjQuery=t}function ut(e){this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.retryParameterName=e.retryParameterName,this.retryIntervalMs=e.retryIntervalMs||0,this.timerManager=ln.get("TimerManager"),this.setBaseUrl(e.baseUrl)}function lt(e){var t=Je.call(this,e)||this;return t.maxConnections=qe.BrowserConnectionLimit.Chrome,t.currentOpenConnections=0,t.requestTimeoutMs=e.requestTimeoutMs,t}function ct(){return null!==et&&et.apply(this,arguments)||this}function dt(e){this.maxConnections=nt.BrowserConnectionLimit.Chrome,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.retryParameterName=e.retryParameterName,this.retryIntervalMs=e.retryIntervalMs||0,this.timerManager=ln.get("TimerManager"),this.setBaseUrl(e.baseUrl),this.allocateImages()}ln&&ln.register("EventAttributesCensorService").asCtor(at).dependencies("DataCollectionSettings, wmjQuery"),Ye=Ft=Ft||{},Qe=Ye.Channels||(Ye.Channels={}),ut.prototype.getChannelMethod=function(){return"POST"},ut.prototype.setBaseUrl=function(e){this.baseUrl=e},ut.prototype.getBaseUrl=function(){return this.baseUrl},ut.prototype.throwNoBaseUrlError=function(e){throw new Error("No base url provided for "+e)},ut.prototype.getPostEventUrl=function(){return this.baseUrl||this.throwNoBaseUrlError("post event"),this.baseUrl+this.postEventAction},ut.prototype.getRetryParamName=function(){return this.retryParameterName},ut.prototype.getHealthCheckUrl=function(){return this.baseUrl||this.throwNoBaseUrlError("health check"),this.baseUrl+this.healthCheckAction},ut.prototype.getLineBreak=function(){return"\n"},ut.prototype.checkHealth=function(){wmjQuery.get(this.getHealthCheckUrl())},ut.prototype.isInitialized=function(){return!!this.baseUrl},ut.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},ut.prototype.estimateDataSize=function(e){return e.length},ut.prototype.channelBandwidth=function(){return Ye.BrowserConnectionLimit.Chrome*this.maxPacketSize()},ut.prototype.whenFree=function(e){this.whenFreeCallback=e},ut.prototype.fail=function(e){this.failCallback=e},ut.prototype.success=function(e){this.successCallback=e},ut.prototype.singleLinkFree=function(){this.whenFreeCallback&&this.whenFreeCallback()},ze=ut,Qe.BasePostChannel=ze,qe=Ft=Ft||{},Ke=qe.Channels||(qe.Channels={}),Je=Ke.BasePostChannel,te(lt,Je),lt.prototype.getChannelType=function(){return"AjaxChannel"},lt.prototype.send=function(r,i,o,a,s){if(!this.isAvailable())throw new Error("Channel is at max capacity. Can't send anymore data.");var u=this;this.currentOpenConnections++;var e=this.getPostEventUrl();a&&(e+="?"+this.getRetryParamName()+"="+a);var t=ln.get("WmAjax").execute({url:e,data:r,contentType:"text/plain",type:"POST",dataType:"html",timeout:this.requestTimeoutMs||2e3});t.success(function(e){i&&i(),u.successCallback&&u.successCallback(),u.singleLinkFree()}),t.error(function(e,t,n){s!==undefined&&0!==s?u.timerManager.setWalkmeTimeout(function(){u.send(r,i,o,a,--s)},u.retryIntervalMs):(o&&o(e,t,n),u.failCallback&&u.failCallback(e,t,n)),u.singleLinkFree()})},lt.prototype.isAvailable=function(){return this.currentOpenConnections<this.maxConnections},lt.prototype.isIdle=function(){return 0===this.currentOpenConnections},lt.prototype.maxPacketSize=function(){return 9e3},lt.prototype.singleLinkFree=function(){this.currentOpenConnections--,Je.prototype.singleLinkFree.call(this)},Xe=lt,Ke.AjaxChannel=Xe,$e=Ft=Ft||{},Ze=$e.Channels||($e.Channels={}),et=Ze.BasePostChannel,te(ct,et),ct.prototype.getChannelType=function(){return"BeaconChannel"},ct.prototype.send=function(e,t,n,r,i){var o=this;if(!this.isAvailable())throw new Error("Channel is at max capacity. Can't send anymore data.");var a=this.getPostEventUrl();r&&(a+="?"+this.getRetryParamName()+"="+r),navigator.sendBeacon(a,e)?(t&&t(),this.successCallback&&this.successCallback()):i!==undefined&&0!==i?this.timerManager.setWalkmeTimeout(function(){o.send(e,t,n,r,--i)},this.retryIntervalMs):(n&&n(null,null,null),this.failCallback&&this.failCallback(null,null,null)),this.singleLinkFree()},ct.prototype.isAvailable=function(){return"navigator"in window&&"sendBeacon"in navigator},ct.prototype.isIdle=function(){return!0},ct.prototype.maxPacketSize=function(){return 9e3},tt=ct,Ze.BeaconChannel=tt,nt=Ft=Ft||{},rt=nt.Channels||(nt.Channels={}),dt.prototype.getChannelType=function(){return"ImageChannel"},dt.prototype.getChannelMethod=function(){return"GET"},dt.prototype.setBaseUrl=function(e){this.baseUrl=e},dt.prototype.getBaseUrl=function(){return this.baseUrl},dt.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},dt.prototype.getRetryParamName=function(){return this.retryParameterName},dt.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},dt.prototype.getLineBreak=function(){return"\n"},dt.prototype.checkHealth=function(){wmjQuery.get(this.getHealthCheckUrl())},dt.prototype.send=function(e,t,n,r,i){var o=this,a=encodeURIComponent(e),s=this.assertFree();s.attr(this.getBusyFlag(),"true");var u=this.getPostEventUrl()+"?"+this.getURLQueryParamKey()+"="+a;r&&(u+="&"+this.getRetryParamName()+"="+r),s.on("load",function(){s.unbind("load"),s.attr(o.getBusyFlag(),"false"),o.whenFreeCallback&&o.whenFreeCallback(),t&&t(),o.successCallback&&o.successCallback()}).on("error",function(){i!==undefined&&0!==i?o.timerManager.setWalkmeTimeout(function(){o.send(e,t,n,r,--i)},o.retryIntervalMs):(n&&n(null,null,null),o.failCallback&&o.failCallback(null,null,null))}),s.attr("src",u)},dt.prototype.isInitialized=function(){return!!this.baseUrl},dt.prototype.isAvailable=function(){return null!==this.getFreeImg()},dt.prototype.isIdle=function(){for(var e=0;e<this.images.length;e++)if(!this.isImageFree(this.images[e]))return!1;return!0},dt.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},dt.prototype.estimateDataSize=function(e){return encodeURIComponent(e).length},dt.prototype.maxPacketSize=function(){var e="?"+this.getURLQueryParamKey()+"=&"+this.getRetryParamName()+"=";return this.getMaxUrlSize()-this.getPostEventUrl().length-e.length-2},dt.prototype.channelBandwidth=function(){return nt.BrowserConnectionLimit.Chrome*this.maxPacketSize()},dt.prototype.whenFree=function(e){this.whenFreeCallback=e},dt.prototype.fail=function(e){this.failCallback=e},dt.prototype.success=function(e){this.successCallback=e},dt.prototype.getFreeImg=function(){for(var e=0;e<this.images.length;e++)if(this.isImageFree(this.images[e]))return this.images[e];return null},dt.prototype.isImageFree=function(e){return"false"===e.attr(this.getBusyFlag())},dt.prototype.allocateImages=function(){this.images=[];for(var e=0;e<this.maxConnections;e++){var t=this.createImage();this.images.push(t)}},dt.prototype.createImage=function(){var e=wmjQuery("<img/>");return e.css("width","1px"),e.css("height","1px"),e.attr(this.getBusyFlag(),"false"),e},dt.prototype.getMaxUrlSize=function(){return 2048},dt.prototype.getBusyFlag=function(){return"_WM_BUSY_"},dt.prototype.getURLQueryParamKey=function(){return"ed"},dt.prototype.assertFree=function(){var e=this.getFreeImg();if(!e)throw"Channel is at max capacity. Can't send anymore data.";return e},dt.prototype.getCurrentImages=function(){return this.images.slice(0)},dt.prototype.dispose=function(){for(var e=0;e<this.images.length;e++)this.images[e].remove()},it=dt,rt.ImageChannel=it,function(d){var r,e;(e=r=d.CompatibilityChannelMode||(d.CompatibilityChannelMode={}))[e.PostNativeCors=0]="PostNativeCors",e[e.GetImage=1]="GetImage",e[e.PostIECorsPlugin=2]="PostIECorsPlugin";var t=(n.prototype.getChannelType=function(){return"CompatibilityChannel."+this.underlyingChannel.getChannelType()},n.prototype.getChannelMethod=function(){return r[this.mode]},n.prototype.getBaseUrl=function(){return this.underlyingChannel.getBaseUrl()},n.prototype.setBaseUrl=function(e){this.config.baseUrl=e,this.initUnderlyingChannel()},n.prototype.initUnderlyingChannel=function(){var e=this.checkCompatibility(),t=new RegExp("^(//|"+location.protocol+")","i").test(this.config.baseUrl),n=this.pickChannel(e,this.config,t);this.underlyingChannel=n},n.prototype.getPostEventUrl=function(){return this.underlyingChannel.getPostEventUrl()},n.prototype.getHealthCheckUrl=function(){return this.underlyingChannel.getHealthCheckUrl()},n.prototype.getRetryParamName=function(){return this.underlyingChannel.getRetryParamName()},n.prototype.getLineBreak=function(){return this.underlyingChannel.getLineBreak()},n.prototype.checkHealth=function(){wmjQuery.get(this.underlyingChannel.checkHealth())},n.prototype.send=function(e,t,n,r){this.sendFn(e,t,n,r)},n.prototype.isInitialized=function(){return!!this.underlyingChannel&&this.underlyingChannel.isInitialized()},n.prototype.isAvailable=function(){return this.underlyingChannel.isAvailable()},n.prototype.isIdle=function(){return this.underlyingChannel.isIdle()},n.prototype.withinSizeLimit=function(e){return this.underlyingChannel.withinSizeLimit(e)},n.prototype.estimateDataSize=function(e){return this.underlyingChannel.estimateDataSize(e)},n.prototype.maxPacketSize=function(){return this.underlyingChannel.maxPacketSize()},n.prototype.channelBandwidth=function(){return this.underlyingChannel.channelBandwidth()},n.prototype.whenFree=function(e){this.underlyingChannel.whenFree(e)},n.prototype.fail=function(e){this.underlyingChannel.fail(e)},n.prototype.success=function(e){this.underlyingChannel.success(e)},n.prototype.pickChannel=function(e,t,n){switch(this.mode=e){case r.PostIECorsPlugin:return n?new d.AjaxChannel(t):new d.ImageChannel(t);case r.PostNativeCors:return new d.AjaxChannel(t);case r.GetImage:return new d.ImageChannel(t)}},n.prototype.checkCompatibility=function(){return(new XMLHttpRequest).withCredentials!==undefined?r.PostNativeCors:"undefined"!=typeof window.XDomainRequest?r.PostIECorsPlugin:r.GetImage},n);function n(e){var l=this;this.eventSenderErrorLogger=ln.get("EventSenderErrorLogger"),this.config=wmjQuery.extend({},e),this.initUnderlyingChannel(),this.sendFn=function(o,a,s,e){function i(e,t,n,r){if(!u){u=!0,l.eventSenderErrorLogger.logError("Failed to send event using Ajax",{errorThrown:n});var i=new d.ImageChannel(l.config);l.underlyingChannel=i,c(o,a,s,r)}}var u=!1;try{c(o,a,function(e,t,n,r){i(0,0,n,r)},e)}catch(t){i(0,0,null)}l.sendFn=c};var c=function(e,t,n,r){l.underlyingChannel.send(e,t,n,r,3)}}d.CompatibilityChannel=t}((ot=Ft=Ft||{}).Channels||(ot.Channels={}));var ft=(pt.prototype.get=function(){var e={sId:this.sessionManager.getCurrentSession(),wm:this.eventCollectorWalkMeDataProvider.getWalkMeData(),env:this.eventSenderEnvironmentDataProvider.getEnvironmentData(),ctx:this.eventSenderContextDataProvider.getContextData(),visions:this.getVisionsAttributes(),version:{lib:this.walkMeInfo.getLibVersion(),pe:pt.schemaVersion,ext:this.extensionConfigManager.get("extVersion")}},t=wmjQuery.extend(!0,{},e,this.getExtraCommonData());return this.eventAttributesCensorService.censor(t)},pt.prototype.getVisionsAttributes=function(){var e=window.JacoRecorder;return e&&e.state&&e.state.session&&e.state.session.id?{sId:e.state.session.id}:undefined},pt.prototype.extend=function(e){this.extraCommonData.push(e)},pt.prototype.getExtraCommonData=function(){if(0===this.extraCommonData.length)return{};var e=wmjQuery.map(this.extraCommonData,this.executeCommonDataFunction);return wmjQuery.extend.apply(wmjQuery,[!0,{}].concat(e))},pt.prototype.executeCommonDataFunction=function(e){return"function"==typeof e?e():e},pt.schemaVersion="5.0.2",pt);function pt(e,t,n,r,i,o,a){this.eventCollectorWalkMeDataProvider=e,this.eventSenderEnvironmentDataProvider=t,this.eventSenderContextDataProvider=n,this.sessionManager=r,this.walkMeInfo=i,this.eventAttributesCensorService=o,this.extensionConfigManager=a,this.extraCommonData=[]}ln&&ln.register("CommonEventAttributesProvider").asCtor(ft).dependencies("EventCollectorWalkMeDataProvider, EventSenderEnvironmentDataProvider, EventSenderContextDataProvider, SessionManager, WalkMeInfo, EventAttributesCensorService, ExtensionConfigManager");var gt=(ht.prototype.get=function(){var e=this.extensionConfigManager.get(ht.cseuIdWindowKey),t=this.clientStorageManager.getData(ht.cseuIdStorageKey);if(e||t)return e&&this.clientStorageManager.removeData(ht.cseuIdStorageKey),e||t;var n=this.generateCseuId();return this.clientStorageManager.saveData(ht.cseuIdStorageKey,n,this.consts.COOKIE_LIFE_2_YEARS),n},ht.prototype.generateCseuId=function(){return this.guidGenerator.generateGuid()},ht.cseuIdWindowKey="installGuid",ht.cseuIdStorageKey="wm-cseu-id",ht);function ht(e,t,n,r){this.extensionConfigManager=e,this.guidGenerator=t,this.clientStorageManager=n,this.consts=r}ln&&ln.register("CseuIdProvider").asCtor(gt).dependencies("ExtensionConfigManager, GuidGenerator, ClientStorageManager, Consts"),ln&&ln.register("EventCollectorUserDataProvider").asCtor(function $t(e){this.getUserVars=function t(){return{name:e.getPropertyValue("name"),role:e.getPropertyValue("role"),type:e.getPropertyValue("type"),status:e.getPropertyValue("status"),info:e.getPropertyValue("info")}}}).dependencies("AnalyticsPropertiesManager"),ln&&ln.register("EventCollectorWalkMeDataProvider").asCtor(function Zt(e,t,n,r,i,o,a){this.getWalkMeData=function s(){return{uId:e.getUserGuid(),euId:e.getEndUserGuid(),account:o.get(),euIdSource:e.getEndUserGuidSource(),permId:e.getPermutationId(),language:e.getLanguage(),cVars:e.getCustomVars(),env:e.getEnvironmentId(),interactionGuid:t.getCurrentInteractionGuid(),platform:n.get("platform"),userVars:r.getUserVars(),cseuId:a.get(),extId:i.get("extensionGuid"),extensionInstallationGuid:i.get("globalGuid")}}}).dependencies("WalkMeInfo, InteractionManager, ExternalWalkMeConfig, EventCollectorUserDataProvider, ExtensionConfigManager, EndUserAccountProvider, CseuIdProvider"),ln&&ln.register("EventSenderContextDataProvider").asCtor(function en(s,t,u,n,l,i){var o=null;function c(){return top!==s}this.getContextData=function d(){return{location:function a(){var e="",t="",n="",r="",i="",o="";!u.isReady()||u.isFeatureEnabled(l.FEATURES.DisableWidgetOpenFullUrl)||u.isFeatureEnabled(l.FEATURES.EventSenderDontSendPageUrl)||(e=s.location.protocol,t=s.location.hostname,o=s.location.port,n=s.location.pathname,r=s.location.hash,i=s.location.search);return{protocol:e,hostname:t,port:o,pathname:n,hash:r,search:i}}(),isIframe:c(),visitId:t.get(),title:function e(){return!u.isReady()||u.isFeatureEnabled(l.FEATURES.EventSenderDontSendPageTitle)?"":n.getPageTitle()}(),referrer:function r(){if(!0===function t(){null===o&&u.isReady()&&(o=!(u.isFeatureEnabled(l.FEATURES.EventSenderDisableSendReferrerUrl)||u.isFeatureEnabled(l.FEATURES.DisableWidgetOpenFullUrl)||u.isFeatureEnabled(l.FEATURES.EventSenderDontSendPageUrl))&&(!!u.isFeatureEnabled(l.FEATURES.EventSenderForceSendReferrerUrl)||i.sync("EventSenderContextDataProviderReferrerEnablement",null,!1)));return o}()){var e=s.document.referrer;if(!e&&c())try{top._walkMe&&(e=top.document.referrer)}catch(n){}if(e)return e}}()}}}).dependencies("win, PageVisitIdProvider, FeaturesManager, HostData, Consts, EventsTrigger");var mt=(vt.prototype.getEnvironmentData=function(){return{browser:this.browserData,os:this.hostData.os,mobile:this.hostData.isMobile(),screen:this.hostData.getWinSize(),timezone:(new Date).getTimezoneOffset()}},vt);function vt(e,t){this.hostData=e,this.browserData=t.extend(!0,{},e.browser),delete this.browserData.string}ln&&ln.register("EventSenderEnvironmentDataProvider").asCtor(mt).dependencies("HostData, wmjQuery");var yt=(St.prototype.get=function(){if(this.cachedValue===undefined){var e=this.evaluateValue();(e&&"string"==typeof e||"number"==typeof e)&&(this.cachedValue=e+"")}return this.cachedValue},St.prototype.evaluateValue=function(){var e=this.dataCollectionSettings.get().accountIdentifier;if(e){if("extractHostFromEuid"===e.type)return this.extractHostFromEuid();if("variable"===e.type)return this.commonUtils.getWindowVar(e.value)}},St.prototype.extractHostFromEuid=function(){var e=this.walkMeInfo.getEndUserGuid();if(e&&"string"==typeof e){var t=e.indexOf("@");if(-1!==t)return e.substr(t+1)}},St);function St(e,t,n){this.dataCollectionSettings=e,this.walkMeInfo=t,this.commonUtils=n}ln&&ln.register("EndUserAccountProvider").asCtor(yt).dependencies("DataCollectionSettings, WalkMeInfo, CommonUtils");var Et=(wt.prototype.logAndRethrow=function(e){throw this.isErrorLogged||(this.eventSenderErrorLogger.logError(e.message),this.isErrorLogged=!0),e},wt);function wt(e){this.eventSenderErrorLogger=e,this.isErrorLogged=!1}ln.register("EventSenderErrorHandler").asCtor(Et).dependencies("EventSenderErrorLogger");var Tt=(Ct.shouldSend=function(){return!(this.howManyToSend<=0||(this.howManyToSend--,0))},Ct.howManyToSend=5,Ct);function Ct(){}var bt=(It.prototype.init=function(e,t,n,r){this._postEventAction=e.postEventAction,this._baseUrl=e.baseUrl,this.errorLogFilter=t,this.toJSON=e.toJSON,this.isAuditingEnabled=e.isAuditingEnabled,this.wmAjax=n,this.commonEventAttributesProvider=r,this.errorLogFilter=t},It.prototype.setBaseUrl=function(e){this._baseUrl=e},It.prototype.isReady=function(){return!(!this._baseUrl||!this._postEventAction)},It.prototype.logError=function(e,t){if(this.isReady()&&this.isAuditingEnabled()){var n,r,i={time:(new Date).getTime(),level:"error",app:"player",message:e};try{var o=this.commonEventAttributesProvider.get();n=this.getWalkMeData(o),r=this.getEnvData(o)}catch(a){i.LoggingError=a}try{i=wmjQuery.extend(i,r,n,t||{})}catch(a){i.additionalErrorData=a}this.errorLogFilter.shouldSend()&&this.send(i)}},It.prototype.send=function(e){this.wmAjax.execute({url:this._baseUrl+this._postEventAction,data:this.toJSON(e),contentType:"text/plain",dataType:"json",type:"POST"})},It.prototype.convertUrlPartsToFullUrl=function(e){var t=(e.protocol||"")+"//"+(e.hostname||"");return e.port&&(t+=":"+e.port),t+=e.pathname||"",e.hash&&(t+=e.hash),e.search&&(t+="?"+e.search),t},It.prototype.getEnvData=function(e){var t=e.ctx.location;return{url:this.convertUrlPartsToFullUrl(t),browser:e.env.browser,os:e.env.os,screen:e.env.screen,mobile:e.env.mobile}},It.prototype.getWalkMeData=function(e){return{uId:e.wm.uId,euId:e.wm.euId,euIdSource:e.wm.euIdSource,permId:e.wm.permId,language:e.wm.language,cVars:e.wm.cVars,env:e.wm.env}},It);function It(){}ln&&ln.register("EventSenderDisabler").asCtor(function tn(e){this.disable=function t(){e.sleep(),e.disable()}}).dependencies("DataSender"),ln&&ln.register("EventSenderInitializer").asCtor(function nn(t){this.init=function r(){for(var e=0;e<n.length;e++)ln.get(n[e].ctxName).enable();n=[]};var n=[{ctxName:"DataSenderLog",postEventAction:"/event/log",storageConfig:{keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600},storageType:"client",maxRetries:3,isLogFailed:!1,sendingIntervalMs:5e3,retryIntervalMs:5e3,channelType:"CompatibilityChannel",dataSender:"immediate",clientStorageManager:"ClientStorageManager"},{ctxName:"DataSenderLogPixel",postEventAction:"/event/log",storageConfig:{keyName:"wm-ds-lbp",autoSave:!1,expiresSeconds:600},storageType:"client",maxRetries:3,isLogFailed:!1,sendingIntervalMs:5e3,retryIntervalMs:5e3,channelType:"ImageChannel",dataSender:"immediate",clientStorageManager:"ClientStorageManager"},{ctxName:"DataSender",postEventAction:"/event/postEvent",storageConfig:{keyName:"wm-ds-b",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-s",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-lfb",autoSave:!0,expiresSeconds:86400},maxRetries:0,retryIntervalMs:5e3,isLogFailed:!0,channelType:"CompatibilityChannel",storageType:"client",dataSender:"accumulation",clientStorageManager:"ClientStorageManager",clientStagingStorageManager:"ClientStorageManager"},{ctxName:"DataSenderBI",postEventAction:"/event/backEvent",storageConfig:{keyName:"wm-ds-bib",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-sbi",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600},sendingIntervalMs:3e4,maxRetries:0,isLogFailed:!0,maxStaticDataLength:950,channelType:"AjaxChannel",storageType:"client",dataSender:"accumulation",clientStorageManager:"DummyClientStorageManager",clientStagingStorageManager:"DummyClientStorageManager"},{ctxName:"DataSenderHeartbeat",postEventAction:"/event/postEvent",storageConfig:{keyName:"wm-ds-hb",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-shb",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-fhb",autoSave:!1,expiresSeconds:600},maxRetries:3,isLogFailed:!0,channelType:"CompatibilityChannel",storageType:"client",dataSender:"immediate",clientStorageManager:"ClientStorageManager",clientStagingStorageManager:"ClientStorageManager"},{ctxName:"DataSenderBIBeacon",postEventAction:"/event/backEvent",storageConfig:{keyName:"wm-ds-bibb",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-sbib",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-lbb",autoSave:!1,expiresSeconds:600},sendingIntervalMs:5e3,maxRetries:0,isLogFailed:!0,maxStaticDataLength:950,channelType:"BeaconChannel",storageType:"client",dataSender:"accumulation",clientStorageManager:"DummyClientStorageManager",clientStagingStorageManager:"DummyClientStorageManager"}];!function i(){for(var e=0;e<n.length;e++)t.generateEventsSender(n[e])}()}).dependencies("EventsSenderFactory");var _t=(At.prototype.build=function(e){var t=[];for(var n in e){this.validateKey(n);var r=e[n]+"";this.validateValue(r),t.push(""+n+At.KEY_VALUE_SEPARATOR+r)}return t},At.prototype.validateKey=function(e){0<=e.indexOf(At.KEY_VALUE_SEPARATOR)&&this.throwCustomEventValueBuilderError("A key can't contain the character: \""+At.KEY_VALUE_SEPARATOR+'"');var t=e.length;t>this.customEventsConsts.KEY_MAX_LENGTH&&this.throwCustomEventValueBuilderError("A key is too long ("+t+" characters). Maximal length allowed: "+this.customEventsConsts.KEY_MAX_LENGTH)},At.prototype.validateValue=function(e){var t=e.length;t>this.customEventsConsts.VALUE_MAX_LENGTH&&this.throwCustomEventValueBuilderError("A value is too long ("+t+" characters). Maximal length allowed: "+this.customEventsConsts.VALUE_MAX_LENGTH)},At.prototype.throwCustomEventValueBuilderError=function(e){throw new Error("CustomEventValueBuilder: "+e)},At.KEY_VALUE_SEPARATOR="=",At);function At(e){this.consts=e,this.customEventsConsts=e.CUSTOM_EVENTS}ln.register("CustomEventValueBuilder").asCtor(_t).dependencies("Consts"),ln&&ln.register("EventsCollectorFeatureEnabledIndicator").asCtor(function rn(e,t,n){this.isFeatureEnabled=function r(){return n.isReady()&&!n.isFeatureEnabled(e.FEATURES.DisableEventCollection)&&!t.isIE(7)}}).dependencies("Consts, HostData, FeaturesManager");var Pt,kt,Dt,xt,Nt,Ot,Lt,Ft,Mt,Rt,Bt,Ut,Vt=(Wt.prototype.initAnalyticsProperties=function(e){var t=new xe(e.consts,{cookieValueCalculator:new Oe(e.getCookie),jQueryValueCalculator:new Fe(e.getjQueryElementText),localStorageValueCalculator:new Re(e.getLocalStorageItem),variableValueCalculator:new Ue(e.getWindowVar)},e.logger);ln.register("ValueCalculatorFactory").asInstance(t),this.analyticsProperties.init(e.settings,new We(t,e.features.stickyCustomVars,e.features.strongStickyCustomVars))},Wt.prototype.initErrorLogger=function(e){this.errorLogger.init({postEventAction:"/event/log",baseUrl:e.baseUrl,toJSON:e.toJSON,isAuditingEnabled:e.isAuditingEnabled},Tt,e.wmAjax,e.commonEventAttributesProvider)},Wt);function Wt(){this.analyticsProperties=new _e,this.errorLogger=new bt,ln.register("AnalyticsPropertiesManager").asInstance(this.analyticsProperties),ln.register("EventSenderErrorLogger").asInstance(this.errorLogger)}function jt(e,t,n,r,i,o){this.buffer=t,this._isEnabled=!1,this.dataChannel=e,this._eventsErrorLogger=o,this.jsonUtils=r,this._logger=i?i.wrapCustomerLog("newSender"):function(){}}function Gt(e,t,n,r,i,o,a,s,u,l,c,d){var f=Ot.call(this,e,t,o,u,c,d)||this;return f.estimatedPacketSize=0,f.cycleTimer=new xt.SimpleTimer(o.sendingIntervalMs,function(){return f.doCycle()}),f.retryTimer=new xt.SimpleTimer(o.retryIntervalMs,function(){return f.doCycle()}),f.maxRetries=o.maxRetries,f.maxRetryTimeoutSec=o.maxRetryTimeoutSec,f.minRetryTimeoutSec=o.minRetryTimeoutSec,f.currentRetries=0,f.isHealthy=!0,f.needMoreLink=!1,f.isLogFailed=o.isLogFailed,f.memoryBuffer=r,f.stagingMemoryBuffer=i,f.stagingBuffer=n,f.failureBuffer=a,f.dataSenderLogFailure=s,f.maxDynamicDataLength=o.maxDynamicDataLength||0,f.maxStaticDataLength=o.maxStaticDataLength===undefined?1e3-o.maxDynamicDataLength:o.maxStaticDataLength,f.staticData=f.emptyStaticData(),f.dynamicDataArr=[f.timestampDynamicData],f.staticIndicator={_static:!0},f.staticIndicatorLen=0,f.cleanObject=l,f}function Ht(e,t,n,r,i,o,a){var s=Bt.call(this,e,t,n,r,o,a)||this;return s.cleanObject=i,s}ln.register("DataSenderInitializer").asInstance(new Vt),Pt=Ft=Ft||{},kt=Pt.Managers||(Pt.Managers={}),jt.prototype.checkHealth=function(){return this.dataChannel.checkHealth()},jt.prototype.getBaseUrl=function(){return this.dataChannel.getBaseUrl()},jt.prototype.setBaseUrl=function(e){this.dataChannel.setBaseUrl(e)},jt.prototype.getPostEventUrl=function(){return this.dataChannel.getPostEventUrl()},jt.prototype.getHealthCheckUrl=function(){return this.dataChannel.getHealthCheckUrl()},jt.prototype.enable=function(){var e=this;if(!this._isEnabled)try{this._logger(this.getSenderType()+"::enable. Enabling new data sender. \r\n [channel : "+this.dataChannel.getChannelType()+" , method : "+this.dataChannel.getChannelMethod()+" ,max packet size: "+this.dataChannel.maxPacketSize()+" ] \r\n [storage : "+this.buffer.getStorageType()+" , max storage size: "+this.buffer.maxSize()+"] \r\n",3),this._isEnabled=!0,this.dataChannel.whenFree(function(){e.linkIsFree()}),this.registerToUnload(function(){return e.sleep()}),this.wakeUp()}catch(t){this.logError(t,"Enable")}},jt.prototype.logError=function(e,t){if(this._eventsErrorLogger){var n=this.dataChannel&&this.buffer?{storage:this.buffer.getStorageType(),channel:this.dataChannel.getChannelType()}:{};n.sender=this.getSenderType()+(t?"::"+t:""),this._eventsErrorLogger.logError(this.jsonUtils.toJSON(e.message),n)}},jt.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1)},jt.prototype.isEnabled=function(){return this._isEnabled},jt.prototype.isIdle=function(){return this._isEnabled&&this.dataChannel.isIdle()&&this.buffer.isEmpty()},jt.prototype.clearStorage=function(){this.buffer.clear()},jt.prototype.registerToUnload=function(e){ln.get("WindowBeforeUnloadHandler").register(e)},Dt=jt,kt.SuperSender=Dt,xt=Ft=Ft||{},Nt=xt.Managers||(xt.Managers={}),Ot=Nt.SuperSender,te(Gt,Ot),Gt.prototype.getSenderType=function(){return"AccumulationSender"},Gt.prototype.emptyStaticData=function(){return{data:{},length:0}},Gt.prototype.setStaticData=function(e,t){var n;if(t&&"_static"!==e&&!this.staticData.data[e]){var r=wmjQuery.extend({},this.staticData.data,((n={})[e]=t,n)),i=this.jsonUtils.toJSON(r),o=this.dataChannel.estimateDataSize(i);return o>this.maxStaticDataLength?(this._logger("Static data that exceeds the limit "+e+":"+this.jsonUtils.toJSON(t),3),!1):(this.staticData.data=r,this.staticData.length=o,!0)}},Gt.prototype.timestampDynamicData=function(){return{"Wm-Client-Timestamp":(new Date).getTime()}},Gt.prototype.dynamicData=function(){for(var e={},t=0;t<this.dynamicDataArr.length;t++){var n=wmjQuery.extend({},e,this.dynamicDataArr[t]()),r=this.jsonUtils.toJSON(n);this.dataChannel.estimateDataSize(r)>this.maxDynamicDataLength?this._logger("Dynamic data that exceeds the limit "+r,3):e=n}return e},Gt.prototype.enrichmentDataLength=function(){this.staticIndicatorLen||(this.staticIndicatorLen=this.dataChannel.estimateDataSize(this.jsonUtils.toJSON(this.staticIndicator))+1);var e=this.maxDynamicDataLength+this.staticData.length;return 0!==e?e+this.staticIndicatorLen:0},Gt.prototype.getBuffer=function(){return this.buffer},Gt.prototype.send=function(e){try{if(this._logger(this.getSenderType()+"::Send. called for: "+this.jsonUtils.toJSON(e),5),!this.isEnabled())return!1;var t="string"!=typeof e?this.jsonUtils.toJSON(this.cleanObject(e)):e,n=this.dataChannel.estimateDataSize(t);if(!this.dataChannel.withinSizeLimit(n+this.enrichmentDataLength()))throw new Error("Data exceeds channel packet size");if(this.getBuffer().withinSizeLimit(t.length))return this.getBuffer().isEmpty()||(this.estimatedPacketSize+=this.dataChannel.estimateDataSize(this.dataChannel.getLineBreak())),this.estimatedPacketSize+=n,this.getBuffer().dataSize()+t.length>this.getBuffer().maxSize()&&this.sendBuffer(),this.getBuffer().push(t),this.estimatedPacketSize>=this.dataChannel.channelBandwidth()?(this.sendBuffer(),this.getTimer().restart()):this.getTimer().start(),!0;this.dataChannel.isAvailable()?this.stageAndSend({memory:[t],persist:[]}):(this.memoryBuffer.push(t),this.needMoreLink=!0)}catch(r){throw this.logError(r,"Send"),r}},Gt.prototype.wakeUp=function(){if(this.isEnabled())try{this._logger(this.getSenderType()+"::WakeUp. buffer size before load. "+this.getBuffer().dataSize(),3),this.loadFromStorage(),this._logger(this.getSenderType()+"::WakeUp. buffer size after load. "+this.getBuffer().dataSize(),3)}catch(e){throw this.logError(e,"WakeUp"),e}},Gt.prototype.sleep=function(){if(this.isEnabled())try{this._logger(this.getSenderType()+"::Sleep. buffer size before flush: "+this.getBuffer().dataSize(),3),this.sendBuffer(),this._logger(this.getSenderType()+"::Sleep. buffer size after flush: "+this.getBuffer().dataSize(),3),this.getBuffer().save(),this.stagingBuffer.save(),this.failureBuffer.save()}catch(e){throw this.logError(e,"Sleep"),e}},Gt.prototype.isIdle=function(){return Ot.prototype.isIdle.call(this)},Gt.prototype.linkIsFree=function(){this.isEnabled()&&this.needMoreLink&&this.sendBuffer()},Gt.prototype.doCycle=function(){this.isEnabled()&&(this._logger(this.getSenderType()+"::doCycle. buffer size before flush. "+this.getBuffer().dataSize(),4),this.sendBuffer(),this._logger(this.getSenderType()+"::doCycle. buffer size after flush. "+this.getBuffer().dataSize(),4))},Gt.prototype.getSeperator=function(){return this.dataChannel.getLineBreak()},Gt.prototype.getTimer=function(){return this.isHealthy?this.cycleTimer:this.retryTimer},Gt.prototype.hasBufferEvents=function(){return!this.getBuffer().isEmpty()||!this.memoryBuffer.isEmpty()},Gt.prototype.getPriorityBuffer=function(){return this.memoryBuffer.isEmpty()?this.getBuffer():this.memoryBuffer},Gt.prototype.sendBuffer=function(){if(this.isEnabled())try{for(var e=this.dataChannel.maxPacketSize();this.hasBufferEvents()&&this.dataChannel.isAvailable();){var t={persist:[],memory:[]},n=this.enrichmentDataLength();do{var r=this.getPriorityBuffer(),i=this.dataChannel.estimateDataSize(r.peek()),o=0;if(0!==n&&(o=this.dataChannel.estimateDataSize(this.getSeperator())),e<n+(o+=i)){if(0<n)break;r.pull(),this.logError(new Error("Tried to send too long message"),"SendBuffer")}else t[r===this.memoryBuffer?"memory":"persist"].push(r.pull()),n+=o,this.estimatedPacketSize-=o}while(this.hasBufferEvents()&&n<e);0<n&&this.stageAndSend(t)}this.needMoreLink=this.hasBufferEvents()}catch(a){throw this.logError(a,"SendBuffer"),a}},Gt.prototype.enrichmentDataHasOwnProps=function(e){for(var t in e)if(e.hasOwnProperty(t)&&"_static"!==t)return!0;return!1},Gt.prototype.getEnrichmentData=function(){var e=wmjQuery.extend({_static:!0},this.staticData.data,this.dynamicData());if(this.enrichmentDataHasOwnProps(e))return this.jsonUtils.toJSON(e)},Gt.prototype.stageAndSend=function(e){var r=this,i={persist:this.stagingBuffer.pushAll(e.persist),memory:this.stagingMemoryBuffer.pushAll(e.memory)},t=this.getEnrichmentData(),n=(t?[t]:[]).concat(e.persist,e.memory).join(this.getSeperator());this._logger(this.getSenderType()+"::sendBuffer. packet size "+n.length,3),this._logger(this.getSenderType()+"::sendBuffer. sending packet :"+this.jsonUtils.toJSON(n),4),this.dataChannel.send(n,function(){try{r.isHealthy=!0,r.currentRetries=0,r.stagingBuffer.pullAll(i.persist),r.stagingMemoryBuffer.pullAll(i.memory),r.isLogFailedEnabled()&&r.logFailedEvents()}catch(e){}},function(){try{if(r.isHealthy=!1,r.getBuffer().pushAll(r.stagingBuffer.pullAll(i.persist)),r.memoryBuffer.pushAll(r.stagingMemoryBuffer.pullAll(i.memory)),r.currentRetries++,r.currentRetries>r.maxRetries){if(r.isLogFailedEnabled()){var e=r.getBuffer().pullAll().concat(r.memoryBuffer.pullAll());r.failureBuffer.pushAll(e)}r.currentRetries=0,r.getBuffer().clear(),r.memoryBuffer.clear()}else{var t=r.getNextRetryTime();r.getTimer().start(t)}}catch(n){}},this.currentRetries||undefined)},Gt.prototype.getNextRetryTime=function(){if(!(this.maxRetries<=1)){var e=1e3*(this.minRetryTimeoutSec+(this.maxRetryTimeoutSec-this.minRetryTimeoutSec)*(this.currentRetries-1)/(this.maxRetries-1));return Math.min(1e3*this.maxRetryTimeoutSec,Math.random()*(.25*e)+.75*e)}},Gt.prototype.loadFromStorage=function(){this.isEnabled()&&(this.getBuffer().load(),this.stagingBuffer.load(),this.failureBuffer.load(),this.getBuffer().pushAll(this.stagingBuffer.pullAll()),this.stagingBuffer.save(),this._logger(this.getSenderType()+"::loadFromStorage. buffer size after load : "+this.getBuffer().dataSize(),4),this.sendBuffer())},Gt.prototype.isLogFailedEnabled=function(){return this.isLogFailed},Gt.prototype.logFailedEvents=function(){if(!(this.failureBuffer.count()<=0))for(var e=this.failureBuffer.pullAll(),t=0;t<e.length;t++){var n=e[t];this.dataSenderLogFailure.log.warn(n.message,n.extraData)}},Lt=Gt,Nt.AccumulationSender=Lt,Mt=Ft=Ft||{},Rt=Mt.Managers||(Mt.Managers={}),Bt=Rt.SuperSender,te(Ht,Bt),Ht.prototype.getBuffer=function(){return this.buffer},Ht.prototype.getSenderType=function(){return"ImmediateSender"},Ht.prototype.send=function(e){if(!this.isEnabled())return!1;var t="string"!=typeof e?this.jsonUtils.toJSON(this.cleanObject(e)):e;return this.dataChannel.isAvailable()?this.dataChannel.send(t):this.getBuffer().push(t),!0},Ht.prototype.wakeUp=function(){if(!this.isEnabled())return!1;this.loadFromStorage()},Ht.prototype.sleep=function(){if(!this.isEnabled())return!1;this.getBuffer().save()},Ht.prototype.linkIsFree=function(){if(!this.isEnabled())return!1;this.sendFromBuffer()},Ht.prototype.loadFromStorage=function(){if(!this.isEnabled())return!1;for(this.getBuffer().load();this.dataChannel.isAvailable()&&this.getBuffer().count();)this.sendFromBuffer()},Ht.prototype.sendFromBuffer=function(){if(!this.isEnabled())return!1;var e=this.getBuffer().pull();e&&this.dataChannel.send(e)},Ut=Ht,Rt.ImmediateSender=Ut;var Yt=(Qt.prototype.send=function(e){var t=(new Date).getTime();t-this.sendingWindowStartTime>this.customEventsConsts.WINDOW_LENGTH&&this.createSendingWindow(t),this.messagesSentCount>=this.customEventsConsts.WINDOW_MAXIMAL_MESSAGE_NUM&&this.throwCustomEventSenderError("Call quota exceeded"),this.messagesSentCount++,this.isDataEmpty(e)&&this.throwCustomEventSenderError("Data can't be empty");var n=this.customEventValueBuilder.build(e),r=this.getEventName(e),i=this.getEventData(n,r);this.eventSender.postEvent(this.consts.EVENT_SENDER_EVENT_TYPES.Custom,i)},Qt.prototype.isDataEmpty=function(e){return!e||e.hasOwnProperty(this.defaultDataKey)&&!e[this.defaultDataKey]},Qt.prototype.throwCustomEventSenderError=function(e){throw new Error("CustomEventSender: "+e)},Qt.prototype.getEventName=function(e){return(e.name||e[this.defaultDataKey]||this.customEventsConsts.EVENT_NAME)+""},Qt.prototype.createSendingWindow=function(e){this.sendingWindowStartTime=e,this.messagesSentCount=0},Qt.prototype.getEventData=function(e,t){return{eventArgs:{ctm:{kv:e}},eventName:t,data:{}}},Qt.INITIAL_TIME=0,Qt);function Qt(e,t,n){this.eventSender=e,this.consts=t,this.customEventValueBuilder=n,this.customEventsConsts=this.consts.CUSTOM_EVENTS,this.defaultDataKey=this.customEventsConsts.DEFAULT_DATA_KEY,this.createSendingWindow(Qt.INITIAL_TIME)}function zt(a,s,e,u,l){function n(e,t,n){if(c())try{var r=l.toJSON(function i(e,t,n){n&&"object"!=typeof n&&(n=null);return wmjQuery.extend({time:(new Date).getTime(),app:"player",level:e,message:t},u(),n||{})}(e,t,n));a.send(r)}catch(o){throw s&&s.logError(l.toJSON(o.message)),o}}function c(){return e.isFeatureEnabled()}this.log=n,this.log.debug=function r(e,t){return n("debug",e,t)},this.log.info=function i(e,t){return n("info",e,t)},this.log.warn=function o(e,t){return n("warn",e,t)},this.log.error=function d(e,t){return n("error",e,t)},this.isLoggingEnabled=c,function t(){}.apply(this,arguments)}ln.register("CustomEventSender").asCtor(Yt).dependencies("EventSender, Consts, CustomEventValueBuilder"),ln&&ln.register("EventCollectorEventSender").asCtor(function on(o,s,e,t,n,u,l,c,d,f,p){this.postEvent=function g(e,t){try{var n=function a(e,t){var n=function o(e){return{time:(new Date).getTime(),type:e,data:null}}(e),r=t.data;"[object Function]"===Object.prototype.toString.call(r)?n.data=r():n.data=r;n=wmjQuery.extend(n,f.get());var i=t.eventArgs;i&&(n=wmjQuery.extend(n,i));return d.decodeJsonNodes(n),p.add(n),n}(e,t);o.send(n),function r(e,t){var n={eventData:e};t&&(n.eventName=t);l.raiseEvent(c.EVENTS.AnalyticsEventSent,n)}(n,t.eventName)}catch(i){throw s&&s.logError(u.toJSON(i.message)),i}}}).dependencies("DataSender, EventSenderErrorLogger, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider, SessionManager, JsonUtils, CommonEvents, Consts, JsonHtmlDecoder, CommonEventAttributesProvider, WebhooksIdsAdder"),ln&&ln.register("EventCollectorLogger").asCtor(zt).dependencies("DataSenderLog,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator, StaticWMDataProvider,JsonUtils"),ln&&ln.register("EventCollectorLoggerPixel").asCtor(zt).dependencies("DataSenderLogPixel,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,StaticWMDataProvider,JsonUtils"),ln&&ln.register("EventSender").asCtor(function an(e,t,n,i,o){function a(){return n.isEnabled()}this.isEnabled=a,this.postEvent=function s(e,t){if(!a())return;try{var n="object"==typeof t&&t.data?t:{data:t};i.postEvent(e,n)}catch(r){o.error(r)}},this.getEventAppByDeployable=t.map,this.isReportingEnabled=a,this.EVENT_TYPES=e.EVENT_SENDER_EVENT_TYPES,this.EVENT_APPS=e.EVENT_SENDER_EVENT_APPS,this.CANCEL_REASONS=e.EVENT_SENDER_CANCEL_REASONS,function r(){}.apply(this,arguments)}).dependencies("Consts, DeployableTypeToEventSenderAppTypeMapper, EventsCollectorAuditingEnabledIndicator, EventCollectorEventSender, Logger"),ln&&ln.register("SessionManager").asCtor(function sn(t,n,r,e,i,o){var a,s;function u(){n.raiseEvent(r.EVENTS.WalkmeReadyNewSession,a)}this.getCurrentSession=function l(){return a||null},this.setCurrentSession=function c(e){a=e},this.beginNewSession=function d(){var e=t.generateGuid();this.setCurrentSession(e),n.raiseEvent(r.EVENTS.NewSession,a),o.isReady()?u():i.one(r.EVENTS.WalkmeReady,function(){u()}),s("New session guid was created : "+a,2)},function f(){s=e.wrapCustomerLog(r.FEATURES_LOGS.WalkMeSession)}.apply(this,arguments)}).asSingleton().dependencies("GuidGenerator, CommonEvents, Consts, Logger, WmInternals, FeaturesManager"),ln&&ln.register("SessionPersister").asCtor(function un(a,s,e,n,t,r,i,o,u){this.loadOrCreate=v,this.startPersisting=function C(){var e=n.get(),t=e.Custom&&e.Custom.sessionLengthOverride;t&&(p=t);S(),i.bindEvents(o(S,f))},this.cleanResources=function b(){c&&(c.clear(),c=null)},this.isNewSession=function I(){return d};var l,c,d,f=6e4,p=a.keysConfig.session.session.expiry,g=a.keysConfig.session.session.key,h=43200,m=a.keysConfig.session.sessionCreationTime.key;function v(){return new cn(function(e){a.runWithLock("sessionCreation",undefined,{timeout:1e3,interval:100,maxRetries:10},function(){y(e)},function(){u.one("WalkMeReady",function(){r.sendServerLog("debug","session creation lock wasn't released, and max retries reached")}),y(e)})})}function y(o){a.refreshGetData(undefined,function(){var e=a.getData(g),t=a.getData(m);e&&!function n(e){return!e||((new Date).getTime()-e)/1e3>h}(t)?function r(e){d=!1,l("WalkMe Session restored from storage: "+e,1),s.setCurrentSession(e)}(e):function i(){l("WalkMe Session doesnt exist in storage. Starting new one",1),s.beginNewSession(),d=!0,function t(){var e=(new Date).getTime();a.saveData(m,e,2*h)}(),T()}(),o()})}function S(){T(),E()}function E(){c&&c.clear(),c=e.setWalkmeTimeout(w,1e3*p)}function w(){v().then(E)}function T(){var e=s.getCurrentSession();a.saveData(g,e,p),l("WalkMe Session ("+e+") was saved for "+p+" seconds.",3)}(function _(){l=r.wrapCustomerLog(t.FEATURES_LOGS.WalkMeSession)}).apply(this,arguments)}).asSingleton().dependencies("ClientStorageManager, SessionManager, TimerManager, SiteConfigManager, Consts, Logger, ActivityIndicator, Throttle, WmInternals");var qt=(Kt.prototype.add=function(e,t){var n={event:e,additionalData:t||{}};try{var r=this.wmjQuery(this.wmInternals).triggerHandler(Kt.EVENT_NAME,n);this.addWebhooksIdsToEvent(e,r)}catch(i){this.eventSenderErrorLogger.logError("WebhooksIdsAdder: Error on EventWebhooksRequest",{errorMessage:i.message,webhooksRequestData:n})}},Kt.prototype.addWebhooksIdsToEvent=function(e,t){e.ctm||(e.ctm={}),e.ctm.wids=t},Kt.EVENT_NAME="EventWebhooksRequest",Kt);function Kt(e,t,n){this.wmjQuery=e,this.eventSenderErrorLogger=t,this.wmInternals=n}ln.register("WebhooksIdsAdder").asCtor(qt).dependencies("wmjQuery, EventSenderErrorLogger, WmInternals")}).call(window)}).call(this,n(2),n(29))},function(o,e,a){(function(i){(function(){var t=a(159),e={init:function n(){i.register("ComponentAPI").asCtor(function(){this.createVisualDesignComponent=function(e){return t.create("VisualDesignComponent",e)}})},services:[],types:["VisualDesignComponent"]};!function r(){a(160),a(161),a(162)}(),a(69).registerApi(e,t),o.exports=e}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){var v=n(159);v.register("VisualDesignComponent").asCtor(function y(n,r,i,o,e,a){var s,u;this.show=function t(){u.showOverlay(),s.show()},this.remove=function l(){u.removeOverlay(),s.remove()},this.hide=function c(){s.hide()},this.on=function d(e,t){s.on(e,t)},this.fadeIn=function f(e,t){u.showOverlay(),i.mutate(function(){s.stop(!0,!1).hide().fadeIn(e,t)})},this.fadeOut=function p(e,t){s.fadeOut(e,t)},this.appendToBody=function g(){e.getTopContainer().append(s)},this.getVisualDesignElement=function h(){return s[0]},function m(){var e=o.translate(a),t=n.create(e);s=r(t),u=v.create("OverlayWrapper",{visualDesign:a,$element:s})}()}).asProto().dependencies("VisualDesignDrawableCreator, wmjQuery, DOMSessionManager, VisualDesignStyleToCssTranslator, TopContainerProvider")}).call(window)},function(e,t,n){(function(){n(159).register("OverlayChecker").asCtor(function e(){this.shouldHaveOverlay=function r(e){if(!e)return!1;var t=e.backcover;return!!(t&&t.Style.opacity>n)};var n=0})}).call(window)},function(e,t,n){(function(){var u=n(159);u.register("OverlayWrapper").asCtor(function l(i,o,n){var a,s;this.showOverlay=function t(){var e=a.getOverlay();e&&(!function r(){var e=s[0].style,t=Number(e.zIndex),n=e.getPropertyPriority("z-index");t===i.VISUAL_DESIGN_DRAWABLE.DefaultZIndex&&e.setProperty("z-index",(t+1).toString(),n)}(),e.show())},this.removeOverlay=function e(){a.removeOverlay()},function r(){s=n.$element,function t(){a=u.get("PopupUIUtil");var e=function i(e){var t={},n=e.Style;if(o.shouldHaveOverlay(n)){var r=n.backcover.Style;t.overlay={opct:r.opacity,color:r.background}}return t}(n.visualDesign);a.setSettings(e),a.setUiObject(s)}()}()}).asProto().dependencies("Consts, OverlayChecker")}).call(window)},function(i,e,o){(function(){var t=o(164),n={init:function r(){var e=t.get("TransparentLayerProvider");if(n.tryGetWalkMeLayer=e.tryGetWalkMeLayer,n.isEnabled=e.isEnabled,e.isEnabled())return o.e(2).then(function(){var e=[o(720)];(function(){return t.get("TransparentLayer").appendTransparentLayer()}).apply(null,e)})["catch"](o.oe)},services:["TransparentLayerProvider"],types:[]};!function e(){o(165)}(),o(69).registerApi(n,t),i.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){var a=n(164);a.register("TransparentLayerProvider").asCtor(function s(e,t){var n=!1;function r(){return n&&!isNaN(t.get())}this.tryGetWalkMeLayer=function i(e){if(r()){var t=a.get("TransparentLayer").getLayer();if(null!==t)return wmjQuery(t)}return e},this.isEnabled=r,function o(){n=e.isFeatureEnabled("useWalkMeTransparentLayer")}.apply(null,arguments)}).dependencies("FeaturesManager, AuditSourceManager")}).call(window)},function(t,e,n){(function(){var s=n(167),u={init:function l(){var e=s.get("ShoutOutPlaceholdersReplacer"),t=s.get("ShoutOutPlaceholderActionWrapper"),n=s.get("ShoutOutActionPlaceholderClassesAdder"),r=s.get("ShoutOutActionDataProvider"),i=s.get("ShoutOutsManager"),o=s.get("ActiveMainShoutOutActionPlaceholderConfigsGetter"),a=s.get("MainShoutOutActionElementsGetter");u.shoutOutPlaceholdersReplacer={replace:e.replace},u.shoutOutPlaceholderActionWrapper={getType:t.getType,wrap:t.wrap},u.shoutOutActionPlaceholderClassesAdder={addClasses:n.addClasses},u.shoutOutActionDataProvider={fillActionData:r.fillActionData,isWithAction:r.isWithAction},u.shoutOutsManager={autoStartEnabled:i.autoStartEnabled,releaseAll:i.releaseAll,activateById:i.activateById,getActionData:i.getActionData,isWithAction:i.isWithAction},u.activeMainShoutOutActionPlaceholderConfigsGetter={getActiveMainElementPlaceholderConfigs:o.getActiveMainElementPlaceholderConfigs},u.mainShoutOutActionElementsGetter={getMainElementsWithPlaceholders:a.getMainElementsWithPlaceholders},u.shoutOut={create:function(e){return s.create("ShoutOut",e)}},u.visualDesignShoutOut={create:function(e){return s.create("VisualDesignShoutOut",e)}}},services:["ShoutOutPlaceholdersReplacer","ShoutOutPlaceholderActionWrapper","ShoutOutActionPlaceholderClassesAdder","ShoutOutActionDataProvider","ShoutOutsManager"],types:["ShoutOut","VisualDesignShoutOut"]};!function e(){n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(177)}(),n(69).registerApi(u,s),t.exports=u}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(167).register("ShoutOutActionDataProvider").asCtor(function d(t,i,e,n){var o={};function r(e,t){var n=o[t.Type||t.type];if(n){e.Type=n.eventType;var r=t.Args||t.args;r&&r[n.idField]&&(e.ItemId=r[n.idField].toString(),e.Name=i.getDeployableName(n.deployableType,e.ItemId),e.aAppType=n.aAppType)}}function a(e){return n.get(e.Type||e.type).Type==t.DEPLOYABLE_ACTION_TYPES.Action}o={playWt:{idField:"wtId",deployableType:t.DEPLOYABLE_TYPE.Tutorial,eventType:t.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:t.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:t.DEPLOYABLE_TYPE.Content,eventType:t.EVENT_SENDER_ACTIONS.PlayResource,aAppType:t.EVENT_SENDER_EVENT_APPS.Content},playShuttle:{idField:"shuttleId",deployableType:t.DEPLOYABLE_TYPE.Shuttle,eventType:t.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:t.EVENT_SENDER_EVENT_APPS.Shuttle},openMenu:{eventType:t.EVENT_SENDER_ACTIONS.OpenMenu},none:{eventType:t.EVENT_SENDER_ACTIONS.None},playBf:{idField:"bfId",deployableType:t.DEPLOYABLE_TYPE.BusinessSolution,eventType:t.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:t.EVENT_SENDER_EVENT_APPS.BizFlow}},this.fillActionData=function s(e,t){var n;return t=t||{},e.Actions&&(n=wmjQuery.grep(e.Actions,function(e){return a(e)})[0])&&r(t,n),t},this.isWithAction=function u(e){var t=e.Actions;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(a(r)&&"none"!=r.Type)return!0}return!1},this.getActionData=function l(e){var t={};return a(e)&&r(t,e),t},function c(){}.apply(null,arguments)}).dependencies("Consts, DeployablesDataProvider, CommonUtils, ActionsFactory")}).call(window)},function(e,t,n){(function(){n(167).register("ShoutOutPlaceholdersReplacer").asCtor(function e(o,a){this.replace=function s(e,t,n){var r={html:t,type:a.ENTITY_TYPE.shoutout},i={};n&&(r.actionArgs={uiComponent:n},i.initiator=n._uiComponent,i.type=n.getInitiatorType(),i.bbCodeParserVersion=n._settings.v),o.replace(r,e||[],{},i)}}).dependencies("PlaceholdersReplacer, SharedConsts")}).call(window)},function(e,t,r){(function(){r(167).register("ShoutOutPlaceholderActionWrapper").asCtor(function n(e){this.getType=function t(){return e.ENTITY_TYPE.shoutout},this.wrap=function i(e,t,n){return function(){e(),n.Type!=r&&t.uiComponent.destroy()}};var r="destroy"}).dependencies("SharedConsts")}).call(window)},function(e,t,n){(function(){n(167).register("ShoutOutActionPlaceholderClassesAdder").asCtor(function e(o,a){this.addClasses=function d(e,t){var n=o.getMainElementsWithPlaceholders(e),r=a.getActiveMainElementPlaceholderConfigs(t,n);r[u]&&c(r,n,0,u);if(r[l]){var i=1==r.length?0:1;c(r,n,i,l)}};var s="walkme-action-",u="action",l="close";function c(e,t,n,r){var i=function o(e,t){return s+t+"-"+e}(n,e[r].Config.Type);t[r].element.addClass(i)}}).dependencies("MainShoutOutActionElementsGetter, ActiveMainShoutOutActionPlaceholderConfigsGetter")}).call(window)},function(e,r,i){(function(n,a){(function(){"use strict";r.__esModule=!0;var m,e=i(100),v=i(167),t=(m=e.DeployablesManager,n(o,m),o.prototype.activateById=function(e,t,n){var o=this;try{if(this.handleActiveComponent(e,t))return;var a=this.deployablesDict[e];if(!a)return void this.logger.customerLog(this.stringUtils.formatString("ShoutOut with id {0} doesn't exist",e),3);var r=this.getComponent(a);if(!r)return;this.pushActiveComponent(r),this.auditActivation(a,t),r.once("show-end",function(){o.WalkMeGoalsManager.startWatchingDeployable(a,o.playGuidGenerator.generateNewPlayGuid(a.Id)),r.bind("action-start",function(e,t){var n,r=t.actionType,i=t.action;r==o.Consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater?n=o.Consts.SHOUTOUT_CLICK_TYPE.RemindMeLater:r==o.Consts.DEPLOYABLE_ACTION_TYPES.Action?(o.autoStartStoragePersister.setStopCondition(a,o._type,o.Consts.AUTOSTART.STOP_CONDITIONS.Action),n=o.Consts.SHOUTOUT_CLICK_TYPE.Action):r==o.Consts.DEPLOYABLE_ACTION_TYPES.Close&&(o.autoStartStoragePersister.setStopCondition(a,o._type,o.Consts.AUTOSTART.STOP_CONDITIONS.Cancel),n=o.Consts.SHOUTOUT_CLICK_TYPE.Close),o.auditClick(a,o._type,n,a.VisualDesign?i:undefined),o.commonEvents.raiseEvent(o.Consts.EVENTS.ShoutOutClosed,{shoutOut:a,clickType:n,action:i})}),r.once("x-clicked",function(){o.autoStartStoragePersister.setStopCondition(a,o._type,o.Consts.AUTOSTART.STOP_CONDITIONS.XButton),o.auditClick(a,o._type,o.Consts.SHOUTOUT_CLICK_TYPE.XButton),o.commonEvents.raiseEvent(o.Consts.EVENTS.ShoutOutClosed,{shoutOut:a,clickType:o.Consts.SHOUTOUT_CLICK_TYPE.XButton})}),r.once("destroy-end",function(){o.commonEvents.raiseEvent(o.Consts.EVENTS.UIComponentDestroyed),o.commonEvents.raiseEvent(o.Consts.EVENTS.DeployableDestroyed)})}),this.insertComponent(r),this.walkmeVisibleReporter.report();var i={deployable:a,uiComponent:r,deployableType:this._type};return this.commonEvents.raiseEvent(this.Consts.EVENTS.DeployableCreated,i),r}catch(s){this.logger.customerLog(this.stringUtils.formatString("Failed playing shoutOut with id {0}. Exception is {1}",e,s),3)}},o.prototype.getComponent=function(e){try{if(!e.VisualDesign)return this.UIComponentsFactory.get(e.UiComponentId,[e]);if(!this.hostData.isIEOlderThan(9))return v.create("VisualDesignShoutOut",[e]);this.logger.customerLog("VisualDesignShoutOut module is not supported and won't be loaded",3)}catch(t){this.logger.error(t,"error generating class")}return undefined},o.prototype.getActionData=function(e,t){if(t)return this.actionDataProvider.getActionData(t);var n=m.prototype.getActionData.call(this,e);return this.actionDataProvider.fillActionData(e,n)},o.prototype.isWithAction=function(e){return this.actionDataProvider.isWithAction(e)},o.prototype.handleActiveComponent=function(e,t){var n=this.getActiveComponent(e);return n&&this.isLauncherInitiation(t)&&this.flickerActiveComponent(n),!!n},o.prototype.isLauncherInitiation=function(e){return e&&e.type==this.Consts.STEP_PLAY_INITIATOR_ENUM.LAUNCHER},o.prototype.flickerActiveComponent=function(e){e.unbind("hide-end."+o.ACTIVE_COMPONENT_SUFFIX),e.once("hide-end."+o.ACTIVE_COMPONENT_SUFFIX,function(){e.show()}),e.hide()},o.prototype.getActiveComponent=function(e){for(var t=this._activeComponents.length-1;0<=t;t--)if(this._activeComponents[t].getComponent().Id==e)return this._activeComponents[t]},o.prototype.insertComponent=function(e){var t=this;e.once("append-end prepend-end",function(){e.show(),t.handleNextShoutOut()}),this._isInserting?this._insertionChain.push(e):(this._isInserting=!0,this.shouldPrepend(e)?e.prepend():e.append())},o.prototype.handleNextShoutOut=function(){var e=this._insertionChain.shift();e?this.shouldPrepend(e)?e.prepend():e.append():this._isInserting=!1},o.prototype.shouldPrepend=function(e){if(!this.featuresManager.isFeatureEnabled("designTemplatesCategories"))return!1;var t=v.get("DesignTemplates").getDesignTemplateById(e._uiComponent.DesignTemplateId);if(!t||!t.categories||-1===wmjQuery.inArray(this._announcementBarCategory,t.categories))return!1;var n=e._uiComponent.Settings.position;return n==this._positions.Top||n==this._positions.TopLeft||n==this._positions.TopRight},o.prototype.auditActivation=function(e,t){t=t||{},this.ClickAuditManager.SendClickAudit(this._type,e.Id,{type:t.type,id:t.objectId})},o.prototype.auditClick=function(e,t,n,r){this.ClickAuditManager.SendShoutOutAudit(e.Id,t,n,r)},o.prototype.pushActiveComponent=function(e){var t=this,n=this._activeComponents.length;this._activeComponents.push(e),e.bind(o.EVENT_DESTROY_BEGIN,function(){e.unbind(o.EVENT_DESTROY_BEGIN),t._activeComponents.splice(n,1)})},o.prototype.releaseAll=function(e){var t=[];try{for(var n=0;n<this._activeComponents.length;n++){var r=this._activeComponents[n];r.unbind(o.EVENT_DESTROY_BEGIN),t.push(r.destroy())}this._activeComponents.length=0}catch(i){}e&&a.all(t).then(e)},o.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e];return this.autostartStopConditionChecker.check(t,this._type)},o.EVENT_DESTROY_BEGIN="destroy-begin.manager",o.ACTIVE_COMPONENT_SUFFIX="acs",o);function o(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g){var h=m.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.ShoutOut})||this;return h.Consts=t,h.UIComponentsFactory=n,h.WalkMeGoalsManager=r,h.ClickAuditManager=i,h.actionDataProvider=o,h.commonEvents=a,h.playGuidGenerator=s,h.walkmeVisibleReporter=u,h.logger=l,h.stringUtils=c,h.featuresManager=d,h.autostartStopConditionChecker=f,h.autoStartStoragePersister=p,h.hostData=g,h._insertionChain=[],h._activeComponents=[],h._announcementBarCategory=0,h._name="ShoutOut",h._type=t.DEPLOYABLE_TYPE.ShoutOut,h._positions=v.get("Positions"),h}r.ShoutOutsManager=t,v.register("ShoutOutsManager").asCtor(t).dependencies("Lib, Consts, UIComponentsFactory, WalkMeGoalsManager, ClickAuditManager,ShoutOutActionDataProvider, CommonEvents, PlayGuidGenerator, WalkmeVisibleReporter, Logger, StringUtils, FeaturesManager,AutostartStopConditionChecker, AutoStartStoragePersister, HostData")}).call(window)}).call(this,i(1),i(29))},function(e,t,n){(function(){n(167).register("ActiveMainShoutOutActionPlaceholderConfigsGetter").asCtor(function e(){this.getActiveMainElementPlaceholderConfigs=function s(e,t){for(var n={length:0},r=0;r<e.length&&n.length<2;r++){var i=e[r];i.Config.IsActive&&(t[o]&&i.Name==t[o].placeholderName?(n[o]=i,n.length++):t[a]&&i.Name==t[a].placeholderName&&(n[a]=i,n.length++))}return n};var o="action",a="close"})}).call(window)},function(e,t,n){(function(){n(167).register("MainShoutOutActionElementsGetter").asCtor(function e(){this.getMainElementsWithPlaceholders=function u(e){var t={};return s(e,t,n,i),s(e,t,r,o),t};var n=".wm-template-main-bg",r=".wm-close-link",a="wm-action-placeholder",i="action",o="close";function s(e,t,n,r){var i=e.find(n),o=i.attr(a);o&&(t[r]={placeholderName:o,element:i})}})}).call(window)},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var d,e=u(176),t=u(167),n=u(17)(t),r=(d=n.shoutOutBase,o(i,d),i.prototype.registerEvents=function(){d.prototype.registerEvents.call(this),this.registerBBCodeEvents()},i.prototype.registerBBCodeEvents=function(){var e=this.getBBcodeEventCallback(),t={objectId:this._uiComponent.Id,type:this._consts.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT};this._bbCodeEventsBinder.bind(this._uiCreator.ui,e,t)},i.prototype.getBBcodeEventCallback=function(){var e=wmjQuery.proxy(function(){this.destroy()},this),t={uiCreator:this._uiCreator,defaultt:e,defaultValue:e,returnValue:null};return this._commonEvents.raiseEvent("shoutoutBBCodeClickCallback",t),t.returnValue},i.prototype.createConfig=function(){var e=d.prototype.createConfig.call(this),t=this._specificEntityDesignTemplateCssClassGetter.get(this._uiComponent,this._sharedConsts.templateEntityType.popup);return t&&(e.designTemplateCssClass=t),e},i.prototype.getInitiatorType=function(){return this._consts.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT},i=a([e.SkipMinification()],i));function i(e,t,n,r,i,o,a,s,u,l){var c=d.call(this,e,t,r,o,u,l)||this;return c._bbCodeEventsBinder=i,c._consts=o,c._commonEvents=n,c._specificEntityDesignTemplateCssClassGetter=a,c._sharedConsts=s,c.createUi(),c}t.register("ShoutOut").asCtor(r).asProto().dependencies("ActionsFactory, CommonUtils, CommonEvents, BBCodeParser, BBCodeEventsBinder, Consts, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, DesignTemplateHtmlGetter")}).call(window)}).call(this,u(1),u(72))},function(e,n){(function(){"use strict";function e(e){}n.__esModule=!0,n.SkipMinification=function t(){return e}}).call(window)},function(e,t,n){(function(B){(function(){var M=n(167);M.register("VisualDesignShoutOut").asCtor(function R(s,u,l,e,r,c,i){var o,a,d,f=this;f.once=function P(e,t){o.one(e,t)},f.bind=function k(e,t){o.bind(e,t)},f.unbind=_,f.show=function D(){return p.then(function(){A(h),a.fadeIn(T,function(){A(m),e.deprecatedRaiseEvent(m,f)})})},f.hide=function x(){A(v),a.fadeOut(w,function(){A(y)})},f.append=function N(){a.appendToBody(),A(S)},f.trigger=A,f.destroy=I,f.getComponent=function O(){return d},f.getComponentElement=function L(){return a.getVisualDesignElement()};var p,g="action-start",t="destroy-begin",n="destroy-end",h="show-begin",m="show-end",v="hide-begin",y="hide-end",S="append-end",E="x-clicked",w=200,T=400;function C(e,t){var n=function i(e){var t=s.extend({uiComponent:f},e.args),n=u.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT;return l.get(e.type,t,n,d)}(c.getData(t)),r=n.Type;A(g,function o(e,t){return{actionType:t,action:e}}(t,r)),n.doAction(),function a(e,t){return e!==u.DEPLOYABLE_ACTION_TYPES.Close&&"none"!==t}(r,t.type)&&I()}function b(){A(E),I()}function I(){return new B(function(e){A(t),a.fadeOut(w,function(){a.remove(),A(n),_(),e()})})}function _(e){o.unbind(e)}function A(e,t){o.trigger(e,t)}!function F(){d=i,o=s({});var e=r.set(i.VisualDesign,u.VISUAL_DESIGN_TYPES.ShoutOut);(a=M.create("VisualDesignComponent",e)).hide();var t=u.EVENTS.Drawables;a.on(t.ActionClicked,C),a.on(t.XButtonClicked,b),a.on(t.KeypressEsc,C),function n(){p=new B(function(e){a.on("all-images-loaded",function(){e()})})}()}()}).asProto().dependencies("wmjQuery, Consts, ActionsFactory, CommonEvents, AccessibilityAttributesSetter, ActionDataAdapter")}).call(window)}).call(this,n(29))},function(i,e,o){(function(){var t=o(179),n={init:function r(){var e=t.get("CssAttributeSetter");n.setCssAttribute=e.set,n.updateCssAttribute=e.update},services:["CssAttributeSetter"],types:[]};!function e(){o(180)}(),o(69).registerApi(n,t),i.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(179).register("CssAttributeSetter").asCtor(function r(e,a){var s;function u(e,t,n){var r=s?" !important":"",i="";for(var o in e)n&&t.style[o]||(i+=o+":"+e[o]+r+";");return i}this.set=function n(e,t){a.setAttribute(e,"style",u(t))},this.update=function l(e,t,n){var r=u(t,e,n);n||function i(e,t){for(var n in t)e.style[n]=""}(e,t),a.setAttribute(e,"style",function o(e){return e.getAttribute("style")||""}(e).replace(/([;]?\s*$)/,";")+r)},function t(){s=!e.isFeatureEnabled("removeCSSImportant")}()}).dependencies("FeaturesManager, DomManager")}).call(window)},function(i,e,o){(function(){var t=o(182),n={init:function r(){var e=t.get("DomManager");n.parseElement=e.parseElement,n.parseElementAsJquery=e.parseElementAsJquery,n.setInnerHTML=e.setInnerHTML,n.setAttribute=e.setAttribute},services:["DomManager"],types:[]};!function e(){o(183),o(184),o(186),o(187),o(188)}(),o(69).registerApi(n,t),i.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(t,e,n){(function(){function e(){function c(e){var t=/important$/.test(e);return t&&(e=e.replace(/!\s*important/,"").trim()),{value:e,important:t?"important":""}}this.setAttribute=function r(e,t,n){"style"===t?function l(e,t){for(var n=t.split(";"),r=0;r<n.length;r++){var i=n[r].split(":");if(2===i.length){var o=i[0].trim(),a=i[1].trim(),s=c(a);try{e.style.setProperty(o,s.value,s.important)}catch(u){e.style[o]=a}}}}(e,n):e.setAttribute(t,n)}}n(182).register("SafeAttributeSetter").asCtor(e),t.exports=e}).call(window)},function(n,e,r){(function(){var e=r(182),u=r(185);function t(a){function s(e,t){return"text"===e.type?function r(e,t){var n=t.createElement("div");return n.innerHTML=e.data,n.firstChild}(e,t):function i(e,t){if(!e||"tag"!==e.type)return undefined;var n=t.createElement(e.name);return function r(e,t){if(!t)return;for(var n in t)a.setAttribute(e,n,t[n])}(n,e.attribs),function o(e,t,n){if(!t||!t.length)return;for(var r=0;r<t.length;r++){var i=s(t[r],n);i&&e.appendChild(i)}}(n,e.children,t),n}(e,t)}this.parse=function o(e,t){if(!e)return e;var n=new u.DefaultHandler;return new u.Parser(n).parseComplete(e),function i(e,t){if(!e||0===e.length)return;if(1===e.length)return s(e[0],t);for(var n=t.createElement("div"),r=0;r<e.length;r++)n.appendChild(s(e[r],t));return n.childNodes}(n.dom,function r(e){return e||document}(t))}}e.register("StringToDomElementParser").asCtor(t).dependencies("SafeAttributeSetter"),n.exports=t}).call(window)},function(e,o,t){(function(t){!function(){if(!function e(){return"string"==typeof t}()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},o=this.Tautologistics.NodeHtmlParser}var u={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};function l(e,t){this._options=t||{},this._options.includeLocation==undefined&&(this._options.includeLocation=!1),this.validateHandler(e),this._handler=e,this.reset()}function n(e){n.super_.call(this,e,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function r(e,t){this.reset(),this._options=t||{},this._options.ignoreWhitespace==undefined&&(this._options.ignoreWhitespace=!1),this._options.verbose==undefined&&(this._options.verbose=!0),this._options.enforceEmptyTags==undefined&&(this._options.enforceEmptyTags=!0),"function"==typeof e&&(this._callback=e)}l._reTrim=/(^\s+|\s+$)/g,l._reTrimComment=/(^\!--|--$)/g,l._reWhitespace=/\s/g,l._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,l._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,l._reTags=/[\<\>]/g,l.prototype.parseComplete=function(e){this.reset(),this.parseChunk(e),this.done()},l.prototype.parseChunk=function(e){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=e,this.parseTags()},l.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var e=this._buffer;this._buffer="";var t={raw:e,data:this._parseState==u.Text?e:e.replace(l._reTrim,""),type:this._parseState};this._parseState!=u.Tag&&this._parseState!=u.Script&&this._parseState!=u.Style||(t.name=this.parseTagName(t.data)),this.parseAttribs(t),this._elements.push(t)}this.writeHandler(),this._handler.done()}},l.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=u.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},l.prototype._options=null,l.prototype._handler=null,l.prototype._buffer=null,l.prototype._done=!1,l.prototype._elements=null,l.prototype._elementsCurrent=0,l.prototype._current=0,l.prototype._next=0,l.prototype._location=null,l.prototype._parseState=u.Text,l.prototype._prevTagSep="",l.prototype._tagStack=null,l.prototype.parseTagAttribs=function(e){for(var t=e.length,n=0;n<t;){var r=e[n++];r.type!=u.Tag&&r.type!=u.Script&&r.type!=u.style||this.parseAttribs(r)}return e},l.prototype.parseAttribs=function(e){if(e.type==u.Script||e.type==u.Style||e.type==u.Tag){var t,n=e.data.split(l._reWhitespace,1)[0],r=e.data.substring(n.length);if(!(r.length<1))for(l._reAttrib.lastIndex=0;t=l._reAttrib.exec(r);)e.attribs==undefined&&(e.attribs={}),"string"==typeof t[1]&&t[1].length?e.attribs[t[1]]=t[2]:"string"==typeof t[3]&&t[3].length?e.attribs[t[3].toString()]=t[4].toString():"string"==typeof t[5]&&t[5].length?e.attribs[t[5]]=t[6]:"string"==typeof t[7]&&t[7].length&&(e.attribs[t[7]]=t[7])}},l.prototype.parseTagName=function(e){if(null==e||""==e)return"";var t=l._reTagName.exec(e);return t?(t[1]?"/":"")+t[2]:""},l.prototype.parseTags=function(){for(var e=this._buffer.length-1;l._reTags.test(this._buffer);){this._next=l._reTags.lastIndex-1;var t=this._buffer.charAt(this._next),n=this._buffer.substring(this._current,this._next),r={raw:n,data:this._parseState==u.Text?n:n.replace(l._reTrim,""),type:this._parseState},i=this.parseTagName(r.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==u.Script){if("/script"==i.toLowerCase())this._tagStack.pop();else if(0!=r.raw.indexOf("!--"))if(r.type=u.Text,this._elements.length&&this._elements[this._elements.length-1].type==u.Text)(o=this._elements[this._elements.length-1]).raw=o.data=o.raw+this._prevTagSep+r.raw,r.raw=r.data=""}else if(this._tagStack[this._tagStack.length-1]==u.Style){if("/style"==i.toLowerCase())this._tagStack.pop();else if(0!=r.raw.indexOf("!--"))if(r.type=u.Text,this._elements.length&&this._elements[this._elements.length-1].type==u.Text){var o=this._elements[this._elements.length-1];""!=r.raw?(o.raw=o.data=o.raw+this._prevTagSep+r.raw,r.raw=r.data=""):o.raw=o.data=o.raw+this._prevTagSep}else""!=r.raw&&(r.raw=r.data=r.raw)}else if(this._tagStack[this._tagStack.length-1]==u.Comment){var a=r.raw.length;if("-"==r.raw.charAt(a-2)&&"-"==r.raw.charAt(a-1)&&">"==t)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==u.Comment)(o=this._elements[this._elements.length-1]).raw=o.data=(o.raw+r.raw).replace(l._reTrimComment,""),r.raw=r.data="",r.type=u.Text;else r.type=u.Comment;else if(r.type=u.Comment,this._elements.length&&this._elements[this._elements.length-1].type==u.Comment)(o=this._elements[this._elements.length-1]).raw=o.data=o.raw+r.raw+t,r.raw=r.data="",r.type=u.Text;else r.raw=r.data=r.raw+t}if(r.type==u.Tag){var s=(r.name=i).toLowerCase();if(0==r.raw.indexOf("!--")){r.type=u.Comment,delete r.name;a=r.raw.length;"-"==r.raw.charAt(a-1)&&"-"==r.raw.charAt(a-2)&&">"==t?r.raw=r.data=r.raw.replace(l._reTrimComment,""):(r.raw+=t,this._tagStack.push(u.Comment))}else 0==r.raw.indexOf("!")||0==r.raw.indexOf("?")?r.type=u.Directive:"script"==s?(r.type=u.Script,"/"!=r.data.charAt(r.data.length-1)&&this._tagStack.push(u.Script)):"/script"==s?r.type=u.Script:"style"==s?(r.type=u.Style,"/"!=r.data.charAt(r.data.length-1)&&this._tagStack.push(u.Style)):"/style"==s&&(r.type=u.Style);r.name&&"/"==r.name.charAt(0)&&(r.data=r.name)}""==r.raw&&r.type==u.Text||(this._options.includeLocation&&!r.location&&(r.location=this.getLocation(r.type==u.Tag)),this.parseAttribs(r),this._elements.push(r),r.type!=u.Text&&r.type!=u.Comment&&r.type!=u.Directive&&"/"==r.data.charAt(r.data.length-1)&&this._elements.push({raw:"/"+r.name,data:"/"+r.name,name:"/"+r.name,type:r.type})),this._parseState="<"==t?u.Tag:u.Text,this._current=this._next+1,this._prevTagSep=t}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=e?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},l.prototype.getLocation=function(e){for(var t,n=this._location,r=this._current-(e?1:0),i=e&&0==n.charOffset&&0==this._current;n.charOffset<r;n.charOffset++)"\n"==(t=this._buffer.charAt(n.charOffset))?(n.inBuffer++,n.col=0):"\r"!=t&&n.col++;return{line:n.row+n.inBuffer+1,col:n.col+(i?0:1)}},l.prototype.validateHandler=function(e){if("object"!=typeof e)throw new Error("Handler is not an object");if("function"!=typeof e.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof e.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof e.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof e.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof e.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof e.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},l.prototype.writeHandler=function(e){if(e=!!e,!this._tagStack.length||e)for(;this._elements.length;){var t=this._elements.shift();switch(t.type){case u.Comment:this._handler.writeComment(t);break;case u.Directive:this._handler.writeDirective(t);break;case u.Text:this._handler.writeText(t);break;default:this._handler.writeTag(t)}}},l.prototype.handleError=function(e){if("function"!=typeof this._handler.error)throw e;this._handler.error(e)},function i(e,t){function n(){}n.prototype=t.prototype,e.super_=t,e.prototype=new n,e.prototype.constructor=e}(n,r),n.prototype.done=function(){var e,i={},t=c.getElementsByTagName(function(e){return"rss"==e||"feed"==e},this.dom,!1);if(t.length&&(e=t[0]),e){if("rss"==e.name){i.type="rss",e=e.children[0],i.id="";try{i.title=c.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(o){}try{i.link=c.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(o){}try{i.description=c.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(o){}try{i.updated=new Date(c.getElementsByTagName("lastBuildDate",e.children,!1)[0].children[0].data)}catch(o){}try{i.author=c.getElementsByTagName("managingEditor",e.children,!1)[0].children[0].data}catch(o){}i.items=[],c.getElementsByTagName("item",e.children).forEach(function(e,t,n){var r={};try{r.id=c.getElementsByTagName("guid",e.children,!1)[0].children[0].data}catch(o){}try{r.title=c.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(o){}try{r.link=c.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(o){}try{r.description=c.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(o){}try{r.pubDate=new Date(c.getElementsByTagName("pubDate",e.children,!1)[0].children[0].data)}catch(o){}i.items.push(r)})}else{i.type="atom";try{i.id=c.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(o){}try{i.title=c.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(o){}try{i.link=c.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(o){}try{i.description=c.getElementsByTagName("subtitle",e.children,!1)[0].children[0].data}catch(o){}try{i.updated=new Date(c.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(o){}try{i.author=c.getElementsByTagName("email",e.children,!0)[0].children[0].data}catch(o){}i.items=[],c.getElementsByTagName("entry",e.children).forEach(function(e,t,n){var r={};try{r.id=c.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(o){}try{r.title=c.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(o){}try{r.link=c.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(o){}try{r.description=c.getElementsByTagName("summary",e.children,!1)[0].children[0].data}catch(o){}try{r.pubDate=new Date(c.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(o){}i.items.push(r)})}this.dom=i}n.super_.prototype.done.call(this)},r._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},r.reWhitespace=/^\s*$/,r.prototype.dom=null,r.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},r.prototype.done=function(){this._done=!0,this.handleCallback(null)},r.prototype.writeTag=function(e){this.handleElement(e)},r.prototype.writeText=function(e){this._options.ignoreWhitespace&&r.reWhitespace.test(e.data)||this.handleElement(e)},r.prototype.writeComment=function(e){this.handleElement(e)},r.prototype.writeDirective=function(e){this.handleElement(e)},r.prototype.error=function(e){this.handleCallback(e)},r.prototype._options=null,r.prototype._callback=null,r.prototype._done=!1,r.prototype._tagStack=null,r.prototype.handleCallback=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},r.prototype.isEmptyTag=function(e){var t=e.name.toLowerCase();return"/"==t.charAt(0)&&(t=t.substring(1)),this._options.enforceEmptyTags&&!!r._emptyTags[t]},r.prototype.handleElement=function(e){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete e.raw,"tag"!=e.type&&"script"!=e.type&&"style"!=e.type||delete e.data),this._tagStack.last())if(e.type!=u.Text&&e.type!=u.Comment&&e.type!=u.Directive)if("/"==e.name.charAt(0)){var t=e.name.substring(1);if(!this.isEmptyTag(e)){for(var n=this._tagStack.length-1;-1<n&&this._tagStack[n--].name!=t;);if(-1<n||this._tagStack[0].name==t)for(;n<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e),this.isEmptyTag(e)||this._tagStack.push(e);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e);else e.type!=u.Text&&e.type!=u.Comment&&e.type!=u.Directive?"/"!=e.name.charAt(0)&&(this.dom.push(e),this.isEmptyTag(e)||this._tagStack.push(e)):this.dom.push(e)};var c={testElement:function(e,t){if(!t)return!1;for(var n in e)if("tag_name"==n){if("tag"!=t.type&&"script"!=t.type&&"style"!=t.type)return!1;if(!e.tag_name(t.name))return!1}else if("tag_type"==n){if(!e.tag_type(t.type))return!1}else if("tag_contains"==n){if("text"!=t.type&&"comment"!=t.type&&"directive"!=t.type)return!1;if(!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[n](t.attribs[n]))return!1;return!0},getElements:function(e,t,n,r){if(n=n===undefined||null===n||!!n,r=isNaN(parseInt(r))?-1:parseInt(r),!t)return[];var i,o=[];function a(t){return function(e){return e==t}}for(var s in e)"function"!=typeof e[s]&&(e[s]=a(e[s]));if(c.testElement(e,t)&&o.push(t),0<=r&&o.length>=r)return o;if(n&&t.children)i=t.children;else{if(!(t instanceof Array))return o;i=t}for(var u=0;u<i.length&&(o=o.concat(c.getElements(e,i[u],n,r)),!(0<=r&&o.length>=r));u++);return o},getElementById:function(e,t,n){var r=c.getElements({id:e},t,n,1);return r.length?r[0]:null},getElementsByTagName:function(e,t,n,r){return c.getElements({tag_name:e},t,n,r)},getElementsByTagType:function(e,t,n,r){return c.getElements({tag_type:e},t,n,r)}};o.Parser=l,o.DefaultHandler=r,o.RssHandler=n,o.ElementType=u,o.DomUtils=c}()}).call(this,"/")},function(t,e,n){(function(){function e(r){this.parseElement=function i(e,t){var n=function r(e){return e||document}(t).createElement("div");return n.innerHTML=e,1===n.childElementCount?n.children[0]:n.children},this.parseElementAsJquery=function t(e){return r(e)},this.setInnerHTML=function n(e,t){r(e).html(t)},this.setAttribute=function o(e,t,n){r(e).attr(t,n)},this.removeAttribute=function a(e,t){r(e).removeAttr(t)}}n(182).register("DefaultDomManager").asCtor(e).dependencies("wmjQuery"),t.exports=e}).call(window)},function(t,e,n){(function(){function e(r,i,o){function a(e,t){return e instanceof Element?e:i.parse(e,t)}function n(e,t){e.removeAttribute(t)}function s(e,t){var n;e.innerHTML="",t instanceof r?n=t:"string"==typeof t?n=i.parse("<div>"+t+"</div>").childNodes:e.innerHTML=t,function o(e,t){if(!t||!t.length)return;for(var n=t.length-1;0<=n;n--){var r=t[n];i=void 0,(i=r.nodeName)&&"script"===i.toLowerCase()||e.insertBefore(r,e.firstChild)}var i}(e,n)}function u(t,n){return function(){var e=arguments;t instanceof r?t.each(function(){l(n,this,e)}):t instanceof Element&&l(n,t,e)}}function l(e,t,n){return e.bind(null,t).apply(null,n)}this.parseElement=a,this.parseElementAsJquery=function c(e,t){if(e instanceof r)return e;var n=a(e,t);return r(n)},this.setInnerHTML=function d(e,t){u(e,s)(t)},this.setAttribute=function f(e,t,n){u(e,o.setAttribute)(t,n)},this.removeAttribute=function p(e,t){u(e,n)(t)}}n(182).register("CspDomManager").asCtor(e).dependencies("wmjQuery, StringToDomElementParser, SafeAttributeSetter"),t.exports=e}).call(window)},function(t,e,n){(function(){var l=n(182);function e(s,u){var r;function e(t){return function(){var e=function n(){if(r)return r;var e=function a(){var e,t=l.get("FeaturesManager"),n=l.get("HostData"),r=l.get("IsInEditor").get(),i=n.isIE(),o=t.isReady();e=r||i||o&&!t.isFeatureEnabled("inlineStyleCspSupport")?s:u;return{domManager:e,shouldCache:r||i||o}}(),t=e.domManager;e.shouldCache&&(r=t);return t}();return e[t].apply(e,arguments)}}this.parseElement=e("parseElement"),this.parseElementAsJquery=e("parseElementAsJquery"),this.setInnerHTML=e("setInnerHTML"),this.setAttribute=e("setAttribute"),this.removeAttribute=e("removeAttribute")}l.register("DomManager").asCtor(e).dependencies("DefaultDomManager, CspDomManager"),t.exports=e}).call(window)},function(t,e,n){(function(){var u=n(190),l={init:function c(){var e=u.get("VisualDesignDrawableDrawer"),t=u.get("RootStyleSplitter"),n=u.get("VisualDesignStyleToCssTranslator"),r=u.get("DrawableCssResetter"),i=u.get("WrapperAttributesSetter"),o=u.get("DefaultWrapperStyleProvider"),a=u.get("ImagesLoadedListener"),s=u.get("AccessibilityAttributesSetter");l.draw=e.draw,l.splitRootStyle=t.splitRootStyle,l.translateVisualDesignStyleToCss=n.translate,l.setWrapperDefaultAttributes=i.setDefaultAttributes,l.getDefaultWrapperStyle=o.get,l.resetCss=r.resetCss,l.waitForAll=a.waitForAll,l.setAccessibilityAttributes=s.set},services:["VisualDesignDrawableDrawer","RootStyleSplitter","VisualDesignStyleToCssTranslator","WrapperAttributesSetter","DefaultWrapperStyleProvider","DrawableCssResetter","ImagesLoadedListener","AccessibilityAttributesSetter","FontStyleTranslator","ActionDataAdapter"],types:[]};!function e(){n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229)}(),n(69).registerApi(l,u),t.exports=l}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(190).register("ElementCreatorFactory").asCtor(function s(e,n,t,r){this.get=function o(e){var t=i[e];t=t||n;return t};var i={XButton:r};!function a(){e.isIE(9)&&(i.Text=t)}()}).dependencies("HostData, VisualDesignHtmlElementCreator, TextCreator, XButtonCreator")}).call(window)},function(e,t,n){(function(){var v=n(190);v.register("VisualDesignHtmlElementCreator").asCtor(function t(u,l,c,d,f,e){var p;this.createElement=function m(e){var t=e.Type,n=g[t],r=document.createElement(n),i=e.Id;i&&r.setAttribute("id",i);return r.setAttribute("class",h+t.toLowerCase()),function a(e,t){if(!t)return;(function n(e,t){t.Quill?function r(e,t){if(!p){if(!v.has("RichTextEditorConverter"))return!1;p=v.get("RichTextEditorConverter")}var n=p.getRichTextElement(t.ops);(function i(e,t){for(var n=t.length,r=0;r<n;r++)e.appendChild(t[0])})(e,n.childNodes),e.className+=(e.className?" ":"")+f.DEFAULT_CLASSES.IGNORE_CSS_RESET}(e,t.Quill):function i(e,t){if(t){var n=c.decodeString(t),r=document.createTextNode(n);e.appendChild(r)}}(e,t.Text)})(e,t),function r(e,t){t&&!/^\s*javascript\s*:/.test(t.toLowerCase())&&e.setAttribute("src",t)}(e,function i(e){return e.Url||e.ImageSource}(t)),function o(e,t){if(!t)return;for(var n in t)e.setAttribute(n,t[n])}(e,t.Attributes)}(r,e.Content),function o(e,t){var n={position:"absolute","box-sizing":"border-box"};l.extend(n,t),u.set(e,n)}(r,e.Style),function s(e){var t=d.getAdjuster(e.tagName);t&&t.adjust(e)}(r),r};var g={Text:"span",Button:"button",Image:"img",Shape:"div","Web-View":"iframe",Canvas:"div","Rich-Text":"div"},h="wm-visual-design-"}).dependencies("CssAttributeSetter, wmjQuery, HtmlDecoder, ElementAdjusterFactory, Consts, DomManager")}).call(window)},function(e,t,n){(function(){n(190).register("TextCreator").asCtor(function e(r,i){this.createElement=function o(e){var t=r.createElement(e),n=document.createElement("div");return n.setAttribute("style",t.getAttribute("style")),i.update(n,{display:"table","table-layout":"fixed"}),i.update(t,{display:"table-cell","vertical-align":"middle",top:"",left:"",right:"",bottom:"",position:""}),n.appendChild(t),n}}).dependencies("VisualDesignHtmlElementCreator, CssAttributeSetter")}).call(window)},function(e,t,n){(function(){n(190).register("VisualDesignDrawableDrawer").asCtor(function e(a,r,s){this.draw=function i(e){var t=function o(e){var t=a.get(e.Type).createElement(e);var n=e.ChildElements;if(n)for(var r=0;r<n.length;r++){var i=o(n[r]);t.appendChild(i)}s.addClickEvents(t,e);return t}(e.RootVisualElement);return function n(e){var t=e.Style.xButton;return t&&t.enabled}(e)&&t.appendChild(r.createOldXButton()),s.addESCPressEvents(t),t}}).dependencies("ElementCreatorFactory, XButtonCreator, VisualDesignActionsHandler")}).call(window)},function(e,t,n){(function(){n(190).register("HtmlElementEventAttacher").asCtor(function e(a,s){this.attach=function u(e,t,n,r){var i=n.eventName||s.EVENTS.Drawables.ActionClicked,o=a(e);o.on(t,function(e){r&&!r(e)||(!function t(e){return e.params&&e.params.Action&&e.params.Action.preventDefault}(n)||e.preventDefault(),o.trigger(i,n.params))})}}).dependencies("wmjQuery, Consts")}).call(window)},function(e,t,n){(function(){n(190).register("HtmlElementKeydownEventAttacher").asCtor(function e(n){this.attach=function r(e,t){n.attach(e,"keydown",t,function(e){return!t.keyCode||t.keyCode===e.keyCode})}}).dependencies("HtmlElementEventAttacher")}).call(window)},function(e,t,n){(function(){n(190).register("HtmlElementClickEventAttacher").asCtor(function e(n){this.attach=function r(e,t){n.attach(e,"click",t)}}).dependencies("HtmlElementEventAttacher")}).call(window)},function(e,t,n){(function(){n(190).register("VisualDesignStyleToCssTranslator").asCtor(function e(n,i){this.translate=function o(e){var t={};return n.extend(!0,t,e),function r(e){e.Style&&(e.Style=i.translate(e));var t=e.ChildElements;if(!t)return;for(var n=0;n<t.length;n++)r(t[n])}(t.RootVisualElement),t}}).dependencies("wmjQuery, SingleElementStyleTranslator")}).call(window)},function(e,t,n){(function(){n(190).register("StyleTranslatorFactory").asCtor(function d(e,t,n,r,i,o,a,s,u){this.getTranslator=function c(e){return l[e]};var l={background:e,cornerRadius:t,direction:n,position:r,size:i,border:o,font:a,zIndex:s,opacity:u}}).dependencies("BackgroundStyleTranslator, CornerRadiusStyleTranslator, DirectionStyleTranslator, PositionStyleTranslator,SizeStyleTranslator, BorderStyleTranslator, FontStyleTranslator, ZIndexStyleTranslator, OpacityStyleTranslator")}).call(window)},function(e,t,n){(function(){n(190).register("BackgroundStyleTranslator").asCtor(function e(r){this.translate=function o(e){var t=e.opacity,n=t!==undefined?t:i;return{"background-color":"rgba"+r.hexToRgba(e.background,n)}};var i=1}).dependencies("UiUtils")}).call(window)},function(e,t,n){(function(){n(190).register("CornerRadiusStyleTranslator").asCtor(function e(){this.translate=function i(e){return{"border-radius":function t(e){return[e.tl,e.tr,e.br,e.bl].join(n+r)+n}(e.cornerRadius)}};var n="px",r=" "})}).call(window)},function(e,t,n){(function(){n(190).register("DirectionStyleTranslator").asCtor(function e(){this.translate=function i(e){return{direction:e.direction===t?n:r}};var t=0,n="ltr",r="rtl"})}).call(window)},function(e,t,n){(function(){n(190).register("PositionStyleTranslator").asCtor(function e(a,o){this.translate=function c(e){var t=e.position,n=e.size,r=u(n,t,t.vReference),i=u(n,t,t.hReference);return o.extend({},r,i)};var s={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom",LEFT:"left",CENTER:"center",RIGHT:"right"};function u(e,t,n){n=n.toLowerCase();var r={},i=t.vertical,o=t.horizontal;switch(n){case s.MIDDLE:r.top=l(e.height,i);break;case s.CENTER:r.left=l(e.width,o);break;case s.TOP:case s.BOTTOM:r[n]=a.getDimensionValue(i);break;case s.LEFT:case s.RIGHT:r[n]=a.getDimensionValue(o)}return r}function l(e,t){return"calc(50% + "+a.getDimensionValue(t)+" - ("+a.getDimensionValue(e)+" / 2))"}}).dependencies("DimensionValueGetter, wmjQuery")}).call(window)},function(e,t,n){(function(){n(190).register("SizeStyleTranslator").asCtor(function e(o){this.translate=function a(e){var t=e.size,n={},r=t.width,i=t.height;return r&&(n.width=o.getDimensionValue(r)),i&&(n.height=o.getDimensionValue(i)),n}}).dependencies("DimensionValueGetter")}).call(window)},function(e,t,n){(function(){n(190).register("BorderStyleTranslator").asCtor(function e(){this.translate=function a(e){var t=e.border,n={"border-color":t.color,"border-style":o},r=t.weight;r&&(n["border-width"]=r+i);return n};var i="px",o="solid"})}).call(window)},function(e,t,n){(function(){n(190).register("FontStyleTranslator").asCtor(function e(){this.translate=function d(e){var t=e.font,n={"text-align":t.align,"font-weight":t.bold?a:i,color:t.color,"font-family":l(t.family),"font-style":t.italics?s:i,"font-size":t.size+o};wmjQuery.extend(n,function r(e){switch(e){case"left":return c("flex-start","start");case"right":return c("flex-end","end");default:return c("center","center")}}(t.align)),t.underline&&(n["text-decoration"]=u);return n},this.getFontFamilyWithFallback=l;var i="normal",o="px",a="bold",s="italic",u="underline",t="arial";function l(e){return e?e.replace(/([,;\s?])*$/,", "+t):t}function c(e,t){return{"justify-content":e,"-ms-flex-pack":t}}})}).call(window)},function(e,t,n){(function(){n(190).register("ZIndexStyleTranslator").asCtor(function e(){this.translate=function t(e){return{"z-index":e.zIndex}}})}).call(window)},function(e,t,n){(function(){n(190).register("OpacityStyleTranslator").asCtor(function e(){this.translate=function t(e){return{opacity:e.opacity}}})}).call(window)},function(e,t,n){(function(){n(190).register("DimensionValueGetter").asCtor(function e(){this.getDimensionValue=function t(e){return e.value+e.unit}})}).call(window)},function(e,t,n){(function(){n(190).register("RootStyleSplitter").asCtor(function e(o){this.splitRootStyle=function s(e){var t={},n={};for(var r in e){var i=e[r];-1!==o.inArray(r,a)?t[r]=i:n[r]=i}return{outerStyle:t,innerStyle:n}};var a=["left","top","right","bottom","width","height","z-index","position"]}).dependencies("wmjQuery")}).call(window)},function(e,t,n){(function(){n(190).register("DefaultStyleGetter").asCtor(function o(e,t){var r;this.getMissingStyle=function i(e){var t={};for(var n in r)e[n]||(t[n]=r[n]);return t},function n(){r={"border-style":"none","border-width":0,padding:0},e.isFeatureEnabled(t.FEATURES.WmAccessibility)||(r.outline="none")}()}).dependencies("FeaturesManager, Consts")}).call(window)},function(e,t,n){(function(){n(190).register("DrawableCssResetter").asCtor(function e(o,a){this.resetCss=function i(e){for(var t=0;t<r.length;t++){var n=r[t];s(e,n.selector,n.css)}};var r=[{selector:"tr",css:{display:"table-row","vertical-align":"inherit"}},{selector:"td, th",css:{display:"table-cell","vertical-align":"inherit",padding:"1px"}},{selector:"tfoot",css:{display:"table-footer-group","vertical-align":"middle"}},{selector:"tbody",css:{display:"table-row-group","vertical-align":"middle"}},{selector:"thead",css:{display:"table-header-group","vertical-align":"middle"}},{selector:"table",css:{display:"table","border-collapse":"separate","border-spacing":"2px"}},{selector:"ul",css:{"padding-left":"40px"}},{selector:"li",css:{display:"list-item"}},{selector:"span, button, input, label, a, b, br, img, i, u",css:{display:"inline"}},{selector:":not(video)",css:{height:"auto",width:"auto"}},{selector:"*",css:{display:"block","padding-top":"0","padding-left":"0","padding-bottom":"0","padding-right":"0","margin-top":"0","margin-left":"0","margin-bottom":"0","margin-right":"0","vertical-align":"baseline","border-collapse":"inherit","background-image":"none","background-color":"transparent","line-height":"normal","text-indent":"inherit","letter-spacing":"normal","text-transform":"none","box-shadow":"none","text-shadow":"none","border-top-style":"none","border-top-width":"medium","border-right-style":"none","border-right-width":"medium","border-bottom-style":"none","border-bottom-width":"medium","border-left-style":"none","border-left-width":"medium",position:"static",top:"auto",left:"auto",transition:"none","box-sizing":"border-box",color:"#EB15E2",direction:"inherit"}}];function s(e,t,n){if(!u(e,"."+a.DEFAULT_CLASSES.IGNORE_CSS_RESET)){u(e,t)&&o.update(e,n,!0);for(var r=e.children,i=0;r&&i<r.length;i++)s(r[i],t,n)}}function u(e,t){return(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector).apply(e,[t])}}).dependencies("CssAttributeSetter, Consts")}).call(window)},function(e,t,n){(function(){n(190).register("XButtonCreator").asCtor(function e(n,u,r,l,c){this.createOldXButton=function a(){var e=u.createElement({Type:"Image",Content:{Url:function t(){return n.getCdnServerName()+i+o}()},Style:{"margin-top":"8px","margin-right":"8px",top:"0px",right:"0px",cursor:"pointer","border-style":"none"}});return r.attach(e,{eventName:l.EVENTS.Drawables.XButtonClicked}),e},this.createElement=function d(e){var t=e.Style["font-size"],n=wmjQuery.extend({},e,{Type:"Button",Style:wmjQuery.extend({},e.Style,{fill:e.Style.color})}),r=u.createElement(n),i=document.createElement("div"),o=function a(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("viewBox","0 0 256 256"),n.setAttribute("width",e),n.setAttribute("height",e),n.setAttribute("class",l.DEFAULT_CLASSES.IGNORE_CSS_RESET);var r=document.createElementNS(t,"path");return r.setAttribute("d","M128 151l38 38q3 3 8 3t8 -3l7 -7q3 -3 3 -8t-3 -8l-38 -38l38 -38q3 -3 3 -8t-3 -8l-7 -7q-3 -3 -8 -3t-8 3l-38 38l-38 -38q-3 -3 -8 -3t-8 3l-7 7q-3 3 -3 8t3 8l38 38l-38 38q-3 3 -3 8t3 8l7 7q3 3 8 3t8 -3z"),n.appendChild(r),n}(t);return c.set(i,function s(e){return{height:e,width:e,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}(t)),i.appendChild(o),r.appendChild(i),r};var i="/player/resources/images/",o="ic-close.svg"}).dependencies("SettingsFile, VisualDesignHtmlElementCreator, HtmlElementClickEventAttacher, Consts, CssAttributeSetter")}).call(window)},function(e,t,n){(function(){n(190).register("ImgAdjuster").asCtor(function e(){this.adjust=function t(e){e.removeAttribute("width"),e.removeAttribute("height")}})}).call(window)},function(e,t,n){(function(){n(190).register("ButtonAdjuster").asCtor(function e(t,n){this.adjust=function r(e){new t(e,["background-color","fill"]).setStates(),n.update(e,{cursor:"pointer"})}}).dependencies("ColorStatesSetter, CssAttributeSetter")}).call(window)},function(e,t,n){(function(){n(190).register("ColorStatesSetter").asFunction(function e(d,f){var p=null;return function(e,t){this.setStates=function c(){if(!o)return;for(var e=[],t=0;t<a.length;t++){var n=a[t],r=o.style[n];r&&e.push({property:n,value:r})}if(!e.length)return;!function i(e){var n=function a(e){for(var t={hover:{},click:{},original:{}},n=0;n<e.length;n++){var r=e[n],i=s(r.value),o=r.property;t.click[o]=i.click,t.hover[o]=i.hover,t.original[o]=r.value}return t}(e);u("mousedown",function(){p=o,l(n.click)}),u("mouseleave",function(){l(n.original)}),u("mouseup",function(){p=null,l(n.hover)}),u("mouseenter",function(e){var t=n.hover;e.buttons&&o.isSameNode(p)&&(t=n.click),l(t)})}(e)};var o=null,a=null;function s(e){var t=r(e,-1),n=i(e,-1);return t===n&&(t=r(e,1),n=i(e,1)),{hover:t,click:n}}function u(e,t){return o.addEventListener(e,t)}function l(e){f.update(o,e)}function r(e,t){return d.pSBC(.1*t,e)}function i(e,t){return d.pSBC(.2*t,e)}(function n(){o=e,a=t||["background-color"]}).apply(this,arguments)}}).dependencies("ColorManipulationProvider, CssAttributeSetter")}).call(window)},function(e,t,n){(function(){n(190).register("SpanAdjuster").asCtor(function e(n,r){this.adjust=function i(e){var t={display:r.isIEOlderThan(11)?"-ms-flexbox":"flex","align-items":"center"};n.update(e,t)}}).dependencies("CssAttributeSetter, HostData")}).call(window)},function(e,t,n){(function(){n(190).register("ElementAdjusterFactory").asCtor(function o(e,t,n){this.getAdjuster=function i(e){return r[e]};var r={IMG:e,BUTTON:t,SPAN:n}}).dependencies("ImgAdjuster, ButtonAdjuster, SpanAdjuster")}).call(window)},function(e,t,n){(function(){n(190).register("WrapperAttributesSetter").asCtor(function e(n){this.setDefaultAttributes=function r(e,t){e.id=n.generateId(t.Id),e.className+=" walkme-to-remove"}}).dependencies("DomIdGenerator")}).call(window)},function(e,t,n){(function(){n(190).register("DomIdGenerator").asCtor(function e(n){this.generateId=function i(e){return r+(e||function t(){return n.generateGUID()}())};var r="walkme-visual-design-"}).dependencies("CommonUtils")}).call(window)},function(e,t,n){(function(){n(190).register("DefaultWrapperStyleProvider").asCtor(function t(e){this.get=function i(e){var t=e.Style.position;return n.position="string"==typeof t?t:"fixed",{outerStyle:n,innerStyle:r}};var n={"z-index":e.VISUAL_DESIGN_DRAWABLE.DefaultZIndex},r={overflow:"hidden","box-sizing":"content-box","white-space":"pre-wrap","overflow-wrap":"break-word","word-wrap":"break-word"}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(190).register("SingleElementStyleTranslator").asCtor(function t(e,o,a,s,u){function l(e,t,n){var r=o.getTranslator(e);if(r){var i=r.translate(n);a.extend(t,i)}else t[e]=n[e]}this.translate=function c(e){var t={},n=e.Style;for(var r in n)u.shouldIgnoreStyle(r,n)||l(r,t,n);return function i(e){var t=s.getMissingStyle(e);a.extend(e,t)}(t),t}}).dependencies("ArrayUtils, StyleTranslatorFactory, wmjQuery, DefaultStyleGetter, IgnoredStyles")}).call(window)},function(e,t,n){(function(){n(190).register("ActionArgumentsAdapter").asCtor(function e(){this.getArguments=function i(e,t){var n=r[e];return n?n(t):undefined};var r={playBf:function(e){return{bfId:e.itemId,playBfFromBeginning:!!e.playFromBeginning,NodeId:e.subItemId}},playWt:function(e){return{wtId:e.itemId,playWtFromBeginning:!!e.playFromBeginning,StepId:e.subItemId}},playContent:function(e){return{contentId:e.itemId}},playShuttle:function(e){return{shuttleId:e.itemId}}}})}).call(window)},function(e,t,n){(function(){n(190).register("ActionDataAdapter").asCtor(function e(n,r){this.getData=function i(e){var t=e.Action;return t.args=r.extend({},t.args,n.getArguments(t.type,t),{buttonId:e.Id,buttonText:e.Content&&e.Content.Text,buttonType:"button"}),t}}).dependencies("ActionArgumentsAdapter, wmjQuery")}).call(window)},function(e,t,n){(function(){n(190).register("VisualDesignActionsHandler").asCtor(function e(n,r,s,u,l){function c(e,t){t.Action&&n.attach(e,{params:t})}this.addClickEvents=function i(e,t){!function a(e){for(var t=l.RICH_TEXT_EDITOR.ACTION_LINK_ATTR,n=e.querySelectorAll("["+t+"]"),r=0;n&&r<n.length;r++){var i=n[r],o=u.secureEvalJSON(i.getAttribute(t));c(i,{Action:s.extend({preventDefault:!0},u.secureEvalJSON(o.data)),Content:{Text:o.text}}),i.removeAttribute(t)}}(e),c(e,t)},this.addESCPressEvents=function o(e){r.attach(e,function t(){return{keyCode:l.KEY_CODES.ESC,eventName:l.EVENTS.Drawables.KeypressEsc,params:{Action:{type:"destroy"}}}}())}}).dependencies("HtmlElementClickEventAttacher, HtmlElementKeydownEventAttacher, wmjQuery, JsonUtils, Consts")}).call(window)},function(e,t,n){(function(){n(190).register("IgnoredStyles").asCtor(function e(){this.shouldIgnoreStyle=function r(e,t){switch(e){case"opacity":return function n(e){return!(e.opacity===undefined||!e.background)}(t);default:return!1}}})}).call(window)},function(e,t,n){(function(){n(190).register("ColorManipulationProvider").asCtor(function e(){this.pSBC=function g(e,t,n,r){var i,o,a,s,u,l,c,d=parseInt,f=Math.round,p="string"==typeof n;return"number"!=typeof e||e<-1||1<e||"string"!=typeof t||"r"!==t[0]&&"#"!==t[0]||n&&!p?null:(this.pSBCr||(this.pSBCr=function(e){var t=e.length,n={};if(9<t){if(t=(e=e.split(",")).length,i=e[0],o=e[1],a=e[2],p=e[3],t<3||4<t)return null;n.r=d("a"===i[3]?i.slice(5):i.slice(4)),n.g=d(o),n.b=d(a),n.a=p?parseFloat(p):-1}else{if(8===t||6===t||t<4)return null;t<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(4<t?e[4]+e[4]:"")),e=d(e.slice(1),16),9===t||5===t?(n.r=e>>24&255,n.g=e>>16&255,n.b=e>>8&255,n.a=f((255&e)/.255)/1e3):(n.r=e>>16,n.g=e>>8&255,n.b=255&e,n.a=-1)}return n}),c=9<t.length,c=p?9<n.length||"c"===n&&!c:c,u=this.pSBCr(t),s=e<0,l=n&&"c"!==n?this.pSBCr(n):s?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},s=1-(e=s?-1*e:e),u&&l?(a=r?(i=f(s*u.r+e*l.r),o=f(s*u.g+e*l.g),f(s*u.b+e*l.b)):(i=f(Math.pow(s*Math.pow(u.r,2)+e*Math.pow(l.r,2),.5)),o=f(Math.pow(s*Math.pow(u.g,2)+e*Math.pow(l.g,2),.5)),f(Math.pow(s*Math.pow(u.b,2)+e*Math.pow(l.b,2),.5))),p=u.a,l=l.a,p=(u=0<=p||0<=l)?p<0?l:l<0?p:p*s+l*e:0,c?"rgb"+(u?"a(":"(")+i+","+o+","+a+(u?","+f(1e3*p)/1e3:"")+")":"#"+(4294967296+16777216*i+65536*o+256*a+(u?f(255*p):0)).toString(16).slice(1,u?undefined:-2)):null)}})}).call(window)},function(e,t,n){(function(c){(function(){function e(){var o,a,s;function u(){++a===o&&s&&s()}this.waitForAll=function l(e){var t=e.querySelectorAll("img");if(o=t.length,a=0,!o)return c.resolve();for(var n=0;n<t.length;n++){var r=t[n].getAttribute("src"),i=document.createElement("img");i.onload=u,i.onerror=u,i.setAttribute("src",r)}return new c(function(e){s=e})}}n(190).register("ImagesLoadedListener").asCtor(function(){return e})}).call(window)}).call(this,n(29))},function(e,t,n){(function(){n(190).register("AccessibilityAttributesSetter").asCtor(function e(a){this.set=function c(e,t){var n={};return wmjQuery.extend(!0,n,e),function i(e,t){o(e,t);var n=e.ChildElements;for(var r=0;r<(n&&n.length);r++)i(n[r])}(n.RootVisualElement,t),n};var s="UntitledIframe",r="aria-label";function o(e,t){switch(e.Type){case"Canvas":!function n(e,t){u(l(e),t)}(e,t);break;case"Web-View":!function r(e){var t=l(e);t.title||(t.title=a.getValue(s))}(e);break;case"Image":!function i(e){var t=l(e);t.alt||(t.alt="")}(e);break;case"XButton":!function o(e){u(l(e),"Close")}(e)}}function u(e,t){if(!e[r]){var n=a.getValue(t);n&&(e[r]=n)}}function l(e){var t=function n(e){e.Content||(e.Content={});return e.Content}(e);return t.Attributes||(t.Attributes={}),t.Attributes}}).dependencies("AccessibilityGeneralManager")}).call(window)},function(t,e,n){(function(){var s=n(231),u={init:function l(){var e=s.get("ActionClickedEventBinder"),t=s.get("DefaultPlaceHolderConfigsCreator"),n=s.get("DesignTemplateHtmlGetter"),r=s.get("DesignTemplates"),i=s.get("PlaceholdersReplacer"),o=s.get("SpecificEntityDesignTemplateCssClassGetter"),a=s.get("XButtonRemover");u.addActionClickedEventBinder=e.add,u.createDefaultPlaceholderConfigs=t.createPlaceHolderConfigs,u.getDesignTemplateHtml=n.get,u.designTemplates=r.value,u.setDesignTemplates=r.set,u.resetDesignTemplates=r.reset,u.getDesignTemplateById=r.getDesignTemplateById,u.replacePlaceholders=i.replace,u.getSpecificEntityDesignTemplateCssClass=o.get,u.removeXButtonIfShould=a.removeIfShould},services:["ActionClickedEventBinder","DefaultPlaceHolderConfigsCreator","DesignTemplateHtmlGetter","DesignTemplates","PlaceholdersReplacer","SpecificEntityDesignTemplateCssClassGetter","XButtonRemover"],types:[]};!function e(){n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245)}(),n(69).registerApi(u,s),t.exports=u}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(231).register("ActionClickedActivatedObjectGetter").asCtor(function e(r,i){this.get=function o(e){var t={};if(!e.Args)return t;var n=r.ACTION_TO_DEPLOYABLE_DATA[e.Type];return n&&(t.objectId=e.Args[n.deployableIdField],t.objectName=i.get(n.deployableType).getById(t.objectId).Name),t}}).dependencies("Consts, DeployablesManagerFactory")}).call(window)},function(e,t,n){(function(){n(231).register("ActionClickedEventBinder").asCtor(function o(a,s,e,u,l,t){var c;this.add=function r(e,t,n){d[e]={appType:t,getPlayGuid:n}},this.bind=function n(e,t){e.bind("click",function r(e){var t=e.placeholderConfiguration,n=e.initiatorData,i=d[t.EntityType],o=i.getPlayGuid?i.getPlayGuid():f;return function(){var e=l.get(t.Config);a.postEvent(s.EVENT_SENDER_EVENT_TYPES.ActionClicked,{type:s.EVENT_SENDER_EVENT_APPS.Action,oId:t.Id,oName:t.Name,owId:t.EntityId,owType:i.appType,owName:function r(e,t){var n;switch(e){case c.shoutout:n=t.Name;break;case c.step:n=t.StepTitle||t.StepText;break;case c.balloon:n=t.Title||t.Text}return n}(t.EntityType,n),pId:o,aType:u.getDataActionType(t.Config.Type),aAppType:u.getDataActionAppType(t.Config.Type),aoId:e.objectId,aoName:e.objectName})}}(t))};var d,f=-1;!function i(){c=e.ENTITY_TYPE,(d={})[c.shoutout]={appType:s.EVENT_SENDER_EVENT_APPS.ShoutOut},d[c.balloon]={appType:s.EVENT_SENDER_EVENT_APPS.BizFlowStep,getPlayGuid:t.getPlayGuid}}()}).dependencies("EventSender, Consts, SharedConsts, EventDataTypesProvider, ActionClickedActivatedObjectGetter, FlowDataPersister")}).call(window)},function(e,t,n){(function(){n(231).register("DefaultPlaceHolderConfigsCreator").asCtor(function t(e,s,u){this.createPlaceHolderConfigs=function f(e,t,n){var r,i=s.get(undefined,e);i&&(r=wmjQuery("<div></div>"),u.setInnerHTML(r,i));var o={Name:r?r.find(l).attr(d):"title",Config:{content:t}},a={Name:r?r.find(c).attr(d):"content",Config:{content:n}};return[o,a]};var l="[wm-title]",c="[wm-content]",d="wm-placeholder"}).dependencies("DesignTemplates, DesignTemplateHtmlGetter, DomManager")}).call(window)},function(e,t,n){(function(){n(231).register("DesignTemplateHtmlGetter").asCtor(function e(i){this.get=function o(e,t){if(e=e||t!=undefined&&i.defaults[t])for(var n=0;n<i.value.length;n++){var r=i.value[n];if(r.id==e)return r.html}}}).dependencies("DesignTemplates")}).call(window)},function(e,t,n){(function(){n(231).register("DesignTemplates").asCtor(function u(t){var n,r=this;function i(){r.value=[],r.defaults={},n={}}function e(e){e&&(i(),t.foreach(e,function(e){e&&(r.value.push(e),(n[e.id]=e).isDefault&&(r.defaults[e.entityType]=e.id))}))}r.reset=function o(){e([])},r.set=e,r.getDesignTemplateById=function a(e){return n[e]},function s(){i()}()}).dependencies("ArrayUtils")}).call(window)},function(e,t,n){(function(){n(231).register("EventDataTypesProvider").asCtor(function s(e){this.getDataActionType=function o(e){return r[e]},this.getDataActionAppType=function a(e){return i[e]};var t=e.EVENT_SENDER_ACTIONS,n=e.EVENT_SENDER_EVENT_APPS,r={none:t.None,playBf:t.PlayBizFlow,playWt:t.PlayWalkthru,openMenu:t.OpenMenu,playContent:t.PlayResource,playShuttle:t.PlayShuttle,destroy:t.Close,remindMeNextTime:t.Close,remindMeNextDay:t.Close},i={playContent:n.Content,playBf:n.BizFlow,playShuttle:n.Shuttle,playWt:n.Walkthru}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(231).register("NamedActionPlaceholderReplacer").asCtor(function e(l,c,d,f,p,g){this.replace=function h(e,t,n,r){var i=e.element,o=t.Config;o.IsActive?!function a(e,t){return e.entityType==c.ENTITY_TYPE.step&&"destroy"==t.Type}(e,o)?(function s(e){return e.entityType!==c.ENTITY_TYPE.shoutout}(e)&&function u(e,t,n,r){var i={};d.extend(i,t.Args,r);var o=l.get(t.Type,i,n.type,n.initiator).doAction,a=f.wrapByEntityType(e.entityType,o,i,t);e.element.bind("click",a)}(e,o,n,r),g.get()||p.bind(i,{placeholderConfiguration:t,initiatorData:n.initiator})):i.addClass("walkme-action-close"):i.remove()}}).dependencies("ActionsFactory, SharedConsts, wmjQuery, PlaceholderActionWrapper, ActionClickedEventBinder, IsInEditor")}).call(window)},function(e,t,n){(function(){n(231).register("NamedDataPlaceholderReplacer").asCtor(function e(a,s,u){this.replace=function l(e,t,n){!function r(e,t){for(var n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}(e,t.attributes||{}),function i(e,t,n){if(t!=undefined){var r=a.parse(s.nl2br(t),n.bbCodeParserVersion);u.setInnerHTML(e,r)}}(e,t.content,n),function o(e,t){if(t!=undefined){var n=e.attr("style"),r="";n&&(r=n),e.attr("style",r+";"+t)}}(e,t.css)}}).dependencies("BBCodeParser, CommonUtils, DomManager")}).call(window)},function(e,t,n){(function(){n(231).register("NamedPlaceholderReplacer").asCtor(function e(a,s){this.replace=function c(e,t,n){var r=function o(e,t){var n="["+u+"='"+t+"'],["+l+"='"+t+"']";return e.find(n).addBack().filter(n)}(e.html,t.Name);if(a.replace(r,t.Config,n),r.attr(l)==t.Name){var i={element:r,entityType:e.type};s.replace(i,t,n,e.actionArgs)}};var u="wm-placeholder",l="wm-action-placeholder"}).dependencies("NamedDataPlaceholderReplacer, NamedActionPlaceholderReplacer")}).call(window)},function(e,t,r){(function(){r(231).register("PlaceholderActionWrapper").asCtor(function n(e){this.wrapByEntityType=function a(e,t,n,r){for(var i=0;i<o.length;i++)if(o[i].getType()==e)return o[i].wrap(t,n,r);return t};var o=[];!function t(){o.push(e)}()}).dependencies("ShoutOutPlaceholderActionWrapper")}).call(window)},function(e,t,n){(function(){n(231).register("PlaceholdersReplacer").asCtor(function e(s,i){var u=/^[A-Za-z][A-Za-z0-9\-_:\\.]*$/;this.replace=function o(e,t,n,r){!function a(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];o=i.Name,u.test(o)&&s.replace(e,i,n)}var o}(e,t,r),i.replace(e.html,n)}}).dependencies("NamedPlaceholderReplacer, VariablePlaceholderReplacer")}).call(window)},function(e,t,n){(function(){n(231).register("SpecificEntityDesignTemplateCssClassGetter").asCtor(function e(r,i){this.get=function o(e,t){if(e){var n=e.DesignTemplateId||i.defaults[t];return n?r.designTemplateCssClassPrefix+n:undefined}}}).dependencies("SharedConsts, DesignTemplates")}).call(window)},function(e,t,n){(function(){n(231).register("VariablePlaceholderReplacer").asCtor(function e(){this.replace=function o(e,t){for(var n in i){var r="["+n+"]";e.find(r).addBack().filter(r).prepend(t[i[n]])}};var i={"wm-variable-current-step":"passedVisibleSteps","wm-variable-total-steps":"totalVisibleSteps"}})}).call(window)},function(e,t,n){(function(){n(231).register("XButtonRemover").asCtor(function e(n){this.removeIfShould=function r(e,t){n.shouldDisplayX(t)||e.find(".walkme-custom-balloon-close-button").remove()}}).dependencies("XButtonDisplayChecker")}).call(window)},function(t,e,n){(function(){var l=n(247),c={init:function d(){l.get("LegacyExternalApiInitiator").init();var e=l.get("BBCodeParser"),t=l.get("BBCodeEventsBinder"),n=l.get("BBCodeDeployables"),r=l.get("BBCodeParserConsts"),i=l.get("BBCodeUtils"),o=l.get("BBCodeDeployableActivators"),a=l.get("BBCodeJQueryTagHandler"),s=l.get("BBCodeVideoTagHandler"),u=l.get("BBTagHandlerProvider");c.parse=e.parse,c.bind=t.bind,c.addBBCodeDeployables=n.add,c.getBBCodeDeployables=n.get,c.consts=r,c.generateCustomTagAttributes=i.generateCustomTagAttributes,c.getStrictProperties=i.getStrictProperties,c.getProperties=i.getProperties,c.bizflowActivator=o.bizflowActivator,c.resourceActivator=o.resourceActivator,c.getJQueryTagHTML=a.getHTML,c.getVideoTagHTML=s.getHTML,c.getTagHandler=u.get},services:["BBCodeParser","BBCodeEventsBinder","BBCodeDeployables","BBCodeParserConsts","BBCodeUtils","BBCodeDeployableActivators","BBCodeJQueryTagHandler","BBCodeVideoTagHandler","BBTagHandlerProvider"],types:[]};!function e(){n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287)}(),n(69).registerApi(c,l),t.exports=c}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,r){(function(){r(247).register("BBCodeLegacyExternalApi").asCtor(function n(e,t){this.parseBBCode=e.parse,this.bindBBCodeEvents=t.bind}).dependencies("BBCodeParser, BBCodeEventsBinder")}).call(window)},function(e,t,n){(function(){n(247).register("LegacyExternalApiInitiator").asCtor(function a(e,t,n,r){function i(){wmjQuery.extend(r,e)}this.init=function o(){t.one(n.EVENTS.DATA_FILES_LOADED,i)}}).dependencies("BBCodeLegacyExternalApi, WmInternals, Consts, Lib")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeDeployableActivators").asCtor(function e(r,i,o,a){this.bizflowActivator=function s(e,t){var n=r.mapBbcodeInitiator(t);i.activateById(e,n)},this.resourceActivator=function u(e,t){var n=r.mapBbcodeInitiator(t);a.stop(),o.activateById(e,n)}}).dependencies("InitiatorTypeToAppTypeMapper, BusinessSolutionsManager, ContentsManager, RunningDeployablesStopper")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeDeployables").asCtor(function a(e,t){var n;this.add=function r(e){n.push(e)},this.get=function i(){return n},function o(){n=[{linkSelector:".walkme-action-start-resource",idDataKey:"data-resource-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Resource,activator:t.resourceActivator},{linkSelector:".walkme-action-start-bf",idDataKey:"data-bizflow-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Bizflow,activator:t.bizflowActivator}]}()}).dependencies("Consts, BBCodeDeployableActivators")}).call(window)},function(e,t,r){(function(){r(247).register("BBCodeEventsBinder").asCtor(function n(a,e,o,t){this.bind=function s(n,r,i){wmjQuery(e.get()).each(function(e,t){wmjQuery(t.linkSelector,n).each(function(){wmjQuery(this).click(function(){var e=parseInt(wmjQuery(this).attr(t.idDataKey));!function o(e,t,n,r,i){a.raiseEvent(e,{id:n,asyncCallback:function(){t(n,r),i&&i()}})}(t.clickEvent,t.activator,e,i,r)}),a.raiseEvent(o.EVENTS.RegisterBBCodeDeployableClick,{element:wmjQuery(this)})})}),t.bind(n)}}).dependencies("CommonEvents, BBCodeDeployables, Consts, BBCodeLinksBinder")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeLinksBinder").asCtor(function e(i,o,s,t){this.bind=function a(e){e.find(n).each(function(){t(this).on("click",r)})};var n="a.walkme-custom-bbcode-link";function r(e){var t=this.hasAttribute("data-href"),n=t?this.getAttribute("data-href"):this.getAttribute("href");if(t){var r=s.getStrictProperties(o.url,this.getAttribute("data-url"),{target:"_blank"});e.preventDefault?e.preventDefault():e.returnValue=!1,window.open(n,r.target,function a(e){for(var t=[],n=["toolbar","titlebar","status","scrollbars","resizable","menubar","location","top","left","fullscreen","directories","channelmode","height","width"],r=0;r<n.length;r++){var i=n[r];if(e[i]){var o=i+"="+e[i].replace(/\'/g,"").replace(/px$/,"");t.push(o)}}return t.join(",")}(r))}i.raiseEvent("BBCodeLinkClicked",{Src:n})}}).dependencies("CommonEvents, BBCodePropertiesConfig, BBCodeUtils, wmjQuery")}).call(window)},function(e,t,n){(function(){var i=n(247);i.register("BBCodeNestedTagParser").asCtor(function e(){this.parse=function r(e,t){var n=i.get("BBCodeSingleTagParser").parseSingleTag(e.exp,e.currentIndex);e[t]+=n.parsedExpPart||"",e.exp!=n.exp?(e.currentIndex=n.startIndex,e.exp=n.exp):e[t]+=e.exp.charAt(e.currentIndex)}})}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeOverrideStyle").dependencies("ArrayUtils, wmjQuery, DomManager").asCtor(function e(p,a,r){this.getHtmlWithOverrideStyles=function o(e,t){if(!t)return e;var n=mtjQuery("<div></div>");return r.setInnerHTML(n,e),function f(e,t){var n=t.split(";");m(e,n);var r=v(n);i=e,o=n,a=h(i),s=a.split(";"),o.push.apply(o,s);var i,o,a,s;g(e,v(n));var u=(l=e,c=r,d=p.filter(h(l).split(";"),function(e){return/!\s*important/.test(e)}).join(";"),d+";"+c);var l,c,d;e.children().each(function(){f(mtjQuery(this),u)})}(n,""),n.html()};var i={b:"font-weight: bold !important",u:"text-decoration: underline !important",i:"font-style: inline !important",span:function u(e){if(e.is("[data-span]"))return;var t=function n(e){var t=e.style;return t.length!==undefined?function i(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()});t+=s(e[n],e[r])}return t}(t):function o(e){var t="";for(var n in e){var r=e[n];"cssText"!==n&&r&&"string"==typeof r&&(t+=s(n,r))}return t}(t)}(e[0]);return g(e,t),t}};function s(e,t){return e+": "+t+" !important;"}function g(e,t){t?r.setAttribute(e,"style",t):r.removeAttribute(e,"style")}function h(e){return e.attr("style")||""}function m(e,t){var n=function r(e){var t=e.prop("tagName").toLowerCase(),n=i[t];if("function"==typeof n)return n(e);if("string"==typeof n)return n}(e);n&&t.push.apply(t,n.split(";"))}function v(e){return mtjQuery.trim(function o(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=a.inArray(r,e);n===i&&t.push(mtjQuery.trim(r))}}return t}(e).join(";"))}})}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeParser").asCtor(function r(e,i,o){var t={font:"font-family:$1",size:"font-size:$1px",color:"color:$1"},a=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel"],s={};function u(e){if((e=function n(e){if(!e.indexOf)return e;if(e.indexOf("on")<0)return e;for(var t=0;t<a.length;t++)e=e.replace(new RegExp(a[t]+"\\s*=","gi"),"^");return e}(e=function r(e){return e.replace?e.replace(/javascript:/gi,""):e}(e))).replace)for(var t in s)e=e.replace(new RegExp(t,"g"),s[t]);return e}this.parse=function(e,t){if(!e)return"";for(var n=0,r={exp:u(e),length:e.length};n<r.exp.length-1;)n=(r=i.parseSingleTag(r.exp,n)).startIndex;return o.getHtmlWithOverrideStyles(r.exp,t)},function n(){for(var e in t)s["\\["+e+"=([^\\]]+)]"]='<span style="'+t[e]+'">',s["\\[/"+e+"]"]="</span>"}.apply(null,arguments)}).dependencies("CommonUtils, BBCodeSingleTagParser, BBCodeOverrideStyle")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeParserConsts").asCtor(function e(){this.ATTRIBUTE_STATE="attr",this.DATA_STATE="data",this.OPEN_TAG_STATE="openTag",this.CLOSE_TAG_STATE="closeTag",this.OPEN_TAG="[",this.CLOSE_TAG="]"})}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeSingleTagParser").asCtor(function e(a,s){this.parseSingleTag=function u(e,t){var n=e.indexOf(a.OPEN_TAG,t);if(-1<n){var r=function o(e,t){var n={startIndex:t,currentIndex:t,exp:e};return n[a.OPEN_TAG_STATE]="",n[a.ATTRIBUTE_STATE]="",n[a.DATA_STATE]="",n[a.CLOSE_TAG_STATE]="",n}(e,n),i=s.go(r);if(i)return i}return{exp:e,startIndex:e.length}}}).dependencies("BBCodeParserConsts, BBCodeOpenTagState")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeTagTranslator").asCtor(function e(o){this.translateTag=function a(e){var t=e.exp.substring(e.startIndex,e.currentIndex+1),n=function i(e,t){if("/"+e.openTag!=e.closeTag)return t;-1<e.attr.indexOf("javascript:")&&(e.attr="");return o.get(e.openTag).getHTML(t,e.openTag,e.attr,e.data)}(e,t),r=n!=undefined?n:t;return r!=t&&(e.exp=e.exp.replace(t,r)),{startIndex:e.currentIndex+(r.length-t.length),exp:e.exp,parsedExpPart:r}}}).dependencies("BBTagHandlerProvider")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeAttributeState").asCtor(function e(r,i,o){this.go=function u(e){var t=a[e.openTag];for(e.currentIndex=e.currentIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var n=e.exp.charAt(e.currentIndex);if(n!=r.OPEN_TAG||t){if(n==r.CLOSE_TAG&&!s(t,e))return i.go(e);e[r.ATTRIBUTE_STATE]+=n}else o.parse(e,r.ATTRIBUTE_STATE)}};var a={regex:!0};function s(e,t){if(e)return!n(t,'"')&&!n(t,"&quot;")}function n(e,t){return e.exp.substring(e.currentIndex-t.length,e.currentIndex)==t}}).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeNestedTagParser")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeCloseTagState").asCtor(function e(n,r){this.go=function i(e){for(e.currentIndex=e.currentIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var t=e.exp.charAt(e.currentIndex);switch(t){case n.CLOSE_TAG:return r.translateTag(e);default:e[n.CLOSE_TAG_STATE]+=t}}}}).dependencies("BBCodeParserConsts, BBCodeTagTranslator")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeDataState").asCtor(function e(n,r,i){this.go=function o(e){for(e.currentIndex=e.currentIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var t=e.exp.charAt(e.currentIndex);switch(t){case n.OPEN_TAG:if("/"==e.exp.charAt(e.currentIndex+1))return r.go(e);i.parse(e,n.DATA_STATE);break;default:e[n.DATA_STATE]+=t}}}}).dependencies("BBCodeParserConsts, BBCodeCloseTagState, BBCodeNestedTagParser")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeOpenTagState").asCtor(function e(n,r,i){this.go=function o(e){for(e.currentIndex=e.startIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var t=e.exp.charAt(e.currentIndex);switch(t){case n.OPEN_TAG:e.startIndex=e.currentIndex;break;case n.CLOSE_TAG:return r.go(e);case"=":case" ":return i.go(e);default:e[n.OPEN_TAG_STATE]+=t}}}}).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeAttributeState")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeVideoQueryStringParamsHandler").asCtor(function e(o,a,s,u){this.toQueryString=function l(e,t){var n=["height","width","title"],r=t;return(a.get()||s.get())&&(r=u.get(n,e,t)),function i(e,n){var r="";return wmjQuery.each(e,function(e,t){-1===wmjQuery.inArray(e,n)&&(r+=o.formatString("{0}={1}&",e,t))}),r}(r,n)}}).dependencies("StringUtils, IsInWYSIWYG, IsInScreenshot, BBCodeWysiwygVideoParamsObjectHandler")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeWysiwygVideoParamsObjectHandler").asCtor(function e(){this.get=function o(e,t,n){var r={};e.push("autoplay"),i[t]&&wmjQuery.extend(r,i[t]);return wmjQuery.extend(r,n),r};var i={ustream:{html5ui:1}}})}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeUtils").asCtor(function e(t){var o=this;function u(e){return e&&(t.isNumber(e)||e.match(/^\d+$/))?e+"px":e}this.generateCustomTagAttributes=function(e){var n="";return mtjQuery.each(e,function(e,t){n+=e+'="'+t+'" '}),(n=n.replace(/\s+$/,""))?" "+n:n},this.getStrictProperties=function(e,t,n){var r=o.getProperties(e,t,n);return function i(n,r){wmjQuery.each(n,function(e,t){-1==wmjQuery.inArray(e,r)&&delete n[e]})}(r,e),r},this.getProperties=function(e,t,n){t!=undefined&&(t=t.replace(/&quot;/gi,'"'));var r=function a(e){for(var t,n={},r=new RegExp('([^\\s]+)="([^\\"]*)"',"g");t=r.exec(e);){var i=t[1],o=t[2];n[i]=o}return n}(t);return function s(e,t,n){if(e!=undefined)for(var r=0;r<t.length;r++){var i=t[r],o=n[i]==undefined,a=e[i]!=undefined;o&&a&&(n[i]=e[i])}}(n,e,r),function i(e){for(var t=["width","height"],n=0;n<t.length;n++){var r=t[n];e[r]&&(e[r]=u(e[r]))}}(r),r}}).dependencies("CommonUtils")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeBFTagHandler").asCtor(function e(c,d,f){this.getHTML=function(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=a[0],i=f.isNumber(i)?i:-1,o=a.splice(1,a.length-1).join(" ")}var s=d.getStrictProperties(c[t],o,{"class":"",style:""}),u=s["class"],l=s.style;return delete s["class"],delete s.style,'<a style="cursor: pointer; '+l+'" class="walkme-custom-bbcode-bf-link walkme-action-start-bf '+u+'" data-bizflow-id="'+i+'"'+d.generateCustomTagAttributes(s)+" data-"+t+"='"+o+"'>"+r+"</a>"}}).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils")}).call(window)},function(e,t,n){(function(){var s=n(247);s.register("BBCodeCookieTagHandler").asCtor(function e(o,a){this.getHTML=function(e,t,n,r){if(a.get())return"<cookie>"+r+"</cookie>";var i=o.getWindowCookie(r);return null!=i&&!1!==i||(i=""),s.get("BBCodeParser").parse(o.encodeText(i))}}).dependencies("CommonUtils, IsInWYSIWYG")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeCustomTagHandler").asCtor(function e(){this.getHTML=function o(e,t,n,r){var i=window.walkme_custom_bbcode_parser;if("function"==typeof i)return i(e,t,n,r)}})}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeFlashTagHandler").asCtor(function e(o,a,s){this.getHTML=function(e,t,n,r){var i=o.getStrictProperties(a[t],n,{width:420,height:315});return s.to_html('<div class="walkme-custom-flash-wrapper" style="width: {{{width}}}; height: {{{height}}};"><object type="application/x-shockwave-flash"{{#title}} title="{{{title}}}"{{/title}} data="{{{swf}}}" allowNetworking="none" allowFullScreen="false" width="{{{width}}}" height="{{{height}}}" data-{{tagName}}=\'{{bbCodeParams}}\'><param name="SRC" value="{{{swf}}}"/><param name="allowNetworking" value="none"/><param name="allowFullScreen" value="false"/></object></div>',{swf:r,width:i.width,height:i.height,title:""!==i.title?i.title:undefined,tagName:t,bbCodeParams:n})}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeHTML5VideoTagHandler").asCtor(function e(s,u,l,c,d,f){this.getHTML=function(e,t,n,r){var i=s.getProperties(u[t],n,{width:420,height:315});return l.to_html('<video controls height="{{height}}" width="{{width}}"{{#title}} title="{{{title}}}"{{/title}} {{autoplay}} src="{{{src}}}"{{#additionalAttributes}} {{attributeName}}="{{attributeValue}}"{{/additionalAttributes}} data-{{tagName}}=\'{{bbCodeParams}}\'></video>',{src:r,width:i.width,height:i.height,autoplay:function o(e){var t="";return!e.autoplay||d.get()||f.get()||(t="autoplay"),t}(i),title:""!==i.title?i.title:undefined,tagName:t,bbCodeParams:n,additionalAttributes:function a(n){var r=["width","height","title","autoplay"],i=[],e=c.getDictionaryKeys(n);return wmjQuery.each(e,function(e,t){-1===wmjQuery.inArray(t,r)&&i.push({attributeName:t,attributeValue:n[t]})}),i}(i)})}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache, DictionaryUtils, IsInWYSIWYG, IsInScreenshot")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeHTMLTagHandler").asCtor(function e(i,o){this.getHTML=function(e,t,n,r){return"p"==t&&(n=" "+n),"<"+t+i.generateCustomTagAttributes(i.getStrictProperties(o[t],n))+" data-"+t+"='"+n+"'>"+r+"</"+t+">"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeIframeTagHandler").asCtor(function e(l,c,d){this.getHTML=function(e,t,n,r){var i=l.getProperties(c[t],n,{width:420,height:315});!function a(e){var t="width: "+e.width+"; height: "+e.height+";";e.style=t+(e.style||""),delete e.width,delete e.height}(i);var o=wmjQuery('<iframe frameborder="0"></iframe>');return i.src=function s(e){return e.replace(/^(\s*data\s*:)*/gi,"")}(r),i["data-"+t]=n,function u(n,e){var r=["&",'"',"'",">","<"];wmjQuery.each(e,function(e,t){n.attr(e,d.decodeHtml(t,r))})}(o,i),o.prop("outerHTML")}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, HtmlDecoder")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeImgTagHandler").asCtor(function e(s,u){function l(e){return function i(e){var t=new RegExp("^(\\d+)x(\\d+)[^\\]]*"),n=function r(e,t){var n=t.exec(e);null!=n&&2<n.length?n.splice(0,1):n=[undefined,undefined];return n}(e,t);return{height:n[0],width:n[1],toTagAttributes:o}}(e).toTagAttributes()}function o(){return this.height&&this.width?' width="'+this.height+'px" height="'+this.width+'px" style="width:'+this.height+"px; height:"+this.width+'px"':""}this.getHTML=function(e,t,n,r){var i=s.getStrictProperties(u[t],n),o=n;if(o){var a=o.split(" ");o=a.splice(1,a.length-1).join(" ")}return'<img src="'+r+'"'+l(n)+s.generateCustomTagAttributes(i)+" data-"+t+"='"+o+"'/>"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig")}).call(window)},function(e,t,n){(function(){var l=n(247);l.register("BBCodeJQueryTagHandler").asCtor(function e(a,s,u){this.getHTML=function(e,t,n,r){if(u.get())return"<jquery>"+function o(e){var t=e.replace(/\n/g,""),n=decodeURIComponent(t),r=/(.*?)\[\/jquery]/.exec(n);return r?r[1]:t}(r)+"</jquery>";var i=a.encodeText(s.getjQueryElementText(r));return l.get("BBCodeParser").parse(i)}}).dependencies("CommonUtils, JQueryElementFinder, IsInWYSIWYG")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodePropertiesConfig").asFunction(function u(){var e=["title"],t=["alt"].concat(e),n=["style","class","id","tabindex","aria-label","aria-live","role"].concat(e),r=["width","height"].concat(n),i=["channelmode","directories","fullscreen","left","top","target","location","menubar","resizable","scrollbars","status","titlebar","toolbar"].concat(r),o=["border","cellspacing","cellpadding"].concat(n),a=["autoplay"].concat(r),s=["href"].concat(n);return{table:o,tr:n,th:n,td:n,tbody:n,p:n,div:r,span:r,iframe:r,youtube:a,vimeo:a,wistia:a,ustream:a,vidyard:a,brightcove:a,html5video:a,wt:s,bf:s,flow:s,swt:s,url:i,flash:r,img:t,b:e,u:e,i:e,ul:e,li:e,survey:s,trg:n,resource:s}})}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeRegexTagHandler").asCtor(function e(c,d,f,p,g){this.getHTML=function v(e,t,n,r){if(d.get())return"<regex exp="+n+">"+r+"</regex>";if(!n)return r;var i=function s(e){var t=f.decodeHtml(e,h);return t.substring(0,t.length-1).substring(1)}(n);try{var o=function u(e,t){var n=f.decodeHtml(e,h);return f.decodeHtml(t,h).match(n)}(i,r),a=o?o[o.length-1]:"";return g.isFeatureEnabled(m)?a:p.encodeText(a)}catch(l){return c.error("failed parsing regex: "+i),r}};var h=['"',">","<","&","'"],m="unsecuredRegexBbCode"}).dependencies("Logger, IsInWYSIWYG, HtmlDecoder, CommonUtils, FeaturesManager")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeResourceTagHandler").asCtor(function e(u,l,c){this.getHTML=function(e,t,n,r){var i="",o=n;if(o){var a=o.split(" ");i=c.isNumber(a[0])?a[0]:""}var s=u.getStrictProperties(l[t],o);return delete s["class"],delete s.style,'<a data-resource-id="'+i+'" class="walkme-action-start-resource" style="cursor: pointer;"'+u.generateCustomTagAttributes(s)+">"+r+"</a>"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeSurveyTagHandler").asCtor(function e(u,l,c){this.getHTML=function d(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=c.isNumber(a[0])?a[0]:-1}var s=u.getStrictProperties(l[t],o);return delete s["class"],delete s.style,'<a data-survey-id="'+i+'" class="walkme-custom-bbcode-survey walkme-action-start-survey" style="cursor: pointer;"'+u.generateCustomTagAttributes(s)+">"+r+"</a>"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeTriggerTagHandler").asCtor(function e(u,l,c){this.getHTML=function d(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=a[0],i=u.isNumber(i)?i:-1,o=a.splice(1,a.length-1).join(" ")}var s=l.getStrictProperties(c[t],o);return delete s["class"],delete s.style,'<a style="cursor: pointer;" class="trg-'+i+'"'+l.generateCustomTagAttributes(s)+" data-"+t+"='"+o+"'>"+r+"</a>"}}).dependencies("CommonUtils, BBCodeUtils, BBCodePropertiesConfig")}).call(window)},function(e,t,r){(function(){r(247).register("BBCodeUrlTagHandler").asCtor(function n(c,d,a,t,e,s,i,f){var p=0;function g(e,t,n,r){var i=e||t;return{classes:r["class"],target:r.target,src:function o(e){var t=u();if(t==undefined)return e;for(var n=0;n<t.length;n++)if(a.isLike(e,t[n]))return e;return""}(i),label:t,style:r.style,title:r.title,data:s.startsWith(n,i)?n.replace(i,""):n,role:r.role}}function h(e,t,n){var r=i.decodeHtml(n,["&",'"',"'",">","<"]);f.setAttribute(e,t,r)}this.getHTML=function(e,t,n,r){var i=function s(e,t){if(t){var n=t.split(" "),r=n.shift();if(!function i(e,t){for(var n=0;n<t.length;n++){var r=e.indexOf("=");if(-1<r&&(e=e.substring(0,r)),t[n]==e)return!0}return!1}(r,c[e]))return{tagValue:r,tagProperties:n.join(" ")}}return{tagValue:undefined,tagProperties:t}}(t,n),o=d.getStrictProperties(c[t],i.tagProperties,{"class":"",style:"",target:"_blank"}),a=g(i.tagValue,r,i.tagProperties,o);return o.height&&o.width?function u(e,t){var n=wmjQuery("<span></span>");n.attr("id","walkme-new-window-link-"+p++),t.title&&h(n,"title",t.title);var r=wmjQuery("<a></a>");return h(r,"class","walkme-custom-bbcode-link "+t.classes),h(r,"style","color: inherit; text-decoration:underline; "+t.style),h(r,"href","#"),h(r,"data-url",t.data),h(r,"data-href",t.src),t.role&&h(r,"role",t.role),f.setInnerHTML(r,t.label),n.append(r),n.prop("outerHTML")}(0,a):function l(e,t){var n=wmjQuery("<a></a>");return t.title&&h(n,"title",t.title),n.attr("target",t.target),h(n,"class","walkme-custom-bbcode-link "+t.classes),h(n,"style","color: inherit; text-decoration:underline; "+t.style),h(n,"href",t.src),h(n,"data-url",t.data),t.role&&h(n,"role",t.role),f.setInnerHTML(n,t.label),n.prop("outerHTML")}(0,a)};var u=function(){var e=t.get().Settings;return e&&e.UrlWl}}).dependencies("BBCodePropertiesConfig,BBCodeUtils, CommonUtils, SiteConfigManager, Mustache, StringUtils, HtmlDecoder, DomManager")}).call(window)},function(e,t,n){(function(){var u=n(247);u.register("BBCodeVarTagHandler").asCtor(function e(o,a,s){this.getHTML=function(e,t,n,r){if(a.get())return"<var>"+r+"</var>";var i=o.getWindowVar(r);return null!=i&&"function"!=typeof i&&(s.isFeatureEnabled("supportFalseVariable")||!1!==i)||(i=""),u.get("BBCodeParser").parse(o.encodeText(i))}}).dependencies("CommonUtils, IsInWYSIWYG, FeaturesManager")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeVideoTagHandler").asCtor(function t(u,l,c,d,e,f){this.getHTML=function(e,t,n,r){var i=l.getProperties(u[t],n,{width:420,height:315}),o=f.toQueryString(t,i),a=c.get(t),s=a.url+r+"?"+o;return d.to_html('<iframe data-{{{vendorName}}}-id="{{{videoId}}}" src="{{{src}}}" frameborder="0" allow="autoplay;"{{#title}} title="{{{title}}}"{{/title}} {{{allowFullScreen}}} style="position:relative; width: {{{width}}}; height: {{{height}}};"{{{additionalParams}}} data-{{tagName}}="{{bbCodeParams}}"></iframe>',{vendorName:a.name,videoId:r,width:i.width,height:i.height,title:""!==i.title?i.title:undefined,src:s,allowFullScreen:a.allowFullScreen,additionalParams:a.additionalParams,tagName:t,bbCodeParams:n})}}).dependencies("BBCodePropertiesConfig, BBCodeUtils, BBCodeVideoVendorsConfig, Mustache, JsonUtils, BBCodeVideoQueryStringParamsHandler")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeVideoVendorsConfig").asCtor(function e(i,r,o){var a,s="allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen";function u(e){return function r(){var e=i.get();if(function t(e){return/^https?:\/\//i.test(e)}(e))return e&&-1!=e.indexOf("https:");return function n(){return"https:"===o.location.protocol}()}()?e.replace("http:","https:"):e}this.get=function(e){var t=function n(e){return(a=a||{youtube:{url:u("http://www.youtube.com/embed/"),name:"youtube",allowFullScreen:"allowfullscreen"},vimeo:{url:u("http://player.vimeo.com/video/"),name:"vimeo",allowFullScreen:"webkitAllowFullScreen mozallowfullscreen allowFullScreen"},wistia:{url:u("http://fast.wistia.net/embed/iframe/"),name:"wistia",allowFullScreen:s,additionalParams:' allowtransparency="true" scrolling="no" class="wistia_embed" name="wistia_embed"'},ustream:{url:u("http://www.ustream.tv/embed/recorded/"),name:"ustream",allowFullScreen:s},vidyard:{url:u("http://play.vidyard.com/"),name:"vidyard",allowFullScreen:s}})[e]}(e);if(t)return t;r.error(new Error("Unsupported video vendor "+e))}}).dependencies("RecorderServerManager, Logger, win")}).call(window)},function(e,t,n){(function(){var l=n(247);l.register("BBCodeWmDataTagHandler").asCtor(function e(o,a,s,u){this.getHTML=function(e,t,n,r){if(a.get())return"<wm-data>"+r+"</wm-data>";var i=s.getData(r);return null!==i&&(u.isFeatureEnabled("supportFalseVariable")||!1!==i)||(i=""),l.get("BBCodeParser").parse(o.encodeText(i))}}).dependencies("CommonUtils, IsInWYSIWYG, ClientStorageManager, FeaturesManager")}).call(window)},function(e,t,n){(function(){n(247).register("BBCodeWTTagHandler").asCtor(function e(c,d,f){this.getHTML=function(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=a[0],i=f.isNumber(i)?i:-1,o=a.splice(1,a.length-1).join(" ")}var s=d.getStrictProperties(c[t],o,{"class":"",style:""}),u=s["class"],l=s.style;return delete s["class"],delete s.style,'<a style="cursor: pointer; '+l+'" class="walkme-custom-bbcode-wt-link walkme-action-start-wt '+u+'" data-walkthru-id="'+i+'"'+d.generateCustomTagAttributes(s)+" data-"+t+"='"+o+"'>"+r+"</a>"}}).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils")}).call(window)},function(e,t,n){(function(){n(247).register("BBTagHandlerProvider").asCtor(function e(t,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y){this.get=function S(e){switch(e){case"url":return t;case"wt":return n;case"bf":case"flow":case"swt":return r;case"img":return i;case"youtube":case"vimeo":case"wistia":case"ustream":case"vidyard":return o;case"html5video":return v;case"iframe":return a;case"b":case"u":case"i":case"table":case"tr":case"th":case"td":case"tbody":case"div":case"span":case"ul":case"li":case"p":return s;case"survey":return u;case"resource":return m;case"flash":return l;case"jquery":return c;case"cookie":return d;case"var":return f;case"wm-data":return p;case"trg":return h;case"regex":return y;default:return g}}}).dependencies("BBCodeUrlTagHandler, BBCodeWTTagHandler, BBCodeBFTagHandler, BBCodeImgTagHandler, BBCodeVideoTagHandler,BBCodeIframeTagHandler, BBCodeHTMLTagHandler, BBCodeSurveyTagHandler, BBCodeFlashTagHandler,BBCodeJQueryTagHandler, BBCodeCookieTagHandler, BBCodeVarTagHandler, BBCodeWmDataTagHandler,BBCodeCustomTagHandler, BBCodeTriggerTagHandler, BBCodeResourceTagHandler, BBCodeHTML5VideoTagHandler, BBCodeRegexTagHandler")}).call(window)},function(t,e,o){(function(){var n=o(289),r={init:function i(){var e=n.get("CustomCssSetter"),t=n.get("DesignTemplatesCalculatedCssGetter");r.setCustomCssIfNeeded=e.setCustomCssIfNeeded,r.getAllCustomCssProp=e.getAllCustomCssProp,r.setUiTemplates=e.setUiTemplates,r.getDesignTemplatesCalculatedCss=t.get},services:["CustomCssSetter","DesignTemplatesCalculatedCssGetter"],types:[]};!function e(){o(290),o(291)}(),o(69).registerApi(r,n),t.exports=r}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,r){(function(){r(289).register("CustomCssSetter").asCtor(function n(o,p,g,a,s,h,m,u,l,v,c){var y,S;this.setCustomCssIfNeeded=function d(e,t){if(!o.isWalkMeVisible()&&!t)return;u.raiseEvent(l.EVENTS.BeforeSettingCustomCss,{element:e});var n=a.getDirectHead(e);if(!n)return;s.get()&&n.data(T,!1);if(!n.data(T)){var r=c.getSettingsFile().CustomCss;return r?function i(e,t){var n=m.injectCssFile(e,{cssId:E,head:t[0]||t,beforeId:w});return t.data(T,!0),n}(r,n):function f(e){var t=p.get().CustomCss||"",n=function s(){return C(g.htmlImages)}()||"",r=function u(){return C(g.customImages)}()||"",i=function l(){if(!S)return;var r="";return wmjQuery.safeEach(S,function(e,t){for(var n in t)t[n].ExternalCss&&(r+=t[n].ExternalCss)}),r}()||"",o=v.get()||"",a=n+r+t+i+o;if(!function c(e){return e!=undefined&&0<e.length}(a))return;return function d(e,t){try{return e=h.decodeHtml(e,["&",'"',"'",">"]),m.injectCss(e,E,t,null,w),t.data(T,!0),!0}catch(n){return!1}}(y=a,e)}(n)}},this.getAllCustomCssProp=function e(){return y},this.setUiTemplates=function t(e){S=e};var E="walkme-custom-css",w="walkme-player-css",T="wm_custom_css_set";function C(e){for(var t="",n=0;n<e.length;n++){var r=e[n];r.Css&&(t+=r.Css)}return t}}).dependencies("WalkMeVisibilityChecker, SiteConfigManager, IconTemplates, DirectHeadProvider, IsInEditor, HtmlDecoder, ResourceManager, CommonEvents, Consts, DesignTemplatesCalculatedCssGetter, SettingsFile")}).call(window)},function(e,t,n){(function(){n(289).register("DesignTemplatesCalculatedCssGetter").asCtor(function r(e,t){this.get=function n(){return t.map(e.value,function(e){return e.css}).join(" ")}}).dependencies("DesignTemplates, ArrayUtils")}).call(window)},function(i,e,o){(function(){var t=o(293),n={init:function r(){t.get("SurveysSetter").init();var e=t.get("SurveysManager");n.surveyIsShown=e.surveyIsShown,n.submitSurvey=e.submitSurvey,n.surveyExited=e.surveyExited,n.activateById=e.activateById,n.autoStartEnabled=e.autoStartEnabled},services:["SurveysManager","DeployableSurveyActivator","SurveyBalloon","SurveyQuestionFactory"],types:["SurveyFreeTextQuestion"]};!function e(){o(294),o(295),o(296),o(297),o(298),o(299),o(300)}(),o(69).registerApi(n,t),i.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(293).register("BBCodeSurveyActivator").asCtor(function s(r,i,o,e,t){function n(e,t){!function n(e){return 0<=e}(e)||(i.stop(),o.activateById(e,r.mapBbcodeInitiator(t)))}this.register=function a(){e.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:t.EVENTS.BBCodeStartActionClicked.Survey,activator:n})},this.surveyActivator=n}).dependencies("InitiatorTypeToAppTypeMapper, RunningDeployablesStopper, SurveysManager, BBCodeDeployables, Consts")}).call(window)},function(e,r,i){(function(){"use strict";r.__esModule=!0;var e=i(293),t=(n.prototype.map=function(e,t){return{type:this.eventSender.EVENT_APPS.Question,oType:e.getType(),owId:t.surveyJson.Id,owName:t.surveyJson.Name,owType:this.eventSender.EVENT_APPS.Survey,pInit:this.getPInit(t)}},n.prototype.getPInit=function(e){return e.tutorialId?this.getTutorialPInit(e):e.businessSolutionId?this.getBusinessSolutionPInit(e):void 0},n.prototype.getTutorialPInit=function(e){return{id:e.tutorialId,appType:"wt"}},n.prototype.getBusinessSolutionPInit=function(e){return{id:e.businessSolutionId,appType:"bizFlow"}},n);function n(e){this.eventSender=e}r.QuestionToEventMapper=t,e.register("QuestionToEventMapper").asCtor(t).dependencies("EventSender")}).call(window)},function(e,t,r){(function(){r(293).register("SurveysSetter").asCtor(function n(e){this.init=function t(){e.register()}}).dependencies("BBCodeSurveyActivator")}).call(window)},function(e,t,n){(function(){n(293).register("DeployableSurveyActivator").asCtor(function e(l,c,d,f){this.activateSurvey=function s(e,t,n,r,i){l.customerLog("Checking if need to open survey");var o=function u(e,t,n){var r={shouldStart:!1,cookiesToSave:[]},i=c.getById(e);if(!i)return l.customerLog("Couldn't find survey with id:"+e,0,"survey"),r;var o=f.survey.repeat.key+"-"+i.Id,a=d.checkRepeatCookie(o,function s(e){return e.repeat||"visit"}(i.Settings));a&&a.shouldStart&&(r.cookiesToSave.push(a.store),a=d.checkRepeatCookie(t+"-"+i.Id,n),r.cookiesToSave.push(a.store),r.shouldStart=a.shouldStart);return r}(e,t,n);if(o.shouldStart&&(l.customerLog("Starting survey"),c.activateById(e,r,i)))for(var a=0;a<o.cookiesToSave.length;a++)o.cookiesToSave[a]()}}).dependencies("Logger, SurveysManager, AutoStartManager, StorageKeysConfigurations")}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(73),t=a(293),n=(r.prototype.loadOneByOne=function(t){a.e(3).then(function(){var e=[a(722)];t.apply(null,e)}.bind(this))["catch"](a.oe)},r.prototype.loadAllQuestions=function(t){a.e(4).then(function(){var e=[a(739)];t.apply(null,e)}.bind(this))["catch"](a.oe)},r.prototype.loadSurveyQuestionAndAnswerText=function(t){a.e(5).then(function(){var e=[a(740)];t.apply(null,e)}.bind(this))["catch"](a.oe)},r=i([e.ProvideLocal("SurveyLoader",{ctx:t})],r));function r(){}o.SurveyLoader=n}).call(window)}).call(this,a(72))},function(e,r,o){(function(e,n){(function(){"use strict";r.__esModule=!0;var A,e=o(100),a=o(293),t=(A=e.DeployablesManager,n(i,A),i.prototype.submitResults=function(e){return this._surveyIsShown=!1,0<e.answers.length?(this.sendResultsArrayToServer("SurveyCompleted",e),this.addSubmitCookie(e.surveyGuid),this.sendSurveyCompletedEvent(e,"CompletedWithAnswers"),!0):(this.sendSurveyCompletedEvent(e,"CompletedWithNoAnswers"),!1)},i.prototype.submitExit=function(e){this._surveyIsShown=!1,this.sendResultsArrayToServer("SurveyExited",e),this.sendSurveyCompletedEvent(e,"ExitButtonClicked")},i.prototype.sendSurveyCompletedEvent=function(e,t){var n={surveyGuid:e.surveyGuid,status:t};e.answers&&0<e.answers.length&&(n.answers=e.answers),this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyCompleted,n)},i.prototype.sendResultsArrayToServer=function(e,t){if(this.auditingEnabledIndicator.isEnabled()){t.permutationId=this._getPermutationId,t.endUserGuid=this.endUsersManager.getEndUserGuid();var n=this.jsonUtils.toJSON(t),r=this.wmAjax.execute({type:this.featuresManager.isFeatureEnabled("surveyAnswerExtendedLimit")&&this.featuresManager.isFeatureEnabled("blockJsonp")?"POST":"GET",url:this.recorderServerManager.get()+"/Survey/"+e,data:{surveyDataSerialized:n},timeout:i.SEND_TO_SERVER_TIMEOUT});r.success(function(e){}),r.error(function(e,t,n){})}},i.prototype.addSubmitCookie=function(e){var t="wm-SrvSmt-"+e;this.clientStorageManager.saveData(t,1,this.consts.ONE_DAY_SECONDS)},i.prototype.startSurvey=function(t,e){var n=this,r=!0;this._surveyIsShown=!0;var i=window.walkmeExternalSurvey;return this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.StartSurvey,t),i&&(t.surveyJson.Settings.isExternal||t.isSurveyExternal)?(this.logger.customerLog("Starting external survey"),t.playGuid=t.surveyPlayGUID,t.source=this._auditSource,!1===i(t,t.callback)?(r=!1,this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyFailedShowing)):this.sendSurveyPlayedEvent(t.surveyJson)):this.startInternalSurvey(t,function(e){e.show().then(function(){return n.commonEvents.raiseEvent("SurveyOnScreen")}),n.sendSurveyPlayedEvent(t.surveyJson)}),this.reportSurveyStarted(t,e,t.surveyJson.Questions),r},i.prototype.startInternalSurvey=function(e,t){1==e.surveyJson.Settings.shouldShowOneByOne?(this.logger.customerLog(this.stringUtils.formatString("Starting one by one survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),this.surveyLoader.loadOneByOne(function(){t(a.create("OneByOneSurvey",e))})):(this.logger.customerLog(this.stringUtils.formatString("Starting regular survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),this.surveyLoader.loadAllQuestions(function(){t(a.create("AllQuestionsSurvey",e))}))},i.prototype.sendSurveyPlayedEvent=function(e){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyPlayed,{surveyId:e.Id})},i.prototype.surveyIsShown=function(){return this._surveyIsShown},i.prototype.submitSurvey=function(e,t,n,r){var i=this,o=this.buildAnswersObjectForServer(e,n);e.submitResults(o),this.logger.customerLog(this.stringUtils.formatString("Submitting answers for survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),this.autoStartStoragePersister.setStopCondition(e.surveyJson,this._type,this.consts.AUTOSTART.STOP_CONDITIONS.Action),this.surveyLoader.loadSurveyQuestionAndAnswerText(function(){i._surveyQuestionAndAnswerText=a.get("SurveyQuestionAndAnswerText"),i.reportSurveySubmitted(e,t,n)}),r&&r()},i.prototype.surveyExited=function(e,t,n,r){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyExited,{surveyParams:e,questions:t,answers:r,callback:n}),this.logger.customerLog(this.stringUtils.formatString("Survey with id {0} and name {1} exited",e.surveyJson.Id,e.surveyJson.Name));var i=this.buildAnswersObjectForServer(e,[]);e.submitExit(i),this.reportSurveyExited(e,t),this.autoStartStoragePersister.setStopCondition(e.surveyJson,this._type,this.consts.AUTOSTART.STOP_CONDITIONS.XButton),n&&n()},i.prototype.buildAnswersObjectForServer=function(e,t){var n={};return n.playGuid=e.surveyPlayGUID,n.surveyGuid=e.surveyJson.Guid,n.tutorialId=e.tutorialId,n.source=this._auditSource,n.customVarsData=this.commonUtils.getWindowData(this.consts.WINDOW_CUSTOM_DATA_TYPE.Var,e.surveyJson.Settings.customVar),n.customCookiesData=this.commonUtils.getWindowData(this.consts.WINDOW_CUSTOM_DATA_TYPE.Cookie,e.surveyJson.Settings.customCookie),n.answers=[].concat.apply([],t),this.featuresManager.isFeatureEnabled("surveyNoUrl")||(n.fullUrl=this.safeFullUrlProvider.get()),n},i.prototype.activateById=function(e,t,n){var r=this;n=n||{};var i=this.deployablesDict[e];if(!i)return this.logger.customerLog(this.stringUtils.formatString("Survey with id {0} doesn't exist",e),3),!1;if(0<window.wmjQuery(".walkme-survey-id-"+e).length)return this.logger.customerLog(this.stringUtils.formatString("Survey with id {0} is already on screen",e),3),!1;n.surveyJson=i,n.submitResults=function(e){r.submitResults(e)},n.submitExit=function(e){r.submitExit(e)},n.drawBalloonFunc=this.popupBalloonDisplayer.showSpecialPopupBalloon,n.surveyPlayGUID=n.surveyPlayGUID||this.guidGenerator.generateGuid();var o=this.startSurvey(n,t);return this._surveyStartedInCurrentPage=o||this._surveyStartedInCurrentPage,o},i.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e];return!this._surveyStartedInCurrentPage&&!this.permalinkManager.isTrainingInStartingMode()&&this.autostartStopConditionChecker.check(t,this._type)},i.prototype.reportSurveyExited=function(e,t){try{var n=this.mapSurveyParamsToEvent(e,t);n.reason=this.eventSender.CANCEL_REASONS.Xclick,this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Close,n)}catch(r){this.logger.error(r,"reportSurveyExited")}},i.prototype.reportSurveyStarted=function(e,t,n){try{this.walkmeVisibleReporter.report();var r=mtjQuery.extend(this.mapSurveyParamsToEvent(e,n),this.mapEventSource(e),this.reportInitiatorMapper.mapForExtend(t));this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Play,r)}catch(i){this.logger.error(i,"reportSurveyStarted")}},i.prototype.reportSurveySubmitted=function(e,t,n){try{var r=this.mapSurveyParamsToEvent(e,t);this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,r);for(var i=0;i<t.length;i++)for(var o=t[i],a=this.questionToEventMapper.map(o,e),s=n[i],u=0;u<s.length;u++){var l=mtjQuery.extend({},r,a,this.mapAnswerToProps(s[u],e.surveyJson),{indx:i+1});this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,l)}}catch(c){this.logger.error(c,"reportSurveySubmitted")}},i.prototype.mapEventSource=function(e){return e.eventSource?{reason:e.eventSource}:{}},i.prototype.mapSurveyParamsToEvent=function(e,t){var n={type:this.eventSender.EVENT_APPS.Survey,oId:e.surveyJson.Id,oName:e.surveyJson.Name,pId:e.surveyPlayGUID,total:0};return t&&t.length&&(n.total=t.length),n},i.prototype.mapAnswerToProps=function(e,t){var n={};n.oId=e.questionId;var r=this._surveyQuestionAndAnswerText.getQuestionAndAnswerTextFromSurvey(t,e.questionId,e.answerId);return n.oName=r.questionText,e.answerId&&(n.aoId=e.answerId,n.value=r.answerText),e.answerText&&(n.value=e.answerText),n.aType=this.consts.EVENT_SENDER_ACTIONS.SurveyQuestionAnswered,n.aAppType=this.consts.EVENT_SENDER_EVENT_APPS.SurveyQuestionAnswer,n},i.SEND_TO_SERVER_TIMEOUT=1e4,i);function i(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y,S,E,w,T,C,b,I){var _=A.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Survey})||this;return _.consts=t,_.recorderServerManager=r,_.permalinkManager=i,_.guidGenerator=o,_.commonUtils=a,_.commonEvents=s,_.auditSourceManager=u,_.eventSender=l,_.logger=c,_.reportInitiatorMapper=d,_.endUsersManager=f,_.popupBalloonDisplayer=p,_.wmAjax=g,_.clientStorageManager=h,_.walkmeVisibleReporter=m,_.auditingEnabledIndicator=v,_.questionToEventMapper=y,_.safeFullUrlProvider=S,_.featuresManager=E,_.jsonUtils=w,_.stringUtils=T,_.autostartStopConditionChecker=C,_.autoStartStoragePersister=b,_.surveyLoader=I,_._surveyStartedInCurrentPage=!1,_._surveyIsShown=!1,_._name="Survey",_._type=t.DEPLOYABLE_TYPE.Survey,_._auditSource=u.get(),_._getPermutationId=n.getCurrentPermutation(),_}r.SurveysManager=t,a.register("SurveysManager").asCtor(t).dependencies("Lib, Consts, AbCurrentPermutationProvider, RecorderServerManager, PermalinkManager, GuidGenerator, CommonUtils, CommonEvents, AuditSourceManager, EventSender, Logger, ReportInitiatorMapper, EndUsersManager, PopupBalloonDisplayer, WmAjax, ClientStorageManager, WalkmeVisibleReporter, AuditingEnabledIndicator, QuestionToEventMapper, SafeFullUrlProvider, FeaturesManager, JsonUtils, StringUtils, AutostartStopConditionChecker, AutoStartStoragePersister, SurveyLoader")}).call(window)}).call(this,o(29),o(1))},function(e,t,n){(function(){n(293).register("SurveyStyleSetter").asCtor(function e(){function a(e,t){for(var n in function r(e,t){for(var n in t)e.style.removeProperty(n)}(e,t),t)e.style[n]=t[n]}function s(e,t,n){return function(){e.is(n)||a(e[0],t)}}function u(e,t){var n={};for(var r in t)n[r]=e.style.getPropertyValue(r);return n}this.setStaticStyles=function n(e,t){e.getStaticStyles&&!function r(e,t){if(!t)return;for(var n in t)e.find(n).each(function(){a(this,t[n])})}(t,e.getStaticStyles())},this.setStateStyles=function r(e,t){if(e.getStateStyles){var n=e.getStateStyles();!function i(e,r){e.find(r.hoverSelector).each(function(){var e=wmjQuery(this),t=u(this,r.hoverStyle),n=r.selectionSelector;e.hover(s(e,r.hoverStyle,n),s(e,t,n))})}(t,n),function o(n,r){n.find(r.noneSelectionSelector).each(function(){var e=this,t=u(this,r.selectionStyle);n.on("survey-removed-selection",function(){a(e,t)})}),n.on("survey-changed-selection",function(){n.find(r.selectionSelector).each(function(){a(this,r.selectionStyle)})})}(t,n)}}})}).call(window)},function(e,t,s){(function(){var a=_walkmeInternals.ctx;a.register("ShuttlesManager").asCtor(s(302).ShuttlesManager).dependencies("Lib, Consts, win, TimerManager, WalkMeGoalsManager, ClickAuditManager, CommonUtils, PlayGuidGenerator,WalkmeVisibleReporter, HtmlDecoder, Logger, CommonEvents"),e.exports={init:function(){var e=a.get("DeployablesManagerFactory"),t=a.get("Consts"),n=a.get("WmInternals"),r=a.get("ShuttlesManager"),i=a.get("ShuttlesContainer"),o=a.get("DataFileDataLoader");new(s(303))(e,t,n,r,i,o).init()}}}).call(window)},function(e,r,i){(function(n){(function(){"use strict";r.__esModule=!0;var g,e=i(100),t=(g=e.DeployablesManager,n(s,g),s.prototype.activateById=function(e,t){var n=this;try{t=t||{};var r=this.deployablesDict[e];if(!r)return void this.logger.customerLog(this.stringUtils.formatString("Shuttle with id {0} doesn't exist",e),3);this.ClickAuditManager.SendClickAudit(this.Consts.DEPLOYABLE_TYPE.Shuttle,r.Id,{type:t.type,id:t.objectId});var i=parseInt(this.CommonUtils.getSettingsValue(r.Settings,s.PLAY_MODE_SETTING_KEY,this.Consts.PLAY_MODE.SameTab));this.commonEvents.raiseEvent(this.Consts.EVENTS.Shuttles.ActivatingShuttle,{shuttle:r});var o=this.getShuttleUrl(r.DestinationUrl);this.CommonUtils.isValidUrl(o)&&(this.WalkMeGoalsManager.startWatchingDeployable(r,this.playGuidGenerator.generateNewPlayGuid(r.Id)),this.walkmeVisibleReporter.report(),i==this.Consts.PLAY_MODE.NewTab&&this.win.open(o,"_blank"),i==this.Consts.PLAY_MODE.SameTab&&this.TimerManager.libSetTimeout(function(){n.win.location.href=o},s.TIME_BEFORE_REDIRECTING))}catch(a){this.logger.customerLog(this.stringUtils.formatString("Failed playing shuttle with id {0}. Exception is {1}",e,a),3)}},s.prototype.getShuttleUrl=function(e){return e=this.htmlDecoder.decodeHtml(e,["&"]),this.win._walkmeInternals.customShuttleUrl?this.win._walkmeInternals.customShuttleUrl(e):e},s.PLAY_MODE_SETTING_KEY="ShuttlePlayMode",s.TIME_BEFORE_REDIRECTING=100,s);function s(e,t,n,r,i,o,a,s,u,l,c,d,f){var p=g.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Shuttle})||this;return p.Consts=t,p.win=n,p.TimerManager=r,p.WalkMeGoalsManager=i,p.ClickAuditManager=o,p.CommonUtils=a,p.playGuidGenerator=s,p.walkmeVisibleReporter=u,p.htmlDecoder=l,p.logger=c,p.commonEvents=d,p.stringUtils=f,p._name="Shuttle",p}r.ShuttlesManager=t}).call(window)}).call(this,i(1))},function(e,t){(function(){e.exports=function c(e,t,n,r,i,o){var a=this;function s(){e.add(t.DEPLOYABLE_TYPE.Shuttle,r)}a.init=function u(){o.registerDataAppender(a),n.one(t.EVENTS.DATA_FILES_LOADED,s)},a.append=function l(){r.setDeployables(i.get())}}}).call(window)},function(e,t,n){(function(e){(function(){e.register("AuditSafeStartManager").asCtor(n(305)).dependencies("EventSender,ReportInitiatorMapper,Logger, Consts"),e.register("DeployableSafeStartExecuter").asCtor(n(306)).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, SafeStartRedirectService, SafeStartMessageDisplayer, FlowInitiatorService"),e.register("SafeStartMessageDisplayer").asCtor(n(307)).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, CommonUtils, HtmlDecoder, LibDestroyer, RedirectService, SafeStartRedirectService, UiUtils, StringUtils, FlowsContainer, FeaturesManager, DomManager"),e.register("SafeStartRedirectService").asCtor(n(308)).dependencies("TimerManager, CommonEvents, Consts")}).call(window)}).call(this,n(2))},function(t,e){(function(){t.exports=function e(i,o,a,s){this.send=function u(e){if(function n(e){return null!=e&&null!=e.tutorialId&&null!=e.playGuid&&null!=e.status}(e)){var t=function r(e){return{oId:e.tutorialId,oName:e.tutorialName,pId:e.playGuid,pInit:o.map(e.playInitiator),status:e.status,type:s.EVENT_SENDER_ACTIONS.PlayWalkthru}}(e);i.postEvent(i.EVENT_TYPES.PlayFailed,t)}else a.error(null,"params is not valid for send action in AuditSafeStartManager")}}}).call(window)},function(t,e){(function(){t.exports=function e(a,s,u,l,c,d){this.handleSafeStart=function f(e,t,n){var r=function o(e){var t=a.getSettingsValue(e.Settings,"SafeStart",!1);t&&"0"!=t.enabled||(t=a.getSettingsValue(s.get().Settings,"SafeStart",null));return t}(t);if(d.isInitiatorAutoStart())return!1;if(null==r||1!=r.enabled)return e.auditSafeStartDisabled(n),!1;var i=c.showAndGetStatus(r,n,e);e.auditSafeStartFirstStatus(i,n),i==u.SAFESTART_ACTION.AutoRedirect&&l.redirect(r.url,u.SAFESTART_ACTION.AutoRedirect,n,e);return!0}}}).call(window)},function(e,t,n){(function(C){(function(){e.exports=function r(l,c,d,f,p,e,g,h,t,m,v,y,n){function S(){e.releaseBalloons(),t.removeOverlay()}function E(e,t){t.auditStayButtonClicked(e),S()}function w(e){var t=mtjQuery("<div></div>");return e=f.nl2br(e),n.setInnerHTML(t,e),t}this.showAndGetStatus=function T(e,t,n){var r,i=e.url;1==e.autoRedirect?r=d.SAFESTART_ACTION.AutoRedirect:g.canRedirect(i)&&!g.isUrlDifferentFromCurrentOnlyInHash(i)?(r=d.SAFESTART_ACTION.PopupShown,function a(t,n,r){var e=c.get(),i=w(e.SafeStartPopupText),o={popupStepButtons:[{id:0,name:e.RedirectButtonText,action:5},{id:1,name:e.StayButtonText,action:6}]};C.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:i},400,o,function(e){!function i(e,t,n,r){mtjQuery(".walkme-action-redirect",e).click(function(){h.redirect(t,d.SAFESTART_ACTION.RedirectClicked,n,r).then(S)}),mtjQuery(".walkme-action-stay",e).click(function(){E(n,r)}),mtjQuery(".walkme-action-close",e).removeAttr("onclick").unbind("click"),mtjQuery(".walkme-action-close",e).click(function(){E(n,r)})}(e,t,n,r)})}(i,t,n)):(r=d.SAFESTART_ACTION.FailOnUrl,function o(e){var t=function r(){var e={},t=c.get();e.enabled=f.isTrue(t.Settings,"openATicketEnabled",!1),e.url=l.getSettingsValue(t.Settings,"openATicketUrl",""),e.url&&f.isValidUrl(e.url)?(e.url=encodeURI(e.url),e.url=p.decodeHtml(e.url,["&"])):(e.enabled=!1,e.url=null);return e}();t.enabled&&(e+=m.formatString(" or contact <a href='{0}' target='_blank' style='text-decoration: underline; color: blue;'>support.</a>",t.url));var n=w(e);C.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:n},400,{popupStepButtons:[{id:0,name:"OK",action:7}]},function(e){mtjQuery(".walkme-action-ok",e).click(function(){S()})},!0)}(function s(e){return"Sorry about that! The Walk-Thru "+(e&&!y.isFeatureEnabled("noIdInErrorMsg")?"(Id:"+e+") ":"")+"cannot be played right now. Please try again later"}(function u(e){return e&&(e.flowId&&v.getBizFlowIdByFlowId(e.flowId)||e.wt&&e.wt.TutorialId)}(t))));return r},this.closePopup=S}}).call(window)}).call(this,n(2))},function(t,e){(function(){t.exports=function e(o,a,s){this.redirect=function u(e,t,n,r){a.raiseEvent(s.EVENTS.SafeStartRedirect,{url:e});var i=mtjQuery.Deferred();return r.auditSafeStartStatus(t,n),o.setWalkmeTimeout(function(){r.redirect(e,n),i.resolve()}),i.promise()}}}).call(window)},function(n,e,r){(function(t){(function(){t.register("PositionProvider").asCtor(r(310)),t.register("ElementEmbedder").asCtor(r(315)).asProto(),t.register("ElementEmbedderApi").asCtor(r(317).ElementEmbedderApi).asProto(),t.register("FallbackElementEmbedderVisibilityChecker").asCtor(r(319)),t.register("EmbedInElementParentContainerProvider").asCtor(r(320)),t.register("EmbedInElementParentPositionProvider").asCtor(r(321)),t.register("EmbedInElementElementEmbedderCreator").asCtor(r(324)),t.register("EmbedInElementElementParentEmbedderCreator").asCtor(r(326)),t.register("EmbedInElementElementEmbedder").asCtor(r(327)).asProto(),t.register("EmbedInClosestCanEmbedElementContainerProvider").asCtor(r(328)),t.register("EmbedInElementWrapperCreator").asCtor(r(331)),t.register("ElementAttacher").asCtor(r(332)),t.register("BalloonEmbedder").asCtor(r(333)).dependencies("getTopContainer, ElementUtils, FeaturesManager, Consts, wmjQuery, SiteConfigManager, SharedConsts, TransparentLayerProvider"),t.register("ElementEmbedderFactory").asCtor(r(334)).dependencies("Consts"),t.register("EmbedmentTypeProvider").asCtor(r(351)),r(357).extend();var e={init:function(){e.detachByElement=t.get("ElementAttacher").detachByElement,e.getBalloonContainer=t.get("BalloonEmbedder").getContainer,e.handleBalloonEmbedding=t.get("BalloonEmbedder").handleEmbedding,e.fixBalloonPosition=t.get("BalloonEmbedder").fixPosition,e.isBalloonEmbeded=t.get("BalloonEmbedder").isEmbeded,e.getElementEmbedder=t.get("ElementEmbedderFactory").get,e.getEmbedmentType=t.get("EmbedmentTypeProvider").get}};n.exports=e}).call(window)}).call(this,r(2))},function(e,t,r){(function(){var t=r(311);e.exports=function n(){var o,a;this.getPosition=function s(e,t,n,r){var i=o.getCenterPositionByBounds(e);return a.get(n).calculate(r,e,i,t)},function e(){o=t.get("PositionHelper"),a=r(312)}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(n){(function(){e.exports=new function(){var t={};return this.get=function(e){return t[e]||(t[e]=n.get(e))},this.reset=function(){t={}},this}}).call(window)}).call(this,n(2))},function(e,t,n){(function(){var r=n(311),i=n(313),o=n(314);e.exports=new function a(){var t;this.get=function n(e){switch(e){case t.POSITION_PERIMETER_TYPE.Outside:return o;case t.POSITION_PERIMETER_TYPE.Inside:return i}},function e(){t=r.get("Consts")}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){var t=r(311);e.exports=new function n(){var a;this.calculate=function s(e,t,n,r){var i,o;switch(e){case a.POSITION_TYPE.Top:i=t.top,o=n.left-r.width/2;break;case a.POSITION_TYPE.Right:i=n.top-r.height/2,o=t.right-r.width;break;case a.POSITION_TYPE.Bottom:i=t.bottom-r.height,o=n.left-r.width/2;break;case a.POSITION_TYPE.Left:i=n.top-r.height/2,o=t.left;break;case a.POSITION_TYPE.TopLeft:i=t.top,o=t.left;break;case a.POSITION_TYPE.TopRight:i=t.top,o=t.right-r.width;break;case a.POSITION_TYPE.BottomRight:i=t.bottom-r.height,o=t.right-r.width;break;case a.POSITION_TYPE.BottomLeft:i=t.bottom-r.height,o=t.left;break;case a.POSITION_TYPE.Center:i=n.top-r.height/2,o=n.left-r.width/2}return{top:i,left:o}},function e(){a=t.get("Consts")}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){var t=r(311);e.exports=new function n(){var a;this.calculate=function s(e,t,n,r){var i,o;switch(e){case a.POSITION_TYPE.Top:i=t.top-r.height,o=n.left-r.width/2;break;case a.POSITION_TYPE.Right:i=n.top-r.height/2,o=t.right;break;case a.POSITION_TYPE.Bottom:i=t.bottom,o=n.left-r.width/2;break;case a.POSITION_TYPE.Left:i=n.top-r.height/2,o=t.left-r.width;break;case a.POSITION_TYPE.TopLeft:i=t.top-r.height,o=t.left-r.width;break;case a.POSITION_TYPE.TopRight:i=t.top-r.height,o=t.right;break;case a.POSITION_TYPE.BottomRight:i=t.bottom,o=t.right;break;case a.POSITION_TYPE.BottomLeft:i=t.bottom,o=t.left-r.width}return{top:i,left:o}},function e(){a=t.get("Consts")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(g){(function(){var d=n(311),f=n(316);e.exports=function p(e){var u,l,i,o;function c(e,t,n){return l?u.reposition(l,e,t,n):g.resolve()}function a(){i&&(o.remove(i),i=null)}this.embed=function s(e,t,n,r){return a(),i=function(){return i=null,function s(e,t,n,r){try{var i=u.embed(e)}catch(o){return g.reject(o)}return l=function a(e){return new f({topMostElement:e,originElement:e})}(i),c(t,n,r)}(e,t,n,r)},o.mutate(i)},this.reposition=c,this.getElement=function t(){return l},this.destroy=function n(){a(),u.destroy()},function r(){o=d.get("DOMSessionManager"),u=e.elementEmbedderApi}.apply(null,arguments)}}).call(window)}).call(this,n(29))},function(e,t){(function(){e.exports=function s(e){var t,n;this.getOriginElement=function r(){return t},this.getTopMostElement=function i(){return n},this.getElementSize=function o(){return{width:t.outerWidth(),height:t.outerHeight()}},function a(){n=wmjQuery(e.topMostElement),t=wmjQuery(e.originElement)}.apply(null,arguments)}}).call(window)},function(e,i,o){(function(a){(function(){"use strict";i.__esModule=!0;var t=o(311),r=o(318),e=(n.prototype.embed=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto,n);return this._elementAttacher.attach(r,e,t)},n.prototype.reposition=function(t,n,r,i){var o=this;return this.cancelReposition(),this._repositionCallback=function(){try{return o.doReposition(t,n,r,i)}catch(e){return a.reject(e)}},this._domSessionManager.measure(this._repositionCallback)},n.prototype.destroy=function(){this.cancelReposition()},n.prototype.cancelReposition=function(){this._repositionCallback&&(this._domSessionManager.remove(this._repositionCallback),this._repositionCallback=null)},n.prototype.doReposition=function(e,t,n,r){var i=this;this._repositionCallback=null;var o=this.getPosition(e,t,n);return r&&(o=r.refine(o)),this._domSessionManager.mutate(function(){i.setPosition(e,o)})},n.prototype.getPosition=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto);return this._positionProvider.getPosition(this._elementToEmbedInto,e,t,n,r)},n.prototype.setPosition=function(e,t){var n=e.getOriginElement();r.setPosition(n,t)},n);function n(e){this._domSessionManager=t.get("DOMSessionManager"),this._elementAttacher=e.elementAttacher||t.get("ElementAttacher"),this._elementToEmbedInto=e.elementToEmbedInto,this._elementContainerProvider=e.elementContainerProvider,this._positionProvider=e.positionProvider}i.ElementEmbedderApi=e}).call(window)}).call(this,o(29))},function(t,e){(function(){t.exports=new function e(){this.setPosition=function n(e,t){e.css("top",t.top+"px"),e.css("left",t.left+"px")}}}).call(window)},function(t,e){(function(){t.exports=function e(){this.isVisible=function t(e){return e.getOriginElement().is(":mt_visible")}}}).call(window)},function(t,e){(function(){t.exports=function e(){this.get=function t(e){return e.parent()}}}).call(window)},function(e,t,n){(function(){e.exports=function t(){var a;this.getPosition=function s(e,t,n,r,i){return function o(e,t,n){var r=t.offset(),i=n.offset();return{top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)}}(a.getPosition(e,t,n,r,i),e,i)},function e(){a=n(322)}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){var t=r(311),c=r(323);e.exports=new function n(){var u;this.getPosition=function l(e,t,n,r,i){var o=t.getElementSize(),a=c.get(e);return function s(e,t,n){var r=t.offset(),i=n.offset();return{top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)}}(u.getPosition(a,o,n,r),i,t.getTopMostElement())},function e(){u=t.get("PositionProvider")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var r=n(311);e.exports=new function i(){var t;this.get=function n(e){return t.getEmbedInElementPosition(e,{leftOffset:0,topOffset:0})},function e(){t=r.get("PositionHelper")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(a){(function(){var o=n(325);e.exports=function t(){var r;this.create=function i(e){var t={elementToEmbedInto:e,elementContainerProvider:o,positionProvider:r},n={elementEmbedderApi:a.create("ElementEmbedderApi",t)};return a.create("EmbedInElementElementEmbedder",n)},function e(){r=n(322)}.apply(null,arguments)}}).call(window)}).call(this,n(2))},function(t,e){(function(){t.exports=new function e(){this.get=function t(e){return e}}}).call(window)},function(e,t,r){(function(a){(function(){var t=r(311);e.exports=function n(){var r,i;this.create=function o(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i},n={elementEmbedderApi:a.create("ElementEmbedderApi",t)};return a.create("EmbedInElementElementEmbedder",n)},function e(){r=t.get("EmbedInElementParentContainerProvider"),i=t.get("EmbedInElementParentPositionProvider")}.apply(null,arguments)}}).call(window)}).call(this,r(2))},function(e,t,n){(function(m){(function(){var i=n(311),h=n(316);e.exports=function l(e){var c,d,o,a,f,p;function g(e,t,n){return d?c.reposition(d,e,t,n):m.resolve()}function s(){o&&(a.remove(o),o=null)}this.embed=function u(e,t,n,r,i){return s(),o=function(){return o=null,function l(e,t,n,r,i){var o=p.create(n);f.attach(o,e);try{var a=c.embed(o,n,i)}catch(s){return m.reject(s)}return d=function u(e){var t=e.children()[0];return new h({topMostElement:e,originElement:t})}(a),g(t,n,r)}(e,t,n,r,i)},a.mutate(o)},this.reposition=g,this.getElement=function t(){return d},this.destroy=function n(){s(),c.destroy()},function r(){c=e.elementEmbedderApi,a=i.get("DOMSessionManager"),f=i.get("ElementAttacher"),p=i.get("EmbedInElementWrapperCreator")}.apply(null,arguments)}}).call(window)}).call(this,n(29))},function(e,t,c){(function(){var t=c(311);e.exports=function n(){this.get=function l(e){var t=e.parent(),n={originalElement:e,currentParent:t};for(;t&&t.exist();){if(n.currentParent=t,n.reason="",!t[0].style)return n.reason=s,r.raiseEvent(o.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,n),i.getTopContainer(e);if(a.canEmbed(t))return t;n.reason=u,r.raiseEvent(o.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,n),t=t.parent()}return i.getTopContainer(e)};var r,i,o,a,s="Parent has no style",u="Parent is not ':wm_can_embed'";(function e(){r=t.get("CommonEvents"),i=t.get("TopContainerProvider"),o=t.get("Consts"),c(329),a=c(330)}).apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var r=n(311);e.exports=new function i(){var t;this.get=function n(){var e=t.get().Custom;return e&&e.walkMeNoEmbed&&e.walkMeNoEmbed.selectors&&e.walkMeNoEmbed.selectors.join(",")},function e(){t=r.get("SiteConfigManager")}.apply(null,arguments)}}).call(window)},function(e,t,i){(function(){e.exports=new function t(){var n;this.canEmbed=function r(e,t){return(t||e.is(":wm_can_embed"))&&!e.is(n.get())},function e(){n=i(329)}()}}).call(window)},function(e,t,r){(function(){var t=r(311);e.exports=function n(){var a,s;this.create=function u(e){var t=mtjQuery(document.createElement("div"));(function n(e){e.css("display","-moz-inline-stack")})(t),function r(e,t){e.css("position","relative"),e.css("display","inline-block"),e.css("float",function n(e){var t="left";switch(e){case a.POSITION_TYPE.Right:case a.POSITION_TYPE.TopRight:case a.POSITION_TYPE.BottomRight:t="right"}return t}(t))}(t,e),function i(e){e.css("zoom","1"),e.css("*display","inline")}(t),s.isFeatureEnabled(a.FEATURES.EmbedInElementDontWrapText)&&function o(e){e.css("white-space","nowrap")}(t);return t},function e(){a=t.get("Consts"),s=t.get("FeaturesManager")}.apply(null,arguments)}}).call(window)},function(t,e){(function(){t.exports=function e(){this.attach=function n(e,t){return t.appendTo(e)},this.detach=function r(e,t){var n=e.find(t);n&&n.remove()},this.detachByElement=function i(e){try{e&&e.remove()}catch(t){}}}}).call(window)},function(e,t,r){(function(){var n=r(311);e.exports=function a(s,i,u,l,e,c,d,f){var p;function g(e){return e&&e.embed}this.getContainer=function h(e,t,n,r){if(u.isFeatureEnabled(l.FEATURES.EmbedInContainer)){var i=t.parents(function a(){var e=d.defaultSelectors.embedInContainerSelector,t=function n(e){var t=c.get().Custom;return t&&t[e]}("embedInContainerSelector");t&&(e=t);return e}());if(i.exist())return i}if(g(e))return p.get(t);var o=null;n&&(o=s(t));o&&o.length||(o=s(null,!0));return o=f.tryGetWalkMeLayer(o)},this.handleEmbedding=function r(e,t,n){if(!g(e))return;t.css("cursor","default")},this.fixPosition=function o(e,t,n){if(!g(t))return;if("BODY"==i.getElementTagName(n[0]))return;var r=n.offset();e.left-=r.left-n.scrollLeft(),e.top-=r.top-n.scrollTop()},this.isEmbeded=g,function t(){p=n.get("EmbedInClosestCanEmbedElementContainerProvider")}.apply(null,arguments)}}).call(window)},function(e,t,i){(function(){var n=i(311);e.exports=function r(e){var o,a,s,u,l,c,d,f,p;this.get=function g(e,t,n){var r=o.get(t,e,n);switch(r){case p.EmbedInElement:return function i(e){var t=a.create(e),n=s.create(e);return new f({elementEmbedders:[t,n]})}(e);case p.EmbedInElementParent:return s.create(e);case p.EmbedInOwnerDocument:return u.create(e);case p.EmbedInTopDocument:return l.create(e);case p.EmbedInClosestCanEmbed:return c.create(e);case p.EmbedNearCompatibleSibling:return d.create(e);case p.ForceEmbedInElement:return a.create(e);default:throw new Error("unknown embedment type "+r)}},function t(){o=n.get("EmbedmentTypeProvider"),a=n.get("EmbedInElementElementEmbedderCreator"),s=n.get("EmbedInElementElementParentEmbedderCreator"),u=i(335),l=i(339),c=i(343),d=i(344),f=i(350),p=e.EMBEDMENT_TYPE}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(a){(function(){var i=n(336),o=n(337);t.exports=new function e(){this.create=function r(e){var t={elementToEmbedInto:e,elementContainerProvider:i,positionProvider:o},n={elementEmbedderApi:a.create("ElementEmbedderApi",t)};return a.create("ElementEmbedder",n)}}}).call(window)}).call(this,n(2))},function(e,t,n){(function(){var i=n(311);e.exports=new function o(){var t,n;this.get=function r(e){return n.tryGetWalkMeLayer(t.getTopContainer(e))},function e(){t=i.get("TopContainerProvider"),n=i.get("TransparentLayerProvider")}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){var t=r(311),f=r(338);e.exports=new function n(){var u,l,c;this.getPosition=function d(e,t,n,r,i){var o=l.isFeatureEnabled(c.FEATURES.NoScrollTop)&&i.is("body"),a=f.get(e,o),s=t.getElementSize();return u.getPosition(a,s,n,r)},function e(){u=t.get("PositionProvider"),l=t.get("FeaturesManager"),c=t.get("Consts")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var t=n(311);e.exports=new function i(){var n;this.get=function r(e,t){return n.getElementBounds(e,!0,window,{leftOffset:0,topOffset:0},t)},function e(){n=t.get("PositionHelper")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(a){(function(){var i=n(340),o=n(342);t.exports=new function e(){this.create=function r(e){var t={elementToEmbedInto:e,elementContainerProvider:o,positionProvider:i},n={elementEmbedderApi:a.create("ElementEmbedderApi",t)};return a.create("ElementEmbedder",n)}}}).call(window)}).call(this,n(2))},function(e,t,r){(function(){var t=r(311),l=r(341);e.exports=new function n(){var s;this.getPosition=function u(e,t,n,r,i){var o=l.get(e),a=t.getElementSize();return s.getPosition(o,a,n,r)},function e(){s=t.get("PositionProvider")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var r=n(311);e.exports=new function i(){var t;this.get=function n(e){return t.getElementBounds(e,!1,window,{leftOffset:0,topOffset:0})},function e(){t=r.get("PositionHelper")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var i=n(311);e.exports=new function o(){var e,t;this.get=function n(){return t.tryGetWalkMeLayer(e.getTopContainer(null,!0))},function r(){e=i.get("TopContainerProvider"),t=i.get("TransparentLayerProvider")}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(a){(function(){var t=r(311);e.exports=new function n(){var r,i;this.create=function o(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i},n={elementEmbedderApi:a.create("ElementEmbedderApi",t)};return a.create("EmbedInElementElementEmbedder",n)},function e(){r=t.get("EmbedInClosestCanEmbedElementContainerProvider"),i=t.get("EmbedInElementParentPositionProvider")}.apply(null,arguments)}}).call(window)}).call(this,r(2))},function(e,t,n){(function(s){(function(){e.exports=new function t(){var r,i,o;this.create=function a(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i,elementAttacher:o},n={elementEmbedderApi:s.create("ElementEmbedderApi",t)};return s.create("EmbedInElementElementEmbedder",n)},function e(){r=n(345),i=n(348),o=n(349)}()}}).call(window)}).call(this,n(2))},function(e,t,n){(function(){e.exports=new function t(){var o,a;this.get=function s(e,t){var n=t&&t.isInvisible,r=a.get(e),i=r.parent();for(;!i.is("body");){if(o.canEmbed(i,n))return r;r=a.get(i),i=r.parent()}return r},function e(){o=n(330),a=n(346)}()}}).call(window)},function(e,t,n){(function(){e.exports=new function t(){var o;this.get=function a(n){var r,e=o.get().embedInCompatibleParent;wmjQuery.each(e,function(e,t){n.is(t.elementType)&&(r=t)});var t=n;if(r){var i=n.closest(r.topParent);i.length&&(t=i)}return t},function e(){o=n(347)}()}}).call(window)},function(e,t){(function(){e.exports=new function i(){this.get=function r(){return{embedInElement:n,embedInParent:e,embedInCompatibleParent:t}};var e=["input","img","select","button","textarea","iframe","a","abbr","acronym","area","b","base","basefont","bdi","bdo","br","cite","code","datalist","dfn","dl","em","embed","font","h1","h2","h3","h4","h5","h6","hr","i","kbd","label","legend","link","mark","meta","meter","ol","output","param","picture","pre","progress","q","ruby","s","samp","small","span","strong","sub","summary","sup","table","time","u","ul","var"],t=[{elementType:"tr",topParent:"table"},{elementType:"tbody",topParent:"table"},{elementType:"tfoot",topParent:"table"},{elementType:"thead",topParent:"table"},{elementType:"col",topParent:"table"},{elementType:"colgroup",topParent:"table"},{elementType:"option",topParent:"select, datalist"},{elementType:"optgroup",topParent:"select"},{elementType:"rt",topParent:"ruby"},{elementType:"rp",topParent:"ruby"}],n=["th","td","caption","li","dt","dd"]}}).call(window)},function(e,t,r){(function(){var t=r(311);e.exports=new function n(){var a;this.getPosition=function s(e,t,n,r,i){var o=i.parent();return a.getPosition(e,t,n,r,o)},function e(){a=t.get("EmbedInElementParentPositionProvider")}()}}).call(window)},function(t,e,n){(function(){var r=n(311);t.exports=new function e(){var i,t=this;function o(e,t){return e.before(t[0]),e.prev()}function a(e,t){return e.after(t[0]),e.next()}t.attach=function s(e,t,n){return(function r(e){return e===i.Left||e===i.TopLeft||e===i.BottomLeft}(n)?o:a)(e,t)},function n(){i=r.get("Positions");var e=r.get("ElementAttacher");t.detach=e.detach,t.detachByElement=e.detachByElement}()}}).call(window)},function(e,t,n){(function(f){(function(){var l=n(311);e.exports=function d(e){var c,o,a;function s(e){a=e}this.embed=function u(e,t,n,r){return function i(a,s,u,l){for(var e=f.reject(),t=0;t<o.length-1;t++)e=e.then(null,function(o){return function(){return e=a,t=s,n=u,i=l,(r=o).embed(e,t,n,i).then(function(){return new f(function(e,t){!function n(e){var t=e.getElement();{return!!c.isVisible(t)||(t.getTopMostElement().remove(),!1)}}(r)?t():e(r)})});var r,e,t,n,i}}(o[t]));return e}(e,t,n,r).then(s,function(){return function i(e,t,n,r){return(a=o[o.length-1]).embed(e,t,n,r)}(e,t,n,r)})},this.reposition=function i(e,t,n,r){return a.reposition(e,t,n,r)},this.getElement=function t(){return a.getElement()},this.destroy=function n(){a.destroy()},function r(){c=l.get("FallbackElementEmbedderVisibilityChecker"),o=e.elementEmbedders}.apply(null,arguments)}}).call(window)}).call(this,n(29))},function(e,t,d){(function(){var t=d(311);e.exports=function n(){var r,i,o,a,s,u,l;this.get=function c(e,t,n){if(e||a.shouldUseEmbedInElementBecauseInJspPane(t)){return n?u.getEmbedmentType(t):i.isFeatureEnabled(r.FEATURES.EmbedInClosestCanEmbed)?l.EmbedInClosestCanEmbed:o.canEmbedInElement(t)?l.EmbedInElement:l.EmbedInElementParent}return s.canEmbedInOwnerDocument(t)?l.EmbedInOwnerDocument:l.EmbedInTopDocument},function e(){r=t.get("Consts"),i=t.get("FeaturesManager"),o=d(352),a=d(354),s=d(355),u=d(356),l=r.EMBEDMENT_TYPE}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var t=n(311),a=n(353);e.exports=new function r(){var n,i;this.canEmbedInElement=function o(t){var r=n.browser.version,e=a.get();return i.doAllMeetCondition(e,function(e){return!t.is(e.elementType)||e.isSupported&&function n(e,t){return e>=t.minimalSupportedVersion}(r,e)})},function e(){n=t.get("HostData"),i=t.get("CommonUtils")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var a=n(311);e.exports=new function s(){var e,t=[{elementType:"select",isSupported:!(this.get=function i(){return t})}],n=[{elementType:"button",isSupported:!1},{elementType:"input",isSupported:!0,minimalSupportedVersion:9},{elementType:"img",isSupported:!0,minimalSupportedVersion:9},{elementType:"iframe",isSupported:!0,minimalSupportedVersion:9},{elementType:"textarea",isSupported:!1}],r=[{elementType:"textarea",isSupported:!1}];(function o(){(e=a.get("HostData")).isIE()?t=t.concat(n):e.isEdge()&&(t=t.concat(r))}).apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var o=n(311);e.exports=new function a(){var t,n,r;this.shouldUseEmbedInElementBecauseInJspPane=function i(e){return n.isFeatureEnabled(t.FEATURES.JSP)&&!!r.findJspContainer(e)},function e(){t=o.get("Consts"),n=o.get("FeaturesManager"),r=o.get("CommonUtils")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var a=n(311);e.exports=new function s(){var t,n,r,i;this.canEmbedInOwnerDocument=function o(e){return!i.isInIframe(e)||n.isFeatureEnabled(t.FEATURES.ForceEmbedInOwnerDocument)||r.shouldHandlePageAsFramesets()},function e(){t=a.get("Consts"),n=a.get("FeaturesManager"),r=a.get("FramesetsUtils"),i=a.get("ElementInIframeIndicator")}.apply(null,arguments)}}).call(window)},function(e,t,u){(function(){var a=u(311);e.exports=new function s(){var n,r,e,i;this.getEmbedmentType=function o(t){var e=n.get();return r.doesAnyMeetCondition(e.embedInElement,function(e){return t.is(e)})?i.ForceEmbedInElement:i.EmbedNearCompatibleSibling},function t(){r=a.get("CommonUtils"),e=a.get("Consts"),n=u(347),i=e.EMBEDMENT_TYPE}()}}).call(window)},function(e,t,n){(function(){e.exports=new function t(){this.extend=function e(){wmjQuery.extend(_walkmeInternals.ctx.get("Lib"),n(358))}}}).call(window)},function(t,e,n){(function(n){(function(){t.exports=new function e(){this.overrideBalloonEmbedder=function t(e){n.register("BalloonEmbedder").asCtor(e).dependencies("getTopContainer")}}}).call(window)}).call(this,n(2))},function(t,e,n){(function(){var r=n(360),i={init:function o(){r.get("LaunchersSetter").init();var e=r.get("LaunchersManager"),t=r.get("LaunchersModule"),n=r.get("LauncherDefaultIcon");i.getActionData=e.getActionData,i.isWithAction=e.isWithAction,i.getLaunchers=t.getLaunchers,i.setLaunchers=t.setLaunchers,i.showLauncher=t.showLauncher,i.showAllLaunchers=t.showAllLaunchers,i.getLauncherAction=t.getLauncherAction,i.releaseLaunchers=t.releaseLaunchers,i.launcherDefaultIcon=n},services:["LaunchersManager","LaunchersModule","LauncherDefaultIcon"],types:["Launcher"]};!function e(){n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370)}(),n(69).registerApi(i,r),t.exports=i}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(360).register("DataFileLauncherDataAppender").asCtor(function u(r,i,o,a,e){var t=this;t.register=function n(){e.registerDataAppender(t)},t.append=function s(e,t){i.isNewLanguage()&&r.setLaunchers([]),function n(e){var t=r.getLaunchers();t=t.concat(e),r.setLaunchers(t),i.isNewLanguage()&&a.setDeployables(r.getLaunchers())}(t[o.Launcher])}}).dependencies("LaunchersModule, LibInitializer, DeployableTypes, LaunchersManager, DataFileDataLoader")}).call(window)},function(e,t,n){(function(){var k=n(360);k.register("Launcher").asCtor(function D(o,i,a,e,s,n,t,u,r,l,c,d,f,p){var g,h,m,v,y,S=this;function E(){return s.getSettingsValue(p.launcher.Settings,"imageObject",e)}function w(){v&&v.shouldShow()&&!f.isQuirksMode(p.element[0])&&v.highlight()}S.show=function T(t){(function e(){return(g=function n(){var e=function i(){var e=E(),t={TemplateId:e.data.id,Type:e.type,Predefined:e},n=u.get(t);n=n||{mainImageUrl:e.data.url,hoverImageUrl:e.data.hover,clickImageUrl:e.data.click,text:e.data.customText,cssClassName:"custom-launcher-"+e.data.id,kind:e.data.url?o.ICON_CONTENT_KIND.Image:o.ICON_CONTENT_KIND.Text};return{uniqueIdentifierType:"Launcher",uniqueIdentifierId:p.launcher.Id,isEmbedInElement:p.launcher.Settings.embedInParent,attachmentSide:p.launcher.Position,zindex:p.launcher.Settings["z-index"],perimeterType:p.launcher.Settings.context,isAnimated:p.launcher.Settings.animated,growingDirection:p.launcher.Settings.direction,positionTopCustomOffset:p.launcher.Settings.topOffset,positionLeftCustomOffset:p.launcher.Settings.leftOffset,contentElementCssClassNames:["walkme-launcher-image-div"],positionElementCssClassNames:function r(){var e=[];return e.push("walkme-launcher-id-"+p.launcher.Id),e.push("walkme-custom-launcher-outer-div"),e.push("walkme-text-launcher"),e}(),contentData:n}}(),t=r.get(p.element,e);return l.create(t,p.element)}()).show().then(function(e){m=e.getOriginElement(),function n(e){if(p.launcher.Settings.embedInParent){var t=e.getTopMostElement();t.addClass("walkme-launcher-container"),t.addClass("walkme-launcher-container-id-"+p.launcher.Id)}}(e),function t(e){return k.create("TolltipIconUiBehavior",{tooltipText:s.getSettingsValue(e.Settings,"tooltip","")})}(p.launcher).applyBehavior(e),function r(){return k.create("ClickIconExecutionBehavior",{clickAction:function e(){return function(){a.raiseEvent(y.LauncherClicked,{launcherId:p.launcher.Id}),d.SendClickAudit(o.DEPLOYABLE_TYPE.Launcher,p.launcher.Id);var e={type:o.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,objectId:p.launcher.Id};c.setForScope(e,function(){i.getAction(p.launcher).doAction()})}}()})}().applyBehavior(e),w(),"onHover"==p.launcher.Settings.displayStyle&&m.css("display","none")})})().then(function(){n.report(),function e(){a.deprecatedRaiseEvent(y.LauncherIsShown,{getId:function(){return p.launcher.Id},getName:function(){return p.launcher.Name}},{customText:E().data.customText,name:p.launcher.Name,launcherDiv:m,launcherId:p.launcher.Id,element:p.element,launcherData:p.launcher})}(),t&&t(m)})},S.destroy=function C(e){h&&(h.destroy(),h=null),S.watchLauncherTimeout&&S.watchLauncherTimeout.clear(),function t(){g&&g.destroy();v&&v.unhighlightElement()}(),m=null,p.element=null,g=v=null,a.raiseEvent("LauncherDestroyed",{launcher:p.launcher}),e&&e()},S.setTimeoutOn=function b(){(h=t.create(p.element,function(){g&&(g.reposition(),w())})).track()},S.isDrawn=function I(){try{return function e(){return 0<m.parents("html").length}()}catch(t){return!1}},S.display=function _(){m.show(),a.raiseEvent(y.DisplayLauncher,{launcher:p.launcher})},S.removeDisplay=function A(){m.hide(),a.raiseEvent(y.HideLauncher,{launcher:p.launcher})},S.watchLauncherTimeout=null,function P(){y=o.EVENTS.Launchers,v=k.create("Highlighter",{element:p.element,settings:p.launcher.Settings,embedInElement:p.launcher.Settings.embedInParent,drawableType:"launcher",drawableId:p.launcher.Id,monitor:!0,defaultSettings:!1,cssKeysValues:[{id:p.launcher.Id,name:"launcher"}]})}()}).asProto().dependencies("Consts, LauncherActions, CommonEvents, LauncherDefaultIcon, SettingsValuesRetriever, WalkmeVisibleReporter,UiElementPositionTrackerCreator,IconContentProvider,IconCreatorParamsProvider,IconCreator,InitiatorManager,ClickAuditManager,HostData")}).call(window)},function(e,t,r){(function(){r(360).register("LauncherActionDataProvider").asCtor(function n(e,a){var s={};this.fillActionData=function u(e,t){if(t=t||{},null==e)return t;var n=e.Settings;if(n&&n.action){var r=n.action,i=s[r.actionType];if(i){t.Type=i.actionEntityType;var o=r.arguments;o&&o[i.idField]&&(t.ItemId=o[i.idField].toString(),t.Name=a.getDeployableName(i.deployableType,t.ItemId),t.aAppType=i.aAppType)}}return t},this.isWithAction=function r(e){var t=e.Settings;if(t&&t.action){var n=t.action.actionType;if(n&&"none"!=n)return!0}return!1},function t(){s.playWt={idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:e.EVENT_SENDER_EVENT_APPS.Walkthru},s.playContent={idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayResource,aAppType:e.EVENT_SENDER_EVENT_APPS.Content},s.playSurvey={idField:"surveyId",deployableType:e.DEPLOYABLE_TYPE.Survey,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySurvey,aAppType:e.EVENT_SENDER_EVENT_APPS.Survey},s.playShuttle={idField:"shuttleId",deployableType:e.DEPLOYABLE_TYPE.Shuttle,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:e.EVENT_SENDER_EVENT_APPS.Shuttle},s.shoutOut={idField:"id",deployableType:e.DEPLOYABLE_TYPE.ShoutOut,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShoutOut,aAppType:e.EVENT_SENDER_EVENT_APPS.ShoutOut},s.openMenu={actionEntityType:e.EVENT_SENDER_ACTIONS.OpenMenu,aAppType:e.EVENT_SENDER_EVENT_APPS.None,aType:e.EVENT_SENDER_ACTIONS.OpenMenu},s.playBf={idField:"bfId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:e.EVENT_SENDER_EVENT_APPS.BizFlow},s.checkMyForm={idField:"businessSolutionId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySmartTipSet,aAppType:e.EVENT_SENDER_EVENT_APPS.SmartTipSet},s.openTeachMe={actionEntityType:e.EVENT_SENDER_ACTIONS.OpenCoursesMenu,aAppType:e.EVENT_SENDER_EVENT_APPS.None,aType:e.EVENT_SENDER_ACTIONS.OpenCoursesMenu}}.apply(null,arguments)}).dependencies("Consts,DeployablesDataProvider")}).call(window)},function(e,t,n){(function(){n(360).register("LauncherActions").asCtor(function t(n,r,i,o){this.reset=function e(){a={}},this.getAction=function s(e){if(a[e.Id])return a[e.Id];var t=i.getSettingsValue(e.Settings,"action",null);return t?(a[e.Id]=o.get(t.actionType,t.arguments,r.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,e),a[e.Id]):(n.customerLog("No action core. aborting..."),null)};var a={}}).dependencies("Logger, Consts, SettingsValuesRetriever, ActionsFactory")}).call(window)},function(e,t,n){(function(){n(360).register("LauncherEventSender").asCtor(function t(o,a){var s;this.postLauncherIsShownEventIfWasntSent=function u(e){var t=e.getId();if(!(-1!=wmjQuery.inArray(t,s))){var n={type:a.EVENT_APPS.Launcher,oId:t,oName:e.getName()};try{var r=a.postEvent(a.EVENT_TYPES.Play,n);return s.push(t),r}catch(i){return o.error(i),!0}}},function e(){s=[]}.apply(null,arguments)}).dependencies("Logger, EventSender")}).call(window)},function(e,t,n){(function(){n(360).register("LaunchersLegacyExternalApi").asCtor(function t(e){this.getLaunchers=e.getLaunchers,this.setLaunchers=e.setLaunchers,this.showAllLaunchers=e.showAllLaunchers,this.getLauncherAction=e.getLauncherAction,this.releaseLaunchers=e.releaseLaunchers}).dependencies("LaunchersModule")}).call(window)},function(e,a,s){(function(o){(function(){"use strict";a.__esModule=!0;var i,e=s(100),t=s(360),n=(i=e.DeployablesManager,o(r,i),r.prototype.getActionData=function(e){var t=i.prototype.getActionData.call(this,e);return this.launcherActionDataProvider.fillActionData(e,t)},r.prototype.isWithAction=function(e){return this.launcherActionDataProvider.isWithAction(e)},r);function r(e,t,n){var r=i.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Launcher})||this;return r.consts=t,r.launcherActionDataProvider=n,r._name="Launcher",r}a.LaunchersManager=n,t.register("LaunchersManager").asCtor(n).dependencies("Lib, Consts, LauncherActionDataProvider")}).call(window)}).call(this,s(1))},function(t,e,n){(function(){var k=n(360);function e(m,v,y,S,E,w,T,o,r,a,C,b,i){var s=this;s.getLaunchers=l,s.setLaunchers=c,s.showLauncher=function d(e,t){if(a.isFeatureEnabled("hideLauncherWithoutLink")&&!function i(e){var t=e.Settings.action,n=m.ACTION_TO_DEPLOYABLE_DATA[t.actionType],r=n&&t.arguments[n.deployableIdField];return!r||null!=o.get(n.deployableType).getById(parseInt(r))}(e))return!1;var n=S.getSettingsValue(e.Settings,"PlayLauncherConditionTree",null);return function h(t,e,n){var r=!1,i=m.STICKY_TYPE.ONCE,o=S.getSettingsValue(t.Settings,m.IS_STICKY_SETTING_KEY,!1);if(o&&0<parseInt(o)){var a=parseInt(S.getSettingsValue(t.Settings,m.STICKINESS_TYPE_SETTING_KEY,null));i=a==m.OLD_STICKIES.STICKINESS_TYPES.soft?m.STICKY_TYPE.SOFT:m.STICKY_TYPE.STRONG}var s={type:m.ELEMENT_OWNER_TYPE_NAMES.LAUNCHER,id:t.Id,stickyType:i},u={logContext:t.Id,stickyType:i,isRemoveByCondition:1==t.Settings.condHide,elementVisibilityParams:{findElementParams:{IdentifySettings:t.IdentifySettings,ownerChain:s}},conditionCheckerParams:{featureName:I,elementName:t.Name,ownerChain:s},conditionTree:n,onShow:function g(e){r=!0,function l(e,t,n){var r=S.getSettingsValue(e.Settings,"imageObject","");if(function a(e,t,n){return typeof n.isContentSecure!==undefined?!(!A(e[0].ownerDocument.location.href)||"custom"!=t.type)&&!(A(t.data.url)&&_(t.data.click)&&_(t.data.hover)):n.isContentSecure}(t,r,e))return e.isContentSecure=!1,E.customerLog("Launcher ["+e.Id+"] will not be displayed. Launcher URL must be https in secure page",1),y.raiseEvent(m.EVENTS.Launchers.LauncherIsInsecure,{name:e.Name}),!1;e.isContentSecure=!0,w.setCustomCssIfNeeded(t);var i=function s(e,t){return k.create("Launcher",{element:e,launcher:t})}(t,e),o=function(e){return function(){e.show(function(){e.setTimeoutOn(),n&&n()})}}(e.drawable=i);return function u(e,t){if(v.isTrue(e.Settings,"hasDelay",!1)){var n=S.getSettingsValue(e.Settings,"delayInSeconds",0);T.libSetTimeout(t,1e3*n)}else t()}(e,o),!0}(t,e,c)},onRemove:d,trackUIChanges:!0},l=k.create("UIVisibilityManager",u);function c(){"onHover"===t.Settings.displayStyle&&!function s(t){var e,n={featureName:I,elementName:t.Name,stopPollingAfterEvaluateTrue:!1},r=C.createOld(n);t.hoverLauncherEvaluator&&t.hoverLauncherEvaluator.cleanResources();(t.hoverLauncherEvaluator=r).onValueChanged(function(e){if(!e)return t.hoverDestroyTimeout=T.libSetTimeout(function(){t.drawable&&t.drawable.isDrawn()&&(t.hoverLauncherEvaluator.getCachedValue()||t.drawable.removeDisplay())},300),!1;t.hoverDestroyTimeout&&(t.hoverDestroyTimeout.clear(),t.hoverDestroyTimeout=undefined),t.drawable&&t.drawable.display()});var i=".walkme-launcher-id-"+t.Id;if(t.IdentifySettings.IsJquerySelector)e={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:t.IdentifySettings.JquerySelector},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:i},nodeDepth:0},nodeDepth:0};else{var o=function a(e){var t=b.clone(e);return t.Sensitivity=e.StepSensitivity,t.StepSensitivity=undefined,t.IgnoreId=e.IsIgnoreId,t.IsIgnoreId=undefined,t.IgnoreText=e.IsIgnoreText,t.IsIgnoreText=undefined,t.IgnorePageIdentification=undefined,t.IsValidPageId=undefined,t}(t.IdentifySettings);e={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"ElementHoverSwitch",funcArgs:{IdentifySettings:o},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:i},nodeDepth:0},nodeDepth:0}}r.evaluateAsync(e)}(t),f()}function d(){t.drawable&&t.drawable.destroy(),P(t)}function f(){t.drawable.watchLauncherTimeout=T.libSetTimeout(p,2e3)}function p(){t.drawable.isDrawn()?f():(d(),l.cleanResources(),l.watchForVisibility())}return l.watchForVisibility(),t.uiVisibilityManager=l,r}(e,0,n)},s.showAllLaunchers=function f(){try{for(var e=0;e<u.length;e++){var t=u[e],n=s.showLauncher(t);E.customerLog(i.formatString("willDrawLauncher={0} for launcher with id {1}",n,t.Id),1,I)}}catch(r){E.error(r)}},s.getLauncherAction=function p(e){var t=function n(e){for(var t=0;t<u.length;t++)if(u[t].Id==e)return u[t]}(e);return r.getAction(t)},s.releaseLaunchers=function g(e,t,n){v.executeParallel({objectsArray:l(),functionsToExecute:[function(e,t){e.uiVisibilityManager&&(e.uiVisibilityManager.cleanResources(),e.uiVisibilityManager=undefined),e.drawable?e.drawable.destroy(t):t&&t(),P(e)}],successCallback:function(){n||c([]),e&&e()}})};var u=[],I="showLaunchers";function l(){return u}function c(e){r.reset(),u=e}function _(e){return!e||A(e)}function A(e){return/^https/i.test(e)}function P(e){e.hoverLauncherEvaluator&&(e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=null)}}k.register("LaunchersModule").asCtor(e).dependencies("Consts, CommonUtils, CommonEvents, SettingsValuesRetriever, Logger,CustomCssSetter, TimerManager, DeployablesManagerFactory, LauncherActions,FeaturesManager, ConditionCheckerFactory, JsonUtils, StringUtils"),t.exports=e}).call(window)},function(e,t,n){(function(){n(360).register("LaunchersSetter").asCtor(function v(e,t,n,r,i,o,a,s,u,l,c,d){var f=this;function p(){s.add(l.DEPLOYABLE_TYPE.Launcher,n),n.setDeployables(t.getLaunchers()),wmjQuery.extend(e,d)}function g(){t.releaseLaunchers()}f.init=function h(){o.registerDeployablesRunner(f),r.register(),function e(){u.one(l.EVENTS.DATA_FILES_LOADED,p),u.bind(l.EVENTS.ReleaseAllElementsCalled,g),u.bind(l.EVENTS.Launchers.LauncherIsShown,function(e,t){i.postLauncherIsShownEventIfWasntSent(t)})}()},f.start=function m(){if(a.isWalkMeVisible()){var e=c.timer("show all launchers");t.showAllLaunchers(),e.stop()}}}).dependencies("Lib, LaunchersModule, LaunchersManager, DataFileLauncherDataAppender, LauncherEventSender,StartupDeployablesRunner, WalkMeVisibilityChecker, DeployablesManagerFactory,WmInternals, Consts, Logger, LaunchersLegacyExternalApi")}).call(window)},function(e,t,r){(function(){var e=r(360),t=e.get("PlatformDI"),n=e.get("Consts");t.register(n.PLATFORM.Web,function(){e.register("LauncherDefaultIcon").asInstance({type:"shape",data:{shape:"round-question-mark",color:"blue"}})}),t.register(n.PLATFORM.MobileWeb,function(){e.register("LauncherDefaultIcon").asInstance({type:"htmlShape",data:{shape:"round-question-mark",color:"blue",customClass:"html-launcher-round-question-mark-blue",customText:"?"}})}),t.register(n.PLATFORM.Desktop,function(){e.register("LauncherDefaultIcon").asInstance(null)})}).call(window)},function(o,e,a){(function(i){(function(){var e=a(372),t={init:function n(){e.get("FlowSurveyActivator").init(),t.bizFlowRunningState=i.get("BizFlowRunningState"),t.ButtonTriggersProvider=i.get("ButtonTriggersProvider"),t.flowNextBalloonButtonProvider=i.get("FlowNextBalloonButtonProvider"),t.uiTriggerEventBindingService=i.get("UITriggerEventBindingService"),t.bizFlowShowInMenuChecker=i.get("BizFlowShowInMenuChecker"),t.flowDataPersister=i.get("FlowDataPersister"),t.flowsContainer=i.get("FlowsContainer"),t.flowStack=i.get("FlowStack"),t.bizflowOwnershipManager=i.get("BizflowOwnershipManager"),t.bizFlowOnBeforeUnloadChecker=i.get("BizFlowOnBeforeUnloadChecker"),t.flowTransitionChecker=i.get("FlowTransitionChecker"),t.flowTransitionDelayer=i.get("FlowTransitionDelayer"),t.flowTransitionDelayProvider=i.get("FlowTransitionDelayProvider"),t.flowStartFailureListener=i.get("FlowStartFailureListener"),t.flowsPlayer=i.get("FlowsPlayer"),t.flowsRestorer=i.get("FlowsRestorer"),t.bizflowApi=i.get("BizflowApi"),t.businessSolutionsManager=i.get("BusinessSolutionsManager"),t.flowsManager=i.get("FlowsManager"),t.stagesFactory=i.get("StagesFactory"),t.actionStagesFactory=i.get("ActionStagesFactory"),t.bizFlowEventSender=i.get("BizFlowEventSender"),t.createDelayActionStage=function(){i.create("DelayActionStage")},t.createOnPageActionStage=function(){i.create("OnPageActionStage")}},services:["BizFlowRunningState","ButtonTriggersProvider","FlowNextBalloonButtonProvider","UITriggerEventBindingService","BizFlowShowInMenuChecker","FlowDataPersister","FlowsContainer","FlowStack","BizflowOwnershipManager","BizFlowOnBeforeUnloadChecker","FlowTransitionChecker","FlowTransitionDelayer","FlowTransitionDelayProvider","FlowStartFailureListener","FlowsPlayer","FlowsRestorer","BizflowApi","BusinessSolutionsManager","FlowLinkedTaskCompletionHandler","FlowsManager","StagesFactory","ActionStagesFactory","BizFlowEventSender","FlowInitiatorService"],types:["DelayActionStage","OnPageActionStage"]};!function r(){a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(435),a(436),a(437),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(453),a(454),a(455),a(456),a(457),a(458),a(459),a(460),a(461),a(462),a(463),a(464),a(465),a(466),a(467),a(468),a(469),a(470),a(471),a(472),a(473),a(474),a(475),a(476),a(477),a(478),a(479),a(480),a(481),a(482),a(483),a(484),a(485),a(486),a(487)}(),a(69).registerApi(t,e),o.exports=t}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){var t=n(372);t.register("BizFlowRunningState").dependencies("Consts").asFunction(function(e){return t.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Flows.FlowStopped,e.EVENTS.Flows.FlowCompleted],startingEvents:[e.EVENTS.Flows.RestoringFlow,e.EVENTS.Flows.FlowStarted],resolvingEvents:[e.EVENTS.Flows.UIFlowStageShown],rejectingEvents:[e.EVENTS.Flows.FailedToStart]})})}).call(window)},function(e,t,n){(function(){var s=n(372);s.register("UIElementFactory").asCtor(function e(t){this.createUIElement=function o(e){return n[e.Type](e)};var n={};function r(e){return s.create("UIPopupBalloon",e)}function i(e){return s.create("UIElementBalloon",e)}(function a(){!function e(){n[t.FLOW_UIELEMENT_TYPE.Popup]=r,n[t.FLOW_UIELEMENT_TYPE.Element]=i}()}).apply(null,arguments)}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("ButtonTriggersProvider").asCtor(function e(n){this.get=function t(e){return wmjQuery(e.Triggers).filter(function(e,t){return t.Type==n.FLOW_TRIGGER_TYPE.Button})}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("FlowBackBalloonButtonProvider").asCtor(function o(e,n,t){function r(e,t){t.resolve({nextStageId:n.pop(),isFlowGoingBack:!0})}this.get=function i(){return{selector:".walkme-action-back",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Back),action:r}}}).dependencies("Consts, UiFlowNodesExecutionStack, BalloonButtonDataGenerator")}).call(window)},function(e,t,n){(function(){n(372).register("FlowCancelBalloonButtonProvider").asCtor(function i(e,t){function n(e,t){t.reject({wasElementShown:!0,wasClosedByUser:!0})}this.get=function r(){return{selector:".walkme-action-cancel",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Cancel),action:n}}}).dependencies("Consts, WelcomeBalloonButtonDataGenerator")}).call(window)},function(e,t,n){(function(){n(372).register("FlowContinueBalloonButton").asFunction(function t(e){return{selector:e.selector,template:e.template,action:function n(e,t){t.resolve({nextStageId:e.TargetFlowNodeId})}}}).asProto().dependencies("")}).call(window)},function(e,t,n){(function(){n(372).register("FlowContinueBalloonButtonProvider").asCtor(function e(a,s,u,l,c,d,f){this.getContinueButton=function p(e){var t=f.peek().flowId,n=a.get(e);if(0==n.length)return undefined;var r=d.isPreviousGroupHasNextStage(),i=function o(t,e){return c.doesAnyMeetCondition(e,function(e){return function n(e,t){return!!t.TargetFlowNodeId&&s.isPlayable(e,t.TargetFlowNodeId)}(t,e)})}(t,n);return r||i?u.get():l.get()}}).dependencies("ButtonTriggersProvider, FlowNodePlayIndicator, FlowNextBalloonButtonProvider, FlowDoneBalloonButtonProvider, CommonUtils, FlowGroupLastStageIndicator, FlowStack")}).call(window)},function(e,t,n){(function(){var i=n(372);i.register("FlowDoneBalloonButtonProvider").asCtor(function e(t,n){this.get=function r(){var e={selector:".walkme-action-done",template:n.generate(t.BALLOON_BUTTON_TYPE.Done)};return i.create("FlowContinueBalloonButton",e)}}).dependencies("Consts, BalloonButtonDataGenerator")}).call(window)},function(e,t,n){(function(){n(372).register("FlowElementBalloonButtonsProvider").asCtor(function e(i,o,a){this.getButtons=function s(e){var t=[],n=a.getContinueButton(e);return n&&(t.push(n),function r(){return!i.isEmpty()}()&&t.unshift(o.get())),t}}).dependencies("UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider")}).call(window)},function(e,t,n){(function(){var i=n(372);i.register("FlowNextBalloonButtonProvider").asCtor(function e(t,n){this.get=function r(){var e={selector:".walkme-action-next, .walkme-action-start",template:n.generate(t.BALLOON_BUTTON_TYPE.Next)};return i.create("FlowContinueBalloonButton",e)}}).dependencies("Consts, BalloonButtonDataGenerator")}).call(window)},function(e,t,n){(function(){n(372).register("FlowPopupBalloonButtonsConfigProvider").asCtor(function l(e,t,n,r,i,o){this.get=function s(){return a};var a={Cancel:{getButton:o.get,order:1},Back:{getButton:n.get,canAdd:function u(){return!t.isEmpty()},order:2},"Next/Done":{getButton:function(e){return r.getContinueButton(e)},order:3},Start:{getButton:i.get,order:4}}}).dependencies("Consts, UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider, FlowStartBalloonButtonProvider, FlowCancelBalloonButtonProvider")}).call(window)},function(e,t,r){(function(){r(372).register("FlowPopupBalloonButtonsProvider").asCtor(function n(e){var a;this.getButtons=function s(e){for(var t=[],n=function o(e){for(var t=[],n=e.Settings.popupStepButtons,r=0;r<n.length;r++){var i=a[n[r].name];t.push(i)}return t.sort(function(e,t){return e.order-t.order})}(e),r=0;r<n.length;r++){var i=n[r];i.canAdd&&!i.canAdd()||t.push(i.getButton(e))}return t},function t(){a=e.get()}()}).dependencies("FlowPopupBalloonButtonsConfigProvider")}).call(window)},function(e,t,n){(function(){var i=n(372);i.register("FlowStartBalloonButtonProvider").asCtor(function e(t,n){this.get=function r(){var e={selector:".walkme-action-start",template:n.generate(t.BALLOON_BUTTON_TYPE.Start)};return i.create("FlowContinueBalloonButton",e)}}).dependencies("Consts, WelcomeBalloonButtonDataGenerator")}).call(window)},function(e,t,n){(function(){var e=n(372);e.register("UiFlowNodesExecutionStack").asCtor(function p(t,n,r,i,o,a){var s=e.create("Stack");function u(e,t){l(t)&&!function n(e){return l(e)&&!d(e)}(t)||s.clear()}function l(e){var t=n.getNodeById(e.flowId,e.stageId);return t&&r.isUiNode(t)}function c(e,t){(function n(e){return!e.isFlowGoingBack})(t)&&function r(e){return l(e)&&d(e)}(t)&&s.push(i.peek().stageId)}function d(e){var t=e.step.UIElements[0];return 0<a.get(t).length}this.clear=s.clear,this.push=s.push,this.pop=s.pop,this.isEmpty=s.isEmpty,function f(){!function e(){o.bind(t.EVENTS.Flows.FlowStarted,s.clear),o.bind(t.EVENTS.Flows.BeforeExecutingFlowStage,u),o.bind(t.EVENTS.Flows.AfterCompletingFlowStage,c)}()}()}).dependencies("Consts, FlowsContainer, FlowNodeExtensions, FlowStack, WmInternals, ButtonTriggersProvider")}).call(window)},function(e,t,n){(function(){var V=n(372);V.register("FlowBalloonDisplayer").asCtor(function W(u,l,c,d,f,p,g,h,m,e,o,v,y,r,S,t){var E,w,T,C,b,I,_,A,P,k,D,x;this.showAndWaitForTrigger=function a(e){return E=wmjQuery.Deferred(),u.customerLog(r.formatString("FlowBalloonDisplayer showUIElement showing balloon {0}",w),n,i),k=e,function s(){var e=l.get(),t=e.BalloonSettings,n=p.getBalloonDrawer(t,T),r=f.peek().flowId;T.Settings.customButtons=wmjQuery.map(I,function(e){return e.template});var i,o=m.getComplexHtmlElements({Settings:T.Settings},k);o&&(i=o.parentElement,k=o.elements);!function a(){return!(T.DesignTemplateId||T.DesignTemplatePlaceholderConfigs&&0!=T.DesignTemplatePlaceholderConfigs.length)}()||(T.DesignTemplatePlaceholderConfigs=v.createPlaceHolderConfigs(y.templateEntityType.balloon,T.Title,T.Text));N=!1,(A=V.create("Balloon",{element:k,parentElement:i,position:T.Settings.Position,stepSettings:T.Settings,visibilityFilter:T.IdentifySettings&&d.getVisibleFilterKey(T.IdentifySettings),logger:u,isFirstStep:h.getIsFirstVisualStep(),text:C,configuration:t,siteConfig:e,data:{balloonEntityId:T.Id,containerEntityId:r,type:_,containerEntityType:"flow",balloonEntityType:"flow-balloon"},positionHelper:d,drawer:n,placeholderConfigurations:T.DesignTemplatePlaceholderConfigs,placeholderVariableValues:B(),initiatorData:{initiator:T,type:c.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},bindButtonsFunc:function(e,t){!function a(e,t){R(),function o(e){L(e).on("click"+c.FLOW_TRIGGER_WORKSPACE,function(){M(!0)}),e.bind("click mousedown mouseup",function(e){S.wrapWithEvent(e)})}(e);for(var n=[],r=0;r<b.length;r++)n.push({element:k,balloonDiv:e,logContext:w,balloonButtons:t,trigger:b[r],uiElementId:T.Id});var i={uiElementType:T.Type,triggers:n,ownerChain:x,uiElement:T};(P=V.create("UITriggersManager",i)).listen().then(F,M)}(e,I),g.bind(e,undefined,t)}})).Show(!0,function(e,t){D=!0,N?O():(A.SetTimeoutOn(),E.notify("stageShown",{uiElementId:T.Id,siteElement:k}))})}(),E.promise()},this.destroy=function s(){var e=wmjQuery.Deferred();return O(function(){e.reject({wasElementShown:D})}),e.promise()};var N,n=3,i=c.FEATURES_LOGS.Flows;function O(e){N=!0,function t(){if(!A)return;var e=A.getBalloonDiv();if(!e)return void u.customerLog(r.formatString("FlowBalloonDisplayer unbindButtons was called but balloon div wasn't created yet {0}",w),1,i);L(e).off("click"+c.FLOW_TRIGGER_WORKSPACE),e.unbind("click mousedown mouseup")}(),function n(e){R(),A?A.destroy(!1,e):e&&e()}(e)}function L(e){return wmjQuery(".walkme-action-close, .walkme-action-cancel",e)}function F(e){E.resolve(e)}function M(e){E.reject({wasElementShown:D,wasClosedByUser:e})}function R(){P&&(P.destroy(),P=undefined)}function B(){return{totalVisibleSteps:e.getTotalVisualSteps(),passedVisibleSteps:e.getNextVisualStepIndex(T.Id)}}(function U(){T=t.uiElement,b=T.Triggers,C={title:T.Title,content:T.Text,subText:function i(){var e=B(),t=e.totalVisibleSteps,n=e.passedVisibleSteps,r=l.get().StepsInfoText;r=o.isFeatureEnabled("floatingsubtext")?(r=r.replace("{0}",c.SUBTEXT_CURRENT_START+n+c.SUBTEXT_CURRENT_END)).replace("{1}",c.SUBTEXT_TOTAL_START+t+c.SUBTEXT_TOTAL_END):(r=r.replace("{0}",n)).replace("{1}",t);return r}()},w=T.Id,I=t.balloonButtons,_=t.stepType,D=!1,x={type:c.ELEMENT_OWNER_TYPE_NAMES.STEP,id:T.Id,stickyType:T.IsSticky,owner:T._ownerChain}}).apply(null,arguments)}).asProto().dependencies("Logger, SiteConfigManager, Consts, PositionHelper, FlowStack, BalloonDrawerProvider, BBCodeEventsBinder,FlowDataPersister, ComplexHtmlElementsProvider, FlowVisualStepsIndicator, FeaturesManager, DefaultPlaceHolderConfigsCreator, SharedConsts, StringUtils, StopPropagationWrapper")}).call(window)},function(e,t,n){(function(V){(function(){var B=n(372);B.register("VisualDesignBalloon").asCtor(function U(u,l,e,c,t,d,n,r,f,p,g,i,o,h,m,v){var y,S,E,w,T,C,b,I,_,A,P,k=this;k.showAndWaitForTrigger=function F(e){y=f.Deferred(),u.customerLog("VisualDesignBalloon showUIElement showing balloon "+S,D,x);var n=function i(e){var t={capturedElement:e,elementToAttach:e},n=d.getComplexHtmlElements({Settings:E.Settings},t.capturedElement);n&&(t.elementToAttach=n.parentElement,t.capturedElement=n.elements);return t}(e),r=function o(e){return{capturedElement:e.capturedElement,elementToAttach:e.elementToAttach,stepSettings:E.Settings,balloonEntityId:E.Id,containerEntityId:c.peek().flowId}}(n),t=function a(e){return function t(){return v.stepType===l.STEP_TYPE.Popup}()?V.resolve():(T=B.create("BalloonHighlighter",e)).show()}(r);return function s(){var e=h.getManipulated(E.VisualDesign);_=B.create("VisualDesignComponent",e)}(),t.then(function(){!function t(e){return(C=B.create("BalloonInsideOuter",e)).show()}(r),function i(e){var t=E.Settings.Position;A=f(_.getVisualDesignElement()),function n(e,t){(I=p.get(f(e))).embed(A,N,t)}(e.elementToAttach,t),function r(e,t){(b=g.create(e,function(){I.reposition(N,t),T.show(),C.show()})).track()}(e.elementToAttach,t),P=!0,y.notify("stageShown",{uiElementId:E.Id,siteElement:e.capturedElement}),m.handle(_,E,k),(w=B.create("BalloonTriggersSetter",{uiElement:E,capturedElement:e.capturedElement,balloonElement:A})).set().then(O,L)}(n)}),y.promise()},k.destroy=function M(){var e=f.Deferred();return i.executeAsync(a).then(function(){e.reject({wasElementShown:P})}),e.promise()};var D=3,x=l.FEATURES_LOGS.Flows,N=l.POSITION_PERIMETER_TYPE.Outside;function O(e){y.resolve(e)}function L(e){y.reject({wasElementShown:P,wasClosedByUser:e})}function a(){s(b),s(I),s(T),s(C),_&&_.remove(),s(w)}function s(e){e&&e.destroy()}(function R(){E=v.uiElement,S=E.Id,P=!1}).apply(null,arguments)}).asProto().dependencies("Logger, Consts, PositionHelper, FlowStack, FlowDataPersister, ComplexHtmlElementsProvider, FeaturesManager, StringUtils, wmjQuery, ElementEmbedderFactory, UiElementPositionTrackerCreator, CommonUtils, UiFlowNodesExecutionStack, VisualDesignModelManipulator, BalloonActionsHandler")}).call(window)}).call(this,n(29))},function(e,t,n){(function(){var T=n(372);T.register("VisualDesignPopupBalloon").asCtor(function C(t,e,n,r,i,o){var a,s,u,l,c,d,f,p=this;p.showAndWaitForTrigger=function S(){return a=n.Deferred(),t.customerLog("VisualDesignPopupBalloon showUIElement showing balloon "+s,g,h),function e(){(function t(e){e.Style.position="fixed"})(u.VisualDesign),l=T.create("VisualDesignComponent",u.VisualDesign),c=n(l.getVisualDesignElement()),l.appendToBody(),i.handle(l,u,p),(d=T.create("BalloonTriggersSetter",{uiElement:u,balloonElement:c})).set().then(v,m),l.fadeIn(400,function(){f=!0,a.notify("stageShown",{uiElementId:u.Id,siteElement:undefined})})}(),a.promise()},p.destroy=function E(){var e=n.Deferred();return r.executeAsync(y).then(function(){e.reject({wasElementShown:f})}),e.promise()};var g=3,h=e.FEATURES_LOGS.Flows;function m(e){a.reject({wasElementShown:f,wasClosedByUser:e})}function v(e){a.resolve(e)}function y(){l&&l.remove(),d&&d.destroy()}(function w(){u=o.uiElement,s=u.Id,f=!1}).apply(null,arguments)}).asProto().dependencies("Logger, Consts, wmjQuery, CommonUtils, BalloonActionsHandler")}).call(window)},function(e,t,n){(function(d){(function(){var l=n(372);l.register("BalloonHighlighter").asCtor(function c(r,e,t,i){var o,a;this.show=function n(){var e=[];return o.shouldShow()&&(e.push(o.highlight()),a&&e.push(a.highlight())),d.all(e)},this.destroy=function s(){try{o.unhighlightElement(),a&&a.unhighlightElement()}catch(e){t.error(e,"error removing highlighting elements for balloon")}},function u(){var e={balloonEntityId:i.balloonEntityId,containerEntityId:i.containerEntityId},t=r.getHighlighterSettings(i.stepSettings,i.elementToAttach,e);o=l.create("Highlighter",t),function n(){return!i.elementToAttach.is(i.capturedElement)}()&&(t.element=i.capturedElement,t.drawableType="trigger",a=l.create("Highlighter",t))}()}).asProto().dependencies("HighlighterSettingsProvider, Consts, Logger")}).call(window)}).call(this,n(29))},function(e,t,r){(function(){var s=r(372);s.register("BalloonTriggersSetter").asCtor(function n(r,i){var o;this.set=function e(){return o.destroy(),o.listen()},this.destroy=function t(){o&&(o.destroy(),o=undefined)},function a(){var t=i.uiElement,e=t.Triggers.map(function(e){return{element:i.capturedElement,balloonDiv:i.balloonElement,logContext:t.Id,balloonButtons:[],trigger:e,uiElementId:t.Id}}),n={uiElementType:t.Type,triggers:e,uiElement:t,ownerChain:{type:r.ELEMENT_OWNER_TYPE_NAMES.STEP,id:t.Id,stickyType:t.IsSticky,owner:t._ownerChain}};o=s.create("UITriggersManager",n)}()}).asProto().dependencies("Consts")}).call(window)},function(e,t,n){(function(){var s=n(372);s.register("BalloonInsideOuter").asCtor(function u(n,t,r){var i;this.show=function e(){i.shouldShow()&&i.highlight()},this.destroy=function o(){try{i.unhighlightElement()}catch(e){t.error(e,"error removing inside-out elements for balloon")}},function a(){var e={balloonEntityId:r.balloonEntityId,containerEntityId:r.containerEntityId},t=n.getHighlighterSettings(r.stepSettings,r.capturedElement,e);r.parentElement&&(t.drawableType="trigger"),i=s.create("Insideout",t)}()}).asProto().dependencies("HighlighterSettingsProvider, Logger")}).call(window)},function(e,t,n){(function(){n(372).register("VisualDesignModelManipulator").asCtor(function e(n,r){this.getManipulated=function o(e){var t=n.clone(e);return t.Style.position="absolute",r.isEmpty()&&function i(e){for(var t=e.RootVisualElement.ChildElements,n=t.length-1;0<=n;n--){var r=t[n];"Button"===r.Type&&"back"===r.Action.type&&t.splice(n,1)}}(t),t}}).dependencies("JsonUtils, UiFlowNodesExecutionStack")}).call(window)},function(e,t,n){(function(){n(372).register("ButtonTriggerHandler").asCtor(function e(t){this.triggerButton=function o(e,t,n){var r=i[e];r&&r(t,n)};var i={back:function n(e){e.resolve({nextStageId:t.pop(),isFlowGoingBack:!0})},"continue":function r(e,t){e.resolve({nextStageId:t.TargetFlowNodeId})},destroy:function a(e){e.reject({wasElementShown:!0,wasClosedByUser:!0})}}}).asProto().dependencies("UiFlowNodesExecutionStack")}).call(window)},function(e,t,n){(function(){n(372).register("BalloonActionsHandler").asCtor(function e(a,s,u){this.handle=function o(e,t,n){var r=u.EVENTS.Drawables;e.on(r.ActionClicked+" "+r.XButtonClicked,function i(n,r){return function(e,t){(function o(e,t,n){var r=wmjQuery.extend({uiComponent:n},e.args),i=u.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP;return s.get(e.type,r,i,t)})(a.getData(t),n,r).doAction()}}(t,n))}}).dependencies("ActionDataAdapter, ActionsFactory, Consts")}).call(window)},function(e,t,n){(function(){n(372).register("FlowVisualStepsIndicator").asCtor(function r(s,u){var l;function c(e,t){return e.PointIndex<t.PointIndex?-1:1}this.init=function t(e){!function a(e){var t,n=[],r=u.getFlowById(e).Nodes;for(var i in r)(t=r[i]).Type==s.FLOW_STEP_TYPE.UI&&(n=n.concat(t.UIElements));n.sort(c),l=function o(e){return wmjQuery.map(e,function(e){return e.Id})}(n)}(e)},this.getTotalVisualSteps=function e(){return l.length},this.getNextVisualStepIndex=function n(e){return wmjQuery.inArray(e,l)+1}}).dependencies("Consts, FlowsContainer")}).call(window)},function(e,t,n){(function(){var T=n(372);T.register("UIElementBalloon").asCtor(function C(i,o,a){var n,r,s,u;this.show=function t(){return u.customerLog("{0}: Show Balloon - Calling visibility manager for ui element with id {1} step index {2}",g,l,c),e=wmjQuery.Deferred(),n=e.resolve,r=e.reject,s=e.notify,p.evaluateAsync(),e.promise().always(m)},this.destroy=h;var l,c,d,e,f,p,g="UIElementBalloon";function h(t){return m(),S(),E().always(function(e){e.skipped=t,e.uiElementId=l,r&&r(e)})}function m(){p.cleanResources()}function v(e){u.customerLog("{0}: showUIElement showing balloon with id {1} step index {2}",g,l,c),d.showAndWaitForTrigger(e).then(n).progress(function t(n){return function(e,t){return S(e,t,n)}}(s)).fail(y)}function y(e){e.wasClosedByUser&&r(e)}function S(e,t,n){if(t&&(t.score={score:f.score}),f={},n)return n(e,t)}function E(){return u.customerLog("{0}: removeUIElement removing balloon with id {1} step index {2}",g,l,c),d.destroy()}(function w(){l=a.Id,c=a.PointIndex,f={};var e={uiElement:a,balloonButtons:function t(){return o.getButtons(a)}(),stepType:i.STEP_TYPE.Normal};d=T.get("UiElementDisplayerClass").createBalloonDisplayer(e),p=T.create("UiElementVisibilityManager",{uiElement:a,score:f,isSticky:function n(){return a.IsSticky===undefined||a.IsSticky}(),isSkippable:function r(){return a.Settings.isSkippable}(),onShow:v,onRemove:E,onError:h}),u=T.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, FlowElementBalloonButtonsProvider")}).call(window)},function(e,t,n){(function(){var a=n(372);a.register("UiElementDisplayerClass").asCtor(function t(i,o){function e(r){return function(e){var t="FlowBalloonDisplayer",n=e.uiElement;return i.isFeatureEnabled("swtVisualDesign")&&n.VisualDesign&&(t=r,n.VisualDesign=o.getManipulated(n.VisualDesign)),a.create(t,e)}}this.createPopupBalloonDisplayer=e("VisualDesignPopupBalloon"),this.createBalloonDisplayer=e("VisualDesignBalloon")}).dependencies("FeaturesManager, VisualDesignModelManipulator")}).call(window)},function(e,t,n){(function(){var v=n(372);v.register("UiElementVisibilityManager").asCtor(function y(r,e,t,i){var o,n,a,s,u,l;this.evaluateAsync=function g(){i.isSkippable?t.isFeatureEnabled("strongSkip")?d():function n(){var e=o.calculateElementVisibility(),t=o.getElement();e==r.VISIBILITY_STATE.VISIBLE?a(t):u(!0)}():e.getIsFirstVisualStep()?d():f()},this.cleanResources=function h(){o&&(o.cleanResources(),o=undefined)};var c=500;function d(){o.calculateElementVisibility()==r.VISIBILITY_STATE.VISIBLE?f():u(i.isSkippable)}function f(){o.setOnVisibilityChanged(p),o.evaluateElementVisibilityAsynch()}function p(e){switch(e){case r.VISIBILITY_STATE.VISIBLE:a(o.getElement());break;case r.VISIBILITY_STATE.HIDDEN:i.isSkippable?u(!0):s()}}!function m(){n=i.uiElement,a=i.onShow,s=i.onRemove,u=i.onError,l=i.score;var e={logContext:n.Id,findElementParams:{IdentifySettings:n.IdentifySettings,score:l,ownerChain:{type:r.ELEMENT_OWNER_TYPE_NAMES.STEP,id:n.Id,stickyType:i.isSticky,owner:n._ownerChain}},trackUIChanges:!0,elementEvaluationIntervalMs:i.isSticky?c:undefined};o=v.create("ElementVisibilityEvaluator",e)}()}).asProto().dependencies("Consts, FlowDataPersister, FeaturesManager")}).call(window)},function(e,t,n){(function(){var v=n(372);v.register("UIPopupBalloon").asCtor(function y(n,e,r,i,t,o){var a;this.show=function g(){return a.customerLog("{0}: Show Popup Balloon with id {1} step index {2}",c,s,o.PointIndex),u.showAndWaitForTrigger(l).done(f).fail(p)},this.destroy=function h(){return a.customerLog("{0}: Destroy Popup Balloon with id {1} step index {2}",c,s,o.PointIndex),u.destroy().fail(p)};var s,u,l,c="UIPopupBalloon",d=!0;function f(e){e.nextStageId&&t.shouldKeepOverlay(e.nextStageId)?d=!1:p()}function p(){d&&(e.removeOverlay(),d=!1)}(function m(){s=o.Id,l=n.get();var e={uiElement:o,balloonButtons:function t(){return i.getButtons(o)}(),stepType:r.STEP_TYPE.Popup};u=v.get("UiElementDisplayerClass").createPopupBalloonDisplayer(e),a=v.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("PopupStepElementProvider, UiUtils, Consts, FlowPopupBalloonButtonsProvider, UIPopupOverlayManager")}).call(window)},function(e,t,n){(function(){n(372).register("UIPopupOverlayManager").asCtor(function e(i,o,a,t,s){function u(e){return e&&e.Type==a.FLOW_STEP_TYPE.UI&&e.UIElements[0]}function l(e){return e.Type==a.FLOW_UIELEMENT_TYPE.Popup}function c(e){return t.isSpotlight(e.Settings)}this.shouldKeepOverlay=function d(e){if(!s.isFeatureEnabled(a.FEATURES.SWTConsecutivePopups))return!1;var t=o.peek(),n=u(i.getNodeById(t.flowId,t.stageId));return!!(n&&l(n)&&c(n))&&function r(e,t){var n=u(i.getNodeById(e,t));return n&&l(n)&&c(n)}(t.flowId,e)}}).dependencies("FlowsContainer, FlowStack, Consts, SpotlightChecker, FeaturesManager")}).call(window)},function(e,t,n){(function(){var a=n(372);a.register("UITriggersFactory").asCtor(function s(e,i){this.createUITrigger=function r(e){return n[e.trigger.Type](e)};var n={},t=[{triggerName:e.FLOW_TRIGGER_TYPE.Click,className:"ClickUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Hover,className:"HoverUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Text,className:"TextUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Delay,className:"DelayUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.PageChanged,className:"PageChangedUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Button,className:"ButtonUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.SelectAny,className:"SelectAnyUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.SelectValue,className:"SelectValueUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.BbCode,className:"BBCodeUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Custom,className:"CustomUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Swipe,className:"SwipeUITrigger"}];(function o(){!function e(){wmjQuery.each(t,function(e,t){n[t.triggerName]=function r(n){return function(e){var t=a.create(n.className,e);return i.addDelay(t,n.triggerName),t}}(t)})}()}).apply(null,arguments)}).dependencies("Consts, UITriggerTransitionDelayer")}).call(window)},function(e,t,n){(function(){n(372).register("UITriggerTransitionDelayer").asCtor(function e(i){this.addDelay=function n(e,t){e.listen=function r(e,t,n){return function(){return e().then(function(e){return i.setDelayByTrigger(t,n),e})}}(e.listen,e,t)}}).dependencies("FlowTransitionDelayer")}).call(window)},function(e,t,n){(function(){n(372).register("UITriggersManager").asCtor(function e(n,i,r,o,a){var s=[];this.listen=function p(){for(var e=wmjQuery.Deferred(),t=0;t<s.length;t++){var n=s[t].trigger,r=s[t].data;f(n,r,e)}return e.promise()},this.destroy=function g(){for(var e=0;e<s.length;e++)s[e].trigger.destroy()};var u,t={},l=[r.FLOW_TRIGGER_TYPE.Button];function c(e){var t=[];return d(t,e),function n(e){return-1<wmjQuery.inArray(e.Type,l)&&a.uiElementType==r.FLOW_UIELEMENT_TYPE.Popup&&e.Settings&&0<=e.Settings.Duration}(e.trigger)&&d(t,o.createMockDelayTriggerParams(e)),t}function d(e,t){t.ownerChain=u,e.push({trigger:n.createUITrigger(t),data:t.trigger})}function f(e,t,n){e.listen().then(function r(t){return function(e){return i.lastTriggerFired=t,e}}(t)).then(function(e){e=wmjQuery.extend({firedTrigger:t,uiElementId:a.uiElement.Id},e),n.resolve(e)},function(e){e=wmjQuery.extend({firedTrigger:t,uiElementId:a.uiElement.Id},e),n.reject(e)})}(function h(){t[r.FLOW_TRIGGER_TYPE.PeerStep]=!0,u=a.ownerChain;for(var e=0;e<a.triggers.length;e++)t[a.triggers[e].trigger.Type]||(s=s.concat(c(a.triggers[e])))}).apply(null,arguments)}).asProto().dependencies("UITriggersFactory, FlowPlayerMetadata, Consts, MockDelayTriggerProvider")}).call(window)},function(e,t,n){(function(){n(372).register("MockDelayTriggerProvider").asCtor(function e(r){this.createMockDelayTriggerParams=function i(e){var t=wmjQuery.extend(!0,{},e),n=e.trigger;return t.trigger={Type:r.FLOW_TRIGGER_TYPE.Delay,Id:"mock_delay_"+n.Id,Name:n.Name,TargetFlowNodeId:n.TargetFlowNodeId,Settings:{Duration:n.Settings.Duration}},t}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("TriggerTimeoutService").asCtor(function e(o){this.createTimeout=function s(e,t,n,r){var i=o.setWalkmeTimeout(function(){n.customerLog("{0}: Executing {1} trigger with id {2} for {3} seconds to target node id {4}",r,t.Name,t.Id,t.Settings.Duration,t.TargetFlowNodeId),e.resolve({nextStageId:t.TargetFlowNodeId})},1e3*t.Settings.Duration);a[t.Id]=i},this.cleanTimeout=function n(e){var t=a[e.Id];t&&(t.clear(),t=null,delete a[e.Id])};var a={}}).dependencies("TimerManager")}).call(window)},function(e,t,n){(function(){n(372).register("UITriggerEventBindingService").asCtor(function e(r,i){this.getFullEventNames=function o(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]+r.FLOW_TRIGGER_WORKSPACE);return t},this.bindEventsToElement=function a(e,t,i,o){for(var n=0;n<t.length;n++){function r(n){return function r(e){var t=o&&o[n];t&&!t(e)||i(e)}}e.on(t[n],r(t[n]))}},this.unbindEventsFromElement=function s(e,t){for(var n=i(e),r=0;r<t.length;r++)n.off(t[r])}}).dependencies("Consts, wmjQuerySafe")}).call(window)},function(e,t,n){(function(){var d=n(372);d.register("BBCodeUITrigger").asCtor(function f(r,i,e){var o,a,s,u,l="BBCodeUITrigger";this.listen=function t(){var e=wmjQuery.Deferred();return u.customerLog("{0}: Listening to BBCode trigger with id {1}",l,o.Id),function n(e){var t=o.Settings.bbCodeId;(s=wmjQuery(".trg-"+t,a)).on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){u.customerLog("{0}: Executing BBCode trigger with id {1} and bbCode id {2} to target node id {3}",l,o.Id,o.Settings.bbCodeId,o.TargetFlowNodeId),e.resolve({nextStageId:o.TargetFlowNodeId})}),i.raiseEvent(r.EVENTS.RegisterBBCodeDeployableClick,{element:s})}(e),e.promise()},this.destroy=function n(){u.customerLog("{0}: Destroying BBCode trigger with id {1}",l,o.Id),function e(){s.off("click"+r.FLOW_TRIGGER_WORKSPACE)}()},function c(){e.element,o=e.trigger,a=e.balloonDiv,u=d.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("Consts, CommonEvents")}).call(window)},function(e,t,n){(function(){var g=n(372);g.register("ButtonUITrigger").asCtor(function t(r,i,o,a){var s,u,l,c;this.listen=function e(){return c.customerLog("{0}: Listening to Next trigger with id {1}",d,u.Id),function t(){for(var n=wmjQuery.Deferred(),e=0;e<s.length;e++){f(s[e],n)}!s.length&&o.isFeatureEnabled("swtVisualDesign")&&l.on(r.EVENTS.Drawables.ActionClicked,function(e,t){c.customerLog("{0}: Executing Next trigger with id {1} to target node id {2}",d,u.Id,u.TargetFlowNodeId),i.triggerButton(t.Action.type,n,u)});return n.promise()}()},this.destroy=function n(){c.customerLog("{0}: Destroying Next trigger with id {1}",d,u.Id),function t(){for(var e=0;e<s.length;e++)s[e].buttonElement&&(s[e].buttonElement.off("click"+r.FLOW_TRIGGER_WORKSPACE),s[e].buttonElement=undefined)}()};var d="ButtonUITrigger";function f(e,t){e.buttonElement.on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){c.customerLog("{0}: Executing Next trigger with id {1} to target node id {2}",d,u.Id,u.TargetFlowNodeId),e.action(u,t)})}(function p(){s=a.balloonButtons,u=a.trigger,l=a.balloonDiv;for(var e=0;e<s.length;e++)s[e].buttonElement=(t=s[e].selector,n=a.balloonDiv,void 0,wmjQuery(t,n));var t,n;c=g.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, ButtonTriggerHandler, FeaturesManager")}).call(window)},function(e,t,n){(function(){var h=n(372);h.register("ClickUITrigger").asCtor(function m(i,t,o,a,n){var s,u,l,c=[],d="ClickUITrigger",f=32,p=13;this.listen=function g(){var e=wmjQuery.Deferred();return l.customerLog("{0}: Listening to Click trigger with id {1}",d,u.Id),i.bindEventsToElement(s,c,function t(){l.customerLog("{0}: Executing Click trigger with id {1} to target node id {2}",d,u.Id,u.TargetFlowNodeId),e.resolve({nextStageId:u.TargetFlowNodeId})},function r(){var e={},t=i.getFullEventNames(["keydown"]);return e[t]=function n(e){return a.isFeatureEnabled(o.FEATURES.ClickTriggerWithKeyboard)&&(e.which==p||e.which==f||e.keyCode==p||e.keyCode==f)},e}()),e.promise()},this.destroy=function e(){l.customerLog("{0}: Destroying Click trigger with id {1}",d,u.Id),i.unbindEventsFromElement(s,c)},function r(){s=n.element,u=n.trigger;var e=t.get();c=i.getFullEventNames(e),l=h.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, ClickTriggersListCreator, Consts, FeaturesManager")}).call(window)},function(e,t,n){(function(){var g=n(372);g.register("CustomUITrigger").asCtor(function h(r,i,t,n,e){var o,a,s,u,l="CustomUITrigger";this.listen=function c(){var t=wmjQuery.Deferred();s.customerLog("{0}: Listening to Custom trigger with id {1}",l,o.Id);var e=o.ConditionTrees.CustomTrigger,n={evaluationPollingIntervalMs:500,featureName:"Custom Trigger",elementName:"Custom Trigger: "+o.Name,ownerChain:{id:o.Id,type:r.ELEMENT_OWNER_TYPE_NAMES.TRIGGER,owner:u,stickyType:!0}};return(a=i.createNew(n)).onValueChanged(function(e){if(e)return s.customerLog("{0}: Executing Custom trigger with id {1} to target node id {2}",l,o.Id,o.TargetFlowNodeId),t.resolve({nextStageId:o.TargetFlowNodeId})}),a.evaluateAsync(e),t.promise()},this.destroy=function d(){s.customerLog("{0}: Destroying Custom trigger with id {1}",l,o.Id),a&&(a.cleanResources(),a=undefined)},this.getDelay=function f(){if(function e(){return t.containsFuncName(o.ConditionTrees.CustomTrigger,["jQueryClickedSticky","ElementClickedSticky"])}())return n[r.FLOW_TRIGGER_TYPE.Click]},function p(){o=e.trigger,u=e.ownerChain,s=g.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("Consts,ConditionCheckerFactory, ConditionTreeTraverser, FlowTransitionDelayerDefaultMap")}).call(window)},function(e,t,n){(function(){var l=n(372);l.register("DelayUITrigger").asCtor(function c(t,e,n){var r,i,o="DelayUITrigger";this.listen=function a(){var e=wmjQuery.Deferred();return i.customerLog("{0}: Listening to Delay trigger with id {1}",o,r.Id),t.createTimeout(e,r,i,o),e.promise()},this.destroy=function s(){i.customerLog("{0}: Destroying bbCode trigger with id {1}",o,r.Id),t.cleanTimeout(r)},function u(){n.element,r=n.trigger,i=l.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("TriggerTimeoutService, Consts")}).call(window)},function(e,t,n){(function(){var f=n(372);f.register("HoverUITrigger").asCtor(function p(t,e,n){var r,i,o,a=[],s="HoverUITrigger",u=["mouseenter"];this.listen=function l(){var e=wmjQuery.Deferred();return o.customerLog("{0}: Listening to Hover trigger with id {1}",s,i.Id),t.bindEventsToElement(r,a,function(){o.customerLog("{0}: Executing Hover trigger with id {1} to target node id {2}",s,i.Id,i.TargetFlowNodeId),e.resolve({nextStageId:i.TargetFlowNodeId})}),e.promise()},this.destroy=function c(){o.customerLog("{0}: Destroying Hover trigger with id {1}",s,i.Id),t.unbindEventsFromElement(r,a)},function d(){r=n.element,i=n.trigger,a=t.getFullEventNames(u),o=f.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts")}).call(window)},function(e,t,n){(function(){var s=n(372);s.register("PageChangedUITrigger").asCtor(function u(e,t,n){var r;this.listen=function i(){var e=wmjQuery.Deferred();return t.saveWaitingForRefreshTrigger({refreshTrigger:r.TargetFlowNodeId,firedTrigger:r,uiElementId:n.uiElementId}),e.promise()},this.destroy=function o(){t.clearWaitingForRefreshTrigger()},function a(){n.element,r=n.trigger,s.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).dependencies("Consts, FlowDataPersister").asProto()}).call(window)},function(e,t,n){(function(){var f=n(372);f.register("SelectAnyUITrigger").asCtor(function p(t,e,n){var r,i,o,a=[],s="SelectAnyUITrigger",u=["change"];this.listen=function l(){var e=wmjQuery.Deferred();return o.customerLog("{0}: Listening to Select Any trigger with id {1}",s,i.Id),t.bindEventsToElement(r,a,function(){o.customerLog("{0}: Executing Select Any trigger with id {1} to target node id {2}",s,i.Id,i.TargetFlowNodeId),e.resolve({nextStageId:i.TargetFlowNodeId})}),e.promise()},this.destroy=function c(){o.customerLog("{0}: Destroying Select Any trigger with id {1}",s,i.Id),t.unbindEventsFromElement(r,a)},function d(){r=n.element,i=n.trigger,a=t.getFullEventNames(u),o=f.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts")}).call(window)},function(e,t,n){(function(){var p=n(372);p.register("SelectValueUITrigger").asCtor(function g(e,t,n){var r,i,o,a,s=[],u="SelectValueUITrigger",l=["change"];this.listen=function c(){var n=wmjQuery.Deferred();return a.customerLog("{0}: Listening to Select Value trigger with id {1}",u,i.Id),e.bindEventsToElement(r,s,function(e){var t;(t="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex]).value!=o.val&&t.text!=o.txt||(a.customerLog("{0}: Executing Select Value trigger with id {1} to target node id {2}",u,i.Id,i.TargetFlowNodeId),n.resolve({nextStageId:i.TargetFlowNodeId}))}),n.promise()},this.destroy=function d(){a.customerLog("{0}: Destroying Select Value trigger with id {1}",u,i.Id),e.unbindEventsFromElement(r,s)},function f(){r=n.element,i=n.trigger,o=i.Settings.complexHtml,s=e.getFullEventNames(l),a=p.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts")}).call(window)},function(e,t,n){(function(){var d=n(372);d.register("SwipeUITrigger").asCtor(function f(t,e,n){var r,i,o,a=[],s="SwipeUITrigger";this.listen=function u(){var e=wmjQuery.Deferred();return o.customerLog("{0}: Listening to Swipe trigger with id {1}",s,i.Id),t.bindEventsToElement(r,a,function(){o.customerLog("{0}: Executing Swipe trigger with id {1} to target node id {2}",s,i.Id,i.TargetFlowNodeId),e.resolve({nextStageId:i.TargetFlowNodeId})}),e.promise()},this.destroy=function l(){o.customerLog("{0}: Destroying Swipe trigger with id {1}",s,i.Id),t.unbindEventsFromElement(r,a)},function c(){r=n.element,i=n.trigger,a=t.getFullEventNames(["swipe"]),o=d.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts")}).call(window)},function(e,t,n){(function(){var T=n(372);T.register("TextUITrigger").asCtor(function C(i,n,e,o,t){var a,s,u,l,c=[],d=[],f="TextUITrigger",r=["keydown","change"],p=["paste"],g=800,h=9,m=16;function v(e){l.customerLog("{0}: Executing Text trigger with id {1} to target node id {2}",f,s.Id,s.TargetFlowNodeId),e.resolve({nextStageId:s.TargetFlowNodeId})}function y(){u&&u.clear()}this.listen=function S(){var e=wmjQuery.Deferred();l.customerLog("{0}: Listening to Text trigger with id {1}",f,s.Id);var t=function r(){var e={};if(o.isFeatureEnabled("wmAccessibility")){var t=i.getFullEventNames(["keydown"]);e[t]=function n(e){return e.which!=h&&e.which!=m}}return e}();return i.bindEventsToElement(a,c,function(){!function t(e){y(),u=n.libSetTimeout(function(){v(e)},g)}(e)},t),i.bindEventsToElement(a,d,function(){v(e)}),e.promise()},this.destroy=function E(){l.customerLog("{0}: Destroying Text trigger with id {1}",f,s.Id),y(),i.unbindEventsFromElement(a,c),i.unbindEventsFromElement(a,d)},function w(){a=t.element,s=t.trigger,c=i.getFullEventNames(r),d=i.getFullEventNames(p),l=T.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, TimerManager, Consts, FeaturesManager")}).call(window)},function(e,t,r){(function(){r(372).register("BizFlowShowInMenuChecker").asCtor(function n(i,o,e,t){this.isShowInMenu=function s(e){if(!function n(e){return"False"!=i.getSettingsValue(e,"IsVisible",!0)}(e.Settings))return!1;var t=function r(e){return 1==i.getSettingsValue(e.Settings,a.enabled,0)&&(e.ConditionTrees&&e.ConditionTrees[a.name])}(e);return!t||!t.Root||o.checkConditions(t,e)};var a=t.properties[e.DEPLOYABLE_TYPE.BusinessSolution]}).dependencies("CommonUtils, DisplayConditionChecker, Consts, TagsSegmentationProperties")}).call(window)},function(e,t,n){(function(){n(372).register("FlowDataPersister").asCtor(function C(n,r){var i,e=this;function t(e){i.isWaitingForRefresh=e,a()}function o(e){i.isGroupBack=e,a()}function a(){n.saveData(n.keysConfig.flow.stack.key,i,n.keysConfig.flow.stack.expiry)}e.getPlayGuid=function s(){return i.playGuid},e.getFlows=function u(){return i.flows},e.getIsFirstVisualStep=function l(){return i.isFirstVisualStep},e.getWaitingForRefreshTrigger=function c(){return i.isWaitingForRefresh},e.getSafeStartFlowId=function d(){return i.safeStartFlowId},e.getPlayInitiator=function f(){return i.playInitiator},e.getIsGroupBack=function p(){return i.isGroupBack},e.load=function g(){i=function t(){var e=n.getData(n.keysConfig.flow.stack.key);e&&!r.isFlowsArrayValid(e.flows,e.safeStartFlowId)?e.flows=[]:e=e||{flows:[]};return e}()},e.saveFlows=function h(e){i.flows=e,a()},e.savePlayGuid=function m(e){i.playGuid=e,a()},e.saveIsFirstVisualStep=function v(e){i.isFirstVisualStep=e,a()},e.saveWaitingForRefreshTrigger=t,e.saveSafeStartFlowId=function y(e){i.safeStartFlowId=e,a()},e.savePlayInitiator=function S(e){i.playInitiator=e,a()},e.saveIsGroupBack=o,e.clearWaitingForRefreshTrigger=function E(){t(undefined)},e.clearIsGroupBack=function w(){o(undefined)},function T(){i={}}.apply(null,arguments)}).dependencies("ClientStorageManager, FlowDataValidator")}).call(window)},function(e,t,n){(function(){n(372).register("FlowDataValidator").asCtor(function e(){this.isFlowsArrayValid=function n(e,t){return wmjQuery.isArray(e)&&function r(e,n){return wmjQuery(e).filter(function(e,t){return n!=undefined&&t.flowId==n||t.flowId!=undefined&&t.stageId!=undefined}).length==e.length}(e,t)}})}).call(window)},function(e,t,n){(function(){n(372).register("FlowPlayerMetadata").asInstance({lastTriggerFired:undefined})}).call(window)},function(e,t,n){(function(){n(372).register("FlowsContainer").asCtor(function e(t){var n;function r(e,t){return n[e].Nodes[t]}this.init=function i(e){n={};for(var t=0;t<e.length;t++)n[e[t].Id]=e[t]},this.getNodeById=r,this.getFlowById=function o(e){return n[e]},this.getCurrentNode=function a(){var e=t.peek();return e&&r(e.flowId,e.stageId)},this.getCurrentFlowId=function s(){var e=t.peek();return e&&e.flowId},this.getBizFlowIdByFlowId=function u(e){return n[e].bizFlowId}}).dependencies("FlowStack")}).call(window)},function(e,t,n){(function(){var s=n(372);s.register("FlowStack").asFunction(function u(r){var i=s.create("Stack"),n=i.push;return i.push=function o(e,t){n({flowId:e,stageId:t})},i.updateTopStageId=function t(e){i.peek().stageId=e},i.load=function e(){r.load(),i.init(r.getFlows())},function a(){wmjQuery(["push","pop","updateTopStageId","clear"]).each(function(e,t){i[t]=function n(t){return function(){var e=t.apply(i,arguments);return r.saveFlows(i.getAll()),e}}(i[t])})}(),i}).dependencies("FlowDataPersister")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowOnPageActionTypeToEventSenderStepActionNameMapper").asCtor(function e(n,t){var r;this.map=function i(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for On-Page-Action: "+e),"")},function o(){var e=n.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE,t=n.EVENT_SENDER_STEP_ACTION_NAMES;(r={})[e.Click]=t.OnPageActionClick,r[e.Hover]=t.OnPageActionHover,r[e.Focus]=t.OnPageActionFocus,r[e.FillText]=t.OnPageActionFillText,r[e.SelectListValue]=t.OnPageActionSelectListValue}.apply(null,arguments)}).dependencies("Consts, Logger")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowStepActionToEventSenderActionAppTypeMapper").asCtor(function e(n){var r;this.map=function t(e){return e in r?r[e]:""},function i(){var e=n.FLOW_ACTION_TYPE,t=n.EVENT_SENDER_EVENT_APPS;(r={})[e.ConnectToBizflow]=t.BizFlow}.apply(null,arguments)}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowStepActionToEventSenderStepActionNameMapper").asCtor(function e(n,t){var r;this.map=function i(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for step action: "+e),"")},function o(){var e=n.FLOW_ACTION_TYPE,t=n.EVENT_SENDER_STEP_ACTION_NAMES;(r={})[e.Redirect]=t.Redirect,r[e.WaitForCondition]=t.WaitForCondition,r[e.ConnectToBizflow]=t.Branch,r[e.Stop]=t.StopWt,r[e.Delay]=t.Delay,r[e.Refresh]=t.Refresh,r[e.OpenMenu]=t.OpenPlayerMenu,r[e.Style]=t.Style,r[e.SetData]=t.SetWalkMeData,r[e.PassOwnership]=t.PassOwnership,r[e.ErrorHandling]=t.ErrorHandling,r[e.Split]=t.Split,r[e.RestartSwt]=t.RestartSwt}.apply(null,arguments)}).dependencies("Consts, Logger")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowEventSender").asCtor(function e(s,u,i,o,l,c,n,d){function r(e,t,n){var r=l.getNodeById(e.flowId,e.stageId),i=n&&c.getValue(r,e.value),o=n&&c.getBbCodeData(i,e.firedTrigger),a={type:u.EVENT_SENDER_EVENT_APPS.BizFlowStep,oId:e.uiElementId?e.uiElementId:r.Id,aoId:r.Id,oName:c.getName(r,e.uiElementId),aType:c.getNodeActionName(r),aAppType:c.getNodeActionAppType(r),oType:c.getNodeType(r),owId:e.businessSolutionId,owName:e.businessSolutionName,owType:u.EVENT_SENDER_EVENT_APPS.BizFlow,total:c.getTotalNodes(e.flowId),pId:d.getPlayGuid(),status:t,value:i,pInit:o};s.postEvent(u.EVENT_SENDER_EVENT_TYPES.Play,a)}this.postFlowStartedEvent=function a(e){var t=d.getPlayInitiator(),n=o.generateNewPlayGuid(e.businessSolutionId);d.savePlayGuid(n);var r={type:u.EVENT_SENDER_EVENT_APPS.BizFlow,oId:e.businessSolutionId,oName:e.businessSolutionName,pId:n,pInit:i.map(t),oRequestedSubObject:e.requestedStageId,oActualSubObject:e.startingStageId};s.postEvent(u.EVENT_SENDER_EVENT_TYPES.Play,r)},this.postFlowCompletedEvent=function t(e){r(e,u.STEP_STATUS.Completed)},this.postFlowBranchedEvent=function f(e){var t={type:u.EVENT_SENDER_EVENT_APPS.BizFlow,oId:e.businessSolutionId,oName:e.businessSolutionName,pId:d.getPlayGuid(),pInit:i.map(e.initiator),oRequestedSubObject:e.requestedStageId,oActualSubObject:e.startingStageId};s.postEvent(u.EVENT_SENDER_EVENT_TYPES.Play,t)},this.postBeforeExecutionStageEvent=function p(e){var t=l.getNodeById(e.flowId,e.stageId);r(e,n.getBeforeExecutionEventStatus(t))},this.postUIFlowStageShownEvent=function g(e){r(e,n.getUIFlowStageShownEventStatus())},this.postAfterCompletionStageEvent=function h(e){r(e,n.getAfterCompletionEventStatus(e.isFlowGoingBack),!0)},this.postFlowStageSkippedEvent=function m(e){r(e,u.STEP_STATUS.SkippedNotFound)},this.postFlowStoppedEvent=function v(e){e.flowId&&e.wasClosedByUser&&r(e,n.getFlowStoppedEventStatus(e.wasClosedByUser))},this.postFlowSafeStartStatusChangedEvent=function y(e){var t=d.getPlayInitiator(),n={type:u.EVENT_SENDER_EVENT_APPS.BizFlow,oId:e.businessSolutionId,oName:e.businessSolutionName,pId:d.getPlayGuid(),pInit:i.map(t),oRequestedSubObject:e.requestedStageId,oActualSubObject:e.startingStageId,status:e.status};s.postEvent(u.EVENT_SENDER_EVENT_TYPES.PlayFailed,n)}}).dependencies("EventSender, Consts, ReportInitiatorMapper, PlayGuidGenerator, FlowsContainer, BizFlowStepEventParamsCalculator, BizFlowStepEventStatusProvider, FlowDataPersister")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowStepEventParamsCalculator").asCtor(function e(n,t,r,i,o,a,s){this.getNodeActionName=function u(e){return e.ActionType!=n.FLOW_ACTION_TYPE.OnPageAction?e.ActionType?r.map(e.ActionType):"":a.map(e.Settings.actionArgs.onElementAction)},this.getNodeActionAppType=function l(e){return e.ActionType?t.map(e.ActionType):""},this.getTotalNodes=function c(e){var t=i.getFlowById(e),n=0;for(var r in t.Nodes)n++;return n},this.getName=function d(e,t){return e.Type!=n.FLOW_STEP_TYPE.UI?e.Name:t?wmjQuery.grep(e.UIElements,function(e){return e.Id==t})[0].Title:wmjQuery.map(e.UIElements,function(e){return e.Title}).join(", ")},this.getNodeType=function f(e){return e.Type==n.FLOW_STEP_TYPE.Action?n.STEP_TYPE.Action:e.UIElements[0].Type==n.FLOW_UIELEMENT_TYPE.Popup?n.STEP_TYPE.Popup:n.STEP_TYPE.Normal},this.getValue=function p(e,t){return e.Type==n.FLOW_STEP_TYPE.Action?t:o.lastTriggerFired&&o.lastTriggerFired.Type},this.getBbCodeData=function g(e,t){if(e&&e==n.FLOW_TRIGGER_TYPE.BbCode)return s.map({objectId:t.Id,type:t.Name})}}).dependencies("Consts, BizFlowStepActionToEventSenderActionAppTypeMapper, BizFlowStepActionToEventSenderStepActionNameMapper, FlowsContainer, FlowPlayerMetadata, BizFlowOnPageActionTypeToEventSenderStepActionNameMapper, ReportInitiatorMapper")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowStepEventStatusProvider").asCtor(function o(t){this.getBeforeExecutionEventStatus=function n(e){return"UI"==e.Type?t.STEP_STATUS.SupposedToShow:t.STEP_STATUS.Shown},this.getUIFlowStageShownEventStatus=function e(){return t.STEP_STATUS.Shown},this.getAfterCompletionEventStatus=function r(e){return e?t.STEP_STATUS.MovedBack:t.STEP_STATUS.Performed},this.getFlowStoppedEventStatus=function i(e){if(e)return t.STEP_STATUS.Exited}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("FlowEventRaiser").asCtor(function e(r,i,o,a){function s(e,t){var n=o.getFlowById(t.flowId);t.eventType=e,a(n).trigger(r.FLOW_INNER_EVENTS.EventPropogationPrefix,t)}this.raiseEventOnCurrentFlow=function u(e,t){s(e,t=a.extend(function n(){var e=i.peek();return e?{flowId:e.flowId,stageId:e.stageId}:{}}(),t))},this.raiseEvent=s}).dependencies("Consts, FlowStack, FlowsContainer, wmjQuery")}).call(window)},function(e,t,n){(function(){n(372).register("FlowGroupEventRaiser").asCtor(function e(o,a){function s(e,t,n){return{flowId:e,requestedStageId:t,startingStageId:t,initiator:n}}this.raiseFlowStartedEvent=function n(e,t){a.raiseEvent(o.EVENTS.Flows.FlowStarted,s(e,t))},this.raiseFlowGroupEvent=function u(e,t,n,r){!function i(e){return e==o.FLOW_ACTION_TYPE.RestartSwt||e==o.FLOW_ACTION_TYPE.ConnectToBizflow}(e)||a.raiseEvent(o.EVENTS.Flows.FlowBranched,s(n,r,t))},this.raiseBeforeFlowStartedEvent=function r(e,t){a.raiseEvent(o.EVENTS.Flows.BeforeFlowStarted,{flowId:e,startPointUIElementId:t.startingUiElementId,startedFromStartPoint:t.startedFromStartPoint,startingStageId:t.startingNodeId})}}).dependencies("Consts, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){n(372).register("BizflowOwnershipManager").asCtor(function w(n,o,a,r,s,u,t,e,l,c,d){this.determineOwner=function h(e,t){p({flowId:e,stageId:t}),n.get().optimizedDetermineOwnership()||(n.get().reset(),a.isPassOwnershipNode(i())&&n.get().setOwnershipCondition({flowId:e,stageId:t}))},this.evaluateOwnership=function m(e,t){var n=function i(e){var t={};if(e)t.node=g(e.flowId,e.node.Id),t.flowId=e.flowId;else{var n=l.getData(f);n?(t.node=g(n.flowId,n.stageId),t.flowId=n.flowId):t=function r(){var e=l.getData(o.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE);if(e)return{node:g(e.flowId,e.stageId),flowId:e.flowId}}()}return t}(t);n&&!n.node&&d.loadByFlowId(n.flowId);return a.evaluateOwnership(n.node)},this.evaluateOwnershipByPeeking=function v(){var e=i();return a.isPassOwnershipNode(e)},this.gainedOwnership=function y(t,e,n){var r=l.getData(f);r?(p(null),function i(e,t,n){var r=g(e,t);if(r)return n({flowId:e,node:r});d.loadByFlowId(e,function(){return n({flowId:e,node:g(e,t)})})}(r.flowId,r.stageId,function(e){!function i(e,t){var n=t.node;if(!n)return;var r=n.Id;!e&&a.isPassOwnershipNode(n)&&(r=n.Links[0].TargetFlowNodeId);s.play(t.flowId,r)}(t,e)})):c.restore();t&&n&&u.resumeAllTimeouts()},this.lostOwnership=function S(){s.pause()};var f=l.keysConfig.flow.beforePlay.key;function i(){var e=l.getData(f)||t.peek();return g(e.flowId,e.stageId)}function p(e){l.saveData(f,e,l.keysConfig.flow.beforePlay.expiry),l.refreshGetData()}function g(e,t){return r.getNodeById(e,t)}!function E(){e.on(o.EVENTS.Flows.FlowStopped,function(){n.get().reset()}),e.on(o.EVENTS.Flows.FlowCompleted,function(){n.get().loseOwnership()})}()}).dependencies("CrossDomainManager, Consts, BizflowPassOwnershipDeterminator, FlowsContainer, FlowsPlayer, TimerManager,FlowStack, WmInternals, ClientStorageManager, FlowsRestorer, FlowNodesLoader")}).call(window)},function(e,t,n){(function(){n(372).register("BizflowPassOwnershipDeterminator").asCtor(function e(n,r){function i(e){return e&&e.ActionType==n.FLOW_ACTION_TYPE.PassOwnership}this.isPassOwnershipNode=i,this.evaluateOwnership=function o(e){return i(e)?function t(e){return r.createNew({featureName:"SwitchToFrameNode",elementName:e.Name}).getCurrentEvaluationValueAndStopEvaluating(e.ConditionTrees.SwitchToFrame)}(e)?n.PASS_OWNERSHIP.EvaluateOwnership.Owner:n.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:n.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined}}).dependencies("Consts, ConditionCheckerFactory")}).call(window)},function(e,t,n){(function(){n(372).register("ErrorHandlingSegmentationChecker").asCtor(function e(n,i){this.isSegmented=function o(e){var t=n.getValue(e,"ConditionTrees.ErrorHandle");return!(!t||!t.Root)&&function r(e,t){var n={featureName:"evaluate error handling segmentation",elementName:e.Name};return i.createNew(n).getCurrentEvaluationValueAndStopEvaluating(t)}(e,t)}}).dependencies("ObjectJpath, ConditionCheckerFactory")}).call(window)},function(e,t,n){(function(){var y=n(372);y.register("ActionStagesFactory").asCtor(function e(t){this.createActionStage=function m(e){return n[e.ActionType](e)};var n={};function r(e){return y.create("BranchActionStage",e)}function i(e){return y.create("DelayActionStage",e)}function o(e){return y.create("OpenMenuActionStage",e)}function a(e){return y.create("PassOwnershipActionStage",e)}function s(e){return y.create("RedirectActionStage",e)}function u(e){return y.create("RefreshActionStage",e)}function l(e){return y.create("StyleActionStage",e)}function c(e){return y.create("SetDataActionStage",e)}function d(e){return y.create("SplitActionStage",{node:e})}function f(e){return y.create("WaitForConditionActionStage",e)}function p(e){return y.create("OnPageActionStage",e)}function g(e){return y.create("ErrorHandlingActionStage",e)}function h(e){return y.create("RestartSwtActionStage",e)}(function v(){!function e(){n[t.FLOW_ACTION_TYPE.ConnectToBizflow]=r,n[t.FLOW_ACTION_TYPE.Delay]=i,n[t.FLOW_ACTION_TYPE.OpenMenu]=o,n[t.FLOW_ACTION_TYPE.PassOwnership]=a,n[t.FLOW_ACTION_TYPE.Redirect]=s,n[t.FLOW_ACTION_TYPE.Refresh]=u,n[t.FLOW_ACTION_TYPE.Style]=l,n[t.FLOW_ACTION_TYPE.SetData]=c,n[t.FLOW_ACTION_TYPE.Split]=d,n[t.FLOW_ACTION_TYPE.WaitForCondition]=f,n[t.FLOW_ACTION_TYPE.OnPageAction]=p,n[t.FLOW_ACTION_TYPE.ErrorHandling]=g,n[t.FLOW_ACTION_TYPE.RestartSwt]=h}()}).apply(null,arguments)}).dependencies("Consts")}).call(window)},function(e,t,r){(function(){var l=r(372);l.register("OnElementActionVisibilityEvaluator").asCtor(function n(a){var s;this.evaluate=function u(e,t,n,r){var i=wmjQuery.Deferred(),o={logContext:e,findElementParams:{IdentifySettings:t,ownerChain:{type:a.ELEMENT_OWNER_TYPE_NAMES.ACTION,id:e,stickyType:n,owner:r}},elementEvaluationIntervalMs:n?500:undefined};return s=l.create("ElementVisibilityEvaluator",o),n?(s.setOnVisibilityChanged(i.resolve),s.evaluateElementVisibilityAsynch()):i.resolve(s.calculateElementVisibility()),i.promise()},this.cleanResources=function e(){s&&s.cleanResources()},this.getElement=function t(){if(s)return s.getElement()}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("OnElementActionExecutor").asCtor(function i(u,t,n,l){this.execute=function f(e,t,n){switch(t.onElementAction){case c.Click:case c.Tap:u.click(e,n);break;case c.Hover:u.hover(e,n);break;case c.Focus:u.focus(e,n);break;case c.FillText:var r=d(t.fillText),i=d(t.preText),o=d(t.postText),a=t.keepFocus;l.execute(e,r,i,o,a,n);break;case c.SelectListValue:var s=d(t.dropdownSelectedValue);u.selectByText(e,s,n);break;case c.Swipe:u.swipe(e,n)}};var c={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue",Tap:"Tap",Swipe:"Swipe"};function r(e){return t.decodeHtml(e,["&",">","<"])}function d(e){return e&&r(n.parse(r(e)))}(function e(){}).apply(null,arguments)}).dependencies("InputGenerator, HtmlDecoder, BBCodeParser, OnElementFillTextAction")}).call(window)},function(e,t,n){(function(){n(372).register("OnElementFillTextAction").asCtor(function e(a,l,c){function d(e,t){return t?l.adaptText(e,t):""}this.execute=function s(e,t,n,r,i,o){a.text(e,function u(e,t,n,r){if(t)return d(e,t);var i=function s(e){return e||""}(l.retrieve(e)),o=d(e,n),a=d(e,r);return c.formatString("{0}{1}{2}",o,i,a)}(e,t,n,r),100,o,undefined,i)}}).dependencies("InputGenerator, TextInjector, CommonUtils")}).call(window)},function(e,t,n){(function(){var v=n(372);v.register("BranchActionStage").asCtor(function y(i,o,r,a,s,u,l,c){var d,f=this;f.execute=function m(){var t=wmjQuery.Deferred(),n=c.Settings.actionArgs;if(d.customerLog("{0}: Executing Connect To Bizflow with step id {1} step index {2}. Branching to flow: {3}, starting from {4}",p,f.Id,c.PointIndex,n.flowId,n.playFromBeginning?"the beginning of the flow":"stage"+n.startingNodeId),!o.getFlowById(n.flowId))return g(t);var r={currentNode:c,nextFlowId:n.flowId,nextStageId:n.playFromBeginning?undefined:n.startingNodeId,shouldCreateFlowGroup:!0,shouldReturnFromFlowGroup:!!c.Links[0].TargetFlowNodeId,flowGroupInitiator:{type:function e(){return u.lastTriggerFired&&u.lastTriggerFired.Type==i.FLOW_TRIGGER_TYPE.BbCode?i.STEP_PLAY_INITIATOR_ENUM.BBCODE:i.STEP_PLAY_INITIATOR_ENUM.BRANCHING}(),objectId:c.Id}};return l.loadByBizFlowId(c.Settings.actionArgs.businessSolutionId,function(e){if(!e)return g(t);s.playSetTimeout(function(){h(t,r,n.flowId)},100)},t.reject),t},f.destroy=function e(){return d.customerLog("{0}: Destroying Connect To Bizflow with step id {1} step index {2}",p,f.Id,c.PointIndex),wmjQuery.Deferred().resolve()},f.backFromFlowGroup=function n(){d.customerLog("{0}: Connect To Bizflow - Back from branch - Step id {1} step index {2}",p,f.Id,c.PointIndex);var e=wmjQuery.Deferred(),t={currentNode:c,nextFlowId:undefined,nextStageId:c.Links[0].TargetFlowNodeId,shouldCreateFlowGroup:undefined};return h(e,t,r.peek().flowId)},f.Id=c.Id;var p="BranchActionStage";function g(e){return h(e,{nextStageId:c.Links[0].TargetFlowNodeId,nextFlowId:r.peek().flowId})}function h(e,t,n){return d.customerLog("{0}: Connect To BizFlow - Moving to next stage. From step id {1} step index {2} to step id {3}, from flow id {4} to flow id {5}. (create flow group: {6})",p,f.Id,c.PointIndex,t.nextStageId,t.nextFlowId,r.peek().flowId,t.shouldCreateFlowGroup?t.shouldCreateFlowGroup:"false"),n&&a.init(n),e.resolve(t)}(function t(){d=v.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, FlowsContainer, FlowStack, FlowVisualStepsIndicator, TimerManager, FlowPlayerMetadata, FlowNodesLoader")}).call(window)},function(e,t,r){(function(){var n=r(372);n.register("DelayActionStage").asCtor(function p(r,i,o,a,s,u){var l,c=this;c.execute=function f(){var e=wmjQuery.Deferred(),t=u.Settings.actionArgs.Duration;l.customerLog("{0}: Executing Delay with step id {1} step index {2}. Waiting {3} seconds.",d,c.Id,u.PointIndex,t||"0");var n=u.Links[0].TargetFlowNodeId;o.saveWaitingForRefreshTrigger({refreshTrigger:n}),a.isDebuggerOnWindow()&&s.raiseEventOnCurrentFlow(i.EVENTS.Flows.WaitForConditionEvaluated,{step:u});return r.playSetTimeout(function(){return function r(e,t){l.customerLog("{0}: Delay - Moving to next step. From step id {0} to step id {1}",d,c.Id,t),o.clearWaitingForRefreshTrigger();var n={nextStageId:t};return e.resolve(n)}(e,n)},1e3*t),e.promise()},c.destroy=function e(){return l.customerLog("{0}: Destroying Delay with step id {1}",d,c.Id),o.clearWaitingForRefreshTrigger(),wmjQuery.Deferred().resolve()},c.Id=u.Id;var d="DelayActionStage";(function t(){l=n.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("TimerManager, Consts, FlowDataPersister, DebuggerManager, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){var p=n(372);p.register("ErrorHandlingActionStage").asCtor(function g(n,e,r,i,o){var a,s=this;s.execute=t,s.destroy=function c(){return a.customerLog("{0}: Destroying Error Handling with step id {1} step index {2}",u,s.Id,o.PointIndex),wmjQuery.Deferred().resolve()},s.backFromFlowGroup=function d(){return a.customerLog("{0}: Back from Error Handling group - Step id {1} step index {2}",u,s.Id,o.PointIndex),t()},s.Id=o.Id;var u="ErrorHandlingActionStage";function t(){var e=wmjQuery.Deferred();if(a.customerLog("{0}: Executing Error Handling with step id {1} step index {2}",u,s.Id,o.PointIndex),n.isSegmented(o)){a.customerLog("{0}: Error Handling condition applies. Step id {1} step index {2}",u,s.Id,o.PointIndex);var t=o.Links[i.getErrorHandlingConnectorIndex(o)].TargetFlowNodeId||o.Id;return r.playSetTimeout(function(){l(e,t,!0)},500),e.promise()}return a.customerLog("{0}: Error Handling condition does not apply. Step id {1} step index {2}",u,s.Id,o.PointIndex),l(e,o.Links[0].TargetFlowNodeId)}function l(e,t,n){a.customerLog("{0}: Error Handling - Moving to next step. From step id {1} step index {2} to step id {3}. (create flow group {4})",u,s.Id,o.PointIndex,t,n||"false");var r={currentNode:o,nextStageId:t,shouldCreateFlowGroup:n,shouldReturnFromFlowGroup:!0};return e.resolve(r)}(function f(){a=p.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("ErrorHandlingSegmentationChecker, Consts, TimerManager, FlowNodeExtensions")}).call(window)},function(e,t,n){(function(){var r=n(372);r.register("OnPageActionStage").asCtor(function i(o,a,s,u,l,c){var d,f=this;f.execute=function e(){var n=wmjQuery.Deferred(),r=c.Settings.actionArgs;d.customerLog("{0}: Evaluating visibility for On Page Action with id {1} step index {2}. On element action {3}",p,f.Id,c.PointIndex,r.onElementAction),l.raiseEventOnCurrentFlow(s.EVENTS.Flows.LookingForElement,{step:c});var i=!function t(e){return e.Settings.isSkippable}(c);return o.evaluate(c.Id,r.IdentifySettings,i,r.ownerChain).then(function(e){var t=o.getElement();d.customerLog("{0}: Element found. Executing On Page Action with step id {1} step index {2}",p,f.Id,c.PointIndex),e==s.VISIBILITY_STATE.VISIBLE?(l.raiseEventOnCurrentFlow(s.EVENTS.Flows.UiElementFound,{step:c,score:t.score}),a.execute(t,r,function(){g||h(n,c)})):i||h(n,c,!0)}),n.promise()},f.destroy=function t(){return g=!0,d.customerLog("{0}: Destroying On Page Action with step id {1} step index {2}",p,f.Id,c.PointIndex),o.cleanResources(),wmjQuery.Deferred().resolve()},f.Id=c.Id;var p="OnPageActionStage",g=!1;function h(e,t,n){var r=t.Links[0].TargetFlowNodeId,i=t.Settings.actionArgs;d.customerLog("{0}: On Page Action - Moving to next step. From step id {1} step index {2} to step id {3}",p,f.Id,t.PointIndex,r);var o={nextStageId:r,value:u.getValue(i),skipped:n};return e.resolve(o)}(function n(){d=r.create("FeaturedLogger",{feature:s.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("OnElementActionVisibilityEvaluator, OnElementActionExecutor, Consts,OnPageActionStageValueProvider, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){n(372).register("OnPageActionStageValueProvider").asCtor(function i(e){var n;this.getValue=function r(e){var t=e.onElementAction;if(t in n)return e[n[t]]},function t(){(n={})[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.FillText]="fillText",n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.SelectListValue]="dropdownSelectedValue"}()}).asProto().dependencies("Consts")}).call(window)},function(e,t,n){(function(){var r=n(372);r.register("OpenMenuActionStage").asCtor(function c(n,i,o){var a,s=this;s.execute=function l(){a.customerLog("{0}: Executing Open Menu with step id {1}",u,s.Id);var e=wmjQuery.Deferred(),t={appType:n.EVENT_SENDER_EVENT_APPS.BizFlowStep,objectId:o.Id,type:n.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP};i.WalkMePlayerAPI!=undefined&&i.WalkMePlayerAPI.toggleMenu(t);return function r(e,t){a.customerLog("{0}: Open Menu - Moving to next step. From step id {0} to step id {1}",u,s.Id,t);var n={nextStageId:t};return e.resolve(n)}(e,o.Links[0].TargetFlowNodeId)},s.destroy=function e(){return a.customerLog("{0}: Destroying Open Menu with step id {1}",u,s.Id),wmjQuery.Deferred().resolve()},s.Id=o.Id;var u="OpenMenuActionStage";(function t(){a=r.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, win")}).call(window)},function(e,t,n){(function(){var r=n(372);r.register("PassOwnershipActionStage").asCtor(function g(i,o,a,e,s,u,l){var c,d=this;d.execute=function p(){var e=wmjQuery.Deferred(),t=s.keysConfig.passOwnership.newWindowTime;return s.saveData(t.key,(new Date).getTime(),t.expiry),c.customerLog("{0}: checking ownership for stage with step id {1}",f,d.Id),o.get().determineOwnership(a.peek())?function r(e,t){c.customerLog("{0}: Moving to next step. From step id {1} to step id {2}",f,d.Id,t);var n={nextStageId:t};return e.resolve(n)}(e,l.Links[0].TargetFlowNodeId):(u.raiseEventOnCurrentFlow(i.EVENTS.Flows.AfterCompletingFlowStage,{step:l}),a.updateTopStageId(l.Links[0].TargetFlowNodeId),function n(e){return e.reject({lostOwnership:!0})}(e))},d.destroy=function t(){return c.customerLog("{0}: Destroying PassOwnership stage with step id {1}",f,d.Id),wmjQuery.Deferred().resolve()},d.Id=l.Id;var f="PassOwnershipActionStage";(function n(){c=r.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, CrossDomainManager, FlowStack, FlowsContainer, ClientStorageManager, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){var i=n(372);i.register("RedirectActionStage").asCtor(function o(a,s,e,t,u,l,c){var d,f=this;f.execute=function h(){var e=wmjQuery.Deferred(),t=c.Settings.actionArgs,n=l.parse(t.url),r=t.dontRedirectIfIdentical,i=s.canRedirect(n,!r);d.customerLog("{0}: Executing Redirect with step id {1} to url {2}. dontRedirectIfIdentical: {3}, canRedirect: {4}",p,n,f.Id,r,i);var o=c.Links[0].TargetFlowNodeId;{if(!i)return g(e,o);u.saveWaitingForRefreshTrigger({refreshTrigger:o}),a.libSetTimeout(function(){s.redirect(n)&&g(e,o)},200)}return e.promise()},f.destroy=function n(){return d.customerLog("{0}: Destroying Redirect with step id {1}",p,f.Id),wmjQuery.Deferred().resolve()},f.Id=c.Id;var p="RedirectActionStage";function g(e,t){d.customerLog("{0}: Redirect - Moving to next step. From step id {1} to step id {2}",p,f.Id,t);var n={nextStageId:t};return e.resolve(n)}(function r(){d=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("TimerManager, RedirectService, win, Consts, FlowDataPersister, BBCodeParser")}).call(window)},function(e,t,n){(function(){var f=n(372);f.register("RefreshActionStage").asCtor(function p(t,n,e,r,i){var o,a,s=this;s.execute=function l(){o.customerLog("{0}: Executing Refresh with step id {1}",u,s.Id);var e=wmjQuery.Deferred();return r.saveWaitingForRefreshTrigger({refreshTrigger:i.Links[0].TargetFlowNodeId}),a=t.libSetTimeout(function(){n.location.reload(!0)},200),e.promise()},s.destroy=function c(){o.customerLog("{0}: Destroying Refresh with step id {1}",u,s.Id),a&&a.clear();return wmjQuery.Deferred().resolve()},s.Id=i.Id;var u="RefreshActionStage";(function d(){o=f.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("TimerManager, win, Consts, FlowDataPersister")}).call(window)},function(e,t,n){(function(){var u=n(372);u.register("RestartSwtActionStage").asCtor(function l(n,t,r){var i;this.execute=function a(){var e=wmjQuery.Deferred();return i.customerLog("{0}: Executing Restart SWT with step id {1} step index {2}",o,r.Id,r.PointIndex),t.playSetTimeout(function(){!function t(e){e.resolve({shouldCreateFlowGroup:!0,shouldReturnFromFlowGroup:!1,flowGroupInitiator:{type:n.STEP_PLAY_INITIATOR_ENUM.RESTART_SWT,objectId:r.Id},shouldNotPushNextFlowGroup:r.ErrorHandlingParentId})}(e)},500),e.promise()},this.destroy=function e(){return i.customerLog("{0}: Destroying Restart SWT with step id {1} step index {2}",o,r.Id,r.PointIndex),wmjQuery.Deferred().resolve()};var o="RestartSwtActionStage";(function s(){i=u.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, TimerManager")}).call(window)},function(e,t,n){(function(){var r=n(372);r.register("SetDataActionStage").asCtor(function i(c,d,f,p,g,h,m){var v,y=this;y.execute=function t(){var e=wmjQuery.Deferred();return function l(e){var t,n=e.dataType,r=e.key,i=e.value,o=e.IdentifySettings,a=Math.min(e.duration,g.COOKIE_LIFE_2_YEARS);switch(n){case E.Value:t=i;break;case E.Variable:t=p.getWindowData(g.WINDOW_CUSTOM_DATA_TYPE.Var,i);break;case E.jQuery:var s=f.findElementsByjQueryComplexSelector(i);t=p.checkElementText(wmjQuery(s));break;case E.Cookie:t=d.getCookie(i);break;case E.OnScreenElement:t=o?function u(e){var t=h.findElement(e);return t?p.checkElementText(wmjQuery(t)):""}(o):""}v.customerLog("{0}: Executing Set WalkMe Data with step id {1} step index {2}. Type {3}, Value {4}, Duration {5}",S,y.Id,m.PointIndex,n,t,a),c.saveData(r,t,a)}(m.Settings.actionArgs),function r(e,t){v.customerLog("{0}: Set WalkMe Data - Moving to next step. From step id {0} to step id {1} step index {2}",S,y.Id,t,m.PointIndex);var n={nextStageId:t};return e.resolve(n)}(e,m.Links[0].TargetFlowNodeId)},y.destroy=function e(){return v.customerLog("{0}: Destroying Set WalkMe Data with step id {1} step index {2}",S,y.Id,m.PointIndex),wmjQuery.Deferred().resolve()},y.Id=m.Id;var S="SetDataActionStage",E={Value:"Value",Variable:"Variable",jQuery:"jQuery",Cookie:"Cookie",OnScreenElement:"OnScreenElement"};(function n(){v=r.create("FeaturedLogger",{feature:g.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("ClientOrServerStorageManager, CookiesManager, JQueryElementFinder, CommonUtils, Consts, Lib")}).call(window)},function(e,t,n){(function(){var c=n(372);c.register("SplitActionStage").asCtor(function d(i,e,t){var o,a,s=this;s.execute=function l(){var e=wmjQuery.Deferred();a.customerLog("{0}: Executing Split with step id {1}",u,s.Id);var t=i.getPlayableLink(o);if(t)return a.customerLog("{0}: Split with step id {1} - Found link with id {2}",u,s.Id,t.Id),function r(e,t){a.customerLog("{0}: Split - Moving to next step. From step id {0} to step id {1}",u,s.Id,t.TargetFlowNodeId);var n={nextStageId:t.TargetFlowNodeId,value:t.Name};return e.resolve(n)}(e,t);return a.customerLog("{0}: Split with step id {1} - No link was found"),function n(e){return e.reject()}(e)},s.destroy=function n(){return a.customerLog("{0}: Destroying Split with step id {1}",u,s.Id),wmjQuery.when()};var u="SplitActionStage";!function r(){o=t.node,s.Id=o.Id,a=c.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}()}).asProto().dependencies("SplitFlowNodePlayableLinkProvider, Consts")}).call(window)},function(e,t,r){(function(){var p=r(372);p.register("StyleActionStage").asCtor(function n(i,o,a,s){var u,l=this;l.execute=function f(){u.customerLog("{0}: Executing Style with step id {1}",c,l.Id);var e=wmjQuery.Deferred();if(!function n(){return a.get().Settings&&a.get().Settings.StyleActionStage}())return u.customerLog("{0}: Style step not supported, skipping to next step",c),d(e,s.Links[0].TargetFlowNodeId);var t=p.create("DynamicCss",{css:s.Settings.actionArgs.css,Id:l.Id});return t.add(),o.one(function r(){return[i.EVENTS.Flows.FlowStopped,i.EVENTS.Flows.FlowCompleted,i.EVENTS.Flows.FlowAborted].join(" ")}(),function(){u.customerLog("{0}: Removing Style with step id {1}",c,l.Id),t.remove()}),d(e,s.Links[0].TargetFlowNodeId)},l.destroy=function e(){return u.customerLog("{0}: Destroying Apply Css with step id {1}",c,l.Id),wmjQuery.Deferred().resolve()},l.Id=s.Id;var c="StyleActionStage";function d(e,t){u.customerLog("{0}: Apply Css - Moving to next step. From step id {0} to step id {1}",c,l.Id,t);var n={nextStageId:t};return e.resolve(n)}(function t(){u=p.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, WmInternals, SiteConfigManager")}).call(window)},function(e,t,r){(function(){var n=r(372);n.register("WaitForConditionActionStage").asCtor(function p(i,o,r,a,s){var u,l,c=this;c.execute=function f(){var t=wmjQuery.Deferred(),e=s.ConditionTrees.WaitFor;l.customerLog("{0}: Executing Wait For Condition with step id {1}. Evaluating condition with id {2}",d,c.Id,e.Id);var n={evaluationPollingIntervalMs:500,featureName:"Wait For Condition",elementName:"Wait for condition node: "+s.Name};return(u=r.createNew(n)).onValueChanged(function(e){if(l.customerLog("{0}: Condition value changed for Wait For Condition step with id {1}. Result {2}",d,c.Id,e),i.isDebuggerOnWindow()&&a.raiseEventOnCurrentFlow(o.EVENTS.Flows.WaitForConditionEvaluated,{step:s}),e)return function r(e,t){l.customerLog("{0}: Wait For Condition - Moving to next step. From step id {0} to step id {1}",d,c.Id,t);var n={nextStageId:t};return e.resolve(n)}(t,s.Links[0].TargetFlowNodeId)}),u.evaluateAsync(e),t.promise()},c.destroy=function e(){l.customerLog("{0}: Destroying Wait For Condition with step id {1}",d,c.Id),u&&(u.cleanResources(),u=undefined);return wmjQuery.Deferred().resolve()},c.Id=s.Id;var d="WaitForConditionActionStage";(function t(){l=n.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("DebuggerManager, Consts, ConditionCheckerFactory, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){var y=n(372);y.register("UIFlowStage").asCtor(function t(n,i,e,r,a,s,u){var l=this;l.execute=function h(){c.customerLog("{0}: Executing UI step with id {1}",g,l.Id);var e=wmjQuery.Deferred();s.raiseEventOnCurrentFlow(a.EVENTS.Flows.LookingForElement,{step:u});for(var t=0;t<p.length;t++)c.customerLog("{0}: Calling display function of uiElement {1} of {2} for step id {3}",g,t+1,p.length,l.Id),o(e,p[t].show);return e.promise()},l.destroy=function m(){c.customerLog("{0}: Destroying UI step with id {1}",g,l.Id);var t=wmjQuery.Deferred();return e.executeParallel({objectsArray:p,functionsToExecute:[function(e,t){e.destroy().then(function(){},t)}],successCallback:function(e){t.resolve(e)}}),p.length=0,t.promise()},l.Id=u.Id;var c,d,f=0,p=[],g="UIFlowStage";function o(o,e){e().progress(function(e,t){var n=function i(e){for(var t=0;t<u.UIElements.length;t++)if(u.UIElements[t].Id==e)return u.UIElements[t]}(t.uiElementId);s.raiseEventOnCurrentFlow(a.EVENTS.Flows.UiElementFound,{step:u,score:t.score});var r={id:l.Id,uiElementId:t.uiElementId,triggers:n.Triggers,siteElement:t.siteElement};o.notify(e,r)}).then(function(e){!function n(e,t){c.customerLog("{0}: UI step - Moving to next step. From step id {1} to step id {2}",g,l.Id,t.nextStageId),r.saveIsFirstVisualStep(!1),e.resolve(t)}(o,e)},function(e){!function r(e,t){if(c.customerLog("{0}: Balloon was closed for UI step with id {1}, params {2}",g,l.Id,i.toJSON(t)),f++,t.wasClosedByUser)return void e.reject(t);if(t.skipped&&(d[t.uiElementId]=!0,!function n(){for(var e=0;e<u.UIElements.length;e++){var t=u.UIElements[e];if(!d[t.Id])return wmjQuery(t.Triggers).map(function(e,t){return t.Type}).is(function(e,t){return t!=a.FLOW_TRIGGER_TYPE.PeerStep})}}()))return t.nextStageId=u.UIElements[0].Triggers[0].TargetFlowNodeId,void e.resolve(t);f==p.length&&e.reject(t)}(o,e)})}(function v(){c=y.create("FeaturedLogger",{feature:a.FEATURES_LOGS.Flows}),d={},function t(){for(var e=0;e<u.UIElements.length;e++)u.UIElements[e]._ownerChain=u.Settings?u.Settings.ownerChain:undefined,p.push(n.createUIElement(u.UIElements[e]))}()}).apply(null,arguments)}).asProto().dependencies("UIElementFactory, JsonUtils, CommonUtils, FlowDataPersister, Consts, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){n(372).register("StageCreator").asCtor(function e(r,i){this.createStage=function o(e,t){var n=e.Nodes[t];return n.Settings&&(n.Settings.ownerChain={type:i.ELEMENT_OWNER_TYPE_NAMES.SWT,id:e.Id}),r.createStage(n)}}).dependencies("StagesFactory, Consts")}).call(window)},function(e,t,n){(function(){var s=n(372);s.register("StagesFactory").asCtor(function e(t,n,r,i){this.createStage=function a(e){switch(e.Type){case r.FLOW_STEP_TYPE.UI:return s.create("UIFlowStage",e);case r.FLOW_STEP_TYPE.Action:return n.createActionStage(e);default:t.customerLog(i.formatString("StagesFactory getStage - Unknown flow node type: {0}",e.FlowNodeType),1,o)}};var o=r.FEATURES_LOGS.Flows}).dependencies("Logger, ActionStagesFactory, Consts, StringUtils")}).call(window)},function(e,t,n){(function(){n(372).register("FlowGroupPlayDataProvider").asCtor(function e(r,i){this.getNextFlowData=function o(e){var t=r.peek(),n=e.nextFlowId||t.flowId;return{flowId:n,stageId:i.get(n,e.nextStageId).startingNodeId}}}).dependencies("FlowStack, FlowStartPointDataProvider")}).call(window)},function(e,t,n){(function(){n(372).register("FlowInnerGroupService").asCtor(function e(o,a,s){this.pushInnerGroupIfExists=function u(e,t){if(t){var n,r=o.getFlowById(e),i=r.Nodes[t];(n=i.ErrorHandlingParentId?i.ErrorHandlingParentId:i.Settings&&i.Settings.ErrorHandlingParentId)&&(a.push(e,n),s.setPreviousGroupHasNextStage(!0,r.Nodes[n]))}}}).dependencies("FlowsContainer, FlowStack, FlowGroupLastStageIndicator")}).call(window)},function(e,t,r){(function(){var n=r(372);n.register("FlowNodesLoader").asCtor(function d(i,o,r,e){var a,s;function u(t,n,e){return s?t?function r(e){return!i.isEmptyObject(e.Nodes)}(t)?n&&n(!0):void a.load(t.Id).then(function(e){t.Nodes=e,n&&n(!0)},e):n&&n(!1):n&&n(!0)}this.loadByBizFlowId=function l(e,t,n){var r=o.getById(e);u(r&&r.Flow,t,n)},this.loadByFlowId=function c(e,t,n){u(r.getFlowById(e),t,n)},function t(){s=e.isFeatureEnabled("publishNoNodesSwt"),a=n.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"flow_nodes",fileNamePrefix:"swt"})}()}).dependencies("wmjQuery, BusinessSolutionsManager, FlowsContainer, FeaturesManager")}).call(window)},function(e,t,n){(function(){n(372).register("FlowSafeStartHandler").asCtor(function e(n,r,i,o,a){function t(e,t){t.eventParams.status=e,t.eventParams.flowId=t.flowId,a.raiseEventOnCurrentFlow(r.EVENTS.Flows.SafeStartStatusChanged,t.eventParams)}this.auditSafeStartStatus=t,this.redirect=function s(e,t){i.push(t.flowId),o.saveSafeStartFlowId(t.flowId),n.redirect(e)},this.auditStayButtonClicked=function u(e){t(r.SAFESTART_ACTION.StayClicked,e)},this.auditSafeStartDisabled=function l(e){t(r.SAFESTART_ACTION.ErrorShown,e)},this.auditSafeStartFirstStatus=t}).dependencies("RedirectService, Consts, FlowStack, FlowDataPersister, FlowEventRaiser")}).call(window)},function(e,t,n){(function(){var M=n(372);M.register("FlowsPlayer").asCtor(function R(a,s,u,l,c,n,e,d,f,p,g,r,h,m,i,v,y){var S,E,w,T;function C(e){w.customerLog("FlowPlayer onStageSuccess - next stage id: {0}{1}",e.nextStageId,e.nextFlowId?", next flow id: "+e.nextFlowId:"");var t=S;b();var n=c.peek();if(!n)return w.customerLog("flowStack is empty after stage success"),void y.log.error("swtPlayError",{type:"Flow stack is empty on stageSuccess",currentFlowId:E,currentStageId:t&&t.Id,playParams:e,playGuid:s.getPlayGuid()});var r=(e=wmjQuery.extend({step:d.getNodeById(n.flowId,n.stageId)},e)).skipped?l.EVENTS.Flows.FlowStageSkipped:l.EVENTS.Flows.AfterCompletingFlowStage;p.raiseEventOnCurrentFlow(r,e),e.currentNode&&g.setPreviousGroupHasNextStage(e.shouldCreateFlowGroup,e.currentNode),e.shouldCreateFlowGroup?function i(e){var t=v.getNextFlowData(e);e.shouldReturnFromFlowGroup||c.pop();e.shouldNotPushNextFlowGroup||c.push(t.flowId,t.stageId);w.customerLog("FlowPlayer new flow group - flow {0} with node {1}",t.flowId,t.stageId),f.raiseFlowGroupEvent(e.step.ActionType,e.flowGroupInitiator,t.flowId,t.stageId),p.raiseEventOnCurrentFlow(l.FLOW_INNER_EVENTS.FlowIsPlaying,{}),A(t.flowId,t.stageId)}(e):e.nextStageId?function o(e){w.customerLog("FlowPlayer transition - Transitioning to node {0}",e),c.updateTopStageId(e),I().then(_)}(e.nextStageId):D()}function b(){if(!S)return wmjQuery.when();var e=S.destroy();return S=null,e}function I(){return e.canContinue()}function _(){var e=c.peek();A(e.flowId,e.stageId)}function o(e,t,n){s.clearIsGroupBack(),P(e,t,l.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP,n)}function A(e,t,n){P(e,t,l.FLOW_STAGE_ACTIONS.EXECUTE,n)}function P(t,e,n,r){w.customerLog("FlowPlayer run - Running flow id: {0}, node id: {1} with action: {2}",t,e,n),r&&(T=r);var i=d.getFlowById(t);if(S=e?a.createStage(i,e):undefined,E=i&&i.Id,S){p.raiseEventOnCurrentFlow(l.EVENTS.Flows.BeforeExecutingFlowStage,{step:d.getNodeById(t,e)});var o=s.getSafeStartFlowId();S[n]().progress(k).then(C,function(e){!function i(e,t){if(w.customerLog("FlowPlayer onStageError - params: {0}",u.toJSON(e)),e&&e.nextStageId)C(e);else if(!e||!e.lostOwnership){var n;if(e&&!e.wasElementShown&&s.getIsFirstVisualStep()){if(T==l.FLOW_PLAY_MODES.PLAY){if(!s.getSafeStartFlowId()){var r=d.getFlowById(t);e.isSafeStartHandling=h.handleSafeStart(m,r,{flowId:t,eventParams:e})}n=l.EVENTS.Flows.FailedToStart}}else g.removePreviousGroupHasNextStage(),n=l.EVENTS.Flows.FlowStopped;x(n,e)}}(e,t)}).always(function(){o&&s.saveSafeStartFlowId(undefined)})}else D()}function k(e,t){"stageShown"==e&&p.raiseEventOnCurrentFlow(l.EVENTS.Flows.UIFlowStageShown,t)}function D(){var e=c.pop();if(w.customerLog("FlowPlayer flowGroupCompleted - With previous group settings flowId: {0}, stageId: {1}",e.flowId,e.stageId),!c.isEmpty()){var t=c.peek().flowId;return function n(){var e=c.peek();s.saveIsGroupBack(!0),I().then(function(){o(e.flowId,e.stageId)})}(),void(e.flowId!=t&&p.raiseEventOnCurrentFlow(l.EVENTS.Flows.FlowBranchReturned,{flowId:e.flowId}))}!function r(e){x(l.EVENTS.Flows.FlowCompleted,{flowId:e.flowId,stageId:e.stageId})}(e)}function x(e,t){return e&&p.raiseEventOnCurrentFlow(e,t),c.clear(),b()}this.execute=A,this.backFromFlowGroup=o,this.stop=function t(){return w.customerLog("FlowPlayer stop - Stopping current flow"),x(l.EVENTS.Flows.FlowStopped)},this.abort=function N(){return c.isEmpty()&&!S?wmjQuery.when():(w.customerLog("FlowPlayer abort - Aborting current flow"),x(l.EVENTS.Flows.FlowAborted))},this.pause=function O(){return w.customerLog("FlowPlayer pause - Pausing current flow"),b()},this.play=function L(e,t){w.customerLog("FlowPlayer play from flow with id {0} stage id {1}",e,t),i.releaseBalloons(),n.pushInnerGroupIfExists(e,t),c.push(e,t),s.saveIsFirstVisualStep(!0),r.init(e),f.raiseFlowStartedEvent(e,t),p.raiseEventOnCurrentFlow(l.FLOW_INNER_EVENTS.FlowIsPlaying,{}),A(e,t,l.FLOW_PLAY_MODES.PLAY)},function F(){S=undefined,w=M.create("FeaturedLogger",{feature:l.FEATURES_LOGS.Flows})}()}).dependencies("StageCreator, FlowDataPersister, JsonUtils, Consts, FlowStack, FlowInnerGroupService, FlowTransitionChecker, FlowsContainer, FlowGroupEventRaiser, FlowEventRaiser, FlowGroupLastStageIndicator,FlowVisualStepsIndicator, DeployableSafeStartExecuter, FlowSafeStartHandler, LibDestroyer, FlowGroupPlayDataProvider,EventCollectorLogger")}).call(window)},function(e,t,n){(function(){var i=n(372);i.register("FlowsRestorer").asCtor(function o(a,s,u,t,l,c,d,f,n){var p;this.restore=function r(){if(p.customerLog("FlowsRestorer restore - restoring current flow"),s.isEmpty())p.customerLog("FlowsRestorer restore - nothing to restore");else{u.raiseEventOnCurrentFlow(a.EVENTS.Flows.RestoringFlow,{});var e=s.peek();n.loadByFlowId(e.flowId,function(){t.init(e.flowId),function o(e){var t=function i(e){var t=l.getWaitingForRefreshTrigger(),n=e.stageId;t?(p.customerLog("FlowsRestorer restore - refresh happened, skipping stage id {0} and moving to {1}",n,t.refreshTrigger),u.raiseEventOnCurrentFlow(a.EVENTS.Flows.AfterCompletingFlowStage,{step:c.getCurrentNode(),firedTrigger:t.firedTrigger,uiElementId:t.uiElementId}),l.clearWaitingForRefreshTrigger(),n=t.refreshTrigger,s.updateTopStageId(n)):n||(n=function r(e){var t=c.getFlowById(e);return f.getStageData(t).startingNodeId}(e.flowId),s.updateTopStageId(n));return n}(e),n=function r(){return l.getIsGroupBack()?a.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP:a.FLOW_STAGE_ACTIONS.EXECUTE}();d[n](e.flowId,t,a.FLOW_PLAY_MODES.RESTORE)}(e)})}},function e(){p=i.create("FeaturedLogger",{feature:a.FEATURES_LOGS.Flows})}()}).dependencies("Consts, FlowStack, FlowEventRaiser, FlowVisualStepsIndicator, FlowDataPersister, FlowsContainer,FlowsPlayer, FlowStartingStageProvider, FlowNodesLoader")}).call(window)},function(e,t,n){(function(){n(372).register("FlowStartFailureListener").asCtor(function r(e,t,i,o,a,s,u){this.listen=function n(){t.bind(e.EVENTS.Flows.FailedToStart,function(e,t){if(!t.isSafeStartHandling&&!o.getSafeStartFlowId()&&!u.isInitiatorAutoStart()){var n=a.get(),r=s.isFeatureEnabled("noIdInErrorMsg")?n.TutorialCantPlayText:"(Id:"+t.businessSolutionId+") "+n.TutorialCantPlayText;i.showFailedToStartPopup(n,r,null,t.businessSolutionId)}})}}).dependencies("Consts, WmInternals, PopupNotificationsService, FlowDataPersister, SiteConfigManager, FeaturesManager, FlowInitiatorService")}).call(window)},function(e,t,n){(function(){n(372).register("FlowStartPointDataProvider").asCtor(function e(r,i){this.get=function o(e,t){if(t)return{startingNodeId:t};var n=r.getFlowById(e);return i.getStageData(n)}}).dependencies("FlowsContainer, FlowStartingStageProvider")}).call(window)},function(e,t,n){(function(){n(372).register("FlowStartingStageProvider").asCtor(function t(e,i){this.getStageData=function r(t){var n={};return e.runDfs(t,{afterPointDescendantsVisited:function(e){!function r(e,t,n){if(t.nodeId)return;i.isSegmented(e.point,n)&&(t.nodeId=e.node.Id,t.uiElementId=e.uiElement?e.uiElement.Id:undefined)}(e,n,t.Id)}}),{startingNodeId:n.nodeId||t.RootFlowNodeId,startingUiElementId:n.uiElementId,startedFromStartPoint:!!n.nodeId}}}).dependencies("BaseGraphDfsService, StartPointSegmentationChecker")}).call(window)},function(e,t,n){(function(){var u=n(372);u.register("StartPointSegmentationChecker").asCtor(function e(i,a){this.isSegmented=function s(e,t){var n=i.getValue(e,"ConditionTrees.StartPoint");return!(!n||!n.Root)&&function r(e){var t=u.create("UIVisibilityManager",e);t.watchForVisibility();var n=t.shouldShow();return t.cleanResources(),n}(function o(e,t,n){var r=a.STICKY_TYPE.ONCE,i={logContext:e.Id,isRemoveByCondition:!1,stickyType:r,conditionCheckerParams:{featureName:"evaluate start point segmentation",elementName:e.Title},conditionTree:t};e.IdentifySettings&&(i.elementVisibilityParams={findElementParams:{IdentifySettings:e.IdentifySettings,ownerChain:{id:e.Id,type:a.ELEMENT_OWNER_TYPE_NAMES.START_POINT,sticky:r,owner:{id:n,type:a.ELEMENT_OWNER_TYPE_NAMES.SWT}}}},i.trackUIChanges=!0);return i}(e,n,t))}}).dependencies("ObjectJpath, Consts")}).call(window)},function(e,t,n){(function(){n(372).register("FlowSurveyActivator").asCtor(function o(e,l,c,d,f,p){function t(e,t){r(t.businessSolutionId,l.SURVEY_START_EVENTS.WalkThruCompleted)}function n(e,t){r(t.businessSolutionId,l.SURVEY_START_EVENTS.WalkThruExited)}function r(e,t){var n=c.getById(e);if(n.Surveys&&0!=n.Surveys.length){var r=function u(e,n){var r=l.SURVEY_START_EVENTS.Both,i=undefined;return wmjQuery.each(e,function(e,t){t.TriggerType!=n&&t.TriggerType!=r||(i=t)}),i}(n.Surveys,t);if(r){var i=p.flowSurveyActivator.surveyRepeat.key+l.DEPLOYABLE_TYPE.BusinessSolution+"-"+n.Id,o=l.SURVEY_FREQUENCY[r.Frequency],a={objectId:n.Id,type:l.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},s={businessSolutionId:n.Id,eventSource:t,surveyPlayGUID:f.getPlayGuid()};d.activateSurvey(r.SurveyId,i,o,a,s)}}}this.init=function i(){e.on(l.EVENTS.Flows.FlowCompleted,t),e.on(l.EVENTS.Flows.FlowStopped,n)}}).dependencies("WmInternals, Consts, BusinessSolutionsManager, DeployableSurveyActivator, FlowDataPersister, StorageKeysConfigurations")}).call(window)},function(e,t,n){(function(){n(372).register("ErrorHandlingFlowNodeDecisionProvider").asCtor(function e(n,r){this.getNextNodeId=function i(e){var t=0;return n.isSegmented(e)&&(t=r.getErrorHandlingConnectorIndex(e)),e.Links[t].TargetFlowNodeId}}).asProto().dependencies("ErrorHandlingSegmentationChecker, FlowNodeExtensions")}).call(window)},function(e,t,n){(function(){n(372).register("FlowExecutionTraverser").asCtor(function e(u,l){this.executionTraverse=function t(i,e,o){var a={};!function s(e){if(a[e])return;var t=u.getNodeById(i,e);var n=o(t);if(!n)return;a[e]=1;var r=l.getNextNodeToExecute(t);r&&s(r)}(e)}}).dependencies("FlowsContainer, NextExecutionFlowNodeProvider")}).call(window)},function(e,t,n){(function(){n(372).register("FlowGroupLastStageIndicator").asCtor(function e(i){this.setPreviousGroupHasNextStage=function u(e,t){var n=s();e&&!n&&function r(e){return e.Links[0].TargetFlowNodeId}(t)?i.saveData(o,t.Id,i.keysConfig.flow.lastStage.expiry):e||n!=t.Id||a()},this.removePreviousGroupHasNextStage=a,this.isPreviousGroupHasNextStage=s;var o=i.keysConfig.flow.lastStage.key;function a(){i.removeData(o)}function s(){return i.getData(o,!1)}}).dependencies("ClientStorageManager")}).call(window)},function(e,t,n){(function(){n(372).register("FlowLinkSegmentationChecker").asCtor(function e(n){this.isSegmented=function r(e){var t={featureName:"evaluate split node link segmentation",elementName:e.Name};return n.createNew(t).getCurrentEvaluationValueAndStopEvaluating(e.ConditionTrees.Branch)}}).dependencies("ConditionCheckerFactory")}).call(window)},function(e,t,n){(function(){n(372).register("FlowNodePlayIndicator").asCtor(function e(i,n,o){this.isPlayable=function a(e,t){var r=!1;return n.executionTraverse(e,t,function(e){var t=!0;return function n(e){return i.isActionNodeOfType(e,o.FLOW_ACTION_TYPE.ConnectToBizflow)||i.isActionNodeOfType(e,o.FLOW_ACTION_TYPE.RestartSwt)||!i.isActionNode(e)}(e)&&(t=!(r=!0)),t}),r}}).dependencies("FlowNodeExtensions, FlowExecutionTraverser, Consts")}).call(window)},function(e,t,n){(function(){n(372).register("NextExecutionFlowNodeProvider").asCtor(function e(r,i,o,a){this.getNextNodeToExecute=function s(e){return function t(e){return r.isActionNodeOfType(e,a.FLOW_ACTION_TYPE.Split)&&i.getNextNodeId(e)}(e)||function n(e){return r.isActionNodeOfType(e,a.FLOW_ACTION_TYPE.ErrorHandling)&&o.getNextNodeId(e)}(e)||r.getNodeConnectors(e)[0].TargetFlowNodeId}}).dependencies("FlowNodeExtensions, SplitFlowNodeDecisionProvider, ErrorHandlingFlowNodeDecisionProvider, Consts")}).call(window)},function(e,t,n){(function(){n(372).register("SplitFlowNodeDecisionProvider").asCtor(function e(n){this.getNextNodeId=function r(e){var t=n.getPlayableLink(e);return t?t.TargetFlowNodeId:null}}).asProto().dependencies("SplitFlowNodePlayableLinkProvider")}).call(window)},function(e,t,n){(function(){n(372).register("SplitFlowNodePlayableLinkProvider").asCtor(function e(i,t){function a(e){return!!t.getValue(e,"ConditionTrees.Branch.Root")}this.getPlayableLink=function s(e){for(var t=function o(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];a(i)?t.push(i):n.push(i)}return t=t.concat(n)}(e.Links),n=0;n<t.length;n++){var r=t[n];if(!a(r)||i.isSegmented(r))return r}return null}}).dependencies("FlowLinkSegmentationChecker, ObjectJpath")}).call(window)},function(e,t,n){(function(){n(372).register("BizFlowOnBeforeUnloadChecker").asCtor(function y(e,t,n,r,i,o,a,s){var u,l,c;this.init=function m(){f(),t.register(p),i.register(e.FLOW_TRANSITION_HANDLER_IDS.ON_BEFORE_UNLOAD,h)},this.destroy=function v(){c&&c.clear();f()};var d=3e3;function f(){u=!1,c=l=null}function p(){if(!s.isEmpty()&&(u=!0,r.pauseAllTimeouts(),!o.get().enabled())){l=wmjQuery.Deferred(),c&&c.clear();var e=n.get().Settings.BeforeUnloadTimeout||d;c=r.setWalkmeTimeout(g,e)}}function g(){a.isFeatureEnabled("noUnload")&&r.resumeAllTimeouts(),l.resolve(),f()}function h(){return u?o.get().enabled()?(f(),o.get().loseOwnership(!1,!0),wmjQuery.Deferred().reject()):l.promise():wmjQuery.Deferred().resolve()}}).dependencies("Consts, WindowBeforeUnloadHandler, SiteConfigManager, TimerManager, FlowTransitionChecker, CrossDomainManager, FeaturesManager, FlowStack")}).call(window)},function(e,t,n){(function(){n(372).register("FlowTransitionChecker").asCtor(function l(e){var n,r,i;function t(e){var t=wmjQuery.map(e,o);return wmjQuery.when.apply(wmjQuery,t)}function o(e){return e()}this.register=function a(e,t){n[e]?r.push(t):i.push(t)},this.canContinue=function s(){var e=wmjQuery.Deferred();return t(r).then(function(){t(i).then(e.resolve,e.reject)},e.reject),e.promise()},function u(){r=[],i=[],(n={})[e.FLOW_TRANSITION_HANDLER_IDS.DELAYER]=!0}()}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("FlowTransitionDelayer").asCtor(function d(e,t,r,i){var o,a,n;function s(){return o.promise()}this.setDelayByTrigger=function u(e,t){var n=i.getDelay(e,t);n&&(o=mtjQuery.Deferred()),a=r.setWalkmeTimeout(o.resolve,n)},this.destroy=function l(){a&&(a.clear(),a=null,o.reject(),o=mtjQuery.Deferred().resolve())},function c(){n=mtjQuery.Deferred().resolve(),o=n,t.register(e.FLOW_TRANSITION_HANDLER_IDS.DELAYER,s)}()}).dependencies("Consts, FlowTransitionChecker, TimerManager, FlowTransitionDelayProvider")}).call(window)},function(e,t,r){(function(){r(372).register("FlowTransitionDelayerDefaultMap").asCtor(function n(e){var t={};return t[e.FLOW_TRIGGER_TYPE.Click]=1e3,t}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(372).register("FlowTransitionDelayProvider").asCtor(function e(r,i){this.getDelay=function o(e,t){return e.getDelay&&e.getDelay()||function n(){return r.get().Settings.TriggersDelays||{}}()[t]||i[t]||0}}).dependencies("SiteConfigManager, FlowTransitionDelayerDefaultMap")}).call(window)},function(e,t,n){(function(){var p=n(372);p.register("BizflowApi").asCtor(function g(i,e,o,t,n,a,s,u,l){var c;this.start=function d(e,t,n){var r=e.Flow.Id;c.customerLog("BizflowApi start - Starting flow {0} id {1}{2}",e.Name,r,t?" from node "+t:""),l.loadByFlowId(r,function(){i.abort().then(function(){a.savePlayInitiator(n);var e=u.get(r,t);s.raiseBeforeFlowStartedEvent(r,e),o.determineOwner(r,e.startingNodeId)})})},this.restore=function r(){n.load(),e.restore()},this.stop=i.stop,this.pause=i.pause,function f(){c=p.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}()}).dependencies("FlowsPlayer, FlowsRestorer, BizflowOwnershipManager, Consts, FlowStack, FlowDataPersister, FlowGroupEventRaiser, FlowStartPointDataProvider, FlowNodesLoader")}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var c,e=a(100),t=a(372),n=(c=e.DeployablesManager,i(r,c),r.prototype.setDeployables=function(e){if(e){var t=wmjQuery.grep(e,function(e){return e.SmartTips&&0<e.SmartTips.length});this.smartTipSetsManager.init(t);var n=wmjQuery.grep(e,function(e){return!!e.Flow});this.flowsManager.init(n),c.prototype.setDeployables.call(this,e)}},r.prototype.activateById=function(e,t,n){try{var r=c.prototype.getById.call(this,e);if(!r)return this.logger.customerLog(this.stringUtils.formatString("Failed playing bizflow with id {0} - The Id {0} does not exist.",e),3),!1;if(n!=undefined&&!r.Flow.Nodes[n])return this.logger.customerLog(this.stringUtils.formatString("Failed playing bizflow with id {0} - The NodeId {1} does not exist.",e,n),3),!1;var i=this.getBizFlowApi();return this.initiatorManager.setForScope(t,function(){i.start(r,n,t)}),!0}catch(o){return this.logger.customerLog(this.stringUtils.formatString("Failed playing bizflow with id {0}. Exception is {1}",e,o),3),!1}},r.prototype.releaseAll=function(){return this.promiseUtils.executeParallely([this.destroySmartTipSetManagers(),this.destroyFlowPlayer(),this.destroyFlowManagers()])},r.prototype.restore=function(){return this.permalinkManager.isTrainingInStartingMode()?wmjQuery.when():this.getBizFlowApi().restore()},r.prototype.autoStartEnabled=function(e){return!this.permalinkManager.isTrainingInStartingMode()},r.prototype.destroyFlowPlayer=function(){return this.getBizFlowApi().pause()},r.prototype.destroySmartTipSetManagers=function(){return this.smartTipSetsManager.turnOffAllSets()},r.prototype.getBizFlowApi=function(){return this._bizFlowApi||(this._bizFlowApi=t.get("BizflowApi")),this._bizFlowApi},r.prototype.destroyFlowManagers=function(){return this.flowsManager.stopAllFlowEventsPropagation()},r);function r(e,t,n,r,i,o,a,s,u){var l=c.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.BusinessSolution})||this;return l.consts=t,l.promiseUtils=n,l.smartTipSetsManager=r,l.flowsManager=i,l.permalinkManager=o,l.initiatorManager=a,l.logger=s,l.stringUtils=u,l._name="Flow",l._bizFlowApi=undefined,l.setDeployables([]),l}o.BusinessSolutionsManager=n,t.register("BusinessSolutionsManager").asCtor(n).dependencies("Lib, Consts, PromiseUtils, SmartTipSetsManager, FlowsManager, PermalinkManager, InitiatorManager, Logger, StringUtils")}).call(window)}).call(this,a(1))},function(e,t,n){(function(){n(372).register("FlowLinkedTaskCompletionHandler").asCtor(function o(t,n,e){function r(e){n.updateDeployableCompleted(e,t.DEPLOYABLE_TYPE.BusinessSolution)}this.init=function i(){e.on(t.EVENTS.Flows.FlowCompleted,function(e,t){r(t.businessSolutionId)}),e.on(t.EVENTS.Flows.FlowBranchReturned,function(e,t){r(t.businessSolutionId)})}}).dependencies("Consts, TodoListManager, WmInternals")}).call(window)},function(e,t,n){(function(){n(372).register("FlowManager").asCtor(function r(i,o,a,s,u,t){var l;this.unbindEventPropagation=function e(){a(l.Flow).off(i.FLOW_INNER_EVENTS.EventPropogationPrefix)},function n(){l=t.businessSolutionModel,function e(){a(l.Flow).on(i.FLOW_INNER_EVENTS.EventPropogationPrefix,function(e,t){var n={businessSolutionId:l.Id,businessSolutionName:l.Name};n=a.extend(n,t),o.raiseEvent(t.eventType,n),function r(e){e==i.FLOW_INNER_EVENTS.FlowIsPlaying&&!function t(){s.startWatchingDeployable(l,u.getPlayGuid())}()}(t.eventType)})}()}()}).asProto().dependencies("Consts, CommonEvents, wmjQuery, WalkMeGoalsManager, FlowDataPersister")}).call(window)},function(e,t,r){(function(){var n=r(372);n.register("FlowManagerCreator").asCtor(function e(){this.create=function t(e){return n.create("FlowManager",{businessSolutionModel:e})}})}).call(window)},function(e,t,n){(function(){n(372).register("FlowsManager").asCtor(function u(i,e,n){var o,a;function t(e){return e.unbindEventPropagation()}this.init=function s(e){o=e;var t=function r(){var e=[];a=[];for(var t=0;t<=o.length-1;t++){var n=o[t];a.push(i.create(n)),n.Flow.bizFlowId=n.Id,e.push(n.Flow)}return e}();n.init(t)},this.stopAllFlowEventsPropagation=function r(){return a?e.executeParallelyOnArray(a,t):wmjQuery.when()}}).dependencies("FlowManagerCreator, PromiseUtils, FlowsContainer")}).call(window)},function(e,t,n){(function(){n(372).register("FlowInitiatorService").asCtor(function i(e,t,n){this.isInitiatorAutoStart=function r(){return e.getPlayInitiator()&&e.getPlayInitiator().type===t.STEP_PLAY_INITIATOR_ENUM.AUTOSTART&&n.isFeatureEnabled("noAutoStartMessages")}}).dependencies("FlowDataPersister, Consts, FeaturesManager")}).call(window)},function(e,t,n){(function(e){(function(){e.register("CookiesManager").dependencies("SettingsFile").asCtor(n(489)),e.register("LocalStorageService").dependencies("Logger").asFunction(n(494))}).call(window)}).call(this,n(2))},function(e,t,n){(function(){var a=n(490),c=n(492);e.exports=function s(t,e){var u,n=";secure",r=";SameSite=None",i=";SameSite=Lax",l="";this.setCookie=function(e,t,n,r){try{"string"!=typeof t&&(t=t.toString()),t=u.encode(t);var i="";r&&0<r.length&&(i=";domain="+r);var o=new Date;o.setTime(o.getTime()+1e3*n);var a=t+(";expires="+o.toUTCString())+";path=/"+i;document.cookie=c.encode(e)+"="+a+l}catch(s){}},this.getCookie=function(e,t){var n,r,i,o=c.encode(e),a=t!==undefined&&t,s=document.cookie.split(";");for(n=0;n<s.length;n++){if(r=s[n].substr(0,s[n].indexOf("=")),i=s[n].substr(s[n].indexOf("=")+1),(r=r.replace(/^\s+|\s+$/g,""))==o)return u.decode(i);r==e&&(a=u.decode(i))}return a},this.removeAllCookies=function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t].trim();if(0===n.toLowerCase().indexOf("wm-")){var r=n.split("=")[0].trim();document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"+i}}},function o(){u=a.getValueEncoderBySettingsFile(t),l=function e(){return"https:"===window.location.protocol}()?r+n:i}.apply(null,arguments)}}).call(window)},function(n,e,o){(function(){var e=o(491),t=o(492),r=o(493);n.exports=new function i(){var n={0:e,1:t,3:r};this.getValueEncoderBySettingsFile=function(e){var t=e.getStorageType();return t&&t.et!==undefined?n[t.et]:n[0]}}}).call(window)},function(t,e){(function(){t.exports=new function e(){var a={},n=[{from:33,to:33},{from:35,to:36},{from:38,to:43},{from:45,to:58},{from:60,to:91},{from:93,to:126}];function s(e){for(var t in n)if(n.hasOwnProperty(t)&&e>=n[t].from&&e<=n[t].to)return!0;return!1}this.encode=function(e){for(var t,n="",r=0,i=0;i<e.length;i++){if(!s(e.charCodeAt(i))){t=e.charAt(i);var o=e.substring(r,i);a[t]||(a[t]=encodeURIComponent(t)),n+=o+a[t],r=i+1}}return n+=e.substring(r)},this.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}}}}).call(window)},function(t,e){(function(){t.exports=new function e(){this.encode=function(e){return encodeURIComponent(e)},this.decode=function(e){return decodeURIComponent(e)}}}).call(window)},function(t,e){(function(){t.exports=new function e(){this.encode=function(e){return e.replace(/,/g,"%2C").replace(/"/g,"%00").replace(/'/g,"%01").replace(/;/g,"%3B")},this.decode=function(e){return e.replace(/%2C/g,",").replace(/%00/g,'"').replace(/%01/g,"'").replace(/%3B/g,";")}}}).call(window)},function(e,t){(function(){e.exports=function t(e){return function n(){try{if(!window.localStorage)return!1}catch(e){return!1}try{window.localStorage.getItem("wm-test")}catch(t){return!1}return!0}()?window.localStorage:(e.customerLog("localStorage is not enabled"),!1)}}).call(window)},function(t,e,n){(function(){var i=n(496),o={init:function a(){var e=i.get("ClientStorageManager"),t=i.get("CookiesStorageManager"),n=i.get("StorageManagerFactory"),r=i.get("ServerStorageSettingsService");o.clientStorageManager=e,o.cookiesStorageManager=t,o.storageManagerFactory=n,o.serverStorageSettingsService=r},services:["ClientStorageManager","CookiesStorageManager","StorageManagerFactory","ServerStorageSettingsService"],types:[]};!function e(){n(497),n(498),n(499),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(500),n(509),n(510),n(511),n(512),n(513)}(),n(69).registerApi(o,i),t.exports=o}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(496).register("CrossDomainMethods").asInstance({Cookies:"cookies",LocalStorage:"localStorage",IndexedDB:"indexedDB"})}).call(window)},function(t,e,n){(function(){var m=n(496);m.register("ClientStorageManager").asFunction(function(e){return e.bySettingsFile()}).dependencies("StorageManagerFactory"),t.exports=function e(){var u,l,c,d,f=this,p=null,n=!1;function g(e){return c.defaultValue(e,p)}this.getStorageType=function(){return u},this.init=function(e){if(e=e||function(){},function t(){return f.dataManager.isInitialized?f.dataManager.isInitialized():n}())e();else{if(n=!0,f.dataManager.init)return f.dataManager.init(e);e()}},this.refreshGetData=function(e,t){e=(e=wmjQuery.isArray(e)&&0<e.length?e[0]:e)||g(),f.dataManager.refreshGetData?f.dataManager.refreshGetData(e,t):t&&t()},this.saveData=function(e,t,n,r){if(0===n&&l.error(null,"ClientStorageManager.saveData - expiresSeconds is 0"),wmjQuery!=undefined&&mtjQuery!=undefined)if(m.get("FeaturesManager").isFeatureEnabled("StorageManagerTrimStrings")&&"string"==typeof t&&(t=wmjQuery.trim(t)),e=mtjQuery.trim(e),r=g(r),t!==undefined){if(n==undefined){var i="storageManager: trying to save key in storage manager without expiration, key: "+e+", value: "+t+", userGUID: "+r;l.customerLog(i,3)}f.dataManager.addToDictionary&&function o(e){var t=null!==e,n=!(e instanceof Array),r=!(e instanceof Date);return"object"==typeof e&&t&&n&&r}(t)?function a(e,t,n,r){for(var i in f.removeData(e,r),t)t.hasOwnProperty(i)&&t[i]!==undefined&&f.dataManager.addToDictionary(e,i,t[i],n,r)}(e,t,n,r):f.dataManager.saveData(e,d.toJSON(t),n,r)}else f.removeData(e,r)},this.getData=function(e,t,n){e=mtjQuery.trim(e),n=g(n);var r=f.dataManager.getData(e,n);return r===undefined||""===r?t:d.secureEvalJSON(r)},this.addToDictionary=function(e,t,n,r,i){if(e=mtjQuery.trim(e),i=g(i),f.dataManager.addToDictionary)f.dataManager.addToDictionary(e,t,n,r,i);else{var o=f.getData(e,i);null!==o&&"object"==typeof o||(o={}),o[t]=n,f.saveData(e,o,r,i)}},this.removeFromDictionary=function(e,t,n,r){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.removeFromDictionary)f.dataManager.removeFromDictionary(e,t,n,r);else{var i=f.getData(e,r);i&&i[t]!==undefined&&(delete i[t],f.saveData(e,i,n,r))}},this.addToSet=function(e,t,n,r){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.addToSet)f.dataManager.addToSet(e,t,n,r);else{var i=f.getData(e,r);wmjQuery.isArray(i)||(i=[]);for(var o=0;o<t.length;o++)-1==i.indexOf(t[o])&&i.push(t[o]);f.saveData(e,i,n,r)}},this.removeData=function(e,t){e=mtjQuery.trim(e),t=g(t),f.dataManager.removeData(e,t)},this.addToQueue=function(e,t,n,r,i){e=mtjQuery.trim(e),i=g(i);var o=f.getData(e,[],i);(o=o||[]).push(t),o.splice(0,o.length-n),f.saveData(e,o,r,i)},f.convertOldCookieStorage=function(e){var t=m.get("CookiesManager"),n=t.getCookie(e),r='"#!@DeL@!#"';if(n&&n!=r&&0!==n.indexOf('"')){var i=m.get("Consts");f.saveData(e,n,i.COOKIE_LIFE_2_YEARS);var o=m.get("SettingsFile").getStorageType();o&&o!=i.STORAGE_TYPE.Cookie&&t.setCookie(e,r,-1)}},f.increment=function(e,t,n,r,i){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.increment)f.dataManager.increment(e,t,n,r,i);else{var o=f.getData(e,0,r);t!==o&&(o++,f.saveData(e,o,n,r)),i&&i(o)}},f.getOrSetAndGet=function(e,t,n,r,i){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.getOrSetAndGet)f.dataManager.getOrSetAndGet(e,t,n,r,i);else{var o=f.getData(e,undefined,r);undefined===o&&(f.saveData(e,t,n,r),o=t),i&&i(o)}},f.runWithLock=function(n,r,i,o,a){if(i.maxRetries===undefined&&(i.maxRetries=10),0!==i.maxRetries){i.maxRetries--,n=mtjQuery.trim(n),r=g(r);var s=f.guidGenerator.generateGuid(),e=(i.timeout||1e3)/1e3;f.getOrSetAndGet(n,s,e,r,function(e){if(e===s){var t=o();t&&"function"==typeof t.then?t.then(function(){f.removeData(n,r)}):f.removeData(n,r)}else f.timerManager.setWalkmeTimeout(function(){f.runWithLock(n,r,i,o,a)},i.interval||500)})}else a&&a()},f.getInternalKeys=function(e,t){t&&""!==t||(t="wm-");var n=f.dataManager.getInternalKeys(g(e),t);return function r(n){wmjQuery.safeEach(n,function(e,t){t!==undefined&&""!==t&&(t=d.secureEvalJSON(t)),n[e]=t})}(n),n},this.removeAllData=function(e){f.dataManager.removeAllData(g(e))},f.sessionSetData=function(e,t,n){e=mtjQuery.trim(e),f.dataManager.sessionSetData?f.dataManager.sessionSetData(e,t,n):window.sessionStorage[n+e]=t},f.sessionGetData=function(e,t,n,r){e=mtjQuery.trim(e),f.dataManager.sessionGetData?f.dataManager.sessionGetData(e,t,n,r):r&&r(window.sessionStorage[n+e]||t)},f.setSyncFlag=function(e){f.dataManager.setSyncFlag&&f.dataManager.setSyncFlag(e)},f.isEnabled=function(){return f.dataManager.isEnabled()},f.releaseCallbacks=function(){f.dataManager.releaseCallbacks&&f.dataManager.releaseCallbacks()},f.releaseCallback=function(e){e&&f.dataManager.releaseCallback&&f.dataManager.releaseCallback(e)},function h(e,t,n,r,i,o,a,s){u={type:e,mode:"client"},f.dataManager=t,p=n,l=r,c=i,d=o,f.keysConfig=m.get("StorageKeysConfigurations"),f.guidGenerator=a,f.timerManager=s}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){var e=r(496),t=r(500);e.register("CookiesStorageManager").asCtor(function n(s){var i,o=this,u="wm-dmn";o.saveData=function(e,t,n,r){o.currentDomain==undefined&&(o.currentDomain=function a(){var e=s.getCookie(u);if(e)return e;var t=window.location.hostname;if(new RegExp("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$").test(t))return s.setCookie(u,t,600,t),t;if(-1==t.indexOf("."))return null;for(var n=t.split("."),r="",i=n.length-1;0<=i;i--)if(""!=r&&(r="."+r),r=n[i]+r,s.setCookie(u,r,600,r),s.getCookie(u)==r)return r;if(s.setCookie("wm-test","wm-test",600),"wm-test"!=s.getCookie("wm-test"))try{console.log("WalkMe requires the browser to accept cookies - please enable cookies in your browser.")}catch(o){}else console.log(new Error("Cannot get domain from: "+t));return undefined}()),s.setCookie(e,t,n,o.currentDomain),i.saveData(e,t,n,r)},o.getData=function(e,t){var n=i.getData(e,t);return n!==undefined||"#!@DeL@!#"!==(n=s.getCookie(e))&&!1!==n?n:undefined},o.removeData=function(e,t){i.removeData(e,t),o.getData(e)!==undefined&&o.saveData(e,"#!@DeL@!#",-1)},o.removeAllData=function(){s.removeAllCookies()},o.getInternalKeys=function(e,t){for(var n=document.cookie.split(";"),r={},i=0;i<n.length;i++)if(0===wmjQuery.trim(n[i]).toLowerCase().indexOf(t)){var o=wmjQuery.trim(n[i].split("=")[0]);o!==u&&(r[o]=this.getData(o))}return r},o.refreshGetData=function(e,t){i.clear(e),t&&t()},o.removeDomainCookie=function(){o.removeData(u)},function e(){i=new t}.apply(null,arguments)}).asProto().dependencies("CookiesManager")}).call(window)},function(e,t){(function(){e.exports=function n(){var o=this,t=null;function a(e){return t[e]===undefined&&(t[e]={}),t[e]}this.saveData=function(e,t,n,r){var i={};i.value=t,i.saveTime=(new Date).getTime(),i.expiresSeconds=n,a(r)[e]=i},this.getData=function(e,t){var n=a(t)[e];if(n){var r=(new Date).getTime();if(0<n.saveTime+1e3*n.expiresSeconds-r)return n.value;o.removeData(e,t)}return undefined},this.removeData=function(e,t){delete a(t)[e]},this.clear=function(e){t[e]={}},this.getStorageInternal=function(){return t},this.getInternalKeys=function(n,r){var i={},e=a(n);return wmjQuery.safeEach(e,function(e,t){0===wmjQuery.trim(e).toLowerCase().indexOf(r)&&(i[e]=o.getData(e,n))}),i},function e(){t={}}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){n(496).register("ExtensionStorageManager").asCtor(function s(t,n,o){var r=this,i=5;function a(e){return function t(){return(new Date).getTime()}()+e}r.init=function(e){window.walkmeExt?e():0!=i?(i--,t.libSetTimeout(function(){r.init(e)},300)):n.customerLog("Extension storage is not available, walkme can not load",3)},r.saveData=function(e,t,n,r){var i={val:t,exp:a(1e3*n)};walkmeExt.SaveData(e,o.toJSON(i),r)},r.getData=function(e,t){var n=walkmeExt.GetData(e,t);if(n)return o.secureEvalJSON(n).val},r.removeData=function(e,t){walkmeExt.removeData(e,t)},r.removeAllData=function(e){walkmeExt.RemoveAllData(e)},r.getAll=function(e){return walkmeExt.GetAll(e)},function e(){}.apply(null,arguments)}).asProto().dependencies("TimerManager, Logger, JsonUtils")}).call(window)},function(e,t,n){(function(){n(496).register("CDStorageOriginChecker").asCtor(function t(r){var i,o=[];this.checkMessageOrigin=function(e){var t=r.shouldHandleMessage(e);return!i&&e&&"frameOrigin"==e.data&&(t||function n(e){o.push(e)}("Storage Frame is not from the same origin: "+e.origin),i=!0),t},this.getErrors=function(){return o.length?"\nErrors:\n"+o.join("\n"):""},function e(){}.apply(null,arguments)}).asSingleton().dependencies("StorageResourceManager")}).call(window)},function(e,t){(function(){e.exports=function c(){var o,a,s,u="walkme-hidden-iframe";function n(){return o&&(o.contentWindow||o.window)}this.init=function l(e,t,n){(o=function r(e){return(e?e.ownerDocument:document).getElementById(u)}(n))?t&&t():o=function i(e,t,n){return a.createIframe(s,u,!1,t,e,n,!0)}(e,t,n)},this.postMessage=function r(e,t){n().postMessage(e,t)},this.isInitialized=function t(){try{return!!n()}catch(e){return!1}},this.getTargetWindow=n,this.terminate=function e(){o&&o.parentNode&&o.parentNode.removeChild(o)},function i(e,t,n){a=t,s=n.getHiddenIframePath(e)}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(m){(function(){var g=n(503);e.exports=function h(){var r,o,a,s,u,l,c,i="walkme-proxy-iframe";function d(e){var t=u.getWalkmeInternals().walkmeWrap;t?t(r,e):r(e)}this.init=function f(e,n){r=e,function t(e){(a=document.getElementById(i))?e():a=u.createIframe("about:blank",i,!1,e,null,null,!0)}(function(){try{var e=wmjQuery(a).contents();s=a.contentWindow||a.window,function i(e,t,n){var r=t.document.createElement("script");r.type="text/javascript",r.async=!1,r.src=l.getHiddenIframeScriptSrc(),window._walkmeInternals.hiddenIframeCallback=n,e.find("head")[0].appendChild(r)}(e,s,function(){o.init(null,function(){c=u.registerEventHandler("message",d,!1,s),s.targetWindow=o.getTargetWindow(),n&&n()},e.find("body")[0])})}catch(t){m.get("EventSenderErrorLogger").logError("Proxy storage iframe initialization failed.",{exception:t})}})},this.isInitialized=function e(){return o.isInitialized()},this.postMessage=function n(e,t){s.send.apply(s,[e,t])},this.terminate=function t(){o&&o.terminate();c&&c(),!a||a.parentNode&&a.parentNode.removeChild(a)},function p(e,t,n){o=new g(e,u=t,l=n)}.apply(null,arguments)}}).call(window)}).call(this,n(2))},function(e,t,n){(function(re){(function(){var $=n(496),Z=n(503),ee=n(504),te=n(500);e.exports=function ne(){var u,l,c,d,f,p,g,h,m,v,y,S,e,E,w=null,T=null,C=this,b={},I=function(){},_=null,A="wm-sync",t=15e3,P=[],k={terminate:"terminate",getAll:"getAllMultiple",checkCanSave:"checkCanSave",get:"get",increment:"increment",getOrSetAndGet:"getOrSetAndGet",del:"delete",setSession:"setSession",getSession:"getSession",set:"set",addSet:"addSet",add:"add",remove:"remove"};function r(){return $.get("TimerManager")}function a(e){for(var t=0;t<P.length;t++)P[t].push(e)}function D(e,t,n){var r=C.getData(e,t)||n;return r&&"string"==typeof r&&(r=p.secureEvalJSON(r)||n),r}function o(e,t){O(n(e,t))}function n(e,t){var n=function r(){1e3<(i+=1)&&(i=1);return i}();return e.actionId=n,b[n]=t,e}C._iframeReady=!1,C.refreshGetData=function(e,t){!function n(e){e&&T.push(e)}(t),!0!==E||$.get("LibDestroyer").removingWalkMe?K():F(e)},C.saveData=function(e,t,n,r){x(e,t,n,r),w.saveData(e,t,n,r),a(e)},C.getData=function(e,t){return w.getData(e,t)},C.removeData=function(e,t){!function n(e,t){O({requestType:k.del,userGuid:t,key:e})}(e,t),w.removeData(e,t),a(e)},C.increment=function(e,t,n,r,i){o({requestType:k.increment,userGuid:r,key:e,ttl:n,lastValue:t},i)},C.getOrSetAndGet=function(e,t,n,r,i){o({requestType:k.getOrSetAndGet,userGuid:r,key:e,ttl:n,fallbackValue:t},i)},C.setSyncFlag=function(e){L(s(A,1,10,e))},C.addToSet=function(e,t,n,r){for(var i=D(e,r,[]),o=0;o<t.length;o++)-1==$.get("inArrayFunc")(t[o],i)&&i.push(t[o]);x(e,t,n,r,k.addSet),w.saveData(e,p.toJSON(i),n,r),a(e)},C.addToDictionary=function(e,t,n,r,i){var o=D(e,i,{});o[t]=n,o=p.toJSON(o);var a={};a[t]=n,function s(e,t,n,r){O({requestType:k.add,userGuid:r,key:e,keyValues:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}})}(e,a,r,i),w.saveData(e,o,r,i)},C.removeFromDictionary=function(e,t,n,r){var i=D(e,r,{});delete i[t],i=p.toJSON(i),function o(e,t,n,r){O({requestType:k.remove,userGuid:r,key:e,keysToRemove:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}})}(e,[t],n,r),w.saveData(e,i,n,r)},C.getInternalKeys=function(e,t){return w.getInternalKeys(e,t)},this.sessionSetData=function(e,t,n){O({requestType:k.setSession,userGuid:n,key:e,value:t})},this.sessionGetData=function(e,t,n,r){o({requestType:k.getSession,userGuid:n,key:e,defaultValue:t},r)};var i=0;function s(e,t,n,r,i){return{requestType:i||k.set,userGuid:r,key:e,saveObj:{value:t,saveTime:(new Date).getTime(),expireSeconds:n}}}function x(e,t,n,r,i){O(s(e,t,n,r,i))}function N(e){var t=(new Date).getTime();return e.saveTime+1e3*e.expireSeconds-t}function O(e){C._iframeReady&&(c.isInitialized()?!1!==E&&L(e):C.init(function(){L(e)}))}function L(e){c.postMessage(p.toJSON(e),"*")}function F(e){P.push([]),O({requestType:k.getAll,userGuid:e})}function M(){O({requestType:k.checkCanSave,saveMode:u,userGuid:S})}function R(){"IE"==g.browser.name&&window.opener&&u==$.get("CrossDomainMethods").LocalStorage?(B(),r().libSetTimeout(U,3e3)):U()}function B(){C._iframeReady||(!function e(){L({requestType:k.get,key:A,userGuid:S,saveMode:u})}(),r().libSetTimeout(B,100))}function U(){C._iframeReady||(C._iframeReady=!0,V(),M())}function V(){Y(),e=r().libSetTimeout(W,t)}function W(){$.get("Logger").customerLog("storage failed loading, removing walkme",3),Y(),E=!1,$.get("LibDestroyer").removeWalkMe("storageFailedLoading."+v.getErrors(),{sendLog:!0})}this.init=function(e){if(C._iframeReady=!1,I=e,!function t(){return!!window.postMessage&&(u!=$.get("CrossDomainMethods").LocalStorage||!!m)}())return $.get("Logger").customerLog("Cannot run cross-domain Walk-Thrus on this browser. Removing WalkMe."),!1;E=undefined,(c=l?new ee(d,f,h):new Z(d,f,h)).init(q,R),$.get("PostMessageListener").addTeardownCallback(J)};var j,G=!(this.removeAllData=function(e){var t=w.getStorageInternal()[e];if(t)for(var n in t)C.removeData(n,e)});function H(){window.open(C._saveCookiePath,"_blank"),G=!0,window.focus(),mtjQuery(document).unbind("click.wmpopup"),function t(e){e=e||0;10<e?W():!0!==E&&(e++,M(),r().libSetTimeout(function(){t(e)},200))}()}function Y(){e&&(e.clear(),e=null)}function Q(e){Y(),e.canSave||G?e.canSave&&(clearTimeout(j),function t(){mtjQuery(document).unbind(".wmpopup")}(),V(),F(S)):"cookies"==u?(j===undefined&&function n(){var e=parseInt(_.getData(z.key)||0);e<3?(e++,_.saveData(z.key,e.toString(),z.expiry),mtjQuery(document).bind("click.wmpopup touchend.wmpopup",H)):W()}(),j=r().libSetTimeout(M,500)):W()}var z=$.get("StorageKeysConfigurations").hiddenIframe.popupHackTries;function q(e){if(v.checkMessageOrigin(e)){try{var t=p.secureEvalJSON(e.data)}catch(r){return}if(t.key==k.checkCanSave)Q(t);else if(t.key==k.getAll){if(function i(){E||(E=!0,Y(),_.removeData(z.key),_.removeDomainCookie())}(),function u(e){var t=P.shift();if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(r&&r.length&&0<r.length&&r[0].saveObj!=undefined)for(var i=0;i<r.length;i++){var o=r[i].key;if(-1==wmjQuery.inArray(o,t)){var a=r[i].saveObj,s=N(a);0<s?w.saveData(o,a.value,s/1e3,n):C.removeData(o,n)}}}}(t.allValues),I){var n=I;I=null,n()}K()}else t.actionId!==undefined?function o(e){if(e&&b[e.actionId]){var t=b[e.actionId];delete b[e.actionId],t(e.value)}}(t):t.key==k.get?0<N(t.saveObj)?function a(e,t){e==A&&t&&U()}(t.dataKey,t.saveObj.value):C.removeData(t.dataKey,S):t.key==k.terminate&&function s(){c&&c.terminate(),y&&y(),y=null}()}}function K(){if(0<T.length){var e=T.shift();e&&e()}}function J(){var e=new re(function(e){y=e});return L({requestType:k.terminate}),e}C.releaseCallbacks=function(){T.length=0,b={}},C.releaseCallback=function(e){for(var t=0;t<T.length;t++)if(T[t]==e)return void(T[t]=null)},function X(e,t,n,r,i,o,a){h=$.get("StorageResourceManager"),S=t,w=new te,_=$.get("CookiesStorageManager"),T=[],g=$.get("HostData"),u=function s(e,t){if(e&&"Safari"==g.browser.name)return $.get("CrossDomainMethods").Cookies;if(t)return t;if(e&&g.isIEBrowser(10,"gte"))return $.get("CrossDomainMethods").IndexedDB;return $.get("CrossDomainMethods").LocalStorage}(n,r),f=e,l=o,p=a,d=i,v=$.get("CDStorageOriginChecker"),m=$.get("LocalStorageService"),$.get("Logger").customerLog("Storage mode: "+u+", ["+(r?"from db/feature":"auto detected")+"], compressed: "+i,3),C._origin=h.getOrigin(),C._saveCookiePath=h.getSaveCookiePath(),C._path=h.getHiddenIframePath(i)}.apply(null,arguments)}}).call(window)}).call(this,n(29))},function(e,t,n){(function(){n(496).register("StorageResourceManager").asCtor(function s(e,n,t,r){var i,o=this,a="resources/CD/";o.getOrigin=function(){return i=i||e.getPublicPath()},o.getHiddenIframePath=function(e){var t=e?".compress":"";return o.getOrigin()+n.formatString(a+"CDhiddenIframe{0}.html",t)},o.getHiddenIframeScriptSrc=function(){return o.getOrigin()+a+"cdHiddenIframeScript.js"},o.getSaveCookiePath=function(){return o.getOrigin()+a+"saveCookie.html"},o.shouldHandleMessage=function(e){var t=o.getOrigin();return-1<r.remove(t.toLowerCase()).indexOf(r.remove(e.origin))}}).dependencies("SettingsFile, CommonUtils, LocalStorageService, UrlCommonStringsRemover")}).call(window)},function(e,t,n){(function(){n(496).register("LocalStorageService").dependencies("CommonUtils, Logger").asFunction(function(e,t){return function n(){try{if(!window.localStorage)return!1}catch(e){return!1}try{window.localStorage.getItem("wm-test")}catch(t){return!1}return!0}()?window.localStorage:(t.customerLog("localStorage is not enabled"),!1)})}).call(window)},function(e,t,n){(function(){n(496).register("WalkMejStorageManager").asCtor(function e(o,l,s){var c=this,d="walkMe_";function u(){return(new Date).getTime()}this.init=function(e){if(!c.isEnabled())return!1;e()},this.saveData=function(e,t,n){n=o.defaultValue(n,0),c.removeData(e);var r={val:t,exp:function i(e){return u()+e}(1e3*n)};l.setItem(d+e,s.toJSON(r))},this.getData=function(e){var t=l.getItem(d+e);if(t){var n=s.secureEvalJSON(t);if(!(n.exp<u()))return n.val;c.removeData(e)}},this.removeData=function(e){l.removeItem(d+e)},this.removeAllData=function(){Object.keys(localStorage).forEach(function(e){0===e.indexOf(d)&&localStorage.removeItem(e)})},this.getInternalKeys=function(e,t){for(var n,r,i,o={},a=d.length,s=0;s<l.length;s++){var u=l.key(s);r=o,i=a,-1<(n=(n=u).substr(i)).toLowerCase().indexOf(t)&&(r[n]=c.getData(n))}return o},this.isEnabled=function(){return!!l},function t(){try{!function a(){if(!c.isEnabled())return;var e=s.secureEvalJSON(l.getItem("wm-storage"));if(!e)return;var t=(e.__jstorage_meta||{}).TTL||{};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=t[n],o=u();o<i&&c.saveData(n,r,(i-o)/1e3)}l.removeItem("wm-storage")}()}catch(e){}}.apply(null,arguments)}).asProto().dependencies("CommonUtils, LocalStorageService, JsonUtils")}).call(window)},function(e,t,n){(function(){n(496).register("EndUserStorageDataSender").asCtor(function h(r,e,t,n,i){var a,o,s,u,l,c,d,f=this;function p(e,t,n){return{Key:e,Value:r.toJSON(t),Expiry:n}}f.init=function(){a=i.getUserGuid(),o=n.getEndUserGuid(),s=e.get()},f.updatePropertyInObject=function(e,t,n,r,i){a=i||a;var o={Key:e,FieldKey:t,FieldValue:n,Expiry:r};l.sendData(o)},f.addToSet=function(e,t,n,r){a=r||a,c.sendData(p(e,t,n))},f.update=function(e,t,n,r){a=r||a,u.sendData(p(e,t,n))},f.remove=function(e,t){a=t||a,d.sendData({Key:e})},f.getUpdateTypedDataSender=function(){return u},f.getRemoveTypedDataSender=function(){return d},f.updateRequestParamsFunc=function(e){return{walkmeUserGuid:a,source:s,endUserGuid:o,keyValueExpiryListSerialized:r.toJSON(e)}},f.removeRequestParamsFunc=function(e){return{walkmeUserGuid:a,source:s,endUserGuid:o,keyListSerialized:r.toJSON(e)}},function g(){l=t.register("up",{actionUrl:"/EndUserStorage/UpdatePropertyInObject",prefixForStorage:"up",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.updateRequestParamsFunc,shouldTruncateData:!1}),c=t.register("as",{actionUrl:"/EndUserStorage/AddToSet",prefixForStorage:"as",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.updateRequestParamsFunc,shouldTruncateData:!1}),u=t.register("us",{actionUrl:"/EndUserStorage/Update",prefixForStorage:"us",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.updateRequestParamsFunc,shouldTruncateData:!1}),d=t.register("rs",{actionUrl:"/EndUserStorage/Remove",prefixForStorage:"rs",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.removeRequestParamsFunc,shouldTruncateData:!1})}.apply(null,arguments)}).dependencies("JsonUtils, AuditSourceManager, ServerDataSenderManager, EndUsersManager, UserGuidContainer")}).call(window)},function(e,t,n){(function(){n(496).register("ServerStorageAjaxCaller").asCtor(function a(e,t,s,n,r,u){var l,c,i,d;this.init=function(){l=e.get(),c=r.getEndUserGuid(),i=t.get(),d=i+"/EndUserStorage/Get"},this.get=function(r,i,o,a){var e={url:d,data:{walkmeUserGuid:r,source:l,endUserGuid:c,secondsSinceUpdate:i},success:function(e,t,n){e.Data.ErrorMessage?(s.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+r+", source: "+l+", end user: "+c+", seconds since update: "+i+". Error: "+e.Data.ErrorMessage+"."),a&&a()):o(e.Data)},error:function(e,t,n){s.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+r+", source: "+l+", end user: "+c+", seconds since update: "+i+". Error: "+t+"."),a&&a()},timeout:1e4};u.isFeatureEnabled("getEndUserStorageJson")&&(e.dataType="json"),n.execute(e)},function o(){}.apply(null,arguments)}).dependencies("AuditSourceManager, RecorderServerManager, Logger, WmAjax, EndUsersManager, FeaturesManager")}).call(window)},function(e,t,n){(function(){n(496).register("ServerStorageManager").asCtor(function i(c,e,d,f,p,g,h,r){var m,v,y,S,E,w,T=this,n=!1,C=!0,b=d.keysConfig.serverStorage.currentEndUserGuid,I=d.keysConfig.serverStorage.currentEnvironment,_=d.keysConfig.serverStorage.lastGetDataTime,A=["wm-c-test","wm-dbg-cnf","wm-dbg","wm-ueug","wm-fgug","wm-gb","wm-prsst","wm-sf-lst-usr","wm-sf-users-data","wm-sat","wm-sst","wm-sk","wm-SrvSmt","wm-wtchd","wm-cond-win","wm-prf-stt","wm-prf-snk","wm-cdstop","wm-cdplay","wm-po-pc","wm-po-r","wm-po-q","wm-dt","wm-ne","wm-nx","wm_abg_","wm_ct_","wm-po-p",b.key,I.key,"wm-ftr-cnf","wm-ftr","wm-ltm","wm-ct-prv","wm-lg-act","wm-cseu-id"];function o(e,t){var n=!1;return 3600<=t&&(n=!0),n}T.init=function(e,t){if(E)e&&e();else{E=!0,m.init(),p.init(),v=c.getUserGuid(),y=h.getEndUserGuid(),S=f.get();var n=d.getData(_.key,null,v);n&&(C=!1),function o(){var e=d.getData(b.key,null,v),t=d.getData(I.key,null,v);return!C&&(e!=y||t!=S)}()&&(function a(){for(var t=d.getInternalKeys(v),n=0;n<A.length;n++)wmjQuery.each(t,function(e){0==e.indexOf(A[n])&&delete t[e]});for(var e in t)t.hasOwnProperty(e)&&d.removeData(e,v)}(),n=null),function s(){d.saveData(b.key,y,b.expiry,v),d.saveData(I.key,S,I.expiry,v)}();var r=(new Date).getTime(),i=null==n?null:(r-n)/1e3;!function u(e){var t=g.getStorageType()[d.keysConfig.serverStorage.invalidateIntervalKey.key]||86400;return null===e||t<=e}(i)?e&&e():function l(e,t,n,r){p.get(v,e,function(e){T.updateLocalStorage(e,t),w=0,n&&n()},function(){w=1,r&&r()})}(i,r,e,t)}},T.updateLocalStorage=function(e,t){n=!!C,T.updateLocalStorageItems(e),d.saveData(_.key,t,_.expiry,v)},T.updateLocalStorageItems=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.IsDeleted?d.removeData(n.Key,v):d.saveData(n.Key,r.secureEvalJSON(n.Value),n.SecondsToExpiry,v)}},T.shouldUpdateOldKeys=function(){return n},T.getStorageType=function(){var e=d.getStorageType();return e.mode="server",e},T.refreshGetData=d.refreshGetData,T.saveData=function(e,t,n,r){r==undefined&&(r=v),o(0,n)&&m.update(e,t,n,r),d.saveData(e,t,n,r)},T.getData=function(e,t,n,r){return r!==undefined&&function i(){return w}()&&(t=r),d.getData(e,t,n)},T.addToDictionary=function(e,t,n,r,i){o(0,r)&&m.updatePropertyInObject(e,t,n,r,i||v),d.addToDictionary(e,t,n,r,i)},T.addToSet=function(e,t,n,r){r==undefined&&(r=v),o(0,n)&&m.addToSet(e,t,n,r),d.addToSet(e,t,n,r)},T.removeData=function(e,t){t==undefined&&(t=v),m.remove(e,t),d.removeData(e,t)},T.addToQueue=d.addToQueue,T.convertOldCookieStorage=d.convertOldCookieStorage,T.increment=d.increment,T.getInternalKeys=d.getInternalKeys,T.removeAllData=d.removeAllData,T.sessionSetData=d.sessionSetData,T.sessionGetData=d.sessionGetData,T.setSyncFlag=d.setSyncFlag,function t(){m=e,E=!1,T.keysConfig=d.keysConfig}.apply(null,arguments)}).dependencies("UserGuidContainer, EndUserStorageDataSender, ClientStorageManager, AuditSourceManager, ServerStorageAjaxCaller, SettingsFile, EndUsersManager, JsonUtils")}).call(window)},function(e,t,n){(function(){n(496).register("ServerStorageSettingsService").asCtor(function e(t){this.isServerStorageOn=function r(){var e=t.getStorageType();return!!e&&1==e[n]};var n="ss"}).dependencies("SettingsFile")}).call(window)},function(e,t,n){(function(){var I=n(496),_=n(498),A=n(505);I.register("StorageManagerFactory").asCtor(function t(d,r,f,u,p,g,i,l,h,m,v){var y,S,E,w,T=!0,o=this,C="cm";function b(e,t){var n=r.getStorageType();return n&&n[e]!==undefined?n[e]:t}function c(e,t,n,r,i){var o=d.getUserGuid();return t?function a(e,t,n,r,i){if(!y){var o=new A(p,t,e,n,r,i,h);y=new _(g.STORAGE_TYPE.CrossDomain,o,t,f,p,h,m,v)}return y}(t,o,r,function s(){return!!b(C,T)}(),i):e?function u(e){if(!S){var t=I.get("WalkMejStorageManager");S=new _(g.STORAGE_TYPE.JStorage,t,e,f,p,h,m,v)}return S}(o):n?function l(e){if(!w){var t=I.get("ExtensionStorageManager");w=new _(g.STORAGE_TYPE.Extension,t,e,f,p,h,m,v)}return w}(o):function c(e){if(!E){var t=I.get("CookiesStorageManager");E=new _(g.STORAGE_TYPE.Cookie,t,e,f,p,h,m,v)}return E}(o)}o.bySettingsFile=function(e){var t=p.getWindowCookie("wm-stt"),n=t?o.byType(t):o.byType(r.getStorageType());return e&&i.isServerStorageOn()&&!I.get("EndUsersManager").isWalkMeGeneratedEndUserType()&&(n=I.get("ServerStorageManager")),n},o.byType=function(e){var t,n=function s(e){if(!e)return e;if("string"==typeof e)return e;var t=e.st;return t[u.browser.string]||t[u.browser.name]||t["*"]}(e),r=!1,i=!1,o=!1,a=b("sm");switch(n){case g.STORAGE_TYPE.JStorage:r=!0;break;case g.STORAGE_TYPE.CrossDomainCookies:a=l.Cookies,i=!0;break;case g.STORAGE_TYPE.CrossDomainLocalStorage:a=l.LocalStorage;case g.STORAGE_TYPE.CrossDomain:i=!0;break;case g.STORAGE_TYPE.Extension:o=!0;break;case g.STORAGE_TYPE.ProxyIframe:t=i=!0;break;case g.STORAGE_TYPE.Cookie:}return c(r,i,o,a,t)},function e(){}.apply(null,arguments)}).dependencies("UserGuidContainer, SettingsFile, Logger, HostData, CommonUtils, Consts, ServerStorageSettingsService, CrossDomainMethods, JsonUtils, GuidGenerator, TimerManager")}).call(window)},function(t,e,n){(function(){var r=n(515),i={init:function o(){var e=r.get("UIChangeTracker"),t=r.get("ChangesTrackerFactory"),n=r.get("PageChangeTracker");i.uiChangeTracker=e,i.changesTrackerFactory=t,i.pageChangeTracker=n},services:["UIChangeTracker","ChangesTrackerFactory","PageChangeTracker"],types:[]};!function e(){n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536)}(),n(69).registerApi(i,r),t.exports=i}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(515).register("HashChecker").asCtor(function a(t,e){var n,r;this.hashChanged=function i(){var e=n!=t.location.hash;return e?(r("Hash has changed. Previous hash: "+n+". New hash: "+t.location.hash,3),n=t.location.hash):r("Hash has't changed",3),e},function o(){n=t.location.hash,r=e.wrapCustomerLog("HashChecker")}()}).dependencies("win,Logger")}).call(window)},function(e,t,n){(function(){n(515).register("PageChangeTracker").asCtor(function S(e,t,n){this.init=function d(){if(o)return;if(o=!0,!u())return;e.bindPreListener(l),s=!0},this.stop=function f(){if(o=!1,!u())return;e.unbind(l)},this.bind=function p(e){i.push(e)},this.unbind=function g(e){for(var t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}},this.triggerPageChange=function h(){c()},this.getCurrentIndex=function m(){return a},this.isActivated=function v(){return s};var r,i=[],o=!1,a=0,s=!1;function u(){return t.isWalkMeVisible()}function l(e){!function n(e){if(!e)return!0;for(var t=0;t<r.length;t++)if(e[r[t]])return!1;return!0}(e.notifiers)&&c()}function c(){a++;for(var e=i.length-1;0<=e;e--)try{i[e]({uiChangeIndex:a})}catch(t){}}!function y(){r=[n.UI_CHANGE_NOTIFIERS.HASH,n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS,n.UI_CHANGE_NOTIFIERS.HISTORY,n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR,n.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR]}()}).dependencies("UIChangeTracker, WalkMeVisibilityChecker, Consts")}).call(window)},function(e,t,n){(function(){n(515).register("SPAAjaxConfig").dependencies("SPAConfig,HashAjaxConfig,ThrottledAjaxConfig,DummyAjaxConfig,Consts").asFunction(function o(e,t,n,r,i){return e.getValue(i.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)?t:e.getValue(i.UI_CHANGE_NOTIFIERS.AJAX_CALLS)?n:r})}).call(window)},function(e,t,n){(function(){n(515).register("SPAConfig").asCtor(function e(t,n){this.getValue=function r(e){return n.getValue(t.get(),"Settings.spaConfig."+e)}}).dependencies("SiteConfigManager, ObjectJpath")}).call(window)},function(e,t,n){(function(){n(515).register("ElementsRedrawer").asCtor(function e(){var u,l,n,c,d,f,r=!1;function i(){r=!1,d.remapTopIframes(),l.callListeners()}this.ready=function(e,t,n,r,i,o,a,s){t,u=n,l=r,c=o.wrapCustomerLog(e.LOG_FEATURES.UI_CHANGE_TRACKER),i,d=a,f=s},this.redrawElements=function(){u.libSetTimeout(function(){if(r)c("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);else{c("UIChangeTracker - UI change triggered",2),r=!0;var e=function t(){return parseInt(f.getValue("redrawTimeout"))||300}();c("UIChangeTracker - redrawing in "+e,4),n&&(n.clear(),n=undefined),n=u.libSetTimeout(i,e)}},0)},this.getRedrawerName=function(){return"ElementsRedrawer"}}).injectToReady().dependencies("Consts, Lib,TimerManager,UIChangeTracker, CommonUtils, Logger,IFramesManager, SPAConfig")}).call(window)},function(e,t,n){(function(){n(515).register("UIChangeTracker").asCtor(function Y(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,h){var m=this;m.init=function O(){m.triggerUIChangeAPI=P,T&&I();if(T=!0,!m.isEnabled())return;l.mapIframes();for(var e=[],t=0;t<v.length;t++)v[t].start(),v[t].isActivated()&&e.push(v[t].getSpaTypeName());h.init(),0<e.length?(w=!0,y("UIChangeTracker - Creating UIChangeTracker for types: "+e.join(", ")+". Using the following redrawer: "+s.getRedrawerName(),2)):y("UIChangeTracker - Did not activate",2)},m.isEnabled=function L(){return d.isWalkMeVisible()},m.stop=I,m.bind=function F(e){S.push(e)},m.bindPreListener=function M(e){E.push(e)},m.unbind=function R(e){_(E,e),_(S,e)},m.callListeners=function B(){C++,A(E),A(S),b={}},m.triggerUIChange=P,m.triggerThrottledUIChange=function U(e){e&&(b[e]=!0);!function n(e){D?N||(x=!0):(k(),N=D=!0,c.libSetTimeout(function t(){x&&(k(),c.libSetTimeout(t,p.get()));D=x;x=!1},p.get()),c.libSetTimeout(function(){N=!1},g.get()))}()},m.isActivated=function V(){return w},m.getElementRedrawerType=function W(){return"ElementsRedrawer"},m.getCurrentIndex=function j(){return C},m.triggerUIChangeAPI=function G(){y("UIChangeTracker - Not triggering UI Change. Wait For WalkMe to Load",2)};var v,y,S=[],E=[],w=!1,T=!1,C=0,b={};function I(){if(T=!1,m.isEnabled())for(var e=0;e<v.length;e++)v[e].isActivated()&&v[e].stop()}function _(e,t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}}function A(e){for(var t=e.length-1;0<=t;t--)try{e[t]({uiChangeIndex:C,notifiers:b})}catch(n){}}function P(e){e&&(b[e]=!0),k()}function k(){s.redrawElements()}var D=!1,x=!1,N=!1;!function H(){v=[t,n,r,i,o,a,f],y=u.wrapCustomerLog(e.LOG_FEATURES.UI_CHANGE_TRACKER)}()}).dependencies("Consts, HashChangeNotifier, HistoryChangeNotifier, IFrameLoadChangeNotifier,ClickChangeNotifier, AjaxCallsChangeNotifier, UserInputChangeNotifier, ElementsRedrawer,Logger, IFramesManager, TimerManager, WalkMeVisibilityChecker, MutationNotifier,UICTDefaultThrottleTimeWindow, UICTThrottleFirstEventBlockTimeWindow, CustomThrottleManager")}).call(window)},function(e,t,r){(function(){r(515).register("DummyAjaxConfig").asCtor(function n(e){this.name="Dummy ajax handler",this.handler=function t(){e.customerLog("That's a dummy ajax calls handler. If you see it, please check your configuration")},this.active=!1}).dependencies("Logger")}).call(window)},function(e,t,n){(function(){n(515).register("HashAjaxConfig").asCtor(function i(e,t,n){this.name="Hash on Ajax Calls",this.handler=function r(){e.hashChanged()&&t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)},this.active=!0}).dependencies("HashChecker,UIChangeTracker,Consts")}).call(window)},function(e,t,n){(function(){n(515).register("ThrottledAjaxConfig").asCtor(function r(e,t){this.name="Ajax Calls",this.handler=function n(){e.triggerThrottledUIChange(t.UI_CHANGE_NOTIFIERS.AJAX_CALLS)},this.active=!0}).dependencies("UIChangeTracker,Consts")}).call(window)},function(e,t,n){(function(){var g=n(515);g.register("AjaxCallsChangeNotifier").asCtor(function h(){var s,n,r,u,l,c,o,d,f,t=!1;function i(e){e.XMLHttpRequest&&(n=e.XMLHttpRequest.prototype.send,r=e.XMLHttpRequest.prototype.open,d.isFeatureEnabled("ajaxSpaLoad")?function t(e){var i=e.prototype.open;e.prototype.open=function(e,t){var n=f.registerEventHandler("load",function r(){l.customerLog("ajaxSpaOnLoad was called successfully following ajax load",3),n(),c.filter(t)&&o.handler()},!0,this);return i.apply(this,arguments)}}(e.XMLHttpRequest):function i(e){var n=e.prototype.send,r=e.prototype.open;e.prototype.open=function(e,t){return this._wmUrl=t,r.apply(this,arguments)};e.prototype.send=function(){var t=this;u.setWalkmeTimeout(function(){var e=t.onreadystatechange;t.onreadystatechange=function(){e&&e.apply(t,arguments),c.filter(t._wmUrl)&&o.handler()}},0),n.apply(this,arguments)}}(e.XMLHttpRequest))}function a(e){!e.ajaxCallsListenerSet&&e.documentAccessible&&(i(e.iframe.contentWindow),e.ajaxCallsListenerSet=!0)}function e(){l.customerLog("UIChangeTracker - Stopped listening to Ajax calls",2),p(window),function t(e){e.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{p(this.contentWindow),t(wmjQuery(this.contentWindow.document)),wmjQuery(this).off("load.wmAjaxResposive")}catch(e){l.customerLog("Ajax calls were not overridden for all iframes. (ajax calls ui tracker). This can occur for cross-domain iframes ",4)}})}(wmjQuery(document))}function p(e){e.XMLHttpRequest&&(e.XMLHttpRequest.prototype.send=n,e.XMLHttpRequest.prototype.open=r)}this.ready=function(e,t,n,r,i,o,a){e,s=t,u=n,l=r,c=i,d=o,f=a},this.start=function(){(o=g.get("SPAAjaxConfig")).active&&(function e(){i(window),s.foreachIframe(a,!0),s.onIframeLoad(function(e){e.ajaxCallsListenerSet=!1,a(e)})}(),t=!0)},this.stop=function(){e(),t=!1},this.isActivated=function(){return t},this.getSpaTypeName=function(){return o.name}}).injectToReady().dependencies("UIChangeTracker,IFramesManager, TimerManager, Logger, AjaxCallsChangeNotifierFilter, FeaturesManager, CommonUtils")}).call(window)},function(e,t,n){(function(){n(515).register("ClickChangeNotifier").asCtor(function t(){var o,a,s,u,l,e=!1;function n(){return a.getValue(l.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}function r(){o.triggerThrottledUIChange(l.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}this.ready=function(e,t,n,r,i){o=e,a=t,s=n,u=r,l=i},this.start=function(){n()&&(!function t(){u.customerLog("UIChangeTracker - clickSelector config defined. Listening to click events for "+n(),2);var e=s.decodeHtml(n(),["&",'"',"'"]);wmjQuery(document).on("mousedown.wmSpa",e,r),wmjQuery(document).on("click.wmSpa",e,r),wmjQuery(document).on("mouseup.wmSpa",e,r)}(),e=!0)},this.stop=function(){n()&&(wmjQuery(document).off("mousedown.wmSpa"),wmjQuery(document).off("click.wmSpa"),wmjQuery(document).off("mouseup.wmSpa")),e=!1},this.isActivated=function(){return e},this.getSpaTypeName=function(){return"Click"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,HtmlDecoder,Logger,Consts")}).call(window)},function(e,t,n){(function(){n(515).register("HashChangeNotifier").asCtor(function e(){var r,i,o,n=null,a=!1;this.ready=function(e,t,n){r=e,i=t,o=n},this.start=function(){!function e(){return i.getValue(o.UI_CHANGE_NOTIFIERS.HASH)&&!i.getValue(o.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)}()||(!function t(){n=window.onhashchange,window.onhashchange=function(){n&&n.apply(null,arguments),r.triggerUIChange(o.UI_CHANGE_NOTIFIERS.HASH)}}(),a=!0)},this.stop=function(){a&&(window.onhashchange=n,n=null,a=!1)},this.isActivated=function(){return a},this.getSpaTypeName=function(){return"Hash"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,Consts")}).call(window)},function(e,t,n){(function(){n(515).register("HistoryChangeNotifier").asCtor(function e(){var r,i,o,t=null,n=null,a=!1;this.ready=function(e,t,n){r=e,i=t,o=n},this.start=function(){i.getValue(o.UI_CHANGE_NOTIFIERS.HISTORY)&&(!function e(){window.history&&window.history.pushState&&(t=window.onpopstate,window.onpopstate=function(){t&&t.apply(null,arguments),r.triggerUIChange(o.UI_CHANGE_NOTIFIERS.HISTORY)},n||(n=window.history.pushState,window.history.pushState=function(){n.apply(window.history,arguments),r.triggerUIChange(o.UI_CHANGE_NOTIFIERS.HISTORY)}))}(),a=!0)},this.stop=function(){a&&(window.onpopstate=t,t=null,window.history.pushState=n,n=null,a=!1)},this.isActivated=function(){return a},this.getSpaTypeName=function(){return"History"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,Consts")}).call(window)},function(e,t,n){(function(){n(515).register("UserInputChangeNotifier").asCtor(function c(){var o,a,s,u,l,t=!1;function n(e){!e.userInputListenerSet&&e.documentAccessible&&(r(wmjQuery(e.iframe.contentWindow.document)),e.userInputListenerSet=!0)}function r(e){e.on("click.wmUITrack",i),e.on("dblclick.wmUITrack",i),e.on("mousedown.wmUITrack",i),e.on("mouseup.wmUITrack",i),a.getValue("userInputHoverOff")||(e.on("hover.wmUITrack",i),e.on("mouseenter.wmUITrack",i),e.on("mouseleave.wmUITrack",i),e.on("mousemove.wmUITrack",i),e.on("mouseout.wmUITrack",i),e.on("mouseover.wmUITrack",i)),e.on("keydown.wmUITrack",i),e.on("keypress.wmUITrack",i),e.on("keyup.wmUITrack",i)}function e(){u.customerLog("UIChangeTracker - Stopped listening to User Input",2),function t(e){e.off("click.wmUITrack");e.off("dblclick.wmUITrack");e.off("mousedown.wmUITrack");e.off("mouseup.wmUITrack");a.getValue("userInputHoverOff")||(e.off("hover.wmUITrack"),e.off("mouseenter.wmUITrack"),e.off("mouseleave.wmUITrack"),e.off("mousemove.wmUITrack"),e.off("mouseout.wmUITrack"),e.off("mouseover.wmUITrack"));e.off("keydown.wmUITrack");e.off("keypress.wmUITrack");e.off("keyup.wmUITrack");e.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{t(wmjQuery(this.contentWindow.document)),wmjQuery(this).off("load.wmUITrack")}catch(e){u.customerLog("User input change tracker did not stop listening for all iframes.. This can occur for cross-domain iframes ",4)}})}(wmjQuery(document))}function i(){o.triggerThrottledUIChange(l.UI_CHANGE_NOTIFIERS.USER_INPUT)}this.ready=function(e,t,n,r,i){o=e,a=t,s=n,u=r,l=i},this.start=function(){a.getValue(l.UI_CHANGE_NOTIFIERS.USER_INPUT)&&(!function e(){r(wmjQuery(document)),s.foreachIframe(n,!0),s.onIframeLoad(function(e){e.userInputListenerSet=!1,n(e)})}(),t=!0)},this.stop=function(){e(),t=!1},this.isActivated=function(){return t},this.getSpaTypeName=function(){return"User input"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,IFramesManager,Logger,Consts")}).call(window)},function(e,t,n){(function(){n(515).register("IFrameLoadChangeNotifier").asCtor(function e(){var a,s,u,l,c,d,t=!1;function o(e){wmjQuery(e).find(p()).on("load.wmSpa",function(){a.triggerUIChange(u.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)})}function f(e){!e.iframeLoadListenerSet&&e.documentAccessible&&(o(wmjQuery(e.iframe.contentWindow.document)),e.iframeLoadListenerSet=!0)}function p(){var e=s.getValue(u.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR);return c.decodeHtml(e,["&",'"',"'"])}function g(e){e.iframeLoadListenerSet||(wmjQuery(e.iframe).on("load.wmSpa",function(){a.triggerUIChange(u.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)}),e.iframeLoadListenerSet=!0)}this.ready=function(e,t,n,r,i,o){a=e,s=t,l=n,c=r,d=i,u=o},this.start=function(){s.getValue(u.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)!=undefined&&(!function i(){var t,e=p(),n=!e,r=n?"all iframes/frames":e;d.customerLog("UIChangeTracker - iframeLoadSelector config defined. Listening to iframe load events for "+r,2),t=n?g:(o(document),f),l.foreachIframe(t,!0),l.onIframeLoad(function(e){e.iframeLoadListenerSet=!1,t(e)})}(),t=!0)},this.stop=function(){var e=p();e&&wmjQuery(e).off("load.wmSpa"),t=!1},this.isActivated=function(){return t},this.getSpaTypeName=function(){return"IFrame load"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,IFramesManager,HtmlDecoder,Logger,Consts")}).call(window)},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(515),t=a(73),n=(r.prototype.ready=function(e,t,n,r){this._featuresManager=r,this._mutationObserver=e,this._mutationFilter=t,this._uiChangeTracker=n},r.prototype.start=function(){this._mutationObserverAvailable&&this.shouldListenToMutations()&&(this.listenForChange(),this._isActivated=!0)},r.prototype.listenForChange=function(){var n=this;this._mutationObserver.bind(function(e,t){return n.emitUIChange(e,t)})},r.prototype.stop=function(){this._isActivated&&(this._mutationObserver.cleanResources(),this._isActivated=!1)},r.prototype.isActivated=function(){return this._isActivated},r.prototype.getSpaTypeName=function(){return"MutationObserver"},r.prototype.emitUIChange=function(e,t){this._mutationFilter.isMutationRelevant(t)&&this._uiChangeTracker.triggerThrottledUIChange()},r.prototype.shouldListenToMutations=function(){return this._featuresManager.isFeatureEnabled("mutationObserverSpa")},r=i([t.ProvideLocal("MutationNotifier",{ctx:e,dependencies:"MutationObserverWrapper, MutationFilter, UIChangeTracker, FeaturesManager",injectToReady:!0})],r));function r(){this._mutationObserverAvailable=!!window.MutationObserver}o.MutationNotifier=n}).call(window)}).call(this,a(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(515),t=a(73),n=(r.prototype.isMutationRelevant=function(e){var t=this;return this.arrayUtils.any(e,function(e){return t.relevantMutationFilter(e)})},r.prototype.relevantMutationFilter=function(e){var t=this;return!(this.isWalkMeNode(e.target)||!this.arrayUtils.any(e.removedNodes,function(e){return t.isNotWalkMeNode(e)})&&!this.arrayUtils.any(e.addedNodes,function(e){return t.isNotWalkMeNode(e)})&&!this.attributeChangeFilter(e))},r.prototype.attributeChangeFilter=function(e){return e.attributeName&&"ID"!=e.attributeName.toUpperCase()&&"HEAD"!=e.target.tagName.toUpperCase()},r.prototype.isNotWalkMeNode=function(e){return!this.isWalkMeNode(e)},r.prototype.isWalkMeNode=function(e){var t=e.id;if(t&&t.indexOf&&(0<=t.indexOf("walkme")||0<=t.indexOf("wm-")))return!0;var n=e.className;return n&&n.indexOf&&(0<=n.indexOf("walkme")||0<=n.indexOf("wmd-")||0<=n.indexOf("wm-"))},r=i([t.ProvideLocal("MutationFilter",{ctx:e,dependencies:"ArrayUtils"})],r));function r(e){this.arrayUtils=e}o.MutationFilter=n}).call(window)}).call(this,a(72))},function(e,t,n){(function(){n(515).register("AjaxCallsChangeNotifierFilter").asCtor(function e(r,i){this.filter=function(e){if(!e)return!0;var t=r.get();if(0===e.indexOf(t))return!1;var n=i.get();return 0!==e.indexOf(n)}}).dependencies("EventServerBaseUrlProvider, RecorderServerManager")}).call(window)},function(e,t,n){(function(){n(515).register("ChangesTrackerFactory").asCtor(function s(e,t,n,r){var i;this.get=function o(){return i},function a(){i=e.isFeatureEnabled(t.FEATURES.pageChangeTracking)?r:n}()}).dependencies("FeaturesManager, AnalyticsTrackerConsts, UIChangeTracker, PageChangeTracker")}).call(window)},function(e,t,n){(function(){var e=n(515);e.register("UICTDefaultThrottleTimeWindow").asCtor(e.get("GetterSetterManager")).args(2e3),e.register("UICTThrottleFirstEventBlockTimeWindow").asCtor(e.get("GetterSetterManager")).args(250)}).call(window)},function(e,t,n){(function(){n(515).register("CustomThrottleManager").asCtor(function h(t,n,r,i,s,o,u,l,c,e){var d=5e3,f="click",p=e.wrapCustomerLog("CustomThrottleManager");function a(t,e){e&&o.forEach(e,function(e){e.selector&&!function a(t,e,n,r,i){function o(){var e=t.get();s.setWalkmeTimeout(function(){t.set(e),p("Original throttle restored")},i),t.set(r),p("Custom throttle set")}wmjQuery(document).on(e,n,o),l.on(c.EVENTS.BeforeWalkmeRemoved,function(){wmjQuery(document).off(e,n,o)})}(t,e.event?e.event:f,u.decodeString(e.selector),e.throttle,e.ttl?e.ttl:d)})}this.init=function g(){var e=i.getValue(r.get(),"Custom.spa.throttle")||{};a(t,e.throttleTime),a(n,e.firstEventBlock)}}).dependencies("UICTDefaultThrottleTimeWindow, UICTThrottleFirstEventBlockTimeWindow, SiteConfigManager, ObjectJpath, TimerManager, ArrayUtils, HtmlDecoder, WmInternals, Consts, Logger")}).call(window)},function(e,t,n){(function(e){(function(){e.register("ClickIconExecutionBehavior").asCtor(n(538)).asProto().dependencies("CommonUtils, FeaturesManager"),e.register("TolltipIconUiBehavior").asCtor(n(539)).asProto().dependencies("HtmlDecoder"),e.register("IconCreator").asCtor(n(540)),e.register("IconCreatorParamsProvider").asCtor(n(567)).dependencies("Consts, CommonUtils, SharedConsts"),e.register("IconContentProvider").asCtor(n(568))}).call(window)}).call(this,n(2))},function(e,t){(function(){e.exports=function u(e,r,t){var i,o;this.applyBehavior=function n(e){!function t(e){e.click(function(e){!function n(){var e=(new Date).getTime(),t=e-o;if(null!=o&&t<=a)return!1;return o=e,!0}()||((r.isFeatureEnabled("accessibility")||r.isFeatureEnabled("jawsAccessibility"))&&wmjQuery(this).blur(),i())})}(e.getTopMostElement())};var a=2e3;(function s(e){i=e.clickAction}).apply(null,[t])}}).call(window)},function(e,t){(function(){e.exports=function r(o,e){var a;this.applyBehavior=function t(e){!function i(e){var t=e.getTopMostElement(),n=function r(){return o.decodeHtml(a,["&",'"',"'",">","<"])}();t.attr("title",n)}(e)},function n(e){a=e.tooltipText}.apply(null,[e])}}).call(window)},function(t,e,s){(function(){t.exports=function e(){var r=s(541),i=s(542),o=s(543);this.create=function a(e){var t=[i,r],n={concreteIcon:o.create(e),behaviors:t,iconElementUniqueIdentifier:"walkme-icon-root-"+e.uniqueIdentifierType+"-"+e.uniqueIdentifierId};return new(s(565))(n)}}}).call(window)},function(e,t,n){(function(){var t=n(311);e.exports=new function s(){var n=t.get("FeaturesManager"),i=t.get("SiteConfigManager"),o=t.get("PropagationStopper"),a=t.get("Consts");this.applyBehavior=function r(e){!function t(e){e.click(function(e){e.preventDefault(),e.stopPropagation()}),e.hover(function(e){e.stopPropagation()}),n.isFeatureEnabled(a.FEATURES.IconExecutionAdditionalSp)&&function r(e){var t=function n(){return i.get().Custom.IconExecutionSpEvents||{events:["mousedown","mouseup"]}}();o.addEventStopPropagation(e,t.events)}(e)}(e.getTopMostElement())},function e(){}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){var t=r(311);e.exports=new function n(){var i=t.get("CommonUtils");this.applyBehavior=function o(e){var t=e.getTopMostElement();(function n(e){i.addTabIndex(e)})(t),function r(e){e.css("cursor","pointer")}(t)},function e(){}.apply(null,arguments)}}).call(window)},function(n,e,r){(function(){var e=r(311),l=r(544),c=r(546),d=r(552),f=r(562);n.exports=new function t(){var o=e.get("ElementEmbedderFactory"),a=e.get("EmbedmentTypeProvider"),s=e.get("Consts");this.create=function u(e){var t=function n(e){var t={embedder:o.get(e.element,e.isEmbedInElement),perimeterType:e.perimeterType,attachmentSide:e.attachmentSide,positionCustomOffset:e.positionCustomOffset,growingDirection:e.growingDirection,element:e.element};return new l(t)}(e);return e.contentData.kind!=s.ICON_CONTENT_KIND.Image?function i(e,t){var n=a.get(t.isEmbedInElement,t.element),r={headToEmbedFontsIn:f.get(n).get(t.element),text:t.contentData.text,cssClasses:t.cssClasses,zindex:t.zindex,iconEmbedder:e};t.contentData.cssClassName&&t.cssClasses.positionElementCssClassNames.push(t.contentData.cssClassName);return new c(r)}(t,e):function r(e,t){var n={contentData:t.contentData,cssClasses:t.cssClasses,zindex:t.zindex,iconEmbedder:e,isAnimated:t.isAnimated};return new d(n)}(t,e)}}}).call(window)},function(e,t,n){(function(){var f=n(311),p=n(545);e.exports=function g(e){var t,n,r,i,o,a=f.get("CustomCssSetter");function s(e){return p.refine(e,i)}this.embed=function u(e){return a.setCustomCssIfNeeded(o),t.embed(e,n,r,{refine:s}).then(function(){return t.getElement()})},this.reposition=function l(){return t.reposition(n,r,{refine:s})},this.destroy=function c(){t.destroy()},function d(){t=e.embedder,n=e.perimeterType,r=e.attachmentSide,i=e.positionCustomOffset,e.growingDirection,o=e.element}()}}).call(window)},function(t,e){(function(){t.exports=new function e(){this.refine=function i(e,t){var n={top:e.top,left:e.left};return function r(e,t){e.top+=t.top,e.left+=t.left}(n,t),n}}}).call(window)},function(e,t,n){(function(){var g=n(311),h=n(547),m=n(548),v=n(550),y=n(551);e.exports=function S(e){var t,n,r,i,o,a=g.get("Consts"),s=g.get("PlatformDI"),u=undefined;function l(){var e=h.create(n),t=m.createElement(e,r,i);return o.embed(t)}s.register(a.PLATFORM.Web,function(){u=v}),s.register(a.PLATFORM.MobileWeb,function(){u=y}),this.show=function c(){return u.load(t).then(l)},this.reposition=function d(){return o.reposition()},this.destroy=function f(){o.destroy()},function p(){t=e.headToEmbedFontsIn,n=e.text,r=e.cssClasses,i=e.zindex,o=e.iconEmbedder}()}}).call(window)},function(e,t,i){(function(){e.exports=new function t(){var n=i(311).get("DomManager");this.create=function r(e){var t=mtjQuery(document.createElement("div"));return n.setInnerHTML(t,e),t},function e(){}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){e.exports=new function t(){var e=n(311),a=e.get("CssClassesAppender"),s=e.get("DomManager"),u=n(549);this.createElement=function l(e,t,n){!function i(e,t){a.appendClasses(e,["walkme-icon-image-div"]),a.appendClasses(e,t)}(e,t.contentElementCssClassNames);var r=u.create(n);return function o(e,t){a.appendClasses(e,["walkme-custom-icon-outer-div"]),a.appendClasses(e,t)}(r,t.positionElementCssClassNames),s.setInnerHTML(r,e),r}}}).call(window)},function(e,t,n){(function(){var t=n(311);e.exports=new function o(){var n=t.get("UiUtils"),r=t.get("TopMostCssStyleSettter");this.create=function i(e){var t=mtjQuery(document.createElement("div"));return n.addBrowserSpecificClasses(t),n.setLangAttribute(t),t.css("position","absolute"),t.css("display","inline"),t.css("left",0),t.css("top",0),r.setTopMostCssStyle(t,e),t},function e(){}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(o){(function(){var t=r(311);e.exports=new function n(){var r=t.get("ResourceManager"),i=t.get("FontsData");this.load=function e(n){return new o(function(e,t){r.fonts([i.get("walkme-opensans"),i.get("walkme-notosans")],n,e,t)})}}}).call(window)}).call(this,r(29))},function(e,t,r){(function(o){(function(){var t=r(311);e.exports=new function n(){var r=t.get("ResourceManager"),i=t.get("FontsData");this.load=function e(n){return new o(function(e,t){r.fonts([i.get("walkme-opensans"),i.get("lib-font")],n,e,t)})}}}).call(window)}).call(this,r(29))},function(e,t,n){(function(){var m=n(311),v=n(553),y=n(554),S=n(557),E=n(561),w=n(548);e.exports=function T(e){var t,n,r,i,o,a,s=m.get("Consts");function u(e){a=S.getStates(e,o)}function l(){var t=v.create();d(t,s.ICON_CONTENT_STATE.Regular);var e=w.createElement(t,n,r);return i.embed(e).then(function(e){return t=e.getOriginElement().children().first(),E.bind(t,a,c),e})}function c(e,t){d(e,t),f()}function d(e,t){a[t].applyState(e)}function f(){return i.reposition()}this.show=function p(){return y.load(t).then(u).then(l)},this.reposition=f,this.destroy=function g(){i.destroy()},function h(){t=e.contentData,n=e.cssClasses,r=e.zindex,i=e.iconEmbedder,o=e.isAnimated}()}}).call(window)},function(e,t){(function(){e.exports=new function n(){this.create=function t(){var e=mtjQuery(document.createElement("div"));return e.css("background-repeat","no-repeat"),e},function e(){}.apply(this,arguments)}}).call(window)},function(e,t,n){(function(a){(function(){var t=n(311),i=n(555);e.exports=new function o(){var e=t.get("ImageLoader");function n(r,i,o){return new a(function(n){e.getImageSize(r[i],function(e){var t={};t[o]=e,t[i]=r[i],n(t)})})}this.load=function r(e){i.convert(e);var t=[n(e,"mainImageUrl","mainImageSize")];e.hoverImageUrl&&t.push(n(e,"hoverImageUrl","hoverImageSize"));e.clickImageUrl&&t.push(n(e,"clickImageUrl","clickImageSize"));return a.all(t).then(function(e){for(var t={},n=0;n<e.length;n++)t=wmjQuery.extend(t,e[n]);return t})}}}).call(window)}).call(this,n(29))},function(t,e,n){(function(){var r=n(556);t.exports=new function e(){function t(e){return!e||function t(e){return 0==e.indexOf("http")}(e)?e:r.get()+e}this.convert=function n(e){e.mainImageUrl=t(e.mainImageUrl),e.hoverImageUrl=t(e.hoverImageUrl),e.clickImageUrl=t(e.clickImageUrl)}}}).call(window)},function(e,t,i){(function(){var n=i(311);e.exports=new function r(){var e=n.get("ResourceManager");this.get=function t(){return e.getResourcePath("/player/resources/launchers/")}}}).call(window)},function(n,e,r){(function(){var e=r(311),u=r(558);n.exports=new function t(){var a=e.get("Consts");this.getStates=function s(e,t){var n={},r=u.get(t,e.mainImageUrl,e.mainImageSize);if(n[a.ICON_CONTENT_STATE.Regular]=r,e.clickImageSize){var i=u.get(t,e.clickImageUrl,e.clickImageSize);n[a.ICON_CONTENT_STATE.Click]=i}if(e.hoverImageSize){var o=u.get(t,e.hoverImageUrl,e.hoverImageSize);n[a.ICON_CONTENT_STATE.Hover]=o}return n}}}).call(window)},function(e,t,n){(function(){var o=n(559),a=n(560);e.exports=new function t(){this.get=function i(e,t,n){var r={imageUrl:t,imageSize:n};return e?new o(r):new a(r)},function e(){}.apply(null,arguments)}}).call(window)},function(e,t){(function(){e.exports=function n(e){var r,i;this.applyState=function o(e){e.stop(),function t(e){e.css("background-image",'url("'+i+'")')}(e),function n(e){e.animate({width:r.width+"px",height:r.height+"px"})}(e)},function t(e){r=e.imageSize,i=e.imageUrl}.apply(null,[e])}}).call(window)},function(e,t){(function(){e.exports=function n(e){var r,i;this.applyState=function o(e){(function t(e){e.css("background-image",'url("'+i+'")')})(e),function n(e){e.css("height",r.height+"px"),e.css("width",r.width+"px")}(e)},function t(e){r=e.imageSize,i=e.imageUrl}.apply(null,[e])}}).call(window)},function(n,e,r){(function(){var e=r(311);n.exports=new function t(){var a=e.get("Consts");this.bind=function i(e,t,n){t[a.ICON_CONTENT_STATE.Hover]&&!function r(e,t){e.hover(function(){t(e,a.ICON_CONTENT_STATE.Hover)},function(){t(e,a.ICON_CONTENT_STATE.Regular)})}(e,n);t[a.ICON_CONTENT_STATE.Click]&&!function o(e,t,n){var r=function i(e){return e[a.ICON_CONTENT_STATE.Hover]?a.ICON_CONTENT_STATE.Hover:a.ICON_CONTENT_STATE.Regular}(t);e.on("touchend mouseup",function(){n(e,r)}).on("touchstart mousedown",function(){n(e,a.ICON_CONTENT_STATE.Click)})}(e,t,n)}}}).call(window)},function(t,e,n){(function(){var e=n(311),r=n(563),i=n(564);t.exports=new function o(){this.get=function n(e){return e!=t.EMBEDMENT_TYPE.EmbedInTopDocument?r:i};var t=e.get("Consts")}}).call(window)},function(t,e){(function(){t.exports=new function e(){this.get=function t(e){return wmjQuery("head",e[0].ownerDocument)}}}).call(window)},function(e,t){(function(){e.exports=new function t(){this.get=function e(){return wmjQuery("head")}}}).call(window)},function(e,t,n){(function(){var h=n(311),m=n(566);e.exports=function v(e){var t,r,i,o,n=h.get("ElementAttacher");this.show=function a(){return t.show().then(function(e){return o=e,function t(){var e=o.getTopMostElement();e.addClass(r),e.addClass("walkme-not-embed")}(),function n(){m.applyBehaviors(o,i)}(),o})},this.destroy=function s(){o&&(n.detachByElement(o.getTopMostElement()),o=undefined);t.destroy()},this.reposition=function u(){t.reposition()},this.getIconElement=function l(){return o},this.addCssClasses=function c(e){var t=o.getTopMostElement();e="string"==typeof e?[e]:e;for(var n=0;n<e.length;n++)t.addClass(e[n])},this.isDrawn=function d(){try{return 0<o.getOriginElement().parents("html").length}catch(e){return!1}},this.hide=function f(e){e?o.getOriginElement().css("display","none"):o.getOriginElement().hide()},this.display=function p(){o.getOriginElement().show()},function g(){t=e.concreteIcon,r=e.iconElementUniqueIdentifier,i=e.behaviors}()}}).call(window)},function(t,e){(function(){t.exports=new function e(){this.applyBehaviors=function r(e,t){for(var n=0;n<t.length;n++){t[n].applyBehavior(e)}}}}).call(window)},function(t,e){(function(){t.exports=function e(n,r,i){this.get=function o(e,t){r.defaultValue(t.isAnimated,!1);return{element:e,uniqueIdentifierType:t.uniqueIdentifierType,uniqueIdentifierId:t.uniqueIdentifierId,isEmbedInElement:r.defaultValue(t.isEmbedInElement,!1),contentData:t.contentData,isAnimated:t.isAnimated,attachmentSide:t.attachmentSide,zindex:r.defaultValue(t.zindex,i.deployableDefaultAttributes.zIndex.icon.toString()),perimeterType:parseInt(r.defaultValue(t.perimeterType,n.POSITION_PERIMETER_TYPE.Outside)),positionCustomOffset:{top:parseInt(r.defaultValue(t.positionTopCustomOffset,0)),left:parseInt(r.defaultValue(t.positionLeftCustomOffset,0))},cssClasses:{contentElementCssClassNames:t.contentElementCssClassNames,positionElementCssClassNames:t.positionElementCssClassNames}}}}}).call(window)},function(e,t,a){(function(){e.exports=function o(){var t=a(569),n=a(570),r=a(571);this.get=function i(e){return e.TemplateId?"htmlShape"==e.Type?n.getFromCustomTemplate(e.TemplateId):r.getFromCustomTemplate(e.TemplateId):"htmlShape"==e.Type?n.getFromSettingsImageObject(e.Predefined):t.getFromSettingsImageObject(e.Predefined)},function e(){}.apply(null,arguments)}}).call(window)},function(e,t,o){(function(){e.exports=new function t(){var e=o(311),n=e.get("CommonUtils"),r=e.get("Consts");this.getFromSettingsImageObject=function i(e){var t=e.data.shape+"-"+e.data.color;return{mainImageUrl:t+".png",kind:r.ICON_CONTENT_KIND.Image,hoverImageUrl:n.isValueTrue(e.data.hover)?t+"-hover.png":null,clickImageUrl:n.isValueTrue(e.data.click)?t+"-click.png":null}}}}).call(window)},function(e,t,a){(function(){e.exports=new function o(){var e=a(311),n=e.get("HtmlShapesProvider"),r=e.get("Consts");this.getFromSettingsImageObject=function t(e){return{text:e.data.customText,cssClassName:e.data.customClass,kind:r.ICON_CONTENT_KIND.Text}},this.getFromCustomTemplate=function i(e){var t=n.getById(e);return{text:t.Text,kind:r.ICON_CONTENT_KIND.Text,cssClassName:"html-launcher-"+t.Shape+"-"+t.Color}}}}).call(window)},function(n,e,r){(function(){var e=r(311);n.exports=new function t(){var n=e.get("CustomImagesProvider"),r=e.get("Consts");this.getFromCustomTemplate=function i(e){var t=n.getById(e);return t?{mainImageUrl:t.Url,hoverImageUrl:t.Hover,clickImageUrl:t.Click,text:t.CustomText,cssClassName:"custom-launcher-"+e,kind:t.Url?r.ICON_CONTENT_KIND.Image:r.ICON_CONTENT_KIND.Text}:null}}}).call(window)},function(t,e,n){(function(){var l=n(573),c={init:function d(){var e=l.get("SmartTipSetsManager"),t=l.get("SmartTipEventSender"),n=l.get("SmartTipHighlighterDrawerCreator"),r=l.get("SmartTipComponentDrawerConfigurationProvider"),i=l.get("SmartTipDrawerOptionsProvider"),o=l.get("SmartTipSetActivationInitiator"),a=l.get("DisabledSmartTipsRemover"),s=l.get("SmartTipIconStylingProvider"),u=l.get("SmartTipDrawersCreator");c.smartTipSetsManager={},c.smartTipSetsManager.init=e.init,c.smartTipSetsManager.getAll=e.getAll,c.smartTipSetsManager.getSetManagerById=e.getSetManagerById,c.smartTipSetsManager.turnOffAllSets=e.turnOffAllSets,c.smartTipEventSender={},c.smartTipEventSender.postSetActivatedEvent=t.postSetActivatedEvent,c.smartTipEventSender.postSmartTipSegmentedEvent=t.postSmartTipSegmentedEvent,c.smartTipEventSender.postValidationFailedEvent=t.postValidationFailedEvent,c.smartTipEventSender.postValidationPassedEvent=t.postValidationPassedEvent,c.smartTipEventSender.postTooltipShownEvent=t.postTooltipShownEvent,c.smartTipEventSender.postElementEvent=t.postElementEvent,c.smartTipHighlighterDrawerCreator={},c.smartTipHighlighterDrawerCreator.create=n.create,c.smartTipComponentDrawerConfigurationProvider={},c.smartTipComponentDrawerConfigurationProvider.getConfig=r.getConfig,c.smartTipDrawerOptionsProvider={},c.smartTipDrawerOptionsProvider.getTooltipDrawerOptions=i.smartTipDrawerOptionsProvider,c.smartTipSetActivationInitiator={},c.smartTipSetActivationInitiator.start=o.start,c.smartTipSetActivationInitiator.stop=o.stop,c.disabledSmartTipsRemover={},c.disabledSmartTipsRemover.remove=a.remove,c.smartTipIconStylingProvider={},c.smartTipIconStylingProvider.get=s.get,c.smartTipDrawersCreator={},c.smartTipDrawersCreator.getIconDrawer=u.getIconDrawer,c.smartTipDrawersCreator.getStaticTooltipDrawer=u.getStaticTooltipDrawer,c.smartTipDrawersCreator.getInteractiveTooltipDrawer=u.getInteractiveTooltipDrawer,c.smartTipDrawersCreator.getHighlighterDrawer=u.getHighlighterDrawer},services:["SmartTipSetsManager","SmartTipEventSender","SmartTipHighlighterDrawerCreator","SmartTipComponentDrawerConfigurationProvider","SmartTipDrawerOptionsProvider","SmartTipSetActivationInitiator","DisabledSmartTipsRemover","SmartTipIconStylingProvider","SmartTipDrawersCreator"],types:["SmartTip","SmartTipTooltipDrawer","ChainedSmartTipComponentDrawer"]};!function e(){n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613)}(),n(69).registerApi(c,l),t.exports=c}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(573).register("InfoAndValidationsSmartTipComponentsActivator").asCtor(function s(n,e){var r,i;function o(){var e=[r.destroy(),i.destroy()];return n.executeParallely(e)}this.activate=function a(e){o();var t=[r.activate(e),i.activate(e)];return n.executeParallely(t)},this.destroy=o,function t(){r=e.infoComponentActivator,i=e.validationsComponentActivator}()}).asProto().dependencies("PromiseUtils")}).call(window)},function(e,t,n){(function(){n(573).register("InfoSmartTipComponentsActivator").asCtor(function s(t,e){var n,r;this.activate=function i(e){return(r=t.get(n,n.Info)).draw(e)},this.destroy=function o(){return r?r.destroy():wmjQuery.when()},function a(){n=e.smartTipModel}()}).asProto().dependencies("SmartTipComponentDrawerFactory")}).call(window)},function(e,t,n){(function(){var s=n(573);s.register("SmartTipComponentsActivatorFactory").asCtor(function e(t){function o(e){var t={smartTipModel:e};return s.create("InfoSmartTipComponentsActivator",t)}function a(e){var t={smartTipModel:e};return s.create("ValidationsSmartTipComponentsActivator",t)}this.get=function n(e){switch(e.Mode){case t.SMART_TIP.MODE.OnlyInfo:return o(e);case t.SMART_TIP.MODE.OnlyValidations:return a(e);case t.SMART_TIP.MODE.InfoAndValidations:return function i(e){var t=o(e),n=a(e),r={infoComponentActivator:t,validationsComponentActivator:n};return s.create("InfoAndValidationsSmartTipComponentsActivator",r)}(e);default:throw new Error("Unsupported smartTipMode: "+e.Mode)}}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(573).register("ValidationsComplexConditionIndicator").asCtor(function e(r){function i(e){if("Func"!=e.nodeType)return!1;var t=0===e.funcName.indexOf("Element"),n=0===e.funcName.indexOf("jQuery");return t||n}this.containsComplexCondition=function o(e){if(!e)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(n.ConditionTrees&&n.ConditionTrees.Validation)if(r.anyMatchesCondition(n.ConditionTrees.Validation,i))return!0}return!1}}).dependencies("ConditionTreeUtils")}).call(window)},function(e,t,n){(function(){n(573).register("ValidationsSmartTipComponentsActivator").asCtor(function T(i,e,o,a,r,t){var s,u,l,c,d,f,p;function g(){return p=!0,l.drawValidationFeedback(s)}function h(e,t,n){t&&t.shouldValidate&&s&&r.libSetTimeout(function(){g().then(function(){var e=n&&n.sender==s[0];l.applyBehaviorOnFeedback({tooltipStartShown:e})})},0)}function m(){wmjQuery(f).off(i.SMART_TIP_INNER_EVENTS.CheckValidations)}function v(){if(d&&s){var e=S(d);a.off(s,u,e)}}function y(t){return function(e){p&&c.evaluate(t,{sender:e.target})}}function S(e){for(var t=[],n=0;n<e.length;n++){var r=e[n]+"."+f.Id;t.push(r)}return t}this.activate=function E(e){return s=e,p=!f.Settings.validateThruLauncher,m(),function t(){wmjQuery(f).on(i.SMART_TIP_INNER_EVENTS.CheckValidations,g)}(),function n(){var e=o.get(f,s,h);u=e.activationElementsSelector,c=e.stateMachine,d=e.elementEvents}(),v(),function r(){if(!d||!s)return;for(var e=S(d),t=0;t<e.length;t++)a.on(s,u,e[t],y(d[t]))}(),wmjQuery.when()},this.destroy=function n(){return m(),v(),c&&(c.reset(),c=null),s=u=null,l.removeValidationFeedback()},function w(){l=e.create(t.smartTipModel),f=t.smartTipModel}()}).asProto().dependencies("Consts, ValidationsSmartTipComponentDrawerCreator, ValidationsSmartTipStateMachineProvider, DocumentElementEventsBinder, TimerManager")}).call(window)},function(e,t,n){(function(){n(573).register("ValidationsSmartTipStateMachineConfiguration").asFunction(function i(e){var t={dontCheck:"dontCheck",delayValidationCheck:"delayValidationCheck",checkValidation:"checkValidation"},n=".walkme.smarttip.validation",r={onFocusOut:"blur"+n,onFocus:"focus"+n,onKeyDown:"keydown"+n,onChange:"change"+n};return{initialState:t.dontCheck,timedOutTransitions:[{fromState:t.delayValidationCheck,timeout:500,toState:t.checkValidation}],defaultTransitionValuesToReturn:[{toState:t.checkValidation,valueToReturn:{shouldValidate:1}}],keyDownTransitions:[{fromState:"*",onAction:r.onKeyDown,toState:t.delayValidationCheck}],keyDownEvents:[r.onKeyDown],focusTransitions:[{fromState:"*",onAction:r.onFocusOut,toState:t.checkValidation},{fromState:"*",onAction:r.onFocus,toState:t.dontCheck}],focusEvents:[r.onFocus,r.onFocusOut],changeTransitions:[{fromState:"*",onAction:r.onChange,toState:t.checkValidation}],changeEvents:[r.onChange]}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(573).register("ValidationsSmartTipStateMachineProvider").asCtor(function t(s,u,l,e,c){this.get=function f(e,t,n){var r=s.focusTransitions,i=s.focusEvents,o=c.containsComplexCondition(e.Validations);e.Settings.validateWhileTyping&&(r=r.concat(s.keyDownTransitions),i=i.concat(s.keyDownEvents));(l.isSelectInput(t)||o)&&(r=r.concat(s.changeTransitions),i=i.concat(s.changeEvents));return{stateMachine:function a(e,t){var n={initState:s.initialState,timedOutTransitions:s.timedOutTransitions,defaultTransitionValuesToReturn:s.defaultTransitionValuesToReturn,onStateChangedCallback:t,transitions:e};return u.create(n)}(r,n),elementEvents:i,activationElementsSelector:o?d:t}};var d="*"}).dependencies("ValidationsSmartTipStateMachineConfiguration, StatesMachineCreator, HtmlElementsDataProvider, Consts, ValidationsComplexConditionIndicator")}).call(window)},function(e,t,n){(function(){var a=n(573);a.register("SmartTipHighlighterDrawerCreator").asCtor(function e(){this.create=function o(e,t,n,r){var i={drawableType:t,drawableId:e,highlighterCustomStyling:n,smartTipModel:r};return a.create("SmartTipHighlighterDrawer",i)}})}).call(window)},function(e,t,n){(function(){n(573).register("ChainedSmartTipComponentDrawer").asCtor(function h(a,i,e){var s,o,u;this.draw=function d(e){return r(function(){return function o(e){u=l.Drawing;for(var t=[],n=0;n<s.length;n++){var r=s[n];t.push(r.draw)}var i=a.executePromiseChain(t,e);return i.always(function(){u=l.Drawn}),i}(wmjQuery(e))},t,l.Destroying)},this.applyBehavior=function f(e){for(var t=0;t<s.length;t++)s[t].applyBehavior&&s[t].applyBehavior(e)},this.destroy=function p(){return r(c,n,l.Drawing)};var l={Drawing:"drawing",Drawn:"drawn",Destroying:"destroying",Destroyed:"destroyed"},t=[l.Drawing,l.Drawn],n=[l.Destroying,l.Destroyed];function r(e,t,n){return function r(e){return-1!=i(u,e)}(t)?o:o=u==n?o.then(e):e()}function c(){u=l.Destroying;for(var e=[],t=s.length-1;0<=t;t--){var n=s[t];e.push(n.destroy)}var r=a.executePromiseChain(e);return r.always(function(){u=l.Destroyed}),r}!function g(){s=e.drawers}()}).asProto().dependencies("PromiseUtils, inArrayFunc")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipComponentDrawerConfigurationProvider").asCtor(function e(){this.getConfig=function t(e){return{shouldDrawIcon:e.IsWithIcon,shouldDrawTooltip:!!e.TooltipText,shouldDrawHighlighter:e.IsWithHighlighter}}})}).call(window)},function(e,t,n){(function(){var l=n(573);l.register("SmartTipDrawersCreator").asCtor(function e(i){function o(e,t,n){var r={smartTipModel:n,smartTipUiComponentModel:e,globalStyling:t};return l.create("SmartTipTooltipDrawer",r)}this.getIconDrawer=function a(e,t,n){var r={smartTipModel:e,smartTipUiComponentModel:t,globalStyling:n};return l.create("SmartTipIconDrawer",r)},this.getStaticTooltipDrawer=o,this.getInteractiveTooltipDrawer=function s(e,t,n){var r={smartTipComponentModel:e,tooltipDrawer:o(e,t,n)};return l.create("SmartTipInteractiveTooltipDrawer",r)},this.getHighlighterDrawer=function u(e,t,n){var r={};return r["z-index"]=e&&e.Settings&&e.Settings["z-index"],r=wmjQuery.extend({},n.Highlighter,r),i.create(t.Id,"smartTipUiComponent",r,e)}}).dependencies("SmartTipHighlighterDrawerCreator")}).call(window)},function(e,t,n){(function(){var d=n(573);d.register("SmartTipComponentDrawerFactory").asCtor(function e(l,n,c){this.get=function r(e,t){return function u(e,t,n){var r=l.getConfig(t),i=[];if(r.shouldDrawHighlighter){var o=c.getHighlighterDrawer(e,t,n);i.push(o)}if(r.shouldDrawIcon){var a=c.getIconDrawer(e,t,n);i.push(a)}if(r.shouldDrawTooltip){var s=c.getInteractiveTooltipDrawer(t,n,e);i.push(s)}return d.create("ChainedSmartTipComponentDrawer",{drawers:i})}(e,t,n.get(t.GlobalStyleId))}}).dependencies("SmartTipComponentDrawerConfigurationProvider, SmartTipGlobalStylingProvider, SmartTipDrawersCreator")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipDrawerOptionsProvider").asCtor(function e(t,i){this.getTooltipDrawerOptions=function a(e,t){var n={smartTip:t,uiComponent:e},r={};i.merge(n,r,o),r.cssClasses=[],t&&r.cssClasses.push("walkme-tooltip-smarttip-"+t.Id);e&&r.cssClasses.push("walkme-tooltip-uicomponent-"+e.Id);return r};var o={"uiComponent.Id":"itemId","smartTip.Settings.z-index":"stepSettings.z-index","smartTip.Settings.embedInParent":"stepSettings.embed","smartTip.Settings.tooltipPosition":"tooltipPosition","smartTip.Settings.tooltipPositionOffset":{destination:"tooltipPositionOffset",where:function(e,t){return t("smartTip.Settings.tooltipPosition")!==undefined}},"smartTip.Settings.Position":{destination:"directionToAvoid",transform:function(e){return t.OPPOSITE_POSITION_TYPE[e]},where:function(e,t){return!!t("uiComponent.IsWithIcon")}}}}).dependencies("Consts, ObjectMapper")}).call(window)},function(e,t,n){(function(){var f=n(573);f.register("SmartTipHighlighterDrawer").asCtor(function p(o,t,e){var n,a,s,u,l;function r(e){n.highlight()}this.draw=function c(e){return(n=function i(e){var t=a,n=o.isTrue(s.Settings,"embedInParent",!1),r={element:e,settings:t,drawableType:u,drawableId:l,monitor:!0,defaultSettings:!1,embedInElement:n,cssKeysValues:[{id:l,name:u},{id:s.Id,name:"smarttipid"}]};return f.create("Highlighter",r)}(e)).highlight(),wmjQuery(s).on(t.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,r),wmjQuery.when(e)},this.destroy=function i(){return n&&(n.unhighlightElement(),n=null),wmjQuery(s).off(t.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,r),wmjQuery.when()},function d(){u=e.drawableType,l=e.drawableId,a=e.highlighterCustomStyling,s=e.smartTipModel}()}).asProto().dependencies("CommonUtils, Consts")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipIconDrawer").asCtor(function p(t,e,n){var i,o,a,s,u,l;function c(e){i.reposition()}this.draw=function d(e){i=t.create(o,a,e,s);var r=wmjQuery.Deferred();return wmjQuery(o).on(u.SmartTipElementRepositioned,c),i.show().then(function(e){!function n(){wmjQuery(a).trigger(u.EventPropogationPrefix,{eventType:l.SmartTipIconShown})}();var t=e.getOriginElement();t&&t[0]?r.resolve(t):r.reject()}),r.promise()},this.destroy=function r(){return i&&(i.destroy(),i=null,function e(){wmjQuery(a).trigger(u.EventPropogationPrefix,{eventType:l.SmartTipIconDestroyed})}()),wmjQuery(o).off(u.SmartTipElementRepositioned,c),wmjQuery.when()},function f(){o=n.smartTipModel,a=n.smartTipUiComponentModel,s=n.globalStyling,u=e.SMART_TIP_INNER_EVENTS,l=e.EVENTS.SmartTips}()}).asProto().dependencies("SmartTipIconCreator, Consts")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipInteractiveTooltipDrawer").asCtor(function p(r,i,o,a,e){var s,u,n;function l(e,t){t&&t.uiComponent&&u&&t.uiComponent.Id!=n.Id&&u.hide()}this.draw=function c(e){var t=i.getEventsByElement(e);return(u=r.create(s,e,t)).setEvents(),function n(){o.bind(a.EVENTS.SmartTips.TooltipShown,l)}(),wmjQuery.when(e)},this.applyBehavior=function t(e){e&&e.tooltipStartShown&&u&&u.show()},this.destroy=function d(){if(o.unbind(a.EVENTS.SmartTips.TooltipShown,l),!u)return wmjQuery.when();var e=u.clean();return u=null,e},function f(){s=e.tooltipDrawer,n=e.smartTipComponentModel}()}).asProto().dependencies("TooltipControllerCreator, TooltipVisibilityEventsProvider, WmInternals, Consts")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipTooltipDrawer").asCtor(function C(i,e,o,t,n,r){var a,s,u,l;this.draw=function E(e){return f=e,g()},this.destroy=function w(){return f=null,p=p.pipe(m)};var c,d,f=null,p=wmjQuery.when();function g(){return p=p.pipe(m).pipe(h)}function h(){if(!f)return wmjQuery.when();var e=s.TooltipStyle||l.Tooltip,t=o.getTooltipDrawerOptions(s,u);a=i.create(f,s.TooltipText,e,t);var n=wmjQuery.Deferred(),r=n.promise();return a.show().pipe(function(e){!function t(){wmjQuery(s).trigger(c.EventPropogationPrefix,{eventType:d.TooltipShown})}(),n.resolve(e)}),wmjQuery(u).on(c.SmartTipElementRepositioned,y),r}function m(){if(!a)return wmjQuery.when();wmjQuery(u).off(c.SmartTipElementRepositioned,y);var e=a.destroy().then(v);return a=undefined,e}function v(){wmjQuery(s).trigger(c.EventPropogationPrefix,{eventType:d.SmartTipTooltipDestroyed})}function y(e){document.activeElement==wmjQuery("body")[0]?t.setWalkmeTimeout(S,100):S()}function S(){!function t(){var e=wmjQuery("#walkme-tooltip-"+s.Id)[0];return n.isFocusedElementOutsideElement(e)}()||g()}!function T(){s=r.smartTipUiComponentModel,l=r.globalStyling,u=r.smartTipModel,c=e.SMART_TIP_INNER_EVENTS,d=e.EVENTS.SmartTips}()}).asProto().dependencies("TooltipCreator, Consts, SmartTipDrawerOptionsProvider, TimerManager, FocusedElementInElementChecker")}).call(window)},function(e,t,n){(function(){n(573).register("ValidationsSmartTipComponentDrawer").asCtor(function h(i,o,a,s,e){var u,l,c,d;function f(){if(!u)return wmjQuery.when();var e=u.destroy();return u=null,e}function p(e,t){var n={uiComponent:t,eventType:e};wmjQuery(c).trigger(s.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,n)}this.drawValidationFeedback=function g(e){var n=o.getFeedbackComponent(c,e);return function t(e){return e!=l}(n)||d?(d=!1,function r(e,t){var n=[];l!=undefined&&(l=null,n.push(f));if(t!=undefined){l=t;n.push(function(){return function n(e,t){return(u=i.get(c,t)).draw(e)}(e,t)})}return a.executePromiseChain(n)}(e,n).then(function(){return function t(e){e&&e.Type==s.SMART_TIP.COMPONENT_TYPE.Validation?p(s.EVENTS.SmartTips.ValidationFailed,e):p(s.EVENTS.SmartTips.ValidationPassed,e)}(n)})):wmjQuery.when()},this.removeValidationFeedback=function t(){return l=null,f()},this.applyBehaviorOnFeedback=function n(e){u&&u.applyBehavior&&u.applyBehavior(e)},function r(){c=e.smartTipModel,d=!0}()}).asProto().dependencies("SmartTipComponentDrawerFactory, SmartTipValidationFeedbackComponentProvider, PromiseUtils, Consts")}).call(window)},function(e,t,n){(function(){var r=n(573);r.register("ValidationsSmartTipComponentDrawerCreator").asCtor(function e(){this.create=function n(e){var t={smartTipModel:e};return r.create("ValidationsSmartTipComponentDrawer",t)}})}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipIconStylingProvider").asCtor(function t(){this.get=function n(e,t){return e.TemplateId?{TemplateId:e.TemplateId}:e.Settings.imageObject?"htmlShape"==e.Settings.imageObject.type?{TemplateId:e.Settings.imageObject.data.id,Predefined:e.Settings.imageObject,Type:e.Settings.imageObject.type}:{Predefined:e.Settings.imageObject}:t.Icon.TemplateId?{TemplateId:t.Icon.TemplateId}:"htmlShape"==t.Icon.Predefined.type?{Predefined:t.Icon.Predefined,Type:t.Icon.Predefined.type}:{Predefined:t.Icon.Predefined}},function e(){}.apply(null,arguments)})}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipIconCreator").asCtor(function t(s,u,l,c){this.create=function d(e,t,n,r){var i=function a(e,t,n){var r=c.get(t,n),i=l.get(r);return{uniqueIdentifierType:"SmartTip",uniqueIdentifierId:e.Id,isEmbedInElement:e.Settings.embedInParent,attachmentSide:e.Settings.Position,zindex:e.Settings["z-index"],perimeterType:e.Settings.context,isAnimated:e.Settings.animated,growingDirection:e.Settings.direction,positionTopCustomOffset:e.Settings.topOffset,positionLeftCustomOffset:e.Settings.leftOffset,contentElementCssClassNames:[],positionElementCssClassNames:function o(e,t){var n=[];n.push("walkme-icon-position-smartTip-id-"+e.Id),t.customClass&&n.push(t.customClass);return n}(e,i),contentData:i}}(e,t,r),o=u.get(n,i);return s.create(o,n)},function e(){}.apply(null,arguments)}).dependencies("IconCreator, IconCreatorParamsProvider, IconContentProvider, SmartTipIconStylingProvider")}).call(window)},function(e,t,n){(function(){var u=n(573);u.register("SmartTipSetsActivatorFactory").asCtor(function e(a){this.get=function s(){for(var e,t=[],n=a.getAll(),r=0;r<n.length;r++){var i=n[r],o=(e=i,u.create("SmartTipSetActivator",{set:e}));t.push(o)}return t}}).dependencies("SmartTipSetsManager")}).call(window)},function(e,t,n){(function(){var l=n(573);l.register("SmartTipSetActivator").asCtor(function c(t,n,r){var i,o,e;this.start=function a(){e||(e=l.create("UIVisibilityManager",o)).watchForVisibility()},this.stop=function s(){e&&e.cleanResources(),e=null},function u(){i=r.set;var e=n.getSetManagerById(i.Id);o={logContext:i.Id,trackUIChanges:!0,conditionTree:i.ConditionTrees.DisplayRules,onShow:e.turnOnWithLazyValidations,onRemove:e.turnOff,conditionCheckerParams:{elementName:i.Name,ownerChain:{type:t.ELEMENT_OWNER_TYPE_NAMES.SMART_TIPSET,id:i.Id}}}}()}).asProto().dependencies("Consts, SmartTipSetsManager")}).call(window)},function(e,t,n){(function(){n(573).register("DisabledSmartTipsRemover").asCtor(function e(r){function i(e){return!e.IsEnabled}this.remove=function o(e){for(var t=0;t<e.length;t++){var n=e[t].SmartTips;r.remove(n,i)}}}).dependencies("DisabledElementsRemover")}).call(window)},function(e,t,n){(function(){n(573).register("FocusedElementInElementChecker").asCtor(function e(n){this.isFocusedElementOutsideElement=function r(e){var t=document.activeElement;return!e||!n.contains(e,t)}}).dependencies("wmjQuery")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipComponentsIterator").asCtor(function e(){this.doOnAllComponents=function r(e,t){if(e.Info&&t(e.Info),e.PositiveFeedback&&t(e.PositiveFeedback),e.Validations)for(var n=0;n<e.Validations.length;n++){t(e.Validations[n])}}})}).call(window)},function(e,t,n){(function(){var i=n(573);i.register("SmartTipCreator").asCtor(function e(){this.create=function r(e,t){e._setId=t;var n={smartTipModel:e};return i.create("SmartTip",n)}})}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipDrawer").asCtor(function c(r,e,t,n){var i,o,a;this.drawSmartTipElements=function s(e){return function t(){return i.Settings.hlType!=undefined}()&&function n(e){(a=r.create(i.Id,"smartTip",i.Settings,i)).draw(e)}(e),o.activate(e)},this.removeSmartTipElements=function u(){var e=[o.destroy()];return a&&e.push(a.destroy()),t.executeParallely(e)},function l(){i=n.smartTipModel,o=e.get(i)}()}).asProto().dependencies("SmartTipHighlighterDrawerCreator, SmartTipComponentsActivatorFactory, PromiseUtils")}).call(window)},function(e,t,n){(function(){var r=n(573);r.register("SmartTipDrawerCreator").asCtor(function e(){this.create=function n(e){var t={smartTipModel:e};return r.create("SmartTipDrawer",t)}})}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipFirstFailedValidationProvider").asCtor(function e(n){function i(e,t){return n.createNew({getSelectedElement:function(){return t}}).getCurrentEvaluationValueAndStopEvaluating(e)}this.getFirstFailedValidation=function o(e,t){if(!e.Validations)return null;for(var n=0;n<e.Validations.length;n++){var r=e.Validations[n];if(r.ConditionTrees&&r.ConditionTrees.Validation)if(!i(r.ConditionTrees.Validation,t))return r}return null}}).dependencies("ConditionCheckerFactory")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipGlobalStylingProvider").asCtor(function e(t){this.get=function n(e){return t.get().SmarttipSettings[e]}}).dependencies("SiteConfigManager")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipSetActivationInitiator").asCtor(function l(e,t,n,r,i){var o=[];function a(){o=t.get();for(var e=0;e<o.length;e++)o[e].start()}this.start=function s(){e.wrapSession(function(){var e={type:i.STEP_PLAY_INITIATOR_ENUM.AUTOSTART};r.saveData(r.keysConfig.smartTipSet.initiator.key,e,r.keysConfig.smartTipSet.initiator.expiry),n.setForScope(e,a)})},this.stop=function u(){for(var e=0;e<o.length;e++)o[e].stop()}}).dependencies("ElementFinder, SmartTipSetsActivatorFactory, InitiatorManager, ClientStorageManager, Consts")}).call(window)},function(e,t,n){(function(b){(function(){n(573).register("SmartTipSetManager").asCtor(function e(n,i,r,o,a,t){this.turnOnWithLazyValidations=f,this.turnOnWithImmediateValidations=function w(e){f(function(){p(v),e&&e()})},this.turnOff=function T(){return d?(d=!1,function e(){p(y)}(),function t(){E(i.EVENTS.SmartTips.SetTurnedOff)}(),function n(){var e=wmjQuery.map(s,function(e){return u[e.Id]});return r.executeParallelyOnArray(e,h)}()):wmjQuery.when()};var s,u,l,c,d=!1;function f(e){d?e&&e():(c=a.generateGuid(),function t(){return function e(n){var r=[];s&&wmjQuery.each(s,function(e,t){r.push(n(t))});return b.all(r)}(g)}().then(function(){!function n(){d||(!function e(){p(S)}(),function t(){E(i.EVENTS.SmartTips.SetTurnedOn)}(),d=!0)}(),e&&e()}))}function p(n){s&&wmjQuery.each(s,function(e,t){n(t)})}function g(e){return u[e.Id].activate()}function h(e){return e.deactivate()}function m(e){var t=n.create(e,l);u[e.Id]=t}function v(e){wmjQuery(e).trigger(i.SMART_TIP_INNER_EVENTS.CheckValidations)}function y(e){wmjQuery(e).off(i.SMART_TIP_INNER_EVENTS.EventPropogationPrefix)}function S(r){wmjQuery(r).on(i.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(e,t){var n={smartTipModel:r};n=wmjQuery.extend(n,t),E(t.eventType,n)})}function E(e,t){var n={setId:l,playGuid:c};t=wmjQuery.extend(n,t||{}),o.raiseEvent(e,t)}!function C(){s=t.smartTipModels,l=t.setId,u={},function e(){p(m)}()}()}).asProto().dependencies("SmartTipCreator, Consts, PromiseUtils, CommonEvents, GuidGenerator")}).call(window)}).call(this,n(29))},function(e,t,n){(function(){var r=n(573);r.register("SmartTipSetManagerCreator").asCtor(function e(){this.create=function n(e,t){return r.create("SmartTipSetManager",{smartTipModels:e,setId:t})}})}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipSetsManager").asCtor(function c(i,t,n){var o,a;function r(e){return e.turnOff()}this.init=function s(e){a=e,function r(){o={};for(var e=a.length-1;0<=e;e--){var t=a[e],n=i.create(t.SmartTips,t.Id);o[t.Id]=n}}()},this.getAll=function e(){return a},this.getSetManagerById=function u(e){return o[e]},this.turnOffAllSets=function l(){if(!o)return wmjQuery.when();var e=n.getDictionaryValues(o);return t.executeParallelyOnArray(e,r)}}).dependencies("SmartTipSetManagerCreator, PromiseUtils, DictionaryUtils")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipValidationFeedbackComponentProvider").asCtor(function e(n){this.getFeedbackComponent=function r(e,t){return n.getFirstFailedValidation(e,t)||e.PositiveFeedback}}).dependencies("SmartTipFirstFailedValidationProvider")}).call(window)},function(e,t,n){(function(){var c=n(573);c.register("SmartTipVisiblityWatchCreator").asCtor(function t(s,u){this.createVisibilityWatch=function l(e,t,n){var r=e.ConditionTrees.SmartTip,i=u.getStickyType(e.Settings),o={logContext:e.Id,stickyType:i,elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings,ownerChain:{type:s.ELEMENT_OWNER_TYPE_NAMES.SMART_TIP,id:e.Id,stickyType:i,owner:{type:s.ELEMENT_OWNER_TYPE_NAMES.SMART_TIPSET,id:e._setId}}}},isRemoveByCondition:u.getIsRemoveByCondition(e.Settings),conditionCheckerParams:function a(e){return{featureName:s.CONDITION_CHECKER.FEATURE_NAMES.SmartTipSegmentation,elementName:e.Name}}(e),conditionTree:r&&r.Root?r:undefined,onShow:t,onRemove:n,trackUIChanges:!0};return c.create("UIVisibilityManager",o)},function e(){}.apply(null,arguments)}).dependencies("Consts, UIElementVisibilityAttributes")}).call(window)},function(e,t,n){(function(){var s=n(573);s.register("UiChangesTrackerWrapper").asCtor(function t(r){var i,o;this.trackChanges=function a(e){!function t(e){e={callback:e.callback};i=s.create("UiWindowSizeTracker",e)}(e),i.track(),e.isEmbedInElement||(function n(e){e={embedmentType:r.get(!1,e.element),element:e.element,positionChangedCallback:e.callback};o=s.create("UiElementPositionTracker",e)}(e),o.track())},this.stopTrackingChanges=function e(){i&&i.destroy(),o&&o.destroy(),o=null}}).asProto().dependencies("EmbedmentTypeProvider")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTipEventSender").asCtor(function e(r,i,o,a,t,n,s,u,l){function c(e,t){var n={type:o.EVENT_SENDER_EVENT_APPS.SmartTip,oId:t.smartTipModel.Id,oName:t.smartTipModel.Name,owId:t.setId,owType:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:p(t.setId),aoId:t.uiComponent&&t.uiComponent.Id,aType:t.uiComponent&&t.uiComponent.Type,aAppType:o.EVENT_SENDER_EVENT_APPS.SmartTipUiComponent};return d(e,n=f(n,t))}function d(e,t){try{return r.postEvent(e,t)}catch(n){return i.error(n),!0}}function f(e,t){var n=function r(e){return{interactionGuid:a.getCurrentInteractionGuid(),pId:e.playGuid,pInit:u.map(s.get()||l.getData(l.keysConfig.smartTipSet.initiator.key))}}(t);return wmjQuery.extend(n,e)}function p(e){return t.getById(e).Name}this.postSetActivatedEvent=function g(e){var t={type:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,oId:e.setId,oName:p(e.setId)};return t=f(t,e),d(o.EVENT_SENDER_EVENT_TYPES.Play,t)},this.postSmartTipSegmentedEvent=function h(e){n.report();var t={type:o.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owId:e.setId,owType:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:p(e.setId)};return t=f(t,e),d(o.EVENT_SENDER_EVENT_TYPES.Play,t)},this.postValidationFailedEvent=function m(e){return c(o.EVENT_SENDER_EVENT_TYPES.Failed,e)},this.postValidationPassedEvent=function v(e){return c(o.EVENT_SENDER_EVENT_TYPES.Passed,e)},this.postTooltipShownEvent=function y(e){return c(o.EVENT_SENDER_EVENT_TYPES.Visible,e)},this.postElementEvent=function S(e){var t={type:o.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owType:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,owId:e.setId,owName:p(e.setId)};return t=f(t,e),d(e.eventType,t)}}).dependencies("EventSender, Logger, Consts, InteractionManager, BusinessSolutionsManager, WalkmeVisibleReporter, InitiatorManager, ReportInitiatorMapper, ClientStorageManager")}).call(window)},function(e,t,n){(function(){n(573).register("SmartTip").asCtor(function b(e,o,a,t,s,n,u,r,i){var l,c,d,f;this.activate=function w(){return p=!0,(c=e.createVisibilityWatch(l,h,v)).watchForVisibility()},this.deactivate=function T(){p=!1,c&&c.cleanResources();return c=null,y()};var p,g=".wmst";function h(i){if(p)return d=i,f.drawSmartTipElements(d).then(function(){!function e(){E(o.EVENTS.SmartTips.SmartTipSegmented)}(),function t(){a.bind(d,g,E)}(),function n(){var e={isEmbedInElement:l.Settings.embedInParent,element:d,callback:m};s.trackChanges(e)}(),function r(e){var t={smartTip:l,element:e};u.raiseEvent(o.EVENTS.SmartTips.SmartTipElementShown,t)}(i)})}function m(){r(l).trigger(o.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned)}function v(){y(),function t(){var e={smartTip:l};u.raiseEvent(o.EVENTS.SmartTips.SmartTipElementRemoved,e)}()}function y(){return s.stopTrackingChanges(),d&&(function e(){a.unbind(d,g)}(),d=null),f.removeSmartTipElements()}function S(n){r(n).on(o.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(e,t){t.uiComponent=n,r(l).trigger(o.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,t)})}function E(e){r(l).trigger(o.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:e})}!function C(){l=i.smartTipModel,f=n.create(l),function e(){t.doOnAllComponents(l,S)}()}()}).asProto().dependencies("SmartTipVisiblityWatchCreator, Consts, ElementInteractionEventsBinder, SmartTipComponentsIterator, UiChangesTrackerWrapper, SmartTipDrawerCreator, CommonEvents, wmjQuery")}).call(window)},function(o,e,a){(function(i){(function(){var e=i.get("PlatformDI"),t=i.get("Consts"),n="Mustache,CommonUtils,PositionHelper,CommonEvents,CdnServer,UiUtils,SiteConfigManager,TimerManager,getTopContainer,Lib,HostData,Consts,TransparentLayerProvider,DomManager";e.register(t.PLATFORM.Web,function(){i.register("LightboxDisplayer").asProto().asCtor(a(615)).dependencies(n)}),e.register(t.PLATFORM.MobileWeb,function(){i.register("LightboxDisplayer").asProto().asCtor(a(617)).dependencies(n)});var r={init:function(){r.activate=i.get("LightboxDisplayer").activate,r.remove=i.get("LightboxDisplayer").remove,r.getSize=i.get("LightboxDisplayer").getSize}};o.exports=r}).call(window)}).call(this,a(2))},function(r,i,o){(function(n){(function(){"use strict";i.__esModule=!0;var a,e=o(616),t=(a=e.LightboxDisplayer,n(s,a),s.prototype.activate=function(e,t,n,r,i,o){a.prototype.activate.call(this,e,t,n,r,i,o),this._lib.centerElementInPage(this._lightBoxDiv,!1),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxDivCentered,{lightBoxDiv:this._lightBoxDiv})},s.prototype.createLightBox=function(e,t,n,r,i){a.prototype.createLightBox.call(this,e,t,n,r,i);var o=this.getAjaxLoader(this._lightBoxDiv);this._positionHelper.centerElementInParent(o,this._lightBoxDiv),o.css("left","0"),this._positionHelper.registerResizeAndScrollEvents({element:this._lightBoxDiv,eventNameSuffix:s.WALKME_LIGHTBOX_EVENTS})},s.prototype.removeLightBox=function(e){a.prototype.removeLightBox.call(this,e),this._positionHelper.removeScrollAndResizeEvents(s.WALKME_LIGHTBOX_EVENTS)},s.prototype.getDimensionSize=function(e,t,n){var r=this.getSizeUnitSettingKey(e),i=this.getSizeUnit(t,r),o=this.getDimensionSettingKey(e),a=this._commonUtils.getSettingsValue(t.Settings,o,n[e]);return"%"==i&&(a=this._positionHelper.getWindowSize()[e]*a/100),a+"px"},s.prototype.getSizeUnitSettingKey=function(e){return e+"Unit"},s.prototype.getSizeUnit=function(e,t){return this._commonUtils.getSettingsValue(e.Settings,t,"px")},s.prototype.getDimensionSettingKey=function(e){return"height"==e?s.LIGHTBOX_HEIGHT_KEY:s.LIGHTBOX_WIDTH_KEY},s.prototype.getToolbarWidth=function(e){return parseFloat(e)+4+"px"},s.prototype.getSize=function(){return{width:this._lightBoxDiv.css("width").replace("px","")+"px",height:this._lightBoxDiv.css("height").replace("px","")+"px"}},s.prototype.contentMouseOver=function(e,t){var n=t?"#404040":"#646464";e.css("backgroundColor",n)},s.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position:absolute; height: 17px; width: 17px; right: 5px; top: -19px; cursor: pointer; z-index: 2147483632; vertical-align: top;'><img src='{2}/player/resources/images/blue-x-button.png' style='margin: 4px;' /></div>",e,t,this._cdnServer)},s.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute;height:17px; width:17px; right:25px; top:-19px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/open-in-new-tab.png' style='margin: 4px;'></div>",e,this._cdnServer)},s.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='float:left; width:{{lightboxWidth}}; height:{{lightboxHeight}}; padding: 2px; z-index:{{zIndex}}; background-color:white; box-shadow:4px -4px 19px -1px #494949;'><div id='{{lightboxTopbarDivId}}' style='position: absolute; top: -23px; left: 0px; height: 25px; width: {{topbarWidth}}; background-color:#646464;'></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v2.gif) no-repeat center; width:100%; height:100px; position:relative; text-align:center; vertical-align: bottom; margin-top: -30px;'><span style='display: inline-block; color: #99d3fe; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},s.LIGHTBOX_WIDTH_KEY="LightboxWidth",s.LIGHTBOX_HEIGHT_KEY="LightboxHeight",s.WALKME_LIGHTBOX_EVENTS="walkmeLightBox",s);function s(){return null!==a&&a.apply(this,arguments)||this}r.exports=t}).call(window)}).call(this,o(1))},function(e,t,n){(function(r){(function(){"use strict";t.__esModule=!0;var e=(f.prototype.activate=function(e,t,n,r,i,o){this._activateContentInNewTab=o,this.createLightBox(e,t,n,r,i)},f.prototype.getElement=function(){return this._lightBoxDiv},f.prototype.remove=function(e){e=e||this._getTopContainer(null,!1),this.removeTakingLongMsg(!1),this.removeLightBox(e),this.removeOverlay(),this.unbindEscButton(e)},f.prototype.getAjaxLoader=function(e){return wmjQuery("#"+f.AJAX_LOADER_DIV_ID,e)},f.prototype.removeOverlay=function(){this._uiUtils.removeOverlayById(f.OVERLAY_ID)},f.prototype.unbindEscButton=function(e){e.unbind(f.KEY_UP_EVENT)},f.prototype.removeLightBox=function(e){var t=wmjQuery("#"+f.LIGHTBOX_DIV_ID,e);t.exist()&&(t.find("iframe").attr("src",""),t.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.ContentRemoved,{}))},f.prototype.createLightBox=function(e,t,n,r,i){var o=this._transparentLayerProvider.tryGetWalkMeLayer(this._getTopContainer(null,!1)),a=this.getHtml(e,t),s=this._domManager.parseElementAsJquery(a);this._lightBoxDiv=s,this.addCssClasses(e,s,n),this._uiUtils.setLangAttribute(s);var u=this.createXButtonElement();s.append(u),this.handleCreatingOpenInNewTabButton(e,o,s,r),this.handleCreatingOverlay(),this.bindEscButton(o);var l=i(e);this.setTakingLongTimers(s),this.overlayContent(l,s);var c=this.handleIosIframeScrolling(l);this.appendContent(c),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxDivCreated,{lightBoxDiv:s,content:e}),o.append(s);var d=wmjQuery("#"+f.RELOAD_LIGTHBOX_DIV_ID);return d.click(wmjQuery.proxy(function(){var e=l.get(0);e.src=e.src,this.getAjaxLoader(s).show(),this.removeTakingLongMsg(!1),this.setTakingLongTimers(s)},this)),this._positionHelper.centerElementInParent(d,s),d.css("left","0"),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxCreated,s),s},f.prototype.overlayContent=function(e,t){e.hide();var n=wmjQuery.proxy(function(){e.off("load loadeddata",n),this.removeTakingLongMsg(!0),this.getAjaxLoader(t).remove(),e.show()},this);this.shouldWaitForReady(e)?e.ready(n):e.load(n),"VIDEO"==r.get("ElementUtils").getElementTagName(e[0])&&e.bind("loadeddata",n)},f.prototype.appendContent=function(e){this._lightBoxDiv.append(e)},f.prototype.reloadButtonTimerFunction=function(e){wmjQuery("#"+f.RELOAD_LIGTHBOX_DIV_ID).css("display","block"),this._reloadButtonTimer.clear(),this.getAjaxLoader(e).hide()},f.prototype.takingLongerTimerFunction=function(e){var t=wmjQuery("#"+f.WAITING_DIV_ID);this._positionHelper.centerElementInParent(t,e),t.css("left","0"),t.css("display","block"),this._takingLongerTimer.clear()},f.prototype.setTakingLongTimers=function(e){this._takingLongerTimer=this._timerManager.libSetTimeout(wmjQuery.proxy(function(){this.takingLongerTimerFunction(e)},this),f.TAKING_LONGER_MESSAGE_INTERVAL),this._reloadButtonTimer=this._timerManager.libSetTimeout(wmjQuery.proxy(function(){this.reloadButtonTimerFunction(e)},this),f.RELOAD_BUTTON_INTERVAL)},f.prototype.removeTakingLongMsg=function(e){this._reloadButtonTimer&&this._reloadButtonTimer.clear(),this._takingLongerTimer&&this._takingLongerTimer.clear();var t=wmjQuery("#"+f.RELOAD_LIGTHBOX_DIV_ID),n=wmjQuery("#"+f.WAITING_DIV_ID);e?(t.remove(),n.remove()):(t.css("display","none"),n.css("display","none"))},f.prototype.handleIosIframeScrolling=function(e){return/iPhone|iPod|iPad/.test(navigator.userAgent)?this.getIframeWrapperDiv(e):e},f.prototype.getIframeWrapperDiv=function(e){var t={width:e.attr("width")||e[0].style.width,height:e.attr("height")||e[0].style.height,overflow:"auto","-webkit-overflow-scrolling":"touch"},n=wmjQuery("<div />").css(t);return n.append(e),n},f.prototype.bindEscButton=function(e){e.bind(f.KEY_UP_EVENT,wmjQuery.proxy(function(e){27==e.keyCode&&this.remove()},this))},f.prototype.handleCreatingOverlay=function(){this._uiUtils.canDisplayOverlay()&&this._uiUtils.displayOverlay(this._consts.POPUP_BALLOON_Z_INDEX,!1,f.OVERLAY_ID).click(wmjQuery.proxy(function(){this.remove()},this))},f.prototype.handleCreatingOpenInNewTabButton=function(e,t,n,r){if(r){var i=this._domManager.parseElementAsJquery(this.newTabHtml("walkme-open-in-new-tab-button"));i.click(wmjQuery.proxy(function(){this.remove(t),this._activateContentInNewTab(e)},this)),i.mouseover(wmjQuery.proxy(function(){this.contentMouseOver(i,!0)},this)),i.mouseout(wmjQuery.proxy(function(){this.contentMouseOver(i,!1)},this)),n.append(i)}},f.prototype.newTabHtml=function(e){throw""},f.prototype.addCssClasses=function(e,t,n){var r=this._commonUtils.formatString("walkme-{0}-light-box-{1}",n,e.Id);t.addClass(r),t.addClass("walkme-to-remove"),t.addClass("walkme-to-destroy")},f.prototype.createXButtonElement=function(){var e=this._siteConfigManager.get().ContentCloseTooltip,t=this._domManager.parseElementAsJquery(this.xButtonHtml("walkme-light-box-x-button",e));return t.click(wmjQuery.proxy(this.closeLightBoxClicked,this)),t.mouseover(wmjQuery.proxy(function(){this.contentMouseOver(t,!0)},this)),t.mouseout(wmjQuery.proxy(function(){this.contentMouseOver(t,!1)},this)),t},f.prototype.xButtonHtml=function(e,t){throw""},f.prototype.contentMouseOver=function(e,t){throw""},f.prototype.closeLightBoxClicked=function(){this.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxClosed)},f.prototype.getHtml=function(e,t){return this._mustache.to_html(this.getTemplate(),this.getConfig(e,t))},f.prototype.getConfig=function(e,t){var n=this.getDimensionSize("width",e,t),r=this.getDimensionSize("height",e,t),i=this.getToolbarWidth(n);return{lightboxDivId:f.LIGHTBOX_DIV_ID,lightboxWidth:n,lightboxHeight:r,zIndex:this._consts.POPUP_BALLOON_Z_INDEX,lightboxTopbarDivId:f.LIGHTBOX_TOPBAR_DIV_ID,topbarWidth:i,ajaxLoaderDivId:f.AJAX_LOADER_DIV_ID,waitingDivId:f.WAITING_DIV_ID,reloadDivId:f.RELOAD_LIGTHBOX_DIV_ID,cdnServer:this._cdnServer}},f.prototype.shouldWaitForReady=function(e){return(this._hostData.isIE()||"Chrome"==this._hostData.browser.name)&&e[0]&&e[0].src&&-1<e[0].src.indexOf(".pdf")},f.prototype.getTemplate=function(){throw""},f.prototype.getDimensionSize=function(e,t,n){throw""},f.prototype.getToolbarWidth=function(e){throw""},f.prototype.getSize=function(){throw""},f.LIGHTBOX_DIV_ID="walkme-content-light-box",f.LIGHTBOX_TOPBAR_DIV_ID="walkme-content-light-box-top-bar",f.AJAX_LOADER_DIV_ID="walkme-ajax-loader",f.WAITING_DIV_ID="walkme-ajax-taking-long",f.RELOAD_LIGTHBOX_DIV_ID="walkme-ligth-box-reload",f.OVERLAY_ID="walkme-content-background",f.KEY_UP_EVENT="keyup.walkme",f.TAKING_LONGER_MESSAGE_INTERVAL=8e3,f.RELOAD_BUTTON_INTERVAL=15e3,f);function f(e,t,n,r,i,o,a,s,u,l,c,d,f,p){this._mustache=e,this._commonUtils=t,this._positionHelper=n,this._commonEvents=r,this._uiUtils=o,this._siteConfigManager=a,this._timerManager=s,this._cdnServer=i.get(),this._getTopContainer=u,this._lib=l,this._hostData=c,this._consts=d,this._transparentLayerProvider=f,this._domManager=p}t.LightboxDisplayer=e}).call(window)}).call(this,n(2))},function(i,a,s){(function(r){(function(){"use strict";a.__esModule=!0;var o,e=s(616),t=(o=e.LightboxDisplayer,r(n,o),n.prototype.createLightBox=function(e,t,n,r,i){o.prototype.createLightBox.call(this,e,t,n,r,i),this._lightBoxDiv.css({position:"fixed",top:0,left:0})},n.prototype.getDimensionSize=function(e,t,n){return"100%"},n.prototype.getToolbarWidth=function(e){return"100%"},n.prototype.getSize=function(){return{width:"100%",height:"100%"}},n.prototype.contentMouseOver=function(e,t){},n.prototype.getConfig=function(e,t){var n=o.prototype.getConfig.call(this,e,t);return n.padding="10px",n.title=e.Name,n},n.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position: absolute; right: 19px; top: 17px; cursor: pointer; z-index: 2147483632; vertical-align: top; height: 15px; width: 15px; background-image: url(\"{2}/player/resources/images/x-btn-resources.png\"); background-position: -5px -5px;'></div>",e,t,this._cdnServer)},n.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute; height:11px; width:11px; right:50px; top:15px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/mobile_full_screen.png' style='margin: 4px;'></div>",e,this._cdnServer)},n.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='width:{{lightboxWidth}}; height:{{lightboxHeight}}; box-sizing: border-box; z-index:{{zIndex}}; background-color: black; padding-top: 50px; padding-right: 10px;'><div style='width: 100%; box-sizing: border-box; padding: 0 15px; position: absolute; top: 0; left: 0px; line-height: 50px; background-color: #3393d1; color: white; text-align: left; font-size: 15px;'>{{title}}<div id='{{lightboxTopbarDivId}}' style='height: 100%; width: 100%;'></div></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v3.gif) no-repeat center; width:100%; height:100px; position:absolute; text-align:center; vertical-align: bottom; top: 50%; margin-top: -50px;'><span style='display: inline-block; color: white; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},n.LIGHTBOX_WIDTH_KEY="LightboxWidth",n.LIGHTBOX_HEIGHT_KEY="LightboxHeight",n);function n(){return null!==o&&o.apply(this,arguments)||this}i.exports=t}).call(window)}).call(this,s(1))},function(i,e,o){(function(){var t=o(619),n={init:function r(){var e=t.get("AttentionGrabberManagerAPI");n.initApi=e.init,n.loadApi=e.load,n.removeApi=e.remove,n.creataImageAGApi=e.creataImageAG,n.createAGApi=e.createAG},services:["AttentionGrabberManagerAPI","AttentionGrabberManager","AttentionGrabberDataManager"],types:["AttentionGrabber"]};!function e(){o(620)}(),o(69).registerApi(n,t),i.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,c){(function(){var u=c(619);u.register("AttentionGrabberManagerAPI").asCtor(function l(){var t,n;function e(t){c.e(7).then(function(){var e=[c(741),c(742),c(743)];(function(){n=u.get("AttentionGrabberManager"),t&&t(n)}).apply(null,e)})["catch"](c.oe)}this.init=function r(e){t=e},this.load=function i(){!function e(t){c.e(6).then(function(){var e=[c(741),c(742)];(function(){n=u.get("AttentionGrabberManager"),t&&t(n)}).apply(null,e)})["catch"](c.oe)}(function(e){e.init(t),e.load()})},this.remove=function o(e){n?n.remove(e):e&&e()},this.creataImageAG=function a(t){e(function(e){e.getImageAG(t).setupAttenGrab()})},this.createAG=function s(t){e(function(e){e.create(t).setupAttenGrab()})}})}).call(window)},function(t,e,n){(function(){var a=n(622),s={init:function u(){var e=a.get("CoursesManager"),t=a.get("LessonsManager"),n=a.get("DisabledCourseQuizzesRemover"),r=a.get("QuizEventSender"),i=a.get("QuizStatusManager"),o=a.get("TeachMeConfigManager");s.setCourses=e.setDeployables,s.getAllCourses=e.getAll,s.setLessons=t.setDeployables,s.getAllLessons=t.getAll,s.activateQuizByCourseId=e.activateQuizByCourseId,s.getCourseByQuizId=e.getCourseByQuizId,s.getQuizByCourseId=e.getQuizByCourseId,s.releaseAllCourses=e.releaseAll,s.removeDisabledCourseQuizzes=n.remove,s.postQuizPlayEvent=r.postQuizPlayEvent,s.postQuizSubmittedEvent=r.postQuizSubmittedEvent,s.postAnswerSubmittedEvent=r.postAnswerSubmittedEvent,s.postQuizPassEvent=r.postQuizPassEvent,s.postQuizFailEvent=r.postQuizFailEvent,s.getQuizStatus=i.getQuizStatus,s.getTeachMeConfig=o.get,s.setTeachMeConfig=o.set},services:["CoursesManager","DisabledCourseQuizzesRemover","LessonsManager","QuizEventSender","QuizStatusManager","TeachMeConfigManager"],types:[]};!function e(){n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630),n(631),n(632),n(633),n(634)}(),n(69).registerApi(s,a),t.exports=s}).call(window)},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,a,s){(function(i){(function(){"use strict";a.__esModule=!0;var o,e=s(100),t=s(622),n=(o=e.DeployablesManager,i(r,o),r.prototype.activateQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;if(n){var r=this.quizPlayer;this.initiatorManager.setForScope({type:this.consts.STEP_PLAY_INITIATOR_ENUM.COURSE,objectId:e,appType:this.consts.EVENT_SENDER_EVENT_APPS.Course},function(){r.playQuiz(n)})}},r.prototype.getCourseByQuizId=function(e){for(var t in this.deployablesDict)if(this.deployablesDict.hasOwnProperty(t)){var n=this.deployablesDict[t];if(n.Quiz&&n.Quiz.Id==e)return n}},r.prototype.getQuizByCourseId=function(e){var t=this.deployablesDict[e];return t&&t.Quiz},r.prototype.releaseAll=function(e){this.quizPlayer.releaseAll(e)},r);function r(e,t,n,r){var i=o.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Course})||this;return i.consts=t,i.quizPlayer=n,i.initiatorManager=r,i._name="Course",i}t.register("CoursesManager").asCtor(n).dependencies("Lib, Consts, QuizPlayer, InitiatorManager")}).call(window)}).call(this,s(1))},function(e,t,n){(function(){n(622).register("DisabledCourseQuizzesRemover").asCtor(function e(){this.remove=function r(e){for(var t=0;t<e.length;t++){var n=e[t].Quiz;n&&!n.IsEnabled&&delete e[t].Quiz}}})}).call(window)},function(e,a,s){(function(o){(function(){"use strict";a.__esModule=!0;var r,e=s(100),t=s(622),n=(r=e.DeployablesManager,o(i,r),i);function i(e,t){var n=r.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Lesson})||this;return n._name="Lesson",n}t.register("LessonsManager").asCtor(n).dependencies("Lib, Consts")}).call(window)}).call(this,s(1))},function(e,t,n){(function(){n(622).register("QuizEventSender").asCtor(function e(i,o,r,a,s,u){function t(e,t){var n=t?o.EVENT_SENDER_EVENT_TYPES.Passed:o.EVENT_SENDER_EVENT_TYPES.Failed,r=wmjQuery.extend({},l(e),c(e.quiz),{passmark:e.quiz.Passmark,score:e.score});i.postEvent(n,r)}function l(e){return{pId:e.currentPlayGuid}}function c(e,t){var n,r={};return n=t?(r.owType=o.EVENT_SENDER_EVENT_APPS.Quiz,"ow"):(r.type=o.EVENT_SENDER_EVENT_APPS.Quiz,"o"),r[n+"Id"]=e.Id,r[n+"Name"]=u.getQuizName(e),r}this.postQuizPlayEvent=function d(e){var t=r.get(),n=wmjQuery.extend({},l(e),c(e.quiz),{pInit:a.map(t),globalRatio:u.getCourseCompletionPrecentage(e.quiz),status:s.getQuizStatus(e.quiz)});i.postEvent(o.EVENT_SENDER_EVENT_TYPES.Play,n)},this.postQuizSubmittedEvent=function n(e){var t=wmjQuery.extend({},l(e),c(e.quiz));i.postEvent(o.EVENT_SENDER_EVENT_TYPES.Submitted,t)},this.postAnswerSubmittedEvent=function f(e){var t=wmjQuery.extend({},l(e),c(e.quiz,!0),{type:o.EVENT_SENDER_EVENT_APPS.QuizQuestion,oId:e.questionId,aAppType:o.EVENT_SENDER_EVENT_APPS.QuizAnswer,aoId:e.answerId,aType:o.EVENT_SENDER_EVENT_APPS.QuizAnswer,value:e.answer,oName:e.question});i.postEvent(o.EVENT_SENDER_EVENT_TYPES.Submitted,t)},this.postQuizPassEvent=function p(e){t(e,!0)},this.postQuizFailEvent=function g(e){t(e,!1)}}).dependencies("EventSender, Consts, InitiatorManager, ReportInitiatorMapper, QuizStatusManager, QuizEventParamCalculator")}).call(window)},function(e,t,n){(function(){var s=n(622);s.register("QuizEventParamCalculator").asCtor(function e(o){function t(e){return o.getCourseByQuizId(e.Id)}this.getQuizName=function n(e){return t(e).Name+" Quiz"},this.getCourseCompletionPrecentage=function a(e){var t=s.get("LmsProgressProvider"),n=s.get("ObjectsTreeGenerator"),r=o.getCourseByQuizId(e.Id),i=n.generate([r]);return t.getCourseProgress(i[0])},this.getQuizCourseId=function r(e){return t(e).Id}}).dependencies("CoursesManager")}).call(window)},function(e,t,n){(function(){n(622).register("QuizStatusManager").asCtor(function e(n){this.setQuizStatus=function o(e,t){n.saveData(i(e),t,r.expiry)},this.getQuizStatus=function t(e){return n.getData(i(e),null)};var r=n.keysConfig.teachMe.quizResult;function i(e){return r.key+"-"+e.Id}}).dependencies("ClientOrServerStorageManager")}).call(window)},function(e,t,n){(function(){n(622).register("TeachMeConfigManager").asCtor(function r(){this.get=function e(){return t},this.set=function n(e){t=e};var t=[]})}).call(window)},function(e,t,n){(function(){var d=n(622);d.register("QuizPlayer").asCtor(function f(e,t){var n,r;function i(e){return s("QuizQuestionsActivator",{quiz:e,eventRaiser:n})}function o(e){return s("QuizSummaryAnnouncementActivator",{quiz:e.quiz,announcement:e.announcement,results:e.results,eventRaiser:n})}function a(e){var t=d.create("QuizResultsDisplayer",{quizResults:e});return(r=t).show()}function s(e,t){var n=d.create(e,t);return r=n.getUiComponent(),n.activate()}function u(){t.raiseEvent(e.EVENTS.UIComponentDestroyed),r=null}this.releaseAll=function l(e){r&&r.destroy(),r=null,e&&e()},this.playQuiz=function c(e){return(n=d.create("QuizPlayEventRaiser",{quiz:e})).raiseQuizPlayEvent(),function t(e){return s("QuizWelcomeAnnouncementActivator",{quiz:e,eventRaiser:n})}(e).then(i).then(o).then(a).then(u,u)}}).dependencies("Consts, CommonEvents")}).call(window)},function(e,t,n){(function(){n(622).register("QuizPlayEventRaiser").asCtor(function f(r,i,e,t){var o,a;this.raiseQuizPlayEvent=function n(){i.raiseEvent(r.EVENTS.Quizzes.QuizPlay,{currentPlayGuid:a,quiz:o})},this.raiseQuizSubmittedEvent=function s(){i.raiseEvent(r.EVENTS.Quizzes.QuizSubmitted,{currentPlayGuid:a,quiz:o})},this.raiseQuizAnswerSubmittedEvent=function u(e){for(var t={currentPlayGuid:a,quiz:o,questionId:e.questionId,question:e.question},n=0;n<e.userAnswersIds.length;n++)i.raiseEvent(r.EVENTS.Quizzes.QuizAnswerSubmitted,wmjQuery.extend({},t,{answerId:e.userAnswersIds[n],answer:e.userAnswers||e.correctAnswers}))},this.raiseQuizCompletionEvent=function l(e,t){var n=e?r.EVENTS.Quizzes.QuizPass:r.EVENTS.Quizzes.QuizFail;i.raiseEvent(n,{currentPlayGuid:a,quiz:o,score:t})},this.registerXButtonClickedEvent=function c(e){e.once("x-clicked",function(){i.raiseEvent(r.EVENTS.Quizzes.QuizXButtonClicked)})},function d(){o=t.quiz,a=e.generateNewPlayGuid(o.Id)}()}).asProto().dependencies("Consts, CommonEvents, PlayGuidGenerator")}).call(window)},function(e,t,n){(function(l){(function(){n(622).register("QuizWelcomeAnnouncementActivator").asCtor(function u(t,n){var r,i,o;this.getUiComponent=function e(){return o},this.activate=function a(){return i.registerXButtonClickedEvent(o),function t(){o.once("append-end",function(){o.show()});var e=new l(function(e,t){o.once("start-quiz",function(){e()}),o.once("destroy-end",function(){t()})});return o.append(),e}().then(function(){return r})},function s(){r=n.quiz,i=n.eventRaiser;var e=r.WelcomePage;o=t.get(e.UiComponentId,[e,r])}()}).asProto().dependencies("UIComponentsFactory")}).call(window)}).call(this,n(29))},function(e,t,n){(function(c){(function(){n(622).register("QuizQuestionsActivator").asCtor(function l(e,s,t){var n,u,i;this.getUiComponent=function r(){return i},this.activate=function o(){return u.registerXButtonClickedEvent(i),function t(){i.once("append-end",function(){i.show()});var e=new c(function(r,e){i.once("quiz-submitted",function(e,t,n){r({quiz:t,results:n})}),i.once("destroy-end",function(){e()})});return i.append(),e}().then(function(e){for(var t=e.results,n=e.quiz,r=0;r<t.questionsResults.length;r++){var i=t.questionsResults[r];u.raiseQuizAnswerSubmittedEvent(i)}u.raiseQuizSubmittedEvent();var o=1==t.didPassQuiz,a=o?n.SuccessSummeryPage:n.FailSummeryPage;return u.raiseQuizCompletionEvent(o,t.score),s.setQuizStatus(n,t.didPassQuiz),c.resolve({quiz:n,announcement:a,results:t})})},function a(){n=t.quiz,u=t.eventRaiser,i=e.get(n.UiComponentId,n)}()}).asProto().dependencies("UIComponentsFactory, QuizStatusManager")}).call(window)}).call(this,n(29))},function(e,t,n){(function(u){(function(){n(622).register("QuizSummaryAnnouncementActivator").asCtor(function s(e,n){var r,i;this.getUiComponent=function t(){return i},this.activate=function o(){return r.registerXButtonClickedEvent(i),function t(){i.once("append-end",function(){i.show()});var e=new u(function(e,t){i.once("open-quiz-results",function(){e()}),i.once("destroy-end",function(){t()})});return i.append(),e}().then(function(){return n.results})},function a(){r=n.eventRaiser,i=e.get(n.announcement.UiComponentId,[n.announcement,n.quiz,n.results])}()}).asProto().dependencies("UIComponentsFactory")}).call(window)}).call(this,n(29))},function(o,e,a){(function(i){(function(){var e=a(636),t={init:function n(){i.register("ComponentAPI").dependencies("EndUsersManager").asCtor(function(e){this.setEndUserSettings=e.setEndUserSettings,this.getEndUserSettings=e.getEndUserSettings,this.isWalkMeGeneratedEndUserType=e.isWalkMeGeneratedEndUserType,this.getEndUserGuid=e.getEndUserGuid,this.createEndUserGuid=e.createEndUserGuid,this.getEndUserGuidSource=e.getEndUserGuidSource,this.isEndUserGuidValid=e.isEndUserGuidValid,this.calculateCustomEndUserGuid=e.calculateCustomEndUserGuid})},services:["EndUsersManager"],types:[]};!function r(){a(637)}(),a(69).registerApi(t,e),o.exports=t}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){var D=n(636);D&&D.register("EndUsersManager").asCtor(function x(i,u,l,o,c,t,d,f,n){var a,r,s,p,g=this;g.setEndUserSettings=function C(e){a=e,t.raiseEvent(d.EVENTS.EndUserSettingsSet,{endUserSettings:e})},g.getEndUserSettings=function e(){return a},g.isWalkMeGeneratedEndUserType=function b(){var e=!0;a&&(e=S()||!E(!0));return e},g.getEndUserGuid=E,g.createEndUserGuid=function I(){a||T("Cannot create end user guid before end user settings were set");if(r)return;(r=function t(){if(a){var e=g.calculateCustomEndUserGuid(a);return e?(s="Identifier",w(e)):e=function n(){var e=function t(){return p=i.getData(v.key),i.getData(m.key)}();if(e)return s="Cache",e}()||function r(){var e=!1;a&&"walkme"!=a.Method&&"none"!=a.Method?(s="Generated",e=!0):s="Identifier";var t=o.generateGuid();return u.customerLog("getEndUserGuid: generating new user guid-"+t+" isForced: "+e,3,y),w(t,e),t}(),e}}())&&u.customerLog("getEndUserGuid: created endUserGuid-"+r,3,y)},g.getEndUserGuidSource=function _(){return s},g.isEndUserGuidValid=function A(){return!c.isValueTrue(a&&a.FallbackDisabled)||S()||function e(){return!1!==E(!0)}()},g.calculateCustomEndUserGuid=function P(e){if(!e)return;var t,n=e.Method,r=e.Parameters;switch(n){case"var":r.VarName&&function o(e){return e&&e.nodeType}(t=c.getWindowData(d.WINDOW_CUSTOM_DATA_TYPE.Var,r.VarName))&&(u.customerLog("endUserGuid - invalid variable name",1,y),t=undefined);break;case"salesforce":t=function a(){if(window.walkme_sf_vars)return window.walkme_sf_vars.userId}();break;case"cookie":r.VarName&&(t=c.getWindowData(d.WINDOW_CUSTOM_DATA_TYPE.Cookie,r.VarName));break;case"jquery":r.VarName&&(t=l.getjQueryElementText(r.VarName));break;case"idp":t=function s(){var e="IntegrationCenterEndUserIDPInitializer";!h&&D.has(e)&&(h=D.get(e));if(h){var t=h.getData();if(t&&t.id)return t.id}return null}()}var i={method:n,params:r,endUserGuid:t};return t=f.send("EndUserRetrieved",i)||t};var h,m=i.keysConfig.endUser.guid,v=i.keysConfig.endUser.forcedGenerate,y="endUser";function S(){return"walkme"==a.Method||"none"==a.Method}function E(e){return r||n.get()||T("Cannot get end user guid before it was created"),e&&p?(u.customerLog("Could not retrieve endUserGuid",3,y),!1):r}function w(e,t){i.saveData(m.key,e,m.expiry),t?(p=!0,i.saveData(v.key,1,v.expiry)):(p=!1,i.removeData(v.key))}function T(e){var t=new Error(e);throw u.error(t),t}(function k(){}).apply(null,arguments)}).dependencies("ClientStorageManager, Logger, JQueryElementFinder, GuidGenerator, CommonUtils, CommonEvents, Consts, MessageSender, IsInEditor")}).call(window)},function(o,e,a){(function(i){(function(){var e=a(639),t={init:function n(){i.register("ComponentAPI").dependencies("AccessibilityUtils").asCtor(function(e){this.getFocusablesInsideElement=e.getFocusablesInsideElement,this.announce=e.announce,this.moveElementToEnd=e.moveElementToEnd,this.orderElementsByTabIndex=e.orderElementsByTabIndex})},services:["AccessibilityUtils"],types:[]};!function r(){a(640)}(),a(69).registerApi(t,e),o.exports=t}).call(window)}).call(this,a(2))},function(e,t,n){(function(){e.exports=n(69).create()}).call(window)},function(e,t,n){(function(){n(639).register("AccessibilityUtils").asCtor(function e(r,i){this.getFocusablesInsideElement=function o(e,n,r){var t=wmjQuery(e),i=[];return t.first().focusable(0,n,r)&&i.push(t[0]),0!=t.children().length&&i.push.apply(i,e.find("*").filter(function(e,t){return wmjQuery(t).focusable(0,n,r)}).toArray()),wmjQuery(i)},this.announce=function a(e){var t=r.getTopContainer(),n=wmjQuery("#wm-announcement",t);n.length||((n=wmjQuery(t[0].ownerDocument.createElement("div"))).attr({id:"wm-announcement","aria-live":"polite"}),n.css("opacity","0"),n.css("height","0px"),wmjQuery(t.append(n))),n.text(" "),i.libSetTimeout(function(){n.text(e)},100)},this.moveElementToEnd=function s(e,t){var n=wmjQuery(t,e);0!=n.length&&wmjQuery(e).append(n)},this.orderElementsByTabIndex=function u(e){for(var t=0,n=[],r={},i=0;i<e.length;i++){var o=e[i].tabIndex||0;t=Math.max(t,o),r[o]||(r[o]=[]),r[o].push(e[i])}if(0==t)return e;for(var a=1;a<=t;a++)r[a]&&n.push.apply(n,r[a]);return n.push.apply(n,r[0]),wmjQuery(n)}}).dependencies("TopContainerProvider, TimerManager")}).call(window)},function(e,t,n){"object"==typeof e.exports&&(e.exports=function r(e){var c;function f(a,e,s){var t=!0,u=function o(e,t){var n=undefined;try{var r=new RegExp(t,"g");return n=e.cssText.replace(r,".walkme-hover-css")}catch(i){return undefined}return n}(e,s);if(!u)return t;var n=e.selectorText.split(","),l=new RegExp("([^:]*)"+s+"(.*)");try{c.each(n,function(e,t){var n=l.exec(t);if(!n||-1<t.indexOf(" > "+s))return!0;var r=n[1],i=a.parents().addBack().filter(r),o=n[2];""!=o&&(i=i.find(o).addBack()),c.each(i,function(e,t){var n=t.ownerDocument,r=n.createElement("style");r.type="text/css",r.title="walkme-hover-css-style",r.innerHTML=u,n.getElementsByTagName("head")[0].appendChild(r),c(t).addClass("walkme-hover-css")})})}catch(r){t=!1}return t}this.addElementClass=function p(e,t){for(var n=!0,r=function c(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}(e[0].ownerDocument.styleSheets),i=0;i<r.length;i++){var o=r[i];try{for(var a=o.cssRules||o.rules,s=0;s<(a&&a.length);s++){var u=a[s];if(u&&u.selectorText&&-1<u.selectorText.indexOf(t)){var l=f(e,u,t);n&&!l&&(n=!1)}}}catch(d){n=!1}}return n},this.removeElementClass=function t(){c(".walkme-hover-css").removeClass("walkme-hover-css")},function n(){c=e.jQ}.apply(null,arguments)})},function(e,a,u){(function(s,i,o){(function(){"use strict";a.__esModule=!0;var e=u(643),t=u(116),n=(r.prototype.measure=function(e){return this.addTask(this._measures,e)},r.prototype.mutate=function(e){return this.addTask(this._mutations,e)},r.prototype.remove=function(e){this.removeTask(this._measures,e),this.removeTask(this._mutations,e)},r.prototype.removeTask=function(e,t){var n=wmjQuery.inArray(t,e);-1<n&&e.splice(n,1)},r.prototype.cleanResources=function(){this._cleanFunc&&this._flushHandler&&this._cleanFunc(this._flushHandler),this._measures=[],this._mutations=[],this._flushHandler=null,this._scheduled=!1},r.prototype.addTask=function(n,r){var e=new i(function(e,t){n.push(function(){e(r())})});return this.scheduleFlush(),e},r.prototype.scheduleFlush=function(){var e=this;this._scheduled||(this._scheduled=!0,this._flushHandler=this._syncFunc(function(){e.flush()}))},r.prototype.flush=function(){var e=this;for(this.killswitch.fuse();0<this._measures.length||0<this._mutations.length;)this.ElementFinder.wrapSession(function(){e.runTasks(e._measures)}),this.runTasks(this._mutations);this._scheduled=!1},r.prototype.runTasks=function(e){for(var t;t=e.shift();)try{t(),this.killswitch.check()}catch(n){this.logger.error(n,"error running DOMSessionManager task")}},o([e.Measure(t.MEASUREMENT_KEYS.DomSessionManagerFlush)],r.prototype,"flush"),r);function r(e,t,n,r,i,o){if(this.ElementFinder=t,this.logger=i,this.killswitch=o,this._measures=[],this._mutations=[],n)this._syncFunc=function(){return n.apply(e,arguments)},this._cleanFunc=function(){r.apply(e,arguments)};else{var a=s.get("TimerManager");this._syncFunc=function(e){return a.setWalkmeTimeout(e,16)}}}a.DOMSessionManager=n,s.register("DOMSessionManager").asCtor(n).dependencies("win, ElementFinder, requestAnimationFrame, cancelAnimationFrame, Logger, Killswitch")}).call(window)}).call(this,u(2),u(29),u(72))},function(e,t,n){(function(o,a){(function(){"use strict";t.__esModule=!0,t.Measure=function e(r,i){return void 0===i&&(i={}),function(e,t){var n=e[t];e[t]=function(){var e=o.get("PerformanceAPI").measure(r),t=n.apply(this,arguments);return i.waitForPromise?a.resolve(t).then(function(){return e.stop()}):e.stop(),t}}}}).call(window)}).call(this,n(2),n(29))},function(e,t,o){(function(i){(function(){"use strict";function n(){return function t(){if(i.has("WmInternals")){var e=i.get("WmInternals");e.__tti&&e.__tti.o&&e.__tti.o.disconnect()}}(),!1}t.__esModule=!0,e.exports={shouldLoad:function r(e){if(!e)return n();var t=i.get("FeaturesManager");return!(!!i.get("HostData").isIE()||!t.isFeatureEnabled("user-centric-perf"))||n()},load:function(t){o.e(9).then(function(){(function(e){t(o(760))}).apply(null,[o])})["catch"](o.oe)}}}).call(window)}).call(this,o(2))},function(e,t,r){(function(n){(function(){e.exports={shouldLoad:function(){var e=n.get("HostData").isIEOlderThan(9),t=n.get("IsInEditor").get();return!e&&t},load:function(n){r.e(10).then(function(){(function(e){var t=r(770);n(t)}).apply(null,[r])})["catch"](r.oe)},type:n.get("DynamicComponentTypes").ElementsTether}}).call(window)}).call(this,r(2))},function(i,e,o){(function(r){(function(){var e=r.get("SiteConfigManager"),t=r.get("IsInEditor");i.exports={shouldLoad:function n(){return!!t.get()||"california"===e.get().BalloonSettings.BalloonStyle},load:function(n){o.e(11).then(function(){(function(e){var t=o(774);r.register("BalloonStyleProvider").asInstance(t),n(t)}).apply(null,[o])})["catch"](o.oe)},type:r.get("DynamicComponentTypes").BalloonStyles}}).call(window)}).call(this,o(2))},function(e,t,o){(function(i){(function(){var t=i.get("SiteConfigManager"),n=i.get("IsInEditor");e.exports={shouldLoad:function r(){if(n.get())return!1;var e=t.get().BalloonSettings.BalloonStyle;return"classic"===e||e==undefined},load:function(n){o.e(12).then(function(){(function(e){var t=o(783);i.register("BalloonStyleProvider").asInstance(t),n(t)}).apply(null,[o])})["catch"](o.oe)}}}).call(window)}).call(this,o(2))},function(t,e,n){(function(e){(function(){t.exports={shouldLoad:function(e){return 0<e.Tutorials.length},load:function(t){n.e(13).then(function(){(function(e){t(n(785))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").Walkthru}}).call(window)}).call(this,n(2))},function(n,e,r){(function(t){(function(){var i=t.get("HostData"),o=t.get("FeaturesManager"),a=t.get("LocalStorageService");n.exports={shouldLoad:function s(e){var t=!i.isIEOlderThan(11),n=o.isFeatureEnabled("ActionBots")||a&&!!a.getItem("wm_actionbot_enabled"),r=o.isFeatureEnabled("ActionBotsDisabled")||a&&!!a.getItem("wm_actionbot_disabled");return t&&n&&!r},load:function e(t){r.e(14).then(function(){(function(e){t(r(838))}).apply(null,[r])})["catch"](r.oe)},type:t.get("DynamicComponentTypes").ActionBot}}).call(window)}).call(this,r(2))},function(e,t,r){(function(n){(function(){e.exports={shouldLoad:function(e){var t=e.SiteConfig&&e.SiteConfig.Settings&&e.SiteConfig.Settings.liveChat&&e.SiteConfig.Settings.liveChat.isEnabled&&!1===n.has("LiveChat");return t||n.get("Logger").customerLog("will not load chat integration",3)},load:function(t){r.e(15).then(function(){(function(e){t(r(839))}).apply(null,[r])})["catch"](r.oe)},type:n.get("DynamicComponentTypes").LiveChat}}).call(window)}).call(this,r(2))},function(t,e,n){(function(e){(function(){var i=e.get("HostData"),o=e.get("FeaturesManager"),a=e.get("LocalStorageService");t.exports={shouldLoad:function s(e){if(e){var t=!i.isIEOlderThan(11),n=o.isFeatureEnabled("IntegrationCenterWebhooksActive")||a&&!!a.getItem("wm_integrationcenterwebhooksactive_enabled"),r=o.isFeatureEnabled("IntegrationCenterWebhooksDisabled")||a&&!!a.getItem("wm_integrationcenterwebhooks_disabled");return t&&!r&&n}},load:function(t){n.e(16).then(function(){(function(e){t(n(856))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").IntegrationCenterWebhooks}}).call(window)}).call(this,n(2))},function(t,e,u){(function(e){(function(){var n="IntegrationCenterEndUserIDPActive",r="IntegrationCenterEndUserIDPDisabled",i=e.get("FeaturesManager"),o=e.get("LocalStorageService"),a=e.get("SnippetModeIdentifier");t.exports={shouldLoad:function s(e){if(e&&e.SiteConfig&&e.SiteConfig.EndUserSettings){if(a.isPlayMode()||"idp"!==e.SiteConfig.EndUserSettings.Method)return!1;var t=i.isFeatureEnabled(n)||o&&!!o.getItem(n);return!(i.isFeatureEnabled(r)||o&&!!o.getItem(r))&&t}},load:function(t){u.e(17).then(function(){(function(e){t(u(857))}).apply(null,[u])})["catch"](u.oe)},type:e.get("DynamicComponentTypes").IntegrationCenterEndUserIDP}}).call(window)}).call(this,u(2))},function(t,e,n){(function(e){(function(){var r=e.get("HostData"),i=e.get("FeaturesManager"),o=e.get("LocalStorageService");t.exports={shouldLoad:function a(){var e;e=i.isFeatureEnabled("DpUiCrossBrowser")?r&&r.browser&&"IE"!==r.browser.name||9<=r.browser.version:r&&r.browser&&"Chrome"===r.browser.name;var t=i.isFeatureEnabled("DeepUi")||o&&!!o.getItem("wm_deepui_enabled"),n=i.isFeatureEnabled("DeepUiDisabled")||o&&!!o.getItem("wm_deepui_disabled");return o&&!!o.getItem("wm_deepui_enabled_anyway")||e&&t&&!n},load:function(t){n.e(18).then(function(){(function(e){t(n(858))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").DeepUI}}).call(window)}).call(this,n(2))},function(t,e,r){(function(e){(function(){t.exports={shouldLoad:function(){return!e.get("HostData").isIEOlderThan(9)},load:function(n){r.e(19).then(function(){(function(e){var t=r(859);n(t)}).apply(null,[r])})["catch"](r.oe)},type:e.get("DynamicComponentTypes").RichTextEditorConverter}}).call(window)}).call(this,r(2))},function(e,t,i){(function(r){(function(){e.exports={shouldLoad:function(){return r.get("FeaturesManager").isFeatureEnabled("useVisualDesignWC")&&r.get("CommonUtils").isWebComponentSupported()},load:function(n){i.e(20).then(function(){(function(e){var t=i(886);r.register("VisualDesignDrawableCreator").asInstance(t),n(t)}).apply(null,[i])})["catch"](i.oe)}}}).call(window)}).call(this,i(2))},function(e,t,i){(function(r){(function(){e.exports={shouldLoad:function(){return!r.get("FeaturesManager").isFeatureEnabled("useVisualDesignWC")||!r.get("CommonUtils").isWebComponentSupported()},load:function(n){i.e(21).then(function(){(function(e){var t=i(890);r.register("VisualDesignDrawableCreator").asInstance(t),n(t)}).apply(null,[i])})["catch"](i.oe)}}}).call(window)}).call(this,i(2))},function(n,e,r){(function(e){(function(){var t=e.get("ShouldLoadWidgetInLibChecker");n.exports={shouldLoad:function(e){return t.shouldLoad()},load:function(t){r.e(22).then(function(){(function(e){t(r(893))}).apply(null,[r])})["catch"](r.oe)},type:e.get("DynamicComponentTypes").Widget}}).call(window)}).call(this,r(2))},function(e,t,n){(function(t){(function(){e.exports={shouldLoad:function(){var e=t.get("SettingsFile").getSettingsFile().Components;return!(!e||!e.DataLib)},load:function(t){n.e(23).then(function(){(function(e){t(n(961))}).apply(null,[n])})["catch"](n.oe)}}}).call(window)}).call(this,n(2))},function(t,e,n){(function(e){(function(){var r=e.get("FeaturesManager"),i=e.get("LocalStorageService");t.exports={shouldLoad:function o(){var e=!!window.analytics&&window.analytics.Integrations&&window.analytics.Integrations.WalkMe,t=r.isFeatureEnabled("SegmentIntegration")||i&&!!i.getItem("wm_segment"),n=r.isFeatureEnabled("SegmentIntegrationDisabled")||i&&!!i.getItem("wm_segment_disabled");return(e||t)&&!n},load:function(t){n.e(24).then(function(){(function(e){t(n(964))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").Segment}}).call(window)}).call(this,n(2))},function(r,e,i){(function(n){(function(){var e=n.get("FeaturesManager");r.exports={shouldLoad:function t(){return e.isFeatureEnabled("blackListElements")},load:function(t){i.e(25).then(function(){(function(e){t(i(965))}).apply(null,[i])})["catch"](i.oe)},type:n.get("DynamicComponentTypes").BlackListElements}}).call(window)}).call(this,i(2))},function(e,t,n){(function(s){(function(){"use strict";t.__esModule=!0;var o=n(662),a=n(665);o.to_html=function(e,t,n,r){var i=e;if("string"==typeof i){if(s.get("FeaturesManager").isFeatureEnabled("mustacheCspSupport"))return a.to_html(e,t,n,r);i=this.compile(e)}return"function"==typeof i&&(i=new o.Template({code:i})),i.render(t,n)},s.register("Mustache").asInstance(o)}).call(window)}).call(this,n(2))},function(e,t,n){var r=n(663);r.Template=n(664).Template,r.template=r.Template,e.exports=r},function(e,t,n){!function(E){var w=/\S/,t=/\"/g,n=/\n/g,r=/\r/g,i=/\\/g,o=/\u2028/,a=/\u2029/;function T(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function C(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function b(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}E.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},E.scan=function(e,t){var n,r,i,o,a,s=e.length,u=0,l=null,c=null,d="",f=[],p=!1,g=0,h=0,m="{{",v="}}";function y(){0<d.length&&(f.push({tag:"_t",text:new String(d)}),d="")}function S(e,t){if(y(),e&&function i(){for(var e=!0,t=h;t<f.length;t++)if(!(e=E.tags[f[t].tag]<E.tags._v||"_t"==f[t].tag&&null===f[t].text.match(w)))return!1;return e}())for(var n,r=h;r<f.length;r++)f[r].text&&((n=f[r+1])&&">"==n.tag&&(n.indent=f[r].text.toString()),f.splice(r,1));else t||f.push({tag:"\n"});p=!1,h=f.length}for(t&&(t=t.split(" "),m=t[0],v=t[1]),g=0;g<s;g++)0==u?b(m,e,g)?(--g,y(),u=1):"\n"==e.charAt(g)?S(p):d+=e.charAt(g):1==u?(g+=m.length-1,u="="==(l=(c=E.tags[e.charAt(g+1)])?e.charAt(g+1):"_v")?(r=g,void 0,i="="+v,o=(n=e).indexOf(i,r),a=C(n.substring(n.indexOf("=",r)+1,o)).split(" "),m=a[0],v=a[a.length-1],g=o+i.length-1,0):(c&&g++,2),p=g):b(v,e,g)?(f.push({tag:l,n:C(d),otag:m,ctag:v,i:"/"==l?p-m.length:g+v.length}),d="",g+=v.length-1,u=0,"{"==l&&("}}"==v?g++:T(f[f.length-1]))):d+=e.charAt(g);return S(p,!0),f};var l={_t:!0,"\n":!0,$:!0,"/":!0};function c(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function d(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function s(e){var t=[];for(var n in e.partials)t.push('"'+f(n)+'":{name:"'+f(e.partials[n].name)+'", '+s(e.partials[n])+"}");return"partials: {"+t.join(",")+"}, subs: "+function r(e){var t=[];for(var n in e)t.push('"'+f(n)+'": function(c,p,t,i) {'+e[n]+"}");return"{ "+t.join(",")+" }"}(e.subs)}E.stringify=function(e,t,n){return"{code: function (c,p,i) { "+E.wrapMain(e.code)+" },"+s(e)+"}"};var u=0;function f(e){return e.replace(i,"\\\\").replace(t,'\\"').replace(n,"\\n").replace(r,"\\r").replace(o,"\\u2028").replace(a,"\\u2029")}function p(e){return~e.indexOf(".")?"d":"f"}function g(e,t){var n="<"+(t.prefix||"")+e.n+u++;return t.partials[n]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+f(n)+'",c,p,"'+(e.indent||"")+'"));',n}function e(e,t){t.code+="t.b(t.t(t."+p(e.n)+'("'+f(e.n)+'",c,p,0)));'}function h(e){return"t.b("+e+");"}E.generate=function(e,t,n){u=0;var r={code:"",subs:{},partials:{}};return E.walk(e,r),n.asString?this.stringify(r,t,n):this.makeTemplate(r,t,n)},E.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},E.template=E.Template,E.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},E.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=new Function("c","p","t","i",e.subs[t]);return n},E.codegen={"#":function(e,t){t.code+="if(t.s(t."+p(e.n)+'("'+f(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',E.walk(e.nodes,t),t.code+="});c.pop();}"},"^":function(e,t){t.code+="if(!t.s(t."+p(e.n)+'("'+f(e.n)+'",c,p,1),c,p,1,0,0,"")){',E.walk(e.nodes,t),t.code+="};"},">":g,"<":function(e,t){var n={partials:{},code:"",subs:{},inPartial:!0};E.walk(e.nodes,n);var r=t.partials[g(e,t)];r.subs=n.subs,r.partials=n.partials},$:function(e,t){var n={subs:{},code:"",partials:t.partials,prefix:e.n};E.walk(e.nodes,n),t.subs[e.n]=n.code,t.inPartial||(t.code+='t.sub("'+f(e.n)+'",c,p,i);')},"\n":function(e,t){t.code+=h('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+p(e.n)+'("'+f(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=h('"'+f(e.text)+'"')},"{":e,"&":e},E.walk=function(e,t){for(var n,r=0,i=e.length;r<i;r++)(n=E.codegen[e[r].tag])&&n(e[r],t);return t},E.parse=function(e,t,n){return function u(e,t,n,r){var i,o=[],a=null,s=null;for(i=n[n.length-1];0<e.length;){if(s=e.shift(),i&&"<"==i.tag&&!(s.tag in l))throw new Error("Illegal content in < super tag.");if(E.tags[s.tag]<=E.tags.$||c(s,r))n.push(s),s.nodes=u(e,s.tag,n,r);else{if("/"==s.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+s.n);if(a=n.pop(),s.n!=a.n&&!d(s.n,a.n,r))throw new Error("Nesting error: "+a.n+" vs. "+s.n);return a.end=s.i,o}"\n"==s.tag&&(s.last=0==e.length||"\n"==e[0].tag)}o.push(s)}if(0<n.length)throw new Error("missing closing tag: "+n.pop().n);return o}(e,0,[],(n=n||{}).sectionTags||[])},E.cache={},E.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},E.compile=function(e,t){t=t||{};var n=E.cacheKey(e,t),r=this.cache[n];if(r){var i=r.partials;for(var o in i)delete i[o].instance;return r}return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r}}(t)},function(e,t,n){!function(e){function c(e,t,n){var r;return t&&"object"==typeof t&&(t[e]!==undefined?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(e,t,n){return""},v:function u(e){return e=s(e),a.test(e)?e.replace(t,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(i,"&#39;").replace(o,"&quot;"):e},t:s,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var n=this.partials[e],r=t[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[e].base=r,n.subs){for(key in t.stackText||(t.stackText={}),n.subs)t.stackText[key]||(t.stackText[key]=this.activeSub!==undefined&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);r=function c(e,t,n,r,i,o){function a(){}function s(){}var u;s.prototype=(a.prototype=e).subs;var l=new a;for(u in l.subs=new s,l.subsText={},l.buf="",r=r||{},l.stackSubs=r,l.subsText=o,t)r[u]||(r[u]=t[u]);for(u in r)l.subs[u]=r[u];for(u in i=i||{},l.stackPartials=i,n)i[u]||(i[u]=n[u]);for(u in i)l.partials[u]=i[u];return l}(r,n.subs,n.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=r},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(d(r))for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop();else n(e,t,this)},s:function(e,t,n,r,i,o,a){var s;return(!d(e)||0!==e.length)&&("function"==typeof e&&(e=this.ms(e,t,n,r,i,o,a)),s=!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,r){var i,o=e.split("."),a=this.f(o[0],t,n,r),s=this.options.modelGet,u=null;if("."===e&&d(t[t.length-2]))a=t[t.length-1];else for(var l=1;l<o.length;l++)a=(i=c(o[l],a,s))!==undefined?(u=a,i):"";return!(r&&!a)&&(r||"function"!=typeof a||(t.push(u),a=this.mv(a,t,n),t.pop()),a)},f:function(e,t,n,r){for(var i=!1,o=!1,a=this.options.modelGet,s=t.length-1;0<=s;s--)if((i=c(e,t[s],a))!==undefined){o=!0;break}return o?(r||"function"!=typeof i||(i=this.mv(i,t,n)),i):!r&&""},ls:function(e,t,n,r,i){var o=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(s(e.call(t,r)),t,n)),this.options.delimiters=o,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,o,a){var s,u=t[t.length-1],l=e.call(u);return"function"==typeof l?!!r||(s=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(l,u,n,s.substring(i,o),a)):l},mv:function(e,t,n){var r=t[t.length-1],i=e.call(r);return"function"==typeof i?this.ct(s(i.call(r)),r,n):i},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}};var t=/&/g,n=/</g,r=/>/g,i=/\'/g,o=/\"/g,a=/[&<>\"\']/;function s(e){return String(null===e||e===undefined?"":e)}var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)},function(e,t){e.exports=function(){var t=Object.prototype.toString;Array.isArray=Array.isArray||function(e){return"[object Array]"==t.call(e)};var o,n,r,i=String.prototype.trim;i?o=function(e){return null==e?"":i.call(e)}:(r=/\S/.test(" ")?(n=/^[\s\xA0]+/,/[\s\xA0]+$/):(n=/^\s+/,/\s+$/),o=function(e){return null==e?"":e.toString().replace(n,"").replace(r,"")});var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function a(){}var s={};return a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,r){if(r||(this.context=t,this.buffer=[]),!this.includes("",e))return r?e:void this.send(e);e=this.render_pragmas(e);var i=this.render_section(e,t,n);if(!1===i&&(i=this.render_tags(e,t,n,r)),r)return i;this.sendLines(i)},send:function(e){""!==e&&this.buffer.push(e)},sendLines:function(e){if(e)for(var t=e.split("\n"),n=0;n<t.length;n++)this.send(t[n])},render_pragmas:function(e){if(!this.includes("%",e))return e;var i=this,t=this.getCachedRegex("render_pragmas",function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")});return e.replace(t,function(e,t,n){if(!i.pragmas_implemented[t])throw{message:"This implementation of mustache doesn't understand the '"+t+"' pragma"};if(i.pragmas[t]={},n){var r=n.split("=");i.pragmas[t][r[0]]=r[1]}return""})},render_partial:function(e,t,n){if(e=o(e),!n||n[e]===undefined)throw{message:"unknown_partial '"+e+"'"};return t&&"object"==typeof t[e]?this.render(n[e],t[e],n,!0):this.render(n[e],t,n,!0)},render_section:function(e,c,d){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var f=this,t=this.getCachedRegex("render_section",function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+?)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g")});return e.replace(t,function(e,t,n,r,i,o){var a,s=t?f.render_tags(t,c,d,!0):"",u=o?f.render(o,c,d,!0):"",l=f.find(r,c);return"^"===n?a=!l||Array.isArray(l)&&0===l.length?f.render(i,c,d,!0):"":"#"===n&&(a=Array.isArray(l)?f.map(l,function(e){return f.render(i,f.create_context(e),d,!0)}).join(""):f.is_object(l)?f.render(i,f.create_context(l),d,!0):"function"==typeof l?l.call(c,i,function(e){return f.render(e,c,d,!0)}):l?f.render(i,c,d,!0):""),s+a+u})},render_tags:function(e,i,o,t){function a(){return s.getCachedRegex("render_tags",function(e,t){return new RegExp(e+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+t+"+","g")})}function n(e,t,n){switch(t){case"!":return"";case"=":return s.set_delimiters(n),u=a(),"";case">":return s.render_partial(n,i,o);case"{":case"&":return s.find(n,i);default:return function r(e){return String(e).replace(/&(?!#?\w+;)|[<>"']/g,function(e){return c[e]||e})}(s.find(n,i))}}for(var s=this,u=a(),r=e.split("\n"),l=0;l<r.length;l++)r[l]=r[l].replace(u,n,this),t||this.send(r[l]);if(t)return r.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){arguments.callee.sRE=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return!1===e||0===e||e}var r;if((e=o(e)).match(/([a-z_]+)\./gi)){var i=this.walk_context(e,t);n(i)&&(r=i)}else n(t[e])?r=t[e]:n(this.context[e])&&(r=this.context[e]);return"function"==typeof r?r.apply(t):r!==undefined?r:""},walk_context:function(e,t){for(var n=e.split("."),r=t[n[0]]!=undefined?t:this.context,i=r[n.shift()];i!=undefined&&0<n.length;)i=(r=i)[n.shift()];return"function"==typeof i?i.apply(r):i},includes:function(e,t){return-1!=t.indexOf(this.otag+e)},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&"object"==typeof e},map:function(e,t){if("function"==typeof e.map)return e.map(t);for(var n=[],r=e.length,i=0;i<r;i++)n.push(t(e[i]));return n},getCachedRegex:function(e,t){var n=s[this.otag],r=(n=n||(s[this.otag]={}))[this.ctag],i=(r=r||(n[this.ctag]={}))[e];return i=i||(r[e]=t(this.otag,this.ctag))}},{name:"mustache.js",version:"0.4.2",to_html:function(e,t,n,r){var i=new a;if(r&&(i.send=r),i.render(e,t||{},n),!r)return i.buffer.join("\n")}}}()},function(e,t,n){(function(r,n){(function(){var e=(t.prototype.listen=function(e){this._handlers.push(e),this._messageHandler||(this._messageHandler=wmjQuery.proxy(function(){this.handleMessage.apply(this,arguments)},this),window.addEventListener?window.addEventListener("message",this._messageHandler,!1):window.attachEvent("onmessage",this._messageHandler))},t.prototype.addTeardownCallback=function(e){this._teardownHandlers.push(e)},t.prototype.cleanResources=function(){for(var e=this,t=[],n=0;n<this._teardownHandlers.length;n++)t.push(this._teardownHandlers[n]());return r.all(t).then(function(){return e.releaseEventHandlers()})},t.prototype.releaseEventHandlers=function(){this._messageHandler&&(window.addEventListener?window.removeEventListener("message",this._messageHandler,!1):window.detachEvent("onmessage",this._messageHandler),this._messageHandler=null,this._handlers=[])},t.prototype.handleMessage=function(e){for(var t=0;t<this._handlers.length;++t)try{this._handlers[t].apply(null,arguments)}catch(n){this.logger.error(n)}},t);function t(e,t,n){this.logger=t,this._handlers=[],this._teardownHandlers=[]}n.register("PostMessageListener").asCtor(e).dependencies("Consts,Logger,WmInternals")}).call(window)}).call(this,n(29),n(2))},function(e,t,n){(function(e,r){(function(){"use strict";t.__esModule=!0,e.register("AsyncSiteConfig").dependencies("SiteConfigManager,WmInternals").asFunction(function(t,n){return{get:function(){var e=t.get();return e&&0!==e.length?r.resolve(e):new r(function(e){n.bind("DataLoadedEvent",function(){return e(t.get())})})}}})}).call(window)}).call(this,n(2),n(29))},function(e,n){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.sync=function(e,t,n){return n},t);function t(){}n.DummyEventsTrigger=e}).call(window)},function(e,i,o){(function(n,r,g){(function(){"use strict";i.__esModule=!0;var f,e=o(670),t=(f=e.HighlighterBase,n(p,f),p.prototype.shouldShow=function(){return this._highlighterService.shouldShow(this._balloonSettings)},p.prototype.applyStyle=function(){var e=this;return this._customerLog("Highlighter applyStyle start creating highlighter",3),r.all([this.embedHighliterDiv(this._consts.POSITION_TYPE.Top),this.embedHighliterDiv(this._consts.POSITION_TYPE.Right),this.embedHighliterDiv(this._consts.POSITION_TYPE.Bottom),this.embedHighliterDiv(this._consts.POSITION_TYPE.Left)]).then(function(){e._customerLog("Highlighter applyStyle finished creating highlighter",3)})},p.prototype.embedHighliterDiv=function(t){var n=this,e=this._element,r=this._settings.thickness,i=this._settings.color,o=this._settings.zIndex;this._customerLog("embed Highlighter to div"+this._element,3);var a=this._consts.POSITION_PERIMETER_TYPE.Outside,s=this.createDiv(t),u=this._positionHelper.getMultipleElementsRect(e),l=u.right-u.left,c=u.bottom-u.top;switch(t){case this._consts.POSITION_TYPE.Top:case this._consts.POSITION_TYPE.Bottom:s.css({height:r+"px",width:l+2*r+this._settings.width+"px","background-color":i,"z-index":o});break;case this._consts.POSITION_TYPE.Right:case this._consts.POSITION_TYPE.Left:s.css({height:c+2*r+this._settings.height+"px",width:r+"px","background-color":i,"z-index":o});break;default:return}var d=g.get("ElementEmbedderFactory").get(wmjQuery(this._element),this._embedInElement);return d.embed(s,a,t).then(function(){var e=d.getElement();n.applyDivSettings(e.getOriginElement(),t),n._embeddedElements.push(e.getTopMostElement())})},p.prototype.createDiv=function(e){var t=this._highlighterService.generateId(p.CLASS_NAME,this._drawableType,e,this._drawableId),n=this._highlighterService.generateCssClasses(p.INSTANCE_NAME,this._cssKeysValues);n+=" walkme-custom-highlighter-position-"+e;var r=wmjQuery("<div/>",{id:t,"class":n});return this._domManager.setAttribute(r,"style","position:absolute; left: 0px; top: 0px;"),this._customerLog("Highlighter createDiv id="+t+" classes="+n,3),r},p.prototype.applyDivSettings=function(e,t){var n=parseFloat(e.css("top").replace("px","")),r=parseFloat(e.css("left").replace("px",""));switch(this._customerLog("Highlighter applyDivSettings before top="+n+" left="+r,3),t){case this._consts.POSITION_TYPE.Top:n=n+this._settings.top-this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Bottom:n=n+this._settings.top+this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Right:n=n+this._settings.top+"px",r=r+this._settings.left+this._settings.width/2+"px";break;case this._consts.POSITION_TYPE.Left:n=n+this._settings.top+"px",r=r+this._settings.left-this._settings.width/2+"px"}this._customerLog("Highlighter applyDivSettings after top="+n+" left="+r,3),e.css({top:n,left:r})},p.prototype.getSettings=function(e,t){var n=this._highlighterService.getDefaultSettings();return t?(n.color=p.DEFAULT_COLOR,n.thickness=p.DEFAULT_THINKNESS):(this._highlighterService.copyFloatProperties(n,e),n.color=n.color||this._siteConfigManager.get().BalloonSettings.HighlighterColor||p.DEFAULT_COLOR,n.thickness=n.thickness||this._siteConfigManager.get().BalloonSettings.HighlighterThickness||p.DEFAULT_THINKNESS),n.zIndex=this.getZIndex(),this._customerLog("Highlighter getSettings highlight settings",3),this._customerLog(n,3),n},p.prototype.getZIndex=function(){var e=this.getDefaultZIndex();return this._commonUtils.getSettingsValue(this._balloonSettings,"z-index",e)},p.prototype.getDefaultZIndex=function(){return this._shouldDrawInSetTimeout?p.DEFAULT_ZINDEX-1:p.DEFAULT_ZINDEX},p.prototype.highlight=function(e){return this._processNum++,this.unhighlightElement(),this.drawAndHandleEvents()},p.prototype.drawAndHandleEvents=function(){var t=this;return this.applyStyle().then(function(){var e=1<t._processNum;if(t._monitor&&(t.unregisterMonitorEvents(),t._commonUtils.registerEventHandler(p.ENTER_ELEMENT_EVENT,t._handlerEnterWrapper,!0,t._element[0]),t._commonUtils.registerEventHandler(p.EXIT_ELEMENT_EVENT,t._handlerLeaveWrapper,!0,t._element[0])),t._processNum--,t._featuresManager.isFeatureEnabled(t._features.BalloonShowDestroySync))return e})},p.prototype.handlerEnter=function(){wmjQuery.each(this._embeddedElements,function(e,t){t.hide()})},p.prototype.handlerLeave=function(){wmjQuery.each(this._embeddedElements,function(e,t){t.show()})},p.prototype.unregisterMonitorEvents=function(){try{this._commonUtils.unregisterEventHandler(p.EXIT_ELEMENT_EVENT,this._handlerLeaveWrapper,!0,this._element[0]),this._commonUtils.unregisterEventHandler(p.ENTER_ELEMENT_EVENT,this._handlerEnterWrapper,!0,this._element[0])}catch(e){}},p.prototype.unhighlightElement=function(){this.unregisterMonitorEvents(),wmjQuery.each(this._embeddedElements,function(e,t){t.remove()}),this._embeddedElements=[]},p.prototype.getClassName=function(){return p.CLASS_NAME},p.prototype.getInstanceName=function(){return p.INSTANCE_NAME},p.prototype.getHighlighterDivs=function(){return wmjQuery.map(this._embeddedElements,function(e){return e.toArray()})},p.STEP_HL_OBJ="stepHlObj",p.DEFAULT_COLOR="#55aaff",p.DEFAULT_ZINDEX=2147483630,p.DEFAULT_THINKNESS=1,p.INSTANCE_NAME="highlighter",p.CLASS_NAME="highlightDiv",p.ENTER_ELEMENT_EVENT="mouseover",p.EXIT_ELEMENT_EVENT="mouseout",p);function p(e,t,n,r,i,o,a,s,u,l){var c=f.call(this,o,t,n,l)||this;c._embeddedElements=[],c._consts=n,c._commonUtils=t,c._siteConfigManager=e,c._highlighterService=r,c._positionHelper=i,c._customerLog=o.wrapCustomerLog(n.HIGHLIGHTER.LOG_FEATURE),c._element=l.element,c._drawableId=l.drawableId,c._drawableType=l.drawableType,c._cssKeysValues=l.cssKeysValues,c._embedInElement=l.embedInElement,c._balloonSettings=l.settings,c._useDefaultSettings=l.defaultSettings,c._shouldDrawInSetTimeout=a.isIEOlderThan(8);var d=c._commonUtils.getSettingsValue(c._balloonSettings,p.STEP_HL_OBJ);return c._settings=c.getSettings(d,l.defaultSettings),c._monitor=l.monitor&&!c._settings.doNotHideOnHover,c._handlerEnterWrapper=wmjQuery.proxy(c.handlerEnter,c),c._handlerLeaveWrapper=wmjQuery.proxy(c.handlerLeave,c),c._processNum=0,c._featuresManager=s,c._features=n.FEATURES,c._domManager=u,c}i.Highlighter=t,g.register("Highlighter").asCtor(t).asProto().dependencies("SiteConfigManager, CommonUtils, Consts, HighlighterService, PositionHelper, Logger, HostData, FeaturesManager, DomManager")}).call(window)}).call(this,o(1),o(29),o(2))},function(e,n,t){(function(i){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.shouldShow=function(){},t.prototype.getSettings=function(e,t){return this._highlighterService.getDefaultSettings()},t.prototype.init=function(e){this.settings=this.initSettings(e,this._useDefaultSettings),this._cssClasses=this._highlighterService.generateCssClasses(this.getInstanceName(),this._cssKeysValues)},t.prototype.initSettings=function(e,t){var n=this.getSettings(e,t),r=this._commonUtils.getSettingsValue(e,this.balloonSettingsKey);return!t&&r&&(this._highlighterService.copyFloatProperties(n,r),n.color=r.color||n.color),n},t.prototype.highlight=function(e){try{this.unhighlightElement(),this.createHighlighterDivs(),this.applyStyle(this.highlighterDivs)}catch(t){this._logger.error(t)}},t.prototype.createHighlighterDivs=function(){for(var e=0;e<4;e++)this.highlighterDivs.push(this.createHighlighterDiv(e))},t.prototype.removeHighlighterDiv=function(e){if(e)try{e.remove()}catch(t){this.customerLog("[highlighter] error removing div",3)}},t.prototype.createHighlighterDiv=function(e){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,e,this._drawableId),n=this.createDiv(t);return n.addClass(this._cssClasses),n.addClass("walkme-custom-"+this.getInstanceName()+"-position-"+e),n},t.prototype.unhighlightElement=function(){for(var e=0;e<this.highlighterDivs.length;e++)this.removeHighlighterDiv(this.highlighterDivs[e]);this.highlighterDivs.length=0},t);function t(e,t,n,r){this.balloonSettingsKey="stepHlObj",this._element=null,this.settings=null,this.highlighterDivs=[],this.balloonSettings={},this._logger=e,this._commonUtils=t,this._lib=r.lib,this._drawableType=r.drawableType,this._drawableId=r.drawableId,this._useDefaultSettings=r.defaultSettings,this._cssKeysValues=r.cssKeysValues,this._useExistingHighlighter="undefined"!=typeof r.useExistingHighlighter&&r.useExistingHighlighter,this._useExisitingHighlighterArray=r.useExisitingHighlighterArray,this._highlighterService=i.get("HighlighterService"),this._element=r.element,this.balloonSettings=r.settings,this.customerLog=e.wrapCustomerLog(n.HIGHLIGHTER.LOG_FEATURE)}n.HighlighterBase=e}).call(window)}).call(this,t(2))},function(e,o,a){(function(r,i){(function(){"use strict";o.__esModule=!0;var f,e=a(670),t=(f=e.HighlighterBase,r(n,f),n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,t){var n=f.prototype.getSettings.call(this,e,t);return n.color=this.DEFAULT_COLOR,n.opacity=.5,n.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),n},n.prototype.getDocumentSize=function(){var e=wmjQuery(document),t=document.documentElement.clientWidth;return{height:e.height(),width:t}},n.prototype.getContainer=function(){return wmjQuery(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else{t=1<this._element.length?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect();var a=this._featuresManager.isFeatureEnabled(this._consts.FEATURES.NoScrollTop);r=this._positionHelper.getOffsetRect(n,i,window,a)}var s=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(s.x,s.y,s.w,s.h,e),this._commonEvents.raiseEvent(this._consts.EVENTS.SpotlightCreated,{spotlightDivs:e})},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin(),s=[0,o.height],u=s[0],l=s[1];this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],u,e+n,Math.floor(o.width-n-e),l),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],u,0,e-.5,l)},n.prototype.setDivCss=function(e,t,n,r,i){e&&e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("position","absolute").css("background-color",this.settings.color)},n.prototype.createContainerDiv=function(){var e=this._highlighterService.generateId(this.getClassName(),this._drawableType,"main",this._drawableId),t=wmjQuery('<div id="'+e+'" class="wm-insideouter-container" />').addClass(this._cssClasses).appendTo(this.getContainer());return this.setCssStyle(t,this.settings.zindex),t.css("opacity",this.settings.opacity).css("background-color","").css("display","block").css("top",0).css("left",0).css("width",0).css("height",0),t},n.prototype.createHighlighterDivs=function(){this.containerDiv&&this.unhighlightElement(),this.containerDiv=this.createContainerDiv(),f.prototype.createHighlighterDivs.call(this)},n.prototype.unhighlightElement=function(){this.containerDiv&&this.containerDiv.remove(),this.containerDiv=null,this.highlighterDivs.length=0},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(e){var t=wmjQuery("<div id="+e+" />");return this.containerDiv.append(t),t},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n.prototype.getHighlighterDivs=function(){return wmjQuery.map(this.highlighterDivs,function(e){return e.toArray()})},n);function n(e,t,n,r,i,o,a,s,u,l,c){var d=f.call(this,e,r,u,c)||this;return d.topMostCssStyleSettter=a,d.STEP_IO_OBJ="stepIoObj",d.DEFAULT_ZINDEX="2147483629",d.DEFAULT_COLOR="#000000",d.containerDiv=null,d._hostData=t,d._positionHelper=n,d._siteConfigManager=i,d._elementInIframeIndicator=o,d._commonEvents=s,d._consts=u,d._featuresManager=l,d.balloonSettingsKey=d.STEP_IO_OBJ,f.prototype.init.call(d,c.settings),d}i.register("Insideout").asCtor(t).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter, CommonEvents, Consts, FeaturesManager")}).call(window)}).call(this,a(1),a(2))},function(e,o,a){(function(r,i){(function(){"use strict";o.__esModule=!0;var d,e=a(670),t=(d=e.HighlighterBase,r(n,d),n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,t){var n=d.prototype.getSettings.call(this,e,t);return n.color=this.DEFAULT_COLOR,n.opacity=.5,n.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),n},n.prototype.getDocumentSize=function(){var e=wmjQuery(document),t=document.documentElement.clientWidth;return{height:e.height(),width:t}},n.prototype.getContainer=function(){return wmjQuery(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else{t=1<this._element.length?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect();var a=this._featuresManager.isFeatureEnabled(this._consts.FEATURES.NoScrollTop);r=this._positionHelper.getOffsetRect(n,i,window,a)}var s=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(s.x,s.y,s.w,s.h,e)},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin();this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],t,e+n,Math.floor(o.width-n-e),r),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],t,0,e-.5,r)},n.prototype.setDivCss=function(e,t,n,r,i){e&&(this.setCssStyle(e,this.settings.zindex),e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("background-color",this.settings.color).css("opacity",this.settings.opacity))},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(e){var t=wmjQuery("<div id="+e+" />");return wmjQuery(document).find("body").append(t),t},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n.prototype.getHighlighterDivs=function(){return wmjQuery.map(this.highlighterDivs,function(e){return e.toArray()})},n);function n(e,t,n,r,i,o,a,s,u,l){var c=d.call(this,t,i,e,l)||this;return c.topMostCssStyleSettter=s,c.STEP_IO_OBJ="stepIoObj",c.DEFAULT_ZINDEX="2147483629",c.DEFAULT_COLOR="#000000",c._hostData=n,c._positionHelper=r,c._siteConfigManager=o,c._elementInIframeIndicator=a,c._featuresManager=u,c._consts=e,c.balloonSettingsKey=c.STEP_IO_OBJ,d.prototype.init.call(c,l.settings),c}i.register("OldInsideout").asCtor(t).asProto().dependencies("Consts, Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter, FeaturesManager,")}).call(window)}).call(this,a(1),a(2))},function(e,s){(function(){"use strict";s.__esModule=!0;var e=(t.prototype.onGotValue=function(e){},t.prototype.getValue=function(e){return e||(this._lastValue=this._valueFunc()),this._lastValue},t.prototype.onResourceClean=function(e){this._onClean=e},t.prototype.cleanResources=function(){this._onClean&&this._onClean()},t.prototype.onRefresh=function(){},t.prototype.refresh=function(){},t);function t(e){this._valueFunc=e}var n=(r.prototype.onGotValue=function(e){this._callback=e},r.prototype.setValue=function(e){this._value=e,this._callback&&this._callback()},r.prototype.getValue=function(){return this._value},r.prototype.onResourceClean=function(e){this._onClean.push(e)},r.prototype.cleanResources=function(){for(var e=0;e<this._onClean.length;e++)try{this._onClean[e]()}catch(t){}this._onClean.length=0,this._callback=undefined},r.prototype.onRefresh=function(e){this._onRefresh=e},r.prototype.refresh=function(){this._onRefresh&&this._onRefresh()},r);function r(e){this._onClean=[],this._value=e}var i=(o.prototype.getValue=function(e){return e||(this._lastValue=this._pred(this._res1.getValue,this._res2.getValue)),this._lastValue},o.prototype.onGotValue=function(e){this._res1.onGotValue(e),this._res2.onGotValue(e)},o.prototype.cleanResources=function(){this._res1.cleanResources(),this._res2.cleanResources(),this._callback=undefined},o.prototype.refresh=function(){this._res1.refresh(),this._res2.refresh()},o);function o(e,t,n){this._res1=e,this._res2=t,this._pred=n}s.AsyncResult={fixed:function a(e){var t=new n;return t.setValue(e),t},noMemory:e,regular:n,complex:i}}).call(window)},function(e,o,a){(function(r,i){(function(){"use strict";o.__esModule=!0;var l,c=a(673),e=a(176),t=((l=n).prototype.getCurrentEvaluationValueAndStopEvaluating=function(e){this.onValueChanged(undefined),this.evaluateAsync(e);var t=this.getCachedValue();return this.cleanResources(),t},n.prototype.getValue=function(){return this.innerGetValue(!1)},n.prototype.innerGetValue=function(e){return this._result.getValue(e)},n.prototype.getCachedValue=function(){return this.innerGetValue(!0)},n.prototype.isPollingEvaluation=function(){return 0<=this._conditionCheckerPollingIntervalMs&&!this._isStopEvaluate},n.prototype.cleanResources=function(){this._oldValue=!1,this._isStopEvaluate=!0,this._logger(this._elementName+" - ConditionChecker cleans resources",5,this._featureName),this.cleanResultAndTimer(),this.uiChangeTracker.unbind(this._uiChangeCallback),l.unregisterInstance(this),this._getSelectedElement=undefined,this.cleanTree(this._dirtyTree)},n.prototype.cleanTree=function(e){e&&(e.funcArgs&&delete e.funcArgs.getSelectedElement,this.cleanTree(e.leftSon),this.cleanTree(e.rightSon))},n.prototype.cleanResultAndTimer=function(){this._result&&this._result.cleanResources(),this._timerHandle&&this._timerHandle.clear()},n.prototype.onValueChanged=function(e){this._onValueChanged=e},n.prototype.callOnValueChangedIfExist=function(e,t){this.raiseEventWithSubTreesResults(),this._onValueChanged&&(t=t!==undefined&&t,this._logger(this._elementName+" - ConditionChecker calls onValueChanged",4,this._featureName),this._onValueChanged(e,t))},n.prototype.raiseEventWithSubTreesResults=function(){this.debuggerManager.isDebuggerOnWindow()&&this.commonEvents.raiseEvent(this.consts.EVENTS.ConditionTreeResult,this._subTreesResults)},n.prototype.onPreEvaluation=function(e){this._onPreEvaluation=e},n.prototype.callOnPreEvaluationIfExist=function(e,t){this._onPreEvaluation&&(t=t!==undefined&&t,this._logger(this._elementName+" - ConditionChecker calls onPreEvaluation",5,this._featureName),this._onPreEvaluation(e,t))},n.prototype.onEvaluated=function(e){this._onEvaluated=e},n.prototype.callOnEvaluatedIfExist=function(e,t){this._onEvaluated&&(t=t!==undefined&&t,this._logger(this._elementName+" - ConditionChecker calls onEvaluated",5,this._featureName),this._onEvaluated(e,t))},n.prototype.onSonar=function(e){this._onSonar=e},n.prototype.callOnSonarIfExist=function(){this._onSonar&&this._onSonar()},n.prototype.evaluateAsyncAndDontEvaluateImmediately=function(e){l.registerInstance(this),this.innerEvaluateAsync(e,!0)},n.prototype.evaluateAsync=function(e){l.registerInstance(this),this.innerEvaluateAsync(e,!1)},n.prototype.innerEvaluateAsync=function(e,t){this._dirtyTree=e,this._isStopEvaluate=!1,this.handleUIChangeTracking(),this.evaluateAsyncCall(e,t)},n.prototype.handleUIChangeTracking=function(){var e=this;this._uiChangeCallback=function(){e._result.refresh(),e._trackUIChange&&e.reEvaluate(!0)},this.uiChangeTracker.bind(this._uiChangeCallback)},n.prototype.evaluateAsyncCall=function(e,t){this.firstEvaluation(e,t),this.startPollingEvaluation(e)},n.prototype.firstEvaluation=function(e,t){this._logger(this._elementName+" - ConditionChecker evaluates async tree",5,this._featureName),this.prepareResult(e),this._oldValue=undefined,t?this._oldValue=!1:this.reEvaluateResult(!0)},n.prototype.prepareResult=function(e){var t=this;this._result=this.createResult(e),this._result.onGotValue(function(){if(t.callOnSonarIfExist(),t._evaluateSonar){var e=t.reEvaluateResult(!0);t._stopPollingAfterEvaluateTrue&&e&&t.cleanResources()}})},n.prototype.startPollingEvaluation=function(e){var t=this;this.isPollingEvaluation()&&(this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs))},n.prototype.reEvaluate=function(e){var t=this;if(!this._isStopEvaluate){var n=this.reEvaluateResult(e),r=this.shouldPollingStop(n);!this.isPollingEvaluation()||r||e?r&&this.cleanResources():this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs)}},n.prototype.reEvaluateResult=function(e){this.callOnPreEvaluationIfExist(undefined,e),this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName);var t=this.getValue();return this._oldValue!==t&&(this.callOnValueChangedIfExist(t,e),this._oldValue=t),this.callOnEvaluatedIfExist(t,e),t},n.prototype.shouldPollingStop=function(e){return!(!e||(this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName),!this._stopPollingAfterEvaluateTrue)||(this._elementName,this._featureName,0))},n.prototype.createResult=function(e){var a=this,n={Func:function u(e){var t=a.conditionFunctions.isFuncSticky(e.funcName),n=a.conditionFunctions.getFunctionsByLibNameType(e.funcName);e.funcArgs.getSelectedElement=a._getSelectedElement,e.funcArgs.ownerChain=a.getConditionOwnerChain(e.ConditionId,t);var r={conditionId:e.ConditionId,funcArgs:e.funcArgs,pollingInterval:t?a._conditionFunctionsPollingInterval:l.NO_POLLING};function i(){return n.call(this,r)}var o=t||a.conditionFunctions.isFuncAsync(e.funcName)?i():new c.AsyncResult.noMemory(i);return s(o,e),o},And:t(function(e,t){return e()&&t()}),Or:t(function(e,t){return e()||t()})};return null==e?c.AsyncResult.fixed(!0):o(e);function o(e){var t=n[e.nodeType];return t?t(e):(a._logError(null,"Faulty treeNode",e),c.AsyncResult.fixed(!1))}function t(i){return function(e){var t=o(e.leftSon),n=o(e.rightSon),r=new c.AsyncResult.complex(t,n,i);return s(r,e),r}}function s(n,r){var i=n.getValue;n.getValue=function(e){return r.result=i.apply(n,[e]),a._subTreesResults[r.ConditionId]=function t(e){return{id:e.ConditionId,type:e.nodeType,result:e.result}}(r),r.result}}},n.prototype.getConditionOwnerChain=function(e,t){if(e)return{owner:this._ownerChain,id:e,type:this.consts.ELEMENT_OWNER_TYPE_NAMES.CONDITION,stickyType:t}},n.registerInstance=function(e){l.instances[e._id]||(e._id=l.sequence,++l.sequence,l.instances[e._id]=e)},n.unregisterInstance=function(e){delete l.instances[e._id]},n.cleanResources=function(){for(var e in l.instances)l.instances.hasOwnProperty(e)&&l.instances[e].cleanResources();l.instances={}},n.NO_POLLING=-1,n.instances={},n.sequence=0,n=l=r([e.SkipMinification()],n));function n(e,t,n,r,i,o,a,s){this.timerManager=e,this.conditionFunctions=t,this.uiChangeTracker=n,this.commonEvents=i,this.consts=o,this.debuggerManager=a,s=s||{},this._conditionCheckerPollingIntervalMs=s.evaluationPollingIntervalMs&&!s.onlyPollConditionFunctions?s.evaluationPollingIntervalMs:l.NO_POLLING,this._conditionFunctionsPollingInterval=s.evaluationPollingIntervalMs||l.NO_POLLING,this._getSelectedElement=s.getSelectedElement,this._stopPollingAfterEvaluateTrue=s.stopPollingAfterEvaluateTrue===undefined||s.stopPollingAfterEvaluateTrue,this._evaluateSonar=s.evaluateSonar===undefined||s.evaluateSonar,this._featureName=s.featureName,this._elementName=s.elementName,this._ownerChain=s.ownerChain,this._trackUIChange=s.trackUIChange,this._logger=r.wrapCustomerLog("ConditionChecker"),this._logError=r.error,this._subTreesResults={},l.registerInstance(this),s=null}o.ConditionChecker=t,i.register("ConditionCheckerType").asInstance(t),i.register("ConditionChecker").asCtor(t).asProto().dependencies("TimerManager, ConditionFunctions, UIChangeTracker, Logger, CommonEvents, Consts, DebuggerManager")}).call(window)}).call(this,a(72),a(2))},function(e,o,a){(function(r,i){(function(){"use strict";o.__esModule=!0;var c,e=a(674),t=(c=e.ConditionChecker,r(n,c),n.prototype.evaluateAsync=function(e){var t=this.newToOldConditionConverter.convert(e.Root);c.prototype.evaluateAsync.call(this,t)},n.prototype.evaluateAsyncAndDontEvaluateImmediately=function(e){var t=this.newToOldConditionConverter.convert(e.Root);c.prototype.evaluateAsyncAndDontEvaluateImmediately.call(this,t)},n);function n(e,t,n,r,i,o,a,s,u){var l=c.call(this,e,t,n,r,i,o,a,u)||this;return l.newToOldConditionConverter=s,l}i.register("NewConditionCheckerType").asInstance(t)}).call(window)}).call(this,a(1),a(2))},function(e,t,n){var _=n(677),A=n(681),P=n(682),k=n(683),D=n(684),x=n(685),N=n(686),O=n(687),L=n(688),r=n(690),F=n(691),i=["JQueryElementFinder","PositionHelper","HtmlDecoder","Logger","Consts","CommonUtils","ArrayUtils","TimerManager","FeaturesManager","SimpleNLP","win","FindElementPlugins","ElementFinderExtensionsProvider","FindElementDebugger","JsonUtils"];function o(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,h){var m=h.ctx,v=new O(m),y=new P(u),S=new A(v,y,E),E=new k(s,y,S,p),w=new D(s,v,a,o,p,E,y),T=new x(d,o,v),C=new N(l,c,y,v),b=L(y,T,g),I=new F(y,w,a,v);return new _(e,t,n,T,y,E,r,i,p,C,o,w,f,v,S,b,I)}e.exports={registerToCtx:function a(e){e.has("FindElementDebugger")||e.register("FindElementDebugger").asInstance({isEnabled:function(){return!1},shouldMeasure:function(){return!1}});var t=i.join(","),n=new r;e.register("PageIdentifierResultManager").asInstance(n),e.register("FindElementPlugins").asInstance([]),e.register("ElementFinder").asFunction(o).dependencies(t).args({ctx:e}).asSingleton()}}},function(e,t,n){var o=n(678);o.VersionName="classic";var a=n(679);a.VersionName="next-gen";var s=n(680);e.exports=function l(u,d,f,c,m,v,e,t,y,p,g,S,h,E,w,T,C){var b,I,_=this,n=!1,i={};function A(e){return{0:b.ElementRecognition.AlgorithmSensitivity.Low,1:b.ElementRecognition.AlgorithmSensitivity.Medium,2:b.ElementRecognition.AlgorithmSensitivity.High}[e]}function P(e,t,n,r,i){var o,a=h.getElementFinderExtension(e);if(a)return a.findElement(e,t,n.scoreOut,r,i);if(!1===c.extendOriginalSettings(e,n))return!1;if((I(e,5),p.isEnabled()&&p.getPageKey(e))&&!p.compareCurrent(e).match)return!1;if(e.IsJquerySelector){e.ElementDescription.extended=e.ElementDescription.extended||{},e.ElementDescription.extended.elementIframe=null;var s=u.findElements(e,t);return!!(o=s&&s.length&&s[0])&&(o=wmjQuery(o),e.ElementDescription.extended&&o.data("iframe",e.ElementDescription.extended.elementIframe),o)}return(o=c.findElement(e,n))!==undefined?(n.reason="plugin",n.scoreOut&&wmjQuery(o)[0]&&k(n,{totalScore:n.scoreOut.score||n.scoreOut.totalScore||0},undefined,e),o?wmjQuery(o):o):!0===e.ElementDescription.r&&m.isFeatureEnabled("disableDefaultFE")?!(n.reason="disable"):!!(o=function l(e,t,n,r,i,o){var a=_.recognizeElement(e,t,n,r,i,o),s=_.getWinner(a),u=s&&s.element&&s.element.length&&s.element[0];return r&&(r.scoreOut&&(r.scoreOut.losers=a.losers,r.scoreOut.targetPhase=a.targetPhase,s&&(r.scoreOut.totalScore=s.totalScore,r.scoreOut.details=s.details,r.scoreOut.screenerDetails=s.screenerDetails,k(r,s,a.losers,e))),a.timeMeasurements&&(r.timeMeasurements=a.timeMeasurements)),u&&wmjQuery(u).data("iframe",a.context),u}(e,e.ElementDescription,t,n,r,i))&&wmjQuery(o)}function k(e,t,n,r){e.scoreOut.score=s({feStrengthCalc:m.isFeatureEnabled("feStrengthCalc"),result:{winner:t,losers:n},stepSensitivity:r.StepSensitivity,sensitivityMap:i})}_.initFE=function(){n||(b=m.isFeatureManagerReady()?(n=!0,!m.isFeatureEnabled("enableFEAllTypes")&&!window.walkMeGermany||m.isFeatureEnabled("dw5")?o:a):o,S.setFE(b),i[b.ElementRecognition.AlgorithmSensitivity.Low]=0,i[b.ElementRecognition.AlgorithmSensitivity.Medium]=1.45,i[b.ElementRecognition.AlgorithmSensitivity.High]=3,b.ElementRecognition.setOptions({jquery:wmjQuery,commonUtils:g,now:E.now,sensitivityMap:i}))},_.getThreshold=function(e){return i[e]},_.getFindElementCore=function(){return b},_.getVersion=function(){return b.Version},_.adaptDescription=function(e,t,n,r){var i=!m.isFeatureEnabled("fe_no_xpath_cache"),o=new b.ElementRecognition.ElementDescription(i);o.plugins=t.plugins,o.preDefinedSuspects=r,o.elementType=function c(e){var t=e.split("/");return t[t.length-1].split("[")[0]}(t.elementXpath.toLowerCase()),o.uppercaseElementType=o.elementType.toUpperCase(),o.width=t.elementWidth,o.height=t.elementHeight,o.relativeLeft=t.relativeLeft,o.absY=t.elementAbsY,o.centeredElementWidth=t.centeredElementWidth,o.xpathArrayOriginal=b.XpathLib.xpathStringToArray(t.elementXpath.toUpperCase()),o.xpathArray=b.XpathLib.removeHtmlAndBodyFromXpathArray(o.xpathArrayOriginal),o.customContext=t.customContext,t.relXpath&&(o.relXpath=b.XpathLib.xpathStringToArray(t.relXpath.toUpperCase()));var a=b.ContextUtils.getXpathUpToIframe(o.relXpath||o.xpathArrayOriginal);o.xpathArrayToIframe=b.XpathLib.removeHtmlAndBodyFromXpathArray(a),o.text=t.textArray&&0<t.textArray.length?f.decodeHtml(t.textArray[0],["&",'"',"'",">","<"]):"",o.autoQuery=t.autoQuery?f.decodeHtml(t.autoQuery,['"']).replace(/([.:])/gm,function(e,t,n,r){return"\\"!==r[n-1]?"\\"+t:t}):null,o.target=t.target,t["data-walkmeid"]?o.customSelector="[data-walkmeid='"+t["data-walkmeid"]+"']":n!=undefined&&!n||(o.visibilityFilter=d.getVisibleFilter(e));var s={elementClass:"class",elementId:"id",elementName:"name"};for(var u in o.attributes={},s)o.attributes[s[u]]=t[u];for(var l in t)!t.hasOwnProperty(l)||o.attributes.hasOwnProperty(l)||s[l]||(o.attributes[l]=t[l]);return o},_.wrapSession=function(e,t){return v.wrapSession(e,t)},_.startSessionForEditor=function(e,t){return v.startSessionForEditor(e,t)},_.endSessionForEditor=function(){return v.endSessionForEditor()},_.recognizeElement=function(e,t,n,r,i,o){var a=v.getSession(i,b);g.isDefined(e.StepSensitivity)&&a.setAlgorithmSensitivity(A(e.StepSensitivity)),a.setSearchOptions(function l(e,t){var n=b.ElementRecognition.SearchOptions.IGNORE_NOTHING,r=[],i=m.isFeatureEnabled("forceIgnorePosition");e.IsIdentifyByText&&r.push("IDENTIFY_TEXT"),e.IsIgnoreText&&r.push("IGNORE_TEXT"),e.IsIgnoreId&&(r.push("IGNORE_ID"),r.push("IGNORE_NAME")),!i&&0==e.IgnorePosition||r.push("IGNORE_POSITION"),e.IsIdentifyById&&r.push("IDENTIFY_ID_AND_NAME"),e.IgnoreShapeProportion&&r.push("IGNORE_SHAPE_PROPORTION"),e.IgnoreClass&&r.push("IGNORE_CLASS"),e.IgnoreStyle&&r.push("IGNORE_STYLE"),e.IgnoreHref&&r.push("IGNORE_HREF"),t["data-walkmeid"]&&r.push("IDENTIFY_WALKME_ID"),m.isFeatureEnabled("noAutoQuery")||r.push("USE_AUTO_SELECTOR");for(var o=0;o<r.length;o++)n|=b.ElementRecognition.SearchOptions[r[o]];return n}(e,t));var s=_.adaptDescription(e,t,n,o);c.extendAdaptedSettings(e,s,r),r.customContext=!!(s.customContext&&0<s.customContext.length);var u=a.recognize(s);return c.extendResult(e,s,u,r),y.isEnabled()&&y.addDebugResult(u,e),u},_.getWinner=function(e){return e&&e.elements&&e.elements.length&&e.elements[0]},_.findElement=function(e,t,n,r,i,o){_.initFE(),v.incrementFeIndex();var a={scoreOut:n};n&&!r&&(E.isInEditor()||E.isDebuggerOnWindow())&&(r=m.isFeatureEnabled("feStrengthCalc")?1:4),y.isEnabled()&&3!==r&&(r=3,I("Switching algorithm mode to 'VerbouseDebug' due to 'debug' flag.",5));var s,u,l,c=e.ElementDescription;if(c&&(u=c._sentIndex||1,c._sentIndex=undefined,l=w.shouldMonitor(u),v.setShouldMonitor(l),l&&u++),s=v.shouldMeasure())var d=E.now();var f=P(e,t,a,r,i);if(s){var p=E.now()-d,g=function h(e,t,n,r,i){e.timeMeasurements||(e.timeMeasurements=[]);var o={name:b.ElementRecognition.MeasurePhase.TotalFindElementTime,duration:t};e.timeMeasurements.push(o);var a=T(n,r,e,i,A);o.misc=a.first;for(var s=0;s<e.timeMeasurements.length;s++)e.timeMeasurements[s].misc=wmjQuery.extend({},a.allEvents,e.timeMeasurements[s].misc);return S.addMeasurement(e.timeMeasurements)}(a,p,e,f,o);e.ElementDescription.target&&n&&m.isFeatureEnabled("fe_compare_jquery")?(n.totalTime=p,n.instanceId=g):v.shouldMonitor()&&C.exec(e,t,r,i,o,f,{out:a,totalTime:p,instanceId:g})}return c&&(c._sentIndex=u),f},_.getFindElementPluginManager=function(){return c},_.getPageComparerCacheManagerEditorApi=function(){return p.editorApi},function r(){I=e.wrapCustomerLog(t.FEATURES_LOGS.ElementFinder)}.apply(this,arguments)}},function(e,t){var a,s,r,n;function u(){for(var e=0;e<arguments.length;e++);return a.apply(a,arguments)}function i(e,t){return e[t]}function l(e,t){return e=e||[],Array.prototype.push.apply(e,t)}function o(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(n,e)}}function c(e){return e}function d(e){return function(){return e}}function f(e){a=s=e.jquery,s.fnHelpers&&(i=function(e,t){return s.fnHelpers[t](e)}),r=e.commonUtils,n=e.now}function p(e){return(e=e.tagName).toUpperCase&&(e=e.toUpperCase()),e}function g(e){return i(e,"parentNode")}function h(e){return i(e,"childNodes")}function m(e,t){for(var n=g(e[0]),r=t&&t[0]&&g(t[0]),i=[];n&&1===n.nodeType&&n!==r;n=g(n))i.push(n);return i}function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function y(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n}function S(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n}function E(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n}function w(e,t,n){e=S(e=E(e.split(t),function(e){return s.trim(e)}),function(e){return e.split(n)}),t={};for(var r=0;r<e.length;r++){var i=e[r],o=s.trim(i[0]),a="";i[1]&&(a=s.trim(i[1])),t[o]=a}return t}var T=(C.prototype.v=function(){var e=n()-this.start;return Math.round(1e3*e)/1e3},C);function C(){this.start=n()}function b(){return new T}function I(e,t){t=t||"*";var n=function o(e,t){t=t||[];e=e||document;for(var n=s("iframe,frame",e).toArray(),r=0;r<n.length;r++){var i=_(s(n[r]))[0];t.push(i),i&&(t=o(i,t))}return t}(e=e||document,[e]);return s(t,n)}function _(e){if(e){if(void 0===(e=e[0]))return s();var t;try{t=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:[],t=s(t)}catch(n){return r.handleCrossDomainError(n),s()}return t}}function A(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1}function P(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),i=(n=e[0],1);i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n}function k(){return(new Date).getTime()%1e9}function D(e,t){return void 0!==t&&0<(e&t)}var x={always:d,bind:o,childNodes:h,kb:m,filter:E,lb:k,mb:I,nb:p,ob:_,pb:c,inArray:A,indexOf:v,Ka:D,map:S,min:P,parentNode:g,push:l,reduce:y,setOptions:f,tb:w,ub:b},N=(H.prototype.get=function(){return this.hasData||(this.data=this.Ma.apply(this.context),this.hasData=!0),this.data},H.prototype.clear=function(){this.hasData=!1},H),O=["IFRAME","FRAME"],L=O.join(":mt_visible,")+":mt_visible",F=O.join(","),M=(G.prototype.append=function(e){this.buffer.push(e)},G.prototype.toString=function(){return this.buffer.join("")},G),R=(j.prototype.count=function(){return this.xpathArray.length},j.prototype.get=function(e){return this.xpathArray[e]},j.prototype.length=function(){return this.xpathArray.length},j.prototype.reverse=function(){return this.xpathArray.reverse(),this},j.prototype.slice=function(e,t){return new j(this.xpathArray.slice.apply(this.xpathArray,arguments))},j),B=(W.prototype.count=function(){return this.xpathArray.length},W.prototype.length=function(){return this.xpathArray.length},W.prototype.reverse=function(){return this.xpathArray.reverse(),this},W.prototype.get=function(e){return this.xpathArray[e].get()},W.prototype.slice=function(e,t){return new W(this.xpathArray.slice.apply(this.xpathArray,arguments))},W),U=(V.prototype.clone=function(){return new V(this.NumNodeRemove,this.NumNodeDiff,this.SumNodeDiff)},V.prototype.i=function(){return this.NumNodeRemove+this.NumNodeDiff/4+this.SumNodeDiff/10},V.max=function(){return new V(1e4,0,0)},V.i=function(e){return e.i()},V);function V(e,t,n){this.SumNodeDiff=this.NumNodeDiff=this.NumNodeRemove=0,this.NumNodeRemove=e,this.NumNodeDiff=t,this.SumNodeDiff=n}function W(e){this.xpathArray=e}function j(e){this.xpathArray=e}function G(){this.buffer=[]}function H(e,t){this.Ma=t,this.hasData=!1,this.context=e}function Y(e,t,d){return function f(e,t,n,r,i){if(Math.abs(t-r)>d||i.NumNodeRemove>d)return U.max();if(0===t||0===r)return(i=i.clone()).NumNodeRemove+=Math.max(t,r,0),i.NumNodeRemove>d?U.max():i;var o,a=e.get(t-1),s=n.get(r-1),u=0;if(a.tag!==s.tag)u=1,o=U.max();else{if(a.index===s.index)return f(e,t-1,n,r-1,i);u=1}var l=i.clone();l.NumNodeRemove+=u;u=f(e,t-1,n,r,l);var c=f(e,t,n,r-1,l);return o||(a=Math.abs(a.index-s.index),l=i.clone(),0<a&&(l.NumNodeDiff++,l.SumNodeDiff+=a),o=f(e,t-1,n,r-1,l)),P([u,c,o],U.i)}(e,e.count(),t,t.count(),new U(0,0,0))}function Q(e,t,n,r){var i=e.count();if(i<=0)return null;t=u(t||document),r=r?":not("+r+")":"";for(var o=0;o<i;o++){var a=e.get(o);if(t=t.children(a.tag+r).eq(a.index-1),-1!==A(a.tag,["IFRAME","FRAME"])&&o+1<i&&(0<t.length&&(n&&t.data("iframe",n),n=t),t=_(t)),!t||0===t.length||!t.get(0)){t=null;break}}return t&&0<t.length&&n&&t.data("iframe",n),t}function z(e,t){if(!t||t.count()<=0)return 0;for(var n=t.get(t.count()-1).tag,r=function l(t,n){function e(e){return q(n,e,function(e){return e===t},!1)}for(var r=e(0),i=[];0<=r&&r<n.count()-1;)i.push(n.slice(0,r+1)),r=e(r+1);return i}(n,e),i=n=U.max().i(),o=[],a=0;a<r.length;a++){var s=r[a],u=Y(s,t,2).i();u<i?(i=u,o=[s]):u===i&&o.push(s)}return r=0,i<n&&(r=P(o,function(e){return Math.abs(t.count()-e.count())}).count()),r}function q(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function K(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push($(e,i,n,r)),e=i;return X(o=o.reverse(),n)}function J(e,t,n,r){n=n&&n[0];for(var i=(e=e[0])&&g(e),o=[];e&&1===e.nodeType&&e!==n;i=g(e=i))o.push($(e,i,t,r));return X(o=o.reverse(),t)}function X(e,t){return t?new B(e):new R(e)}function $(e,t,n,r){return n?n.ra(e,t,r):Z(e,t,r)}function Z(e,t,n){var r=1;if("HTML"!==p(e)){t=h(t);for(var i=0;i<t.length&&t[i]!==e;i++){var o=t[i];o.tagName===e.tagName&&A(o,n)<0&&r++}}return{tag:e.tagName.toUpperCase(),index:r}}var ee=(te.prototype.ra=function(e,t,n){var r=null,i=this.l(e);return void 0!==i&&(r=this.fa[i]),r||(r=function o(e,t,n){return new N(null,function(){return Z(e,t,n)})}(e,t,n),t=this.o(),this.q(e,t),this.fa[t]=r),r},te.prototype.l=function(e){return e&&e[te.Q]||void 0},te.prototype.q=function(e,t){e&&(e[te.Q]=t)},te.prototype.o=function(){return++te.L},te.L=k(),te.Q="__WM_XPATH_ENTRY_KEY__",te);function te(){this.fa={}}function ne(e,t,n,r){return ie(e=K(e[0],t,n,r))}function re(e,n,r){var t=function i(e){return!e||e.length<=0?null:1===e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1===e.get(0).nodeType?e:null}(e);return!t||t.length<=0?new R([]):X((t=y(t=function a(e,t,n,r){r=r||[];var i=t=t||u(document);if(0<(i&&9===i[0].nodeType&&!i[0].contains?i[0].documentElement===e[0]?e:u(i[0].documentElement).find(e):i.find(e)).length)e.data("iframe",n),r.unshift(t);else for(n=r.length,t=t.find(F),i=0;i<t.length;i++){var o=t.eq(i);if((r=a(e,_(o),o,r)).length>n){u(r[0]).data("iframe",o),r.unshift(o);break}}return r}(t),function(e,t){return e.concat(J(t,n,null,r).xpathArray)},[])).concat(J(e,n,null,r).xpathArray),n)}function ie(e){for(var t=["HTML","BODY"],n=0;n<e.count()&&-1<A(e.get(n).tag,t);n++);return e.slice(n)}function oe(e){for(var t=new M,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()}var ae,se={XpathArray:R,XpathArrayCached:B,TagCost:1,IndexCost:1,XpathDistance:U,calcDistance:Y,findElementByXPath:Q,sliceXpathArrayByContextXpath:z,getTagIndex:q,calculateXpathFast:K,calculateXpath:J,XpathCacheManager:ee,calculateXpathNoHtmlAndBody:ne,calculateFullXpath:re,removeHtmlAndBodyFromXpathArray:ie,xpathToString:oe,xpathStringToArray:function(e){var t=[];e=e.split("/");for(var n=1;n<e.length;n++){var r=e[n],i=r.indexOf("[");t.push({tag:r.substring(0,i),index:parseInt(r.substring(i+1,r.length-1),10)})}return new R(t)}},ue=ae=ae||{};ue[ue.IGNORE_ALL=4294967295]="IGNORE_ALL",ue[ue.IGNORE_NOTHING=0]="IGNORE_NOTHING",ue[ue.IGNORE_ID=1]="IGNORE_ID",ue[ue.IGNORE_POSITION=2]="IGNORE_POSITION",ue[ue.IGNORE_NAME=4]="IGNORE_NAME",ue[ue.IGNORE_TEXT=8]="IGNORE_TEXT",ue[ue.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",ue[ue.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",ue[ue.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",ue[ue.IGNORE_XPATH=256]="IGNORE_XPATH",ue[ue.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",ue[ue.IGNORE_CLASS=1024]="IGNORE_CLASS",ue[ue.IGNORE_STYLE=2048]="IGNORE_STYLE",ue[ue.IGNORE_HREF=4096]="IGNORE_HREF",ue[ue.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR";var le,ce=le=le||{};function de(e){if(1===e.count())return e;var t=q(e,1,fe,!0);return-1===t?e:e.slice(t+1)}function fe(e){return-1!==A(e,O)}function pe(e,t,n,r,i,o){var a=q(e,0,fe,!1);if(a<0)return n;var s=e.slice(0,a+1);return e=e.slice(a+1),0===(a=u(L,i||n)).length?null:(a=1===a.length?a[0]:P(a,function(e){return Y(e=J(u(e),t,u(n),r),s,1).i()}),(o||n&&0<n.length&&i&&0<i.length)&&u(a).data("iframe",o||n),pe(e,t,u(a),r,_(u(a))))}function ge(e){var t,n,r,i;if(e.relXpath){var o;t=e.relXpath,o=e.xpathArrayOriginal;var a,s=e.relXpath;0<(l=z(o.reverse(),s.reverse()))&&(a=o.slice(l).reverse()),o.reverse(),s.reverse(),o=a?ie(a):void 0,e.f=o}else n=re(e.customContext,e.e,e.k),r=z(e.xpathArrayOriginal,n),t=e.xpathArrayOriginal.slice(r);o=t;s=e.e;var u=e.customContext,l=e.k;if(a=e.ignoreWalkmeElementsSelector,1===o.count())i=u;else{var c=q(o,1,fe,!0);if(-1===c)i=u;else{u=u||[null];for(var d=0;!i&&d<u.length;d++){var f=u[d]?u.eq(d):null,p=_(f),g=(p=p&&0<p.length?p:null)?f:f?f.data("iframe"):null;(i=Q(i=o.slice(0,c+1),p||f,g,a))&&i.is(":mt_visible")||(i=null),i=i||pe(o,s,f,l,p,g)}}}return s=(o=(i=i||e.customContext)&&i.is(F))?_(i):i&&0<i.length?i:void 0,(i={context:i,Ha:o,contents:s}).f=n,i.Aa=r,i.Za=t,e.g=i.contents,i}function he(e,t){var n=e.a,r=t.f,i=t.Aa,o=t.Za,a=ae.IGNORE_XPATH;e.setSearchOptions(e.b&~a),!n.relXpath&&r&&r.count()&&n.g===n.customContext&&(i<=0&&e.setSearchOptions(e.b|a),n.xpathArrayToIframe=de(o))}function me(e){var t;return e&&(t=e.Ha?e.context:u(e.context).data("iframe")),t}ce[ce.Indifferent=0]="Indifferent",ce[ce.Accepted=1]="Accepted",ce[ce.Rejected=2]="Rejected";var ve,ye={getXpathUpToIframe:de,updateContextContents:ge,optimizeXpathOption:he,prepareContext:function(e){var t=ge(e.a);return he(e,t),me(t)},getContextIFrame:me},Se=ve=ve||{};function Ee(e){return we(e[0])}function we(e){var t="";if(e.nodeType===ve.Text||e.nodeType===ve.CDATASection){t=e.nodeValue,e=[160,10,13,9];for(var n=new M,r=0;r<t.length;r++)v(e,t.charCodeAt(r))<0&&n.append(t.charAt(r).toLowerCase());if(t=(t=function o(){for(var e=0;e<arguments.length;e++);return a.trim.apply(a,arguments)}(t=n.toString().replace(/ /g,""))).substring(0,70),null!==/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(t)){for(e=-1,n=t.length,r=new M;++e<n;){var i=t.charAt(e);/[\uD800-\uDBFF]/.test(i)||/[\uDC00-\uDFFF]/.test(i)?r.append(Te(i)):r.append(i)}t=r}}else if(e.nodeType===ve.ElementNode&&!e.tagName.match(/^(script|style)$/i))for(n=0,r=(e=h(e)).length;n<r&&!(t=we(e[n]));n++);return t}function Te(e){var t=2<(e=e.charCodeAt(0).toString(16).toUpperCase()).length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}Se[Se.ElementNode=1]="ElementNode",Se[Se.Text=3]="Text",Se[Se.CDATASection=4]="CDATASection";var Ce,be,Ie={maxTextLength:70,extractFirstOccuringText:Ee,deepExtractText:we},_e=(Ve.prototype.register=function(e,t){return void 0===t&&(t=50),(this.list[t]=this.list[t]||[]).push({id:this.n,data:e}),this.O[this.n]=t,this.n++,this.n-1},Ve.prototype.Xa=function(e){var t=this.list[this.O[e]];if(t)for(var n=0;n<t.length;n++)if(t[n]&&t[n].id===e){t.splice(n,1);break}},Ve.prototype.ta=function(e,t){void 0===e&&(e=d(!0)),void 0===t&&(t=c);for(var n=[],r=0;r<this.list.length;r++)if(this.list[r]&&this.list[r].length)for(var i=0;i<this.list[r].length;i++){var o=this.list[r][i];e(o.data)&&n.push(t(o.data))}return n},Ve),Ae=(Ue.prototype.score=function(e,t){return this.Oa(e,t)},Ue.prototype.Oa=function(e,t){var n=0;if(r=t.centeredElementWidth){n=t.relativeLeft;var r,i=this.xa(e);if(((r/=5)<30?30:r)<(n=Math.abs(n-i)))return 0;r=1-n/20,n=t.absY,i=e.element.offset().top,n=1-Math.abs(n-i)/20,i=.3,.9<r&&(i=.9),n=(n=r*(1-i)+n*i)<0?0:n}return n},Ue.prototype.xa=function(e){var t=(t=this.qa(e))?t.offset().left:0;return e.element.offset().left-t},Ue.prototype.qa=function(e){for(var t=null,n=(e=e.ga.get()).length-1;0<=n;n--)try{if(this.Da(e[n])){var r=Ce(e[n]),i=Ce(window).width(),o=r.width(),a=r.offset().left,s=i-o;if(0<s&&s/2===a){t=r;break}if(s<0&&s===a){t=r;break}if(this.Fa(r)){t=Ce(r);break}}}catch(u){}return t},Ue.prototype.Da=function(e){var t=Ce(e),n=t.data("mt_isElementFixedWidth");return!0===n||!1!==n&&(e=this.Ca(e),t.data("mt_isElementFixedWidth",e),e)},Ue.prototype.Fa=function(e){var t=Ce(e),n=t.data("mt_isElementMarginAuto");return!0===n||!1!==n&&(e=this.Ea(e),t.data("mt_isElementMarginAuto",e),e)},Ue.prototype.Y=function(e,t){for(var n=!1,r=0;r<t.length&&(n=t[r],!(n=Ce(e).is(Ce(n))));r++);return n},Ue.prototype.Ca=function(e){return!!this.Z(e.style)||this.Y(e,this.sa())},Ue.prototype.Va=function(e){return 0===e.indexOf("0")},Ue.prototype.ma=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4===e.length},Ue.prototype.aa=function(e){if(e){var t=Ce.trim(e.margin),n=Ce.trim(e.marginLeft);if(e=Ce.trim(e.marginRight),(t=this.Va(t)&&this.ma(t))||"auto"===n&&"auto"===e)return!0}return!1},Ue.prototype.Ea=function(e){return!!this.aa(e.style)||this.Y(e,this.ua())},Ue.prototype.ua=function(){return void 0===this.B&&(this.B=[],this.W(this.ea)),this.B},Ue.prototype.ea=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type===window.CSSRule.IMPORT_RULE?this.ea(n.styleSheet):this.aa(n.style)&&this.B.push(n.selectorText)}}catch(r){}},Ue.prototype.W=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},Ue.prototype.da=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type===window.CSSRule.IMPORT_RULE?this.da(n.styleSheet):this.Z(n.style)&&this.C.push(n.selectorText)}}catch(r){}},Ue.prototype.sa=function(){return void 0===this.C&&(this.C=[],this.W(this.da)),this.C},Ue.prototype.Z=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t,10)&&(-1!==e.indexOf("p")||-1!==e.indexOf("e")||-1!==e.indexOf("m")||-1!==e.indexOf("i")))return!0}},Ue),Pe={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},ke={id:ae.IGNORE_ID,name:ae.IGNORE_NAME,title:ae.IGNORE_TEXT},De=(Be.prototype.ha=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Ua(e)&&this.I(this.description.attributes[e])&&(t+=this.F(e),this.N.push(e));return t},Be.prototype.Ua=function(e){var t=0!==this.F(e);return!(ke.hasOwnProperty(e)&&ke[e]&this.options)&&t},Be.prototype.score=function(e,t){for(var n=0,r=0;r<this.N.length;r++){var i=this.N[r],o=t.attributes[i],a=e.w(i);this.I(a)&&this.I(o)&&a===o&&(n+=this.F(i))}return n},Be.prototype.I=function(e){return null!=e&&""!==e},Be.prototype.F=function(e){return Pe.hasOwnProperty(e)?Pe[e]:0},Be),xe=function(e,t){function n(){this.constructor=e}Re(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Ne=(Me.prototype.score=function(e,t){var n=this.scorer.score(e,t);return this.weight*n},Me),Oe=(Fe.prototype.score=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},xe(Le,be=Fe),Le.prototype.score=function(e,t){return t.attributes[this.attributeName]===this.Ya?0:be.prototype.score.call(this,e,t)},Le);function Le(e,t){var n=be.call(this,e)||this;return n.Ya=t,n}function Fe(e){this.attributeName=e,this.name="Attribute Scorer : "+e}function Me(e,t){this.scorer=e,this.weight=t,this.name=e.name}function Re(e,t){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)}function Be(e,t){this.N=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.ha()}function Ue(){this.name="PositionScorer"}function Ve(){this.list=[],this.n=0,this.O={}}function We(e,t,n){return 1<(e=e.m(t,n)).NumNodeRemove?0:(e=1-.1*(e.NumNodeRemove+e.SumNodeDiff/10))<0?0:e}var je=(Xe.prototype.score=function(e,t){return We(this.d,e.xpath.get(),t.xpathArrayToIframe)},Xe),Ge=(Je.prototype.score=function(e,t){var n=e.f.get();return n&&n.length?We(this.d,n,t.f):0},Je),He=(Ke.prototype.score=function(e,t){if(!this.Ga(e.element))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r&&.6<=(n=this.X(n,t.width)/2+this.X(r,t.height)/2)?n:0},Ke.prototype.X=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},Ke.prototype.Ga=function(e){return e=e.prop("tagName"),-1!==v(Ke.Wa,e)},Ke.Wa="DIV TABLE TR TD TBODY TH".split(" "),Ke),Ye=(qe.prototype.score=function(e,t){if(!t.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var n=t.complexAttributes[this.attributeName].get(),r=w(e.element.attr(this.attributeName),this.La,this.Ba);return 1===this.ka(n,r)?1:0},qe.prototype.ka=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]===t[n]&&r++);return(n=0)<i&&(n=r/i),n},qe),Qe=(ze.prototype.score=function(e,t){return t.text&&e.text.get()===t.text?1:0},ze);function ze(){this.name="TextScorer"}function qe(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.La=t,this.Ba=n}function Ke(){this.name="ShapeProportionScorer"}function Je(e){this.name="ContextXpathScorer",this.d=e}function Xe(e){this.name="XpathScorer",this.d=e}function $e(t,n,r,e){return{scorer:function(e){return new Ne(t(e),n)},shouldUse:"function"==typeof r?r:function(e,t){return!D(t.b,r)},changeThreshold:e}}function Ze(e,t){return!(!(e.f&&e.f.length()&&1<e.g.length)||D(t.b,ae.IGNORE_XPATH))}function et(e){var t=ae;e.register({scorer:function(e){return new De(e.a,e.b)},shouldUse:d(!0)},49),e.register($e(function(){return new Qe},3,t.IGNORE_TEXT),50),e.register($e(function(){return new Oe("href","#")},3,t.IGNORE_HREF),50),e.register($e(function(e){return new Ge(e.d)},1,Ze,d(1)),60),e.register($e(function(e){return new je(e.d)},1,t.IGNORE_XPATH),60),e.register($e(function(){return new Ye("class"," ",null)},.7,t.IGNORE_CLASS),70),e.register($e(function(){return new Ye("style",";",":")},.5,t.IGNORE_STYLE),70),e.register($e(function(){return new He},.7,t.IGNORE_SHAPE_PROPORTION),99),e.register($e(function(){return new Ae},1,t.IGNORE_POSITION),99)}var tt=(nt.prototype.ca=function(e){this.context=e||this.c.g},nt.prototype.h=function(e,t){this.c&&t&&(this.parents.clear(),this.xpath.clear(),this.f.clear()),this.c=e},nt);function nt(e,t){var n=this;this.totalScore=0,this.width=new N(this,function(){return n.element.width()}),this.height=new N(this,function(){return n.element.height()}),this.parents=new N(this,function(){return m(n.element,n.context)}),this.ga=new N(this,function(){return m(n.element)}),this.text=new N(this,function(){return Ee(n.element)}),this.w=function(e){return this.A.hasOwnProperty(e)||(this.A[e]=this.element.attr(e)),this.A[e]},this.f=new N(this,function(){if(n.context&&n.context.length){var e=m(n.context);return ne(n.context,e,n.c.e,n.c.k)}}),this.xpath=new N(this,function(){return ne(n.element,n.parents.get(),n.c.e,n.c.k)}),this.element=e.element,this.details=[],this.screenerDetails=[],this.A={},this.h(t),this.ca(e.context)}function rt(n,r,i){return function(e,t){return n===r||i(e,t)?n:r}}function it(e,t){return!!t.text&&e.text.get()===t.text}function ot(i){return function(e,t){var n=e.w(i),r=t.attributes[i];return!(!r||!n)&&n===r}}function at(e,t,n){return{name:"AttributeScreen["+e+"]",screen:rt(t,n,ot(e))}}function st(e,n,t){return{priority:t,screener:e,shouldUse:"function"==typeof n?n:function(e,t){return!D(t.b,n)}}}var ut=ae.IGNORE_ID,lt=ae.IDENTIFY_TEXT,ct=ae.IDENTIFY_WALKME_ID,dt=le.Accepted,ft=le.Indifferent,pt=[st(function(){return at("src",dt,ft)},d(!0),47),st(function(){return{name:"TextScreen",screen:rt(dt,ft,it)}},ae.IGNORE_TEXT,48),st(function(e){return function t(r,i){var o=ot("id");return{name:"IdScreen",screen:function(e,t){var n;return(n=!i||!(n=e.w("id"))||30<=n.length?void 0:!o(e,t)&&le.Rejected)||r&&o(e,t)&&le.Accepted||le.Indifferent}}}(!D(e.b,ut)&&0<e.a.attributes.id.length,!D(e.b,lt|ct|ut))},function(e){return void 0!==e.attributes.id},49),st(function(){return at("name",dt,ft)},ae.IGNORE_NAME,50),st(function(e){return{name:"XpathScreen",screen:rt(dt,ft,function t(r){return function(e,t){var n=e.xpath.get();return r.m(n,t.xpathArrayToIframe).NumNodeRemove<=1}}(e.d))}},function(e,t,n){return n<2e3&&!D(t.b,ae.IGNORE_XPATH)},99),st(function(e){return e=function t(n){var e=n.xpathArrayOriginal,r=new N(null,function(){return n.relXpath?n.g.map(function(e,t){return Q(n.relXpath,u(t),void 0,n.ignoreWalkmeElementsSelector)[0]}):u(Q(e,void 0,void 0,n.ignoreWalkmeElementsSelector))});return function(e){var t=r.get();return t&&t.length&&-1<t.index(e.element[0])}}(e.a),{name:"ExactXpathScreen",screen:rt(dt,ft,e)}},function(e,t,n){return 2e3<=n&&!D(t.b,ae.IGNORE_XPATH)},99)],gt=ae.IDENTIFY_TEXT,ht=ae.IDENTIFY_ID_AND_NAME,mt=ae.IDENTIFY_WALKME_ID,vt=le.Accepted,yt=le.Rejected,St=le.Indifferent;function Et(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}var wt=[];function Tt(t,n,e){return S(e=E(e=e.sort(function(e,t){return e.priority-t.priority}),function(e){return e.shouldUse(n.a,n,t)}),function(e){return e.screener(n)})}var Ct,bt,It=function(e,t){function n(){this.constructor=e}Nt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},_t=(xt.prototype.m=function(e,t){return Y(e,t,1)},xt.prototype.H=function(e){return new tt(e,this.c)},xt.prototype.h=function(e){this.c=e},xt.prototype.G=function(e,t,n){return n(t,e)},xt.prototype.Ta=function(e){e.k=this.c&&e&&this.c.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.c.k:e&&e.ignoreWalkmeElementsSelector?I(document,e.ignoreWalkmeElementsSelector).toArray():[]},xt),At=(It(Dt,bt=_t),Dt.prototype.h=function(e){this.ia(e),bt.prototype.h.call(this,e)},Dt.prototype.Ia=function(e,t){return!e&&!t||!(!e&&t||e&&!t||e.length!==t.length)&&e.is(t)},Dt.prototype.ia=function(e){if(this.e={},0<this.s.length){var t=!1;this.c&&(t=!this.Ia(this.c.g,e.g));for(var n=0;n<this.s.length;n++){var r=this.t[this.s[n]];r.totalScore=0,r.details=[],r.U=!1,r.h(e,t)}}},Dt.prototype.l=function(e){return e&&e[0]&&e[0][Dt.P]||null},Dt.prototype.q=function(e,t){e&&e[0]&&(e[0][Dt.P]=t)},Dt.prototype.o=function(){return++Dt.L},Dt.prototype.H=function(e){var t=null,n=this.l(e.element);return n&&(t=this.t[n])&&t.ca(e.context),t||(t=bt.prototype.H.call(this,e),n=this.o(),this.q(e.element,n),this.t[n]=t,this.s.push(n)),t},Dt.prototype.m=function(e,t){var n,r=oe(e);return this.e.hasOwnProperty(r)||(n=bt.prototype.m.call(this,e,t),this.e[r]=n),this.e[r]},Dt.prototype.za=function(e,t){var n=e;if(t&&0<t.length){var r=this.l(t);r||(r=this.o(),this.q(t,r)),r&&(n+="__"+r)}return n},Dt.prototype.G=function(e,t,n){var r=this.za(t,e),i=this.V[r]||null;return i||(i=bt.prototype.G.call(this,e,t,n),this.V[r]=i),i},Dt.L=k(),Dt.P="__WM_SUSPECT_KEY__",Dt),Pt=(kt.prototype.getItem=function(e){if(e<0||e>=this.length)throw Error("Out of range exception");return this.data[e]},kt.prototype.clear=function(){this.length=0},kt.prototype.push=function(e){if(this.length===this.size)throw Error("FastArray exceeded it's limits");this.data[this.length]=e,this.length++},kt.prototype.wa=function(){return this.data.slice(0,this.length)},kt);function kt(e){this.data=Array(e),this.size=e,this.length=0}function Dt(){var e=null!==bt&&bt.apply(this,arguments)||this;return e.t={},e.s=[],e.V={},e.e={},e}function xt(){}function Nt(e,t){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)}function Ot(){}var Lt,Ft=new _e;et(Ft);var Mt=o(Ft,Ft.register),Rt=o(Ft,Ft.Xa);function Bt(){this.elements=[],this.losers=void 0}var Ut,Vt=(jt.prototype.R=function(e,t,n){var r=this;this.complexAttributes[e]=new N(this,function(){return w(r.attributes[e],t,n)})},jt),Wt=Ut=Ut||{};function jt(e){this.attributes={},this.complexAttributes={},this.R("style",";",":"),this.R("class"," ",null),e&&(this.e=new ee)}Wt[Wt.Efficient=0]="Efficient",Wt[Wt.Verbouse=1]="Verbouse",Wt[Wt.Fast=2]="Fast",Wt[Wt.VerbouseDebug=3]="VerbouseDebug",Wt[Wt.NotSoEfficient=4]="NotSoEfficient";var Gt,Ht=Gt=Gt||{};Ht[Ht.TotalFindElementTime=0]="TotalFindElementTime",Ht[Ht.Suspects=1]="Suspects",Ht[Ht.Screened=2]="Screened",Ht[Ht.Scored=3]="Scored",Ht[Ht.Screen_Attr_id=4]="Screen_Attr_id",Ht[Ht.Screen_Attr_name=5]="Screen_Attr_name",Ht[Ht.Screen_Text=6]="Screen_Text",Ht[Ht.Screen_Attr_walkmeid=7]="Screen_Attr_walkmeid",Ht[Ht.Screen_Exact_Xpath=8]="Screen_Exact_Xpath",Ht[Ht.Screen_Xpath=9]="Screen_Xpath",Ht[Ht.Screen_Attr_src=10]="Screen_Attr_src",Ht[Ht.Score_Xpath=11]="Score_Xpath",Ht[Ht.Score_Multi=12]="Score_Multi",Ht[Ht.Score_Text=13]="Score_Text",Ht[Ht.Score_Shape_Proportion=14]="Score_Shape_Proportion",Ht[Ht.Score_Complex_Class=15]="Score_Complex_Class",Ht[Ht.Score_Complex_Style=16]="Score_Complex_Style",Ht[Ht.Score_Attr_href=17]="Score_Attr_href",Ht[Ht.Score_Position=18]="Score_Position",Ht[Ht.Score_Context_Xpath=21]="Score_Context_Xpath";var Yt,Qt=Yt=Yt||{};Qt[Qt.High=0]="High",Qt[Qt.Medium=1]="Medium",Qt[Qt.Low=2]="Low";var zt=(Kt.prototype.Sa=function(e){this.a=e},Kt.prototype.setSearchOptions=function(e){this.b=e},Kt.prototype.setAlgorithmSensitivity=function(e){this.S=e},Kt.prototype.p=function(e){this.isMeasuringTime&&this.j.push(e)},Kt.prototype.ja=function(){this.j=[]},Kt.prototype.r=function(e){return Kt.nameObfMapping[e]},Kt.prototype.recognize=function(e){var t,n,r=new Bt;this.u=this.va(),this.mode===Ut.VerbouseDebug&&(r.debug={MS:this.u,SCR:null,MEA:[],ED:[],CBS:-1,CAS:-1,FCS:{},SCS:{}});var i=ge(e);return this.Sa(e),this.d.Ta(e),this.d.h(e),he(this,i),e=me(i),this.isMeasuringTime&&(t=b()),i=this.pa(),r.debug&&(r.debug.CBS=i.length,r.debug.FCS=i),n=this.D(Gt.Suspects,i,this.ba)||n,this.isMeasuringTime&&(t=t.v(),this.p({name:this.r("suspects"),duration:t,K:{T:i.length}}),t=b()),i=this.Ra(i,r),n=this.D(Gt.Screened,i,this.Pa)||n,r.debug&&(r.debug.CAS=i.length,r.debug.SCS=i),this.isMeasuringTime&&(t=t.v(),this.p({name:this.r("screened"),duration:t,K:{T:i.length}}),t=b()),i=this.Na(i),this.isMeasuringTime&&(t=t.v(),this.p({name:this.r("scored"),duration:t,K:{T:i.length}}),r.debug&&(r.debug.MEA=this.j),r.j=this.j,this.ja()),r.elements=this.oa(i),n=this.D(Gt.Scored,r.elements,this.ba)||n,r.losers=this.na(r,i),r.context=e,r.targetPhase=n,r},Kt.prototype.D=function(e,t,n){if(this.a.target){var r=this.a.target[0];if(r)for(var i=0;i<t.length;i++)if(n(t,i)===r)return e}},Kt.prototype.Pa=function(e,t){return e.getItem(t).element[0]},Kt.prototype.ba=function(e,t){return e[t].element[0]},Kt.prototype.pa=function(){function e(e){var o=r[e]?Ct(r[e]):void 0;l(n,i.d.G(o,t,function(e,t){var n=Ct(e,t);a.a.visibilityFilter&&(n=n.filter(a.a.visibilityFilter)),a.a.ignoreWalkmeElementsSelector&&(n=n.not(a.a.ignoreWalkmeElementsSelector));for(var r=Array(n.length),i=0;i<n.length;i++)r[i]={element:Ct(n[i]),context:o};return r}))}var t,a=this;if(this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0])return this.a.preDefinedSuspects.map(function(e,t){return{element:Ct(t)}}).toArray();Ot("Finding suspects using : "+(t=this.a.customSelector?this.a.customSelector:this.Ja()&&this.a.autoQuery?this.a.autoQuery:this.a.elementType.replace(":","\\:")));for(var n=[],r=this.a.g||[void 0],i=this,o=0;o<r.length;o++)e(o);return n},Kt.prototype.la=function(e){for(var t=new Pt(e.length),n=0;n<e.length;n++)t.push(this.d.H(e[n]));return t},Kt.prototype.Ra=function(e,t){var n,r,i=this.la(e);n=e.length,n=(r=D(r=this.b,gt)?[{name:"TextScreen",screen:rt(vt,yt,it)}]:D(r,ht)?[at("id",vt,St),at("name",vt,St)]:D(r,mt)?[at("data-walkmeid",vt,St)]:null)?r.concat(Tt(n,this,wt)):Tt(n,this,pt.concat(wt)),t.debug&&(t.debug.SCR=n),r=new Pt(e.length);for(var o=0;o<i.length;o++){var a=i.getItem(o),s=this.Qa(a,n,t),u=s&le.Accepted;s&le.Rejected||!u||r.push(a)}return r},Kt.prototype.Qa=function(e,t,n){for(var r=le.Indifferent,i=this.J||this.mode===Ut.NotSoEfficient,o=0;o<t.length;o++){var a=t[o],s=a.screen(e,this.a);if(r|=s,i&&e.screenerDetails.push({screenerName:a.name,result:s}),s===le.Rejected){n.debug&&n.debug.ED.push({element:e.element,screenerName:t[o].name});break}}return r},Kt.prototype.Na=function(e){var t=this.ya(),n=y(t,function(e,t){return e+t.weight},0),r=e;e=new Pt(e.length);for(var i=0,o=this.a.target&&this.a.target[0],a=this.J||this.mode===Ut.NotSoEfficient,s=0;s<t.length;s++){var u=t[s],l=void 0,c=void 0;this.isMeasuringTime&&this.M&&(l=b(),c=0);for(var d=0;d<r.length;d++){var f=r.getItem(d);if(n+f.totalScore<i&&this.mode===Ut.Efficient&&(!o||f.element[0]!==o)?f.U=!0:e.push(f),!f.U||this.mode!==Ut.Efficient){var p=u.score(f,this.a);this.isMeasuringTime&&this.M&&c++,a&&f.details.push({scorerName:u.name,scorerWeight:u.weight,relativeScore:p/u.weight,absoluteScore:p}),f.totalScore+=p,f.totalScore>i&&(i=f.totalScore)}}this.isMeasuringTime&&this.M&&(l=l.v(),this.p({name:this.r(u.name),duration:l,K:{count:c}})),n-=u.weight,n=Math.max(n,0),u=r,r=e,(e=u).clear()}return r.wa()},Kt.prototype.Ja=function(){return!!(this.b&ae.USE_AUTO_SELECTOR)},Kt.prototype.ya=function(){var n=this;return Ft.ta(function(e){var t=e.shouldUse(n.a,n);return t&&e.changeThreshold&&(n.u+=e.changeThreshold(n.a,n)),t},function(e){return e.scorer(n)})},Kt.prototype.oa=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n].totalScore;t=r<=t?t:r}if(r=[],t>this.u)for(n=0;n<e.length;n++)e[n].totalScore===t&&r.push(e[n]);return r},Kt.prototype.na=function(e,t){if(this.J||this.mode===Ut.NotSoEfficient){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},Kt.prototype.va=function(){var e=Lt[this.S];return void 0===e&&(e=Lt[Yt.Medium]),e},Kt.nameObfMapping={t:Gt.Suspects,sb:Gt.Screened,rb:Gt.Scored,"AttributeScreen[src]":Gt.Screen_Attr_src,hb:Gt.Screen_Text,ab:Gt.Screen_Attr_id,"AttributeScreen[name]":Gt.Screen_Attr_name,jb:Gt.Screen_Xpath,"Multiple attributes":Gt.Score_Multi,gb:Gt.Score_Text,"Attribute Scorer : href":Gt.Score_Attr_href,ib:Gt.Score_Xpath,$a:Gt.Score_Context_Xpath,eb:Gt.Score_Shape_Proportion,"ComplexAttributeScorer : class":Gt.Score_Complex_Class,"ComplexAttributeScorer : style":Gt.Score_Complex_Style,bb:Gt.Score_Position},Kt),qt={cb:_e,qb:et,ScoredElement:tt,registerScorerDef:Mt,unregisterScorerDef:Rt,registerScreenerDef:function(e,t){return void 0===t&&(t=50),wt.push(Et({priority:t},e))},setOptions:function(e){Ce=a=Ct=e.jquery,f(e),Lt=e.sensitivityMap},setLogFunc:function(e){Ot=e},RecognitionResult:Bt,ElementDescription:Vt,AlgorithmMode:Ut,MeasurePhase:Gt,AlgorithmSensitivity:Yt,SearchOptions:ae,Ka:D,ElementRecognizerSession:zt};function Kt(e,t,n,r){this.b=ae.IGNORE_NOTHING,this.S=Yt.Medium,this.mode=e,this.J=this.mode===Ut.Verbouse||this.mode===Ut.VerbouseDebug,this.j=[],this.d=r?new At:new _t,this.isMeasuringTime=t||this.mode===Ut.VerbouseDebug,this.M=n}t.ContextUtils=ye,t.ElementRecognition=qt,t.fb=x,t.TextUtils=Ie,t.Version="PACKAGE_VERSION",t.XpathLib=se},function(e,t){var m;!function(s){function o(e){return s.Y(e,"parentNode")}function a(e,t){t=t||[],e=e||document;for(var n=s.$("iframe,frame",e).toArray(),r=0;r<n.length;r++){var i=u(s.$(n[r]))[0];t.push(i),i&&(t=a(i,t))}return t}function u(e){if(null!=e){if(null==(e=e[0]))return s.$();var t;try{t=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:[],t=s.$(t)}catch(u){return s.commonUtils.handleCrossDomainError(u),s.$()}return t}}var t;s.$,s.h,s.Y=function(e,t){return e[t]},s.commonUtils,s.setOptions=function(e){s.$=e.jquery,s.h=e.jquery,s.$.fnHelpers&&(s.Y=function(e,t){return s.$.fnHelpers[t](e)}),s.commonUtils=e.commonUtils,t=e.now},s.nb=function(e){return(e=e.tagName).toUpperCase&&(e=e.toUpperCase()),e},s.parentNode=o,s.childNodes=function(e){return s.Y(e,"childNodes")},s.oa=function(e,t){for(var n=o(e),r=t&&t[0]&&o(t[0]),i=[];n&&1==n.nodeType&&n!=r;n=o(n))i.push(n);return i},s.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},s.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},s.pc=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},s.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},s.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},s.Ja=function(e,t,n){e=s.filter(e.split(t),function(e){return s.$.trim(e)}),e=s.map(e,function(e){return e.split(n)}),t={};for(var r=0;r<e.length;r++){var i=e[r],o=s.$.trim(i[0]),a="";i[1]&&(a=s.$.trim(i[1])),t[o]=a}return t};var e=(n.prototype.L=function(){var e=t()-this.start;return Math.round(1e3*e)/1e3},n);function n(){this.start=t()}s.ic=e,s.K=function(){return new e},s.qc=function(){for(var e=0;e<arguments.length;e++);e=arguments[0];for(var t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},s.sc=function(e){return null!=e&&0<e.length},s.getAllElements=function(e,t){t=t||"*";var n=a(e=e||document,[e]);return s.$(t,n)},s.rc=a,s.u=u,s.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},s.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),i=(n=e[0],1);i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},s.ta=function(){return(new Date).getTime()%1e9}}(m=m||{});var v,g,n,r,y=(i.prototype.append=function(e){this.buffer.push(e)},i.prototype.toString=function(){return this.buffer.join("")},i);function i(){this.buffer=[]}function o(e,t){this.Ub=e,this.weight=t,this.name=e.name}function a(e){this.name="TagScorer",this.weight=6,this.uppercaseElementType=e.uppercaseElementType}function s(e,t){this.attributeName=e,this.name="Attribute Scorer : "+e,this.v=(this.v=t.attributes[this.attributeName])&&this.v.toLowerCase()}function u(e,t){this.name="XpathScorer",this.j=e,this.uppercaseElementType=t.uppercaseElementType,this.xpathArrayToIframe=t.xpathArrayToIframe}function l(e){this.name="ShapeProportionScorer",this.width=e.width,this.height=e.height}function c(e,t,n,r){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.Pb=t,this.Eb=n,this.Ya=r.complexAttributes[this.attributeName]}function d(e){this.name="TextScorer",this.text=e.text}!function(p){function d(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function i(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(u(e,i,n,r)),e=i;return s(o=o.reverse(),n)}function o(e,t,n,r){var i=(e=e[0])&&m.parentNode(e);n=n&&n[0];for(var o=[];e&&1==e.nodeType&&e!=n;e=i,i=m.parentNode(e))o.push(u(e,i,t,r));return s(o=o.reverse(),t)}function s(e,t){return t?new r(e):new c(e)}function u(e,t,n,r){return n?n.pb(e,t,r):a(e,t,r)}function a(e,t,n){var r=1;if("HTML"!=m.nb(e)){t=m.childNodes(t);for(var i=0;i<t.length&&t[i]!=e;i++){var o=t[i];o.tagName==e.tagName&&m.inArray(o,n)<0&&r++}}return{tag:e.tagName.toUpperCase(),index:r}}function l(e){for(var t=["HTML","BODY"],n=0;n<e.count()&&-1<m.inArray(e.get(n).tag,t);n++);return e.slice(n)}var c=(n.prototype.count=function(){return this.xpathArray.length},n.prototype.get=function(e){return this.xpathArray[e]},n.prototype.slice=function(e,t){return new n(this.xpathArray.slice.apply(this.xpathArray,arguments))},n);function n(e){this.xpathArray=e}p.jc=c;var r=(f.prototype.count=function(){return this.xpathArray.length},f.prototype.get=function(e){return this.xpathArray[e].get()},f.prototype.slice=function(e,t){return new f(this.xpathArray.slice.apply(this.xpathArray,arguments))},f);function f(e){this.xpathArray=e}p.kc=r,p.l=1,p.Na=1;var g=(e.prototype.clone=function(){return new e(this.b,this.w,this.n)},e.prototype.r=function(){return this.b+this.w/4+this.n/10},e.max=function(){return new e(1e4,0,0)},e.r=function(e){return e.r()},e);function e(e,t,n){this.n=this.w=this.b=0,this.b=e,this.w=t,this.n=n}p.lc=g,p.Q=function(e,t,d){return function f(e,t,n,r,i){if(Math.abs(t-r)>d||i.b>d)return g.max();if(0==t||0==r)return(i=i.clone()).b+=Math.max(t,r,0),i.b>d?g.max():i;var o,a=e.get(t-1),s=n.get(r-1),u=0;if(a.tag!==s.tag)u=p.l,o=g.max();else{if(a.index===s.index)return f(e,t-1,n,r-1,i);u=p.Na}var l=i.clone();l.b+=u;u=f(e,t-1,n,r,l);var c=f(e,t,n,r-1,l);return o||(a=Math.abs(a.index-s.index),l=i.clone(),0<a&&(l.w++,l.n+=a),o=f(e,t-1,n,r-1,l)),m.min([u,c,o],g.r)}(e,e.count(),t,t.count(),new g(0,0,0))},p.pa=function(e,t,n,r){var i=e.count();if(i<=0)return null;t=M.$(t||document),r=r?":not("+r+")":"";for(var o=0;o<i;o++){var a=e.get(o);if(t=t.children(a.tag+r).eq(a.index-1),-1!=m.inArray(a.tag,["IFRAME","FRAME"])&&o+1<i&&(0<t.length&&(n&&t.data("iframe",n),n=t),t=m.u(t)),!t||0==t.length||!t.get(0)){t=null;break}}return t&&0<t.length&&n&&t.data("iframe",n),t},p.$b=function(e,t){if(!t||t.count()<=0)return 0;for(var n=function c(t,n){function e(e){return d(n,e,function(e){return e==t},!1)}for(var r=e(0),i=[];0<=r&&r<n.count()-1;)i.push(n.slice(0,r+1)),r=e(r+1);return i}(r=t.get(t.count()-1).tag,e),r=g.max().r(),i=2*p.l,o=r,a=[],s=0;s<n.length;s++){var u=n[s],l=p.Q(u,t,i).r();l<o?(o=l,a=[u]):l==o&&a.push(u)}return n=0,o<r&&(n=m.min(a,function(e){return Math.abs(t.count()-e.count())}).count()),n},p.X=d,p.mc=i,p.bb=o;var t=(h.prototype.pb=function(e,t,n){var r=null,i=this.B(e);return void 0!==i&&(r=this.Ka[i]),r||(r=function o(e,t,n){return new E(null,function(){return a(e,t,n)})}(e,t,n),t=this.D(),this.H(e,t),this.Ka[t]=r),r},h.prototype.B=function(e){return e&&e[h.ia]||void 0},h.prototype.H=function(e,t){e&&(e[h.ia]=t)},h.prototype.D=function(){return++h.aa},h.aa=m.ta(),h.ia="__WMWA_XPATH_ENTRY_KEY__",h);function h(){this.Ka={}}p.Ua=t,p.cb=function(e,t,n,r){return l(e=i(e,t,n,r))},p.$a=function(e,n,r){var t=function i(e){return!e||e.length<=0?null:1==e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1==e.get(0).nodeType?e:null}(e);return!t||t.length<=0?new c([]):(t=function a(e,t,n,r){if(r=r||[],0<(t=t||M.$(document)).find(e).length)e.data("iframe",n),r.unshift(t);else{n=r.length,t=t.find(_.sa);for(var i=0;i<t.length;i++){var o=t.eq(i);if((r=a(e,m.u(o),o,r)).length>n){M.$(r[0]).data("iframe",o),r.unshift(o);break}}}return r}(t),s((t=m.reduce(t,function(e,t){return e.concat(o(t,n,null,r).xpathArray)},[])).concat(o(e,n,null,r).xpathArray),n))},p.removeHtmlAndBodyFromXpathArray=l,p.dc=function(e){for(var t=new y,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},p.xpathStringToArray=function(e){var r=[];return M.$.each(e.split("/"),function(e,t){if(0!=e){var n=t.indexOf("[");r[e-1]={tag:t.substring(0,n),index:parseInt(t.substring(n+1,t.length-1))}}}),new c(r)}}(v=v||{}),n=g=g||{},o.prototype.e=function(e){return e=this.Ub.e(e),this.weight*e},r=o,n.Ta=r,a.prototype.e=function(e){return(e=e.elementType.get())&&this.uppercaseElementType&&e===this.uppercaseElementType?6:0},r=a,n.Ra=r,s.prototype.e=function(e){return(e=e.t(this.attributeName))&&this.v&&e.toLowerCase()===this.v?1:0},r=s,n.Ma=r,u.prototype.e=function(e){return e.elementType.get()!==this.uppercaseElementType?0:(e=e.xpath.get(),(e=this.j.C(e,this.xpathArrayToIframe,v.l)).b>v.l?0:(e=1-.1*(e.b+e.n/10))<0?0:e)},r=u,n.Va=r,l.prototype.e=function(e){if(!this.ya(e.elementType.get()))return 0;var t=e.width.get();return 0!=t*(e=e.height.get())&&.6<=(t=this.ua(t,this.width)/2+this.ua(e,this.height)/2)?t:0},l.prototype.ua=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},l.prototype.ya=function(e){return l.bc[e]},l.bc={DIV:1,TABLE:1,TR:1,TD:1,TBODY:1,TH:1},r=l,n.Qa=r,c.prototype.e=function(e){var t=e.t(this.attributeName);return t?(e=this.Ya.get(),t=m.Ja(t,this.Pb,this.Eb),1==this.gb(e,t)?1:0):0},c.prototype.gb=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return(n=0)<i&&(n=r/i),n},r=c,n.ea=r,d.prototype.e=function(e){return e.text.get()==this.text?1:0},r=d,n.Sa=r;var S=(p.prototype.getItem=function(e){if(e<0||e>=this.count)throw Error("Out of range exception");return this.data[e]},p.prototype.clear=function(){this.count=0},p.prototype.push=function(e){if(this.count==this.size)throw Error("FastArray exceeded it's limits");this.data[this.count]=e,this.count++},p.prototype.vb=function(){return this.data.length=this.count,this.data},p),E=(f.prototype.get=function(){return this.hasData||(this.data=this.Rb.apply(this.context),this.hasData=!0),this.data},f.prototype.clear=function(){this.hasData=!1},f);function f(e,t){this.Rb=t,this.hasData=!1,this.context=e}function p(e){this.data=Array(e),this.size=e,this.count=0}function w(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}var h,T,C,b,I,_,A,P,k,D,x,N,O,L,F,M,R=(V.prototype.C=function(e,t){return v.Q(e,t,v.l)},V.prototype.W=function(e){return new M.ScoredElement(e,this.d)},V.prototype.q=function(e){this.d=e},V.prototype.T=function(e,t){return t(e)},V.prototype.Yb=function(e){e.M=this.d&&e&&this.d.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.d.M:e&&e.ignoreWalkmeElementsSelector?m.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},V),B=(w(U,T=R),U.prototype.q=function(e){this.eb(e),T.prototype.q.call(this,e)},U.prototype.Kb=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},U.prototype.eb=function(e){if(this.k={},0<this.J.length){var t=!1;this.d&&(t=!this.Kb(this.d.f,e.f));for(var n=0;n<this.J.length;n++){var r=this.ba[this.J[n]];r.totalScore=0,r.details=[],r.oc=!1,r.da=!1,r.G=void 0,r.q(e,t)}}},U.prototype.B=function(e){return e&&e[U.ga]||null},U.prototype.H=function(e,t){e&&(e[U.ga]=t)},U.prototype.D=function(){return++U.aa},U.prototype.W=function(e){var t=null,n=this.B(e);return void 0!==n&&(t=this.ba[n]),t||(t=T.prototype.W.call(this,e),n=this.D(),this.H(e,n),this.ba[n]=t,this.J.push(n)),t},U.prototype.C=function(e,t,n){var r=v.dc(e);return this.k.hasOwnProperty(r)||(e=T.prototype.C.call(this,e,t,n),this.k[r]=e),this.k[r]},U.prototype.yb=function(e){var t=this.d.f;if(t&&0<t.length){var n=this.B(t[0]);n||(n=this.D(),this.H(t[0],n)),n&&(e+="__"+n)}return e},U.prototype.T=function(e,t){var n=this.yb(e),r=this.qa[n]||null;return r||(r=T.prototype.T.call(this,e,t),this.qa[n]=r),r},U.aa=m.ta(),U.ga="__WMWA_SUSPECT_KEY__",U);function U(){T.apply(this,arguments),this.ba={},this.J=[],this.qa={},this.k={}}function V(){}function W(e){var t="";if(3===e.nodeType||4===e.nodeType){t=e.nodeValue,e=[160,10,13,9];for(var n=new y,r=0;r<t.length;r++)m.indexOf(e,t.charCodeAt(r))<0&&n.append(t.charAt(r).toLowerCase());if(t=n.toString().replace(/ /g,""),t=(t=M.$.trim(t)).substring(0,C.Mb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(t)){for(e=-1,n=t.length,r=new y;++e<n;){var i=t.charAt(e);/[\uD800-\uDBFF]/.test(i)||/[\uDC00-\uDFFF]/.test(i)?r.append(j(i)):r.append(i)}t=r}}else if(1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(n=0,r=(e=m.childNodes(e)).length;n<r&&!(t=W(e[n]));n++);return t}function j(e){var t=2<(e=e.charCodeAt(0).toString(16).toUpperCase()).length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}function G(){for(var e=0;e<arguments.length;e++);return M.$.apply(M.$,arguments)}function H(e){if(1==e.count())return e;var t=v.X(e,1,Y,!0);return-1==t?e:e.slice(t+1)}function Y(e){return-1!=m.inArray(e,P)}function Q(e,t){this.ca=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.ab(),this.Ob=e.attributes}(C=h=h||{}).Mb=70,(I=b=b||{})[I.ElementNode=1]="ElementNode",I[I.Text=3]="Text",I[I.CDATASection=4]="CDATASection",C.extractFirstOccuringText=function(e){return W(e)},C.nc=W,A=_=_||{},P=["IFRAME","FRAME"],A.cc=P.join(":mt_visible,")+":mt_visible",A.sa=P.join(","),A.getXpathUpToIframe=H,A.Qb=function(e){var t,n=e.a,r=v.$a(n.customContext,n.k,n.M),i=v.$b(n.xpathArrayOriginal,r),o=n.xpathArrayOriginal.slice(i);t=n.k;var a,s=n.customContext,u=n.M,l=n.ignoreWalkmeElementsSelector;if(1==o.count())t=s;else if(-1==(f=v.X(o,1,Y,!0)))t=s;else{var c=m.u(s),d=(c=c&&0<c.length?c:null)?s:s?s.data("iframe"):null,f=o.slice(0,f+1);(l=v.pa(f,c||s,d,l))&&l.is(":mt_visible")||(l=null),t=l=l||function p(e,t,n,r,i,o){var a=v.X(e,0,Y,!1);if(a<0)return n;var s=e.slice(0,a+1);return e=e.slice(a+1),0==(a=G(A.cc,i||n)).length?null:(a=1==a.length?a[0]:m.min(a,function(e){return e=v.bb(G(e),t,G(n),r),v.Q(e,s,v.l).r()}),(o||n&&0<n.length&&i&&0<i.length)&&G(a).data("iframe",o||n),p(e,t,G(a),r,m.u(G(a))))}(o,t,s,u,c,d)}return u=(s=(t=t||n.customContext)&&t.is(A.sa))?m.u(t):t&&0<t.length?t:void 0,t={context:t,Jb:s,contents:u},n.f=t.contents,e.setSearchOptions(-257&e.i),r&&r.count()&&n.f==n.customContext&&(i<=0&&e.setSearchOptions(256|e.i),n.xpathArrayToIframe=v.removeHtmlAndBodyFromXpathArray(H(o))),t&&(a=t.Jb?t.context:G(t.context).data("iframe")),a},function(l){l.$,l.h,l.Xb=function(e){l.$=e,l.h=e};var e=(t.prototype.e=function(e){return this.Tb(e)},t.prototype.Tb=function(e){var t=this.centeredElementWidth,n=0;if(t){var r=this.relativeLeft;if(n=e.U(),e=this.wb(e,n),((t/=5)<30?30:t)<(e=Math.abs(r-e)))return 0;t=1-e/20,e=this.absY,n=n.offset().top,n=1-Math.abs(e-n)/20,e=.3,.9<t&&(e=.9),n=(n=t*(1-e)+n*e)<0?0:n}return n},t.prototype.wb=function(e,t){var n=(n=this.mb(e))?n.offset().left:0;return t.offset().left-n},t.prototype.mb=function(e){for(var t=null,n=(e=e.Xa.get()).length-1;0<=n;n--)try{if(this.Gb(e[n])){var r=l.$(e[n]),i=l.$(window).width(),o=r.width(),a=r.offset().left,s=i-o;if(0<s&&s/2==a){t=r;break}if(s<0&&s==a){t=r;break}if(this.Ib(r)){t=l.$(r);break}}}catch(u){}return t},t.prototype.Gb=function(e){var t=l.$(e),n=t.data("mt_isElementFixedWidth");return 1==n||0!=n&&(e=this.Fb(e),t.data("mt_isElementFixedWidth",e),e)},t.prototype.Ib=function(e){var t=l.$(e),n=t.data("mt_isElementMarginAuto");return 1==n||0!=n&&(e=this.Hb(e),t.data("mt_isElementMarginAuto",e),e)},t.prototype.xa=function(e,t){for(var n=!1,r=0;r<t.length&&(n=t[r],!(n=l.$(e).is(l.$(n))));r++);return n},t.prototype.Fb=function(e){return!!this.za(e.style)||this.xa(e,this.rb())},t.prototype.ac=function(e){return 0==e.indexOf("0")},t.prototype.hb=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},t.prototype.Aa=function(e){if(e){var t=l.$.trim(e.margin),n=l.$.trim(e.marginLeft);if(e=l.$.trim(e.marginRight),(t=this.ac(t)&&this.hb(t))||"auto"==n&&"auto"==e)return!0}return!1},t.prototype.Hb=function(e){return!!this.Aa(e.style)||this.xa(e,this.tb())},t.prototype.tb=function(){return null==this.O&&(this.O=[],this.ra(this.Ia)),this.O},t.prototype.Ia=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.Ia(n.styleSheet):this.Aa(n.style)&&this.O.push(n.selectorText)}}catch(r){}},t.prototype.ra=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},t.prototype.Ha=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.Ha(n.styleSheet):this.za(n.style)&&this.P.push(n.selectorText)}}catch(r){}},t.prototype.rb=function(){return null==this.P&&(this.P=[],this.ra(this.Ha)),this.P},t.prototype.za=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},t);function t(e){this.name="PositionScorer",this.centeredElementWidth=e.centeredElementWidth,this.relativeLeft=e.relativeLeft,this.absY=e.absY}l.gc=e}(k=k||{}),function(e){var t;(t=e.Pa||(e.Pa={}))[t.Indifferent=0]="Indifferent",t[t.Accepted=1]="Accepted",t[t.Rejected=2]="Rejected";var n=(r.prototype.m=function(){throw Error("childScreen must be overriden by subclass")},r.prototype.screen=function(e,t){return this.isEqual?this.Z:this.m(e,t)?this.Z:this.Ea},r.prototype.R=function(){return 1===this.Z},r.prototype.A=function(){return 2===this.Ea},r);function r(e,t){this.Z=e,this.Ea=t,this.isEqual=e===t}e.hc=n;var i,o=(a.prototype.Ga=function(){throw Error("rejectFn must be overriden by subclass")},a.prototype.ja=function(){throw Error("acceptFn must be overriden by subclass")},a.prototype.screen=function(e,t){return this.Ga(e,t)?2:this.ja(e,t)?1:0},a.prototype.R=function(){throw Error("canAccept must be overriden by subclass")},a.prototype.A=function(){throw Error("canReject must be overriden by subclass")},a);function a(){}function s(e,t){i.call(this),this.name="IdScreen",this.wa=e,this.Ba=t,this.na=new f("id",0,0)}e.ec=o,w(s,i=o),s.prototype.Ga=function(e,t){if(this.Ba){var n=e.t("id");return!(!n||30<=n.length||this.na.m(e,t))}},s.prototype.ja=function(e,t){if(this.wa)return this.na.m(e,t)},s.prototype.R=function(){return this.wa},s.prototype.A=function(){return this.Ba},o=s,e.fa=o;var u,l,c,d,f=(w(p,u=n),p.prototype.m=function(e,t){var n=e.t(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},p);function p(e,t,n){u.call(this,t,n),this.attrName=e,this.name="AttributeScreen["+this.attrName+"]"}function g(e,t,n){l.call(this,e,t),this.Za=n,this.name="XpathScreen"}function h(e,t,n){c.call(this,t,n);var r=e.xpathArrayOriginal;this.Lb=new E(this,function(){return v.pa(r,void 0,void 0,e.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}function m(e,t){d.call(this,e,t),this.name="TextScreen"}e.s=f,w(g,l=n),g.prototype.m=function(e,t){var n=(o=e.xpath.get()).count()-1,r=(n=o.get(n)).tag;n.tag=t.uppercaseElementType;var i=v.l,o=this.Za.C(o,t.xpathArrayToIframe,i);return n.tag=r,o.b<=i},o=g,e.Wa=o,w(h,c=n),h.prototype.m=function(e){var t=this.Lb.get();return t&&t[0]==e.c},o=h,e.fc=o,w(m,d=n),m.prototype.m=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},n=m,e.ha=n}(D=D||{}),N=x=x||{},O={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},L={id:1,name:4,title:8},Q.prototype.ab=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Zb(e)&&this.Ca(this.description.attributes[e])&&(t+=this.S(e),this.ca.push(e));return t},Q.prototype.Zb=function(e){var t=0!==this.S(e);return!(L.hasOwnProperty(e)&&L[e]&this.options)&&t},Q.prototype.e=function(e){for(var t=0,n=0;n<this.ca.length;n++){var r=this.ca[n],i=this.Ob[r],o=e.t(r);this.Ca(o)&&o==i&&(t+=this.S(r))}return t},Q.prototype.Ca=function(e){return null!=e&&null!=e&&""!=e},Q.prototype.S=function(e){return O.hasOwnProperty(e)?O[e]:0},F=Q,N.Oa=F,function(i){var t;i.$,i.h,i.setOptions=function(e){i.$=e.jquery,i.h=e.jquery,k.Xb(e.jquery),m.setOptions(e),t=e.sensitivityMap},i.setLogFunc=function(){};var o=(e.prototype.q=function(e,t){this.d&&t&&(this.parents.clear(),this.xpath.clear()),this.d=e},e.prototype.U=function(){return this.element||(this.element=i.$(this.c)),this.element},e.prototype.Cb=function(){return this.c.clientWidth},e.prototype.sb=function(){return this.c.clientHeight},e.prototype.ub=function(){return m.oa(this.c,this.d.f)},e.prototype.lb=function(){return m.oa(this.c)},e.prototype.Bb=function(){return h.extractFirstOccuringText(this.c)},e.prototype.t=function(e){return this.N.hasOwnProperty(e)||(this.N[e]=u[e]?u[e](this.c):this.c.getAttribute(e)),this.N[e]},e.prototype.Db=function(){return v.cb(this.c,this.parents.get(),this.d.k,this.d.M)},e.prototype.ob=function(){var e=this.c;return e?(e.tagName||"").toUpperCase():""},e);function e(e,t){this.totalScore=0,this.da=!1,this.width=new E(this,this.Cb),this.height=new E(this,this.sb),this.parents=new E(this,this.ub),this.Xa=new E(this,this.lb),this.text=new E(this,this.Bb),this.xpath=new E(this,this.Db),this.elementType=new E(this,this.ob),this.c=e,this.details=[],this.N={},this.q(t)}i.ScoredElement=o;var n,r,a,s,u={style:function(e){return(e=e.getAttribute("style"))&&"object"==typeof e&&(e=e.cssText.toLowerCase()),e}},l=function(){this.elements=[],this.losers=void 0};function c(e){this.attributes={},this.complexAttributes={},this.la("style",";",":"),this.la("class"," ",null),e&&(this.k=new v.Ua)}i.RecognitionResult=l,c.prototype.la=function(e,t,n){var r=this;this.complexAttributes[e]=new E(this,function(){return m.Ja(r.attributes[e],t,n)})},o=c,i.ElementDescription=o,(n=i.La||(i.La={}))[n.Efficient=0]="Efficient",n[n.Verbouse=1]="Verbouse",n[n.Fast=2]="Fast",n[n.VerbouseDebug=3]="VerbouseDebug",(r=i.MeasurePhase||(i.MeasurePhase={}))[r.TotalFindElementTime=0]="TotalFindElementTime",r[r.Suspects=1]="Suspects",r[r.Screened=2]="Screened",r[r.Scored=3]="Scored",r[r.Screen_Attr_id=4]="Screen_Attr_id",r[r.Screen_Attr_name=5]="Screen_Attr_name",r[r.Screen_Text=6]="Screen_Text",r[r.Screen_Attr_walkmeid=7]="Screen_Attr_walkmeid",r[r.Screen_Exact_Xpath=8]="Screen_Exact_Xpath",r[r.Screen_Xpath=9]="Screen_Xpath",r[r.Screen_Attr_src=10]="Screen_Attr_src",r[r.Score_Xpath=11]="Score_Xpath",r[r.Score_Multi=12]="Score_Multi",r[r.Score_Text=13]="Score_Text",r[r.Score_Shape_Proportion=14]="Score_Shape_Proportion",r[r.Score_Complex_Class=15]="Score_Complex_Class",r[r.Score_Complex_Style=16]="Score_Complex_Style",r[r.Score_Attr_href=17]="Score_Attr_href",r[r.Score_Position=18]="Score_Position",r[r.Score_Tag=19]="Score_Tag",(a=i.AlgorithmSensitivity||(i.AlgorithmSensitivity={}))[a.High=0]="High",a[a.Medium=1]="Medium",a[a.Low=2]="Low",(s=i.SearchOptions||(i.SearchOptions={}))[s.IGNORE_ALL=4294967295]="IGNORE_ALL",s[s.IGNORE_NOTHING=0]="IGNORE_NOTHING",s[s.IGNORE_ID=1]="IGNORE_ID",s[s.IGNORE_POSITION=2]="IGNORE_POSITION",s[s.IGNORE_NAME=4]="IGNORE_NAME",s[s.IGNORE_TEXT=8]="IGNORE_TEXT",s[s.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",s[s.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",s[s.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",s[s.IGNORE_XPATH=256]="IGNORE_XPATH",s[s.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",s[s.IGNORE_CLASS=1024]="IGNORE_CLASS",s[s.IGNORE_STYLE=2048]="IGNORE_STYLE",s[s.IGNORE_HREF=4096]="IGNORE_HREF",s[s.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR";var d=(p.prototype.ka=function(e){this.list.push(e)},p.prototype.o=function(e,t,n){var r=!1;void 0!==n&&(r=0<(this.i&n)),r||this.list.push(new g.Ta(e,t))},p.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},p);f.prototype.Wb=function(e){this.a=e},f.prototype.setSearchOptions=function(e){this.i=e},f.prototype.setAlgorithmSensitivity=function(e){this.ma=e},f.prototype.F=function(e){this.isMeasuringTime&&this.timeMeasurements.push(e)},f.prototype.fb=function(){this.timeMeasurements=[]},f.prototype.I=function(e){return f.Nb[e]},f.prototype.recognize=function(e){var t,n=new l;3==this.mode&&(n.debug={minimumScore:this.V(),screeners:null,measurements:[],eliminationDetails:[]}),this.Wb(e),this.j.Yb(e);var r=_.Qb(this);this.j.q(e),this.isMeasuringTime&&(t=m.K());var i=this.kb();return this.isMeasuringTime&&(t=t.L(),this.F({name:this.I("suspects"),duration:t,misc:{amount:i.length}}),t=m.K()),e=this.zb(),i=this.Ab(i,n,0===e.length),this.isMeasuringTime&&(t=t.L(),this.F({name:this.I("screened"),duration:t,misc:{amount:i.count}}),t=m.K()),e=this.Sb(i,n,e),this.isMeasuringTime&&(t=t.L(),this.F({name:this.I("scored"),duration:t,misc:{amount:e.length}}),n.debug&&(n.debug.measurements=this.timeMeasurements),n.timeMeasurements=this.timeMeasurements,this.fb()),n.elements=this.jb(e),n.losers=this.ib(n,e),n.context=r,n},f.prototype.kb=function(){var e,n,r=this;return this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0]?this.a.preDefinedSuspects:(e=this.a.customSelector?this.a.customSelector:this.g(8192)&&this.a.autoQuery?n=this.a.autoQuery.replace(/([^\[\s]+)(\[[^\]]+\])?$/,"*$2"):"*",this.a.ignoreWalkmeElementsSelector&&(e+=":not("+this.a.ignoreWalkmeElementsSelector+")"),this.j.T(e,function(e){var t;if(("*"===e||n&&e===n)&&(r.a.f?1===r.a.f.length&&(t=r.a.f[0]):t=document,t&&t.querySelectorAll))try{return i.h.queryHelpers&&i.h.queryHelpers.querySelectorAll?i.h.queryHelpers.querySelectorAll(t,e):t.querySelectorAll(e)}catch(o){}return i.$(e,r.a.f)}))},f.prototype.Ab=function(e,t,n){for(var r=this.qb(),i=new S(e.length),o=0;o<e.length;o++){var a=this.j.W(e[o]);this.Fa(a,r,t,n)&&i.push(a)}return i},f.prototype.va=function(e){for(var t in e)if(this.g(t))return e[t]();return null},f.prototype.p=function(e,t,n){t&&(n.R()||n.A())&&e.push(n)},f.prototype.qb=function(){if(e=this.va({64:function(){return[]},128:function(){return[]},32:function(){return[new D.ha(1,2)]}}))return e;var e=[],t=!this.g(161);return null!=this.a.attributes.id&&t&&this.p(e,!0,new D.fa(!this.g(1)&&0<this.a.attributes.id.length,t)),e},f.prototype.zb=function(){if(e=this.va({64:function(){return[new D.s("id",1,0),new D.s("name",1,0)]},128:function(){return[new D.s("data-walkmeid",1,0)]},32:function(){return[]}}))return e;var e=[],t=!this.g(161);return null==this.a.attributes.id||t||this.p(e,!0,new D.fa(!this.g(1)&&0<this.a.attributes.id.length,t)),this.p(e,!0,new D.s("src",1,0)),this.p(e,!this.g(4),new D.s("name",1,0)),this.p(e,!this.g(8),new D.ha(1,0)),this.p(e,!this.g(256),new D.Wa(1,0,this.j)),e},f.prototype.Fa=function(e,t,n,r){return!r&&0===t.length||(e.G=this.Vb(e,t,n,e.G),t=1&e.G,!(2&e.G||!t&&r))},f.prototype.Vb=function(e,t,n,r){if(r&&2&r)return r;r=r||0;for(var i=0;i<t.length;i++){var o=t[i];if((!(1&r)||o.A())&&(r|=o=o.screen(e,this.a),2==o)){n.debug&&n.debug.eliminationDetails.push({element:e.c,screenerName:t[i].name});break}}return r},f.prototype.Sb=function(e,t,n){var r=this.xb(),i=m.reduce(r,function(e,t){return e+t.weight},0),o=e;e=new S(e.count);var a=this.V()+6,s=i;for(i=0;i<r.length;i++){var u=r[i];if(this.isMeasuringTime)var l=m.K(),c=0;for(var d=0;d<o.count;d++){var f=o.getItem(d),p=!1,g=s+f.totalScore<a&&0==this.mode;if(!g){var h=u.e(f);this.isMeasuringTime&&c++,this.Da&&f.details.push({scorerName:u.name,scorerWeight:u.weight,relativeScore:h/u.weight,absoluteScore:h}),f.totalScore+=h,f.totalScore>a&&(f.da||(!this.a.visibilityFilter||f.U().is(this.a.visibilityFilter))&&this.Fa(f,n,t,!0)?(a=f.totalScore,f.da=!0):p=!0)}p||g||e.push(f)}this.isMeasuringTime&&(d=l.L(),this.F({name:this.I(u.name),duration:d,misc:{count:c}})),s=Math.max(s-u.weight,0),u=o,o=e,(e=u).clear()}for(t=o.vb(),i=0;i<t.length;i++)t[i].totalScore-=6;return t},f.prototype.g=function(e){return!!(this.i&e)},f.prototype.xb=function(){var e=new d(this.i);e.ka(new x.Oa(this.a,this.i)),this.a.attributes.href&&"#"!=this.a.attributes.href&&e.o(new g.Ma("href",this.a),3,4096),e.ka(new g.Ra(this.a)),this.a.attributes.style&&e.o(new g.ea("style",";",":",this.a),.5,2048),this.a.attributes["class"]&&e.o(new g.ea("class"," ",null,this.a),.7,1024),this.a.text&&e.o(new g.Sa(this.a),3,8),e.o(new g.Va(this.j,this.a),1,256);var t=new g.Qa(this.a);return t.ya(this.a.uppercaseElementType)&&e.o(t,.7,512),e.list},f.prototype.jb=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n].totalScore;t=r<=t?t:r}if(r=[],t>this.V())for(n=0;n<e.length;n++)if(e[n].totalScore==t){var i=e[n];i.U(),r.push(i)}return r},f.prototype.ib=function(e,t){if(this.Da){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},f.prototype.V=function(){var e=t[this.ma];return null==e&&(e=t[1]),e},f.Nb={suspects:1,screened:2,scored:3,"AttributeScreen[src]":10,TextScreen:6,IdScreen:4,"AttributeScreen[name]":5,XpathScreen:9,"Multiple attributes":12,TextScorer:13,"Attribute Scorer : href":17,XpathScorer:11,ShapeProportionScorer:14,"ComplexAttributeScorer : class":15,"ComplexAttributeScorer : style":16,PositionScorer:18,TagScorer:19},o=f;function f(e,t,n){this.i=0,this.ma=1,this.mode=e,this.Da=1==this.mode||3==this.mode,this.timeMeasurements=[],this.j=n?new B:new R,this.isMeasuringTime=t||3===this.mode}function p(e){this.list=[],this.i=e}i.ElementRecognizerSession=o}(M=M||{}),e.exports={Version:"1.0.20",ElementRecognition:M,TempUtils:m,ContextUtils:_,TextUtils:h,XpathLib:v}},function(e,t){function f(e){return Math.min(Math.max(e,1),5)}function p(e){return Math.floor(e/2)+1}function g(){}e.exports=function h(e,t){t=t||g;var n=e.result,r=e.stepSensitivity,i=e.sensitivityMap,o=(n&&n.winner).totalScore;if(t("STRENGTH-CALC: old element score is "+f(p(o))),!e.feStrengthCalc)return f(p(o));var a=0,s=0,u=n.losers;if(u&&u.length){var l=o-Math.max.apply(0,function c(e,t){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e(t[r]);return n}(function d(t){return function(e){return e[t]}}("totalScore"),u));l<.3?a+=3:l<.8?a+=2:l<=1.5?a+=1:3<l&&(s+=1)}else s+=1;return r!==undefined&&i!==undefined&&o-i[r]<.3&&(a+=1),o=p(o),0<a?o-=Math.min(a,3):o+=Math.min(s,2),t("STRENGTH-CALC: new element score is "+(o=f(o))),o}},function(e,t){e.exports=function s(t,n,r){var i=Math.min,o=Math.random;function a(e){return e=e||1,t.getBILogger().isEnabled()&&(n.isFeatureEnabled("enablePerfLogs")&&o()<1/(150+50*i(e,9))||n.isFeatureEnabled("forcePerfLogs"))}this.shouldMonitor=function(e){var t;return n.isFeatureEnabled("fe_monitor_session")?(t=r.shouldMonitor())===undefined&&(t=a(e)):t=a(e),!!t}}},function(e,t){e.exports=function n(t){this.isFeatureManagerReady=function(){return t.isReady()},this.isFeatureEnabled=function(e){return t.isReady()?t.isFeatureEnabled(e):!!_walkmeInternals.findElementFeatures&&!!_walkmeInternals.findElementFeatures[e]},function e(){}.apply(this,arguments)}},function(e,t){e.exports=function y(r,n,e,t){var o,a,i,s,u,l,c=this,d=-1;function f(){return n.isFeatureEnabled("fe_no_session_cache")}function p(e){e=e||0;var t=c.shouldMeasureScrorers();o=new s.ElementRecognition.ElementRecognizerSession(e,c.shouldMeasure(),t,i),i=!1,function n(){u&&r.libSetTimeout(g,0)}()}function g(){a=0,o=null,u=!(i=!1),l=undefined,d=-1}function h(){return o&&0<a}function m(e,t){if(!t)return h()||i||(i=!0),function n(){a<0&&(a=0)}(),a+=1,!0}c.getSession=function(e,t){return h()||(s=t,p(e)),n.isFeatureEnabled("fe_monitor_session")||(o.isMeasuringTime=c.shouldMeasure()),o},c.wrapSession=function(e,t){var n=f();m(0,n);var r=e&&e();return function i(e){e||(a-=1,o&&a<=0&&g())}(n),r},c.startSessionForEditor=function(e,t){var n=f();return c.setAutoCloseSessionFlag(t),m(0,n)},c.endSessionForEditor=function(){if(!f())return g(),!0},c.setAutoCloseSessionFlag=function(e){e!==undefined&&null!==e&&(u=e)},c.setSessionCacheFlag=function(e){e!==undefined&&null!==e&&(i=e)},c.shouldMonitor=function(){return l},c.setShouldMonitor=function(e){l=e},c.shouldMeasure=function(){return c.shouldMonitor()||t.shouldMeasure()},c.incrementFeIndex=function(){d++},c.getFeIndex=function(){return d},c.shouldMeasureScrorers=function(){return n.isFeatureEnabled("fe_measure_scorers")||t.shouldMeasure()},c.closeSession=g,function v(){g()}.apply(this,arguments)}},function(e,t){e.exports=function y(t,n,i,e,r,o,a){var s,u,l,c,d,f,p=this;function g(t,n){return function(e){return function r(e,t,n){return wmjQuery.extend({type:"feperf",name:t.name,duration:t.duration,instanceId:n,sessionId:e,version:u.Version,reason:u.VersionName},t.misc||{})}(t,e,n)}}function h(e){var t=function r(n,e){return i.reduceSpec(e,function(e,t){return e.concat(i.mapSpec(t.measurment,g(n,t.feIndex)))},[])}(p.getSessionId(),e);i.foreach(t,function(e){n.getBILogger().send("feperf",e)})}function m(t){return function(e){return e[t]}}p.setFE=function(e){u=e},p.addMeasurement=function(e){if(e)return s.push({measurment:e,monitor:o.shouldMonitor(),feIndex:o.getFeIndex()}),l||t.libSetTimeout(function(){!function t(){if(l=!1,0<s.length){r.shouldMeasure()&&r.handleSessionMeasurements(d(s,m("measurment")));var e=f(s,m("monitor"));e.length&&(!a.isFeatureEnabled("fe_measure_scorers")&&o.shouldMeasureScrorers()&&(e=d(e,function(e){return e.measurment=f(e.measurment,function(e){return e.name<=u.ElementRecognition.MeasurePhase.Scored}),e})),h(e)),s=[],c=undefined}}()},0),l=!0,e.id},p.getSessionId=function(){return c=c||e.generateGUID()},function v(){l=!(s=[]),f=i.filterSpec,d=i.mapSpec}.apply(this,arguments)}},function(e,t){e.exports=function n(r,i,t){function o(e){for(var t=!1,n=0;!t&&n<r.length;n++)t=e(r[n])}this.hasPlugins=function(){return 0<r.length},this.registerPlugin=function(e){r.push(e),e&&e.init&&e.init(t.getElementFinder())},this.findElement=function(t,n){var r;return o(function(e){return(r=e.findElement&&e.findElement(t,n&&n.scoreOut,n))!==undefined}),r},this.extendDescription=function(t,e){var n=i.secureEvalJSON(e);return o(function(e){e.extendDescription&&e.extendDescription(t,n)}),i.toJSON(n)},this.extendResult=function(t,n,r,i){o(function(e){e.extendResult&&e.extendResult(t,n,r,i)})},this.extendOriginalSettings=function(t,n){try{o(function(e){e.extendOriginalSettings&&e.extendOriginalSettings(t,n)})}catch(e){return!1}return!0},this.extendAdaptedSettings=function(t,n,r){o(function(e){e.extendAdaptedSettings&&e.extendAdaptedSettings(t,n,r)})}}},function(e,t){e.exports=function p(i,o,e,a){var s,n,u,l,r,c,d=this,f=!1;d.init=function(){if(f||!function r(){return s=a.getPlatformPageIdentifier()}())return f;f=!0;var e=function e(){return o.location},t=function t(e){return i.isPhraseHuman(e)},n=[new s.GeneralCapture(t),new s.SFPlatformCapture(e)];return u=new s.PlatformPageCapture(n),l=s.ComparersFactory.createSalesForce(),d.resetCollection(),f},d.isEnabled=function(){return f},d.captureCurrentPage=function(){return u.capture()},d.resetCollection=function(){r=new s.PageDescriptionCollection(l)},d.addSerializedPage=function(e,t){var n=s.PageDescription.deserialize(e);r.add(n,t)},d.updateCurrentPage=function(){c={},n=u.capture()},d.getPageKey=function(e){var t=e.ElementDescription.pageKey;if(d.getPageDesc(t))return t},d.getPageDesc=function(e){return r.getPage(e)},d.getComparer=function(){return l},d.compareCurrent=function(e){var t=d.getPageKey(e);return c[t]||(c[t]=l.compareCurrent(n,d.getPageDesc(t),r)),c[t]},d.editorApi={isEnabled:d.isEnabled,updateCurrentPage:d.updateCurrentPage,addSerializedPage:d.addSerializedPage,resetCollection:d.resetCollection,captureCurrentPage:function(){var e=d.captureCurrentPage(),t=l.compareDescriptions(e,e);if(t&&t.match)return e.serialize()}},function t(){}.apply(this,arguments)}},function(e,t){e.exports=function n(e){this.getBILogger=function(){return e.get("BILogger")},this.getPlatformPageIdentifier=function(){return e.has("PlatformPageIdentifier")?e.get("PlatformPageIdentifier"):null},this.getElementFinder=function(){return e.get("ElementFinder")},this.getCommonEventAttributesProvider=function(){return e.get("CommonEventAttributesProvider")},this.getEventCollectorWalkMeDataProvider=function(){return e.get("EventCollectorWalkMeDataProvider")},this.now=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},this.isInEditor=function(){return e.has("IsInEditor")&&e.get("IsInEditor").get()},this.isDebuggerOnWindow=function(){return e.has("DebuggerManager")&&e.get("DebuggerManager").isDebuggerOnWindow()}}},function(e,t,n){var g=n(689),i=["IsIdentifyByText","IsIgnoreText","IsIgnoreId","IgnorePosition","IsIdentifyById","IgnoreShapeProportion","IgnoreClass","IgnoreStyle","IgnoreHref","IgnorePageIdentification","IsValidPageId","IsJquerySelector"],h=["enableFEAllTypes","dw5","forceIgnorePosition","noAutoQuery","fe_no_xpath_cache","feStrengthCalc","disableDefaultFE","fe_no_session_cache","strongMtVisible","anyPointInteractable","nonVisibleIframe","visibleOpacity","ieAdaptVisibility","shadow-dom-use-cache","disableShadowjQueryWrapper","shadow-dom-no-cache","enablePerfLogs","fe_no_session_cache","fe_monitor_session","forceIgnorePosition","noAutoQuery","fe_no_xpath_cache","fe_monitor_session"];function m(e,t,n){return{identifySettings_stepSensitivity:t.StepSensitivity,identifySettings_threshold:n(t.StepSensitivity),identifySettings_settings:g.obfArr(g.settingsMapping,function r(e){for(var t=[],n=0;n<i.length;n++)e[i[n]]&&t.push(i[n]);return t}(t)),identifySettings_jquerySelector:t.JquerySelector,identifySettings_elementDescription:e.toJSON(t.ElementDescription),identifySettings_wmDate:t.ElementDescription.wmDate,identifySettings_wmVersion:t.ElementDescription.wmVersion}}e.exports=function(d,f,p){return function(e,t,n,r,i){var o={},a={result:!!t};if(o.allEvents=a,n.reason?a.reason=n.reason:e.IsJquerySelector&&(a.reason="jQuery"),r){var s=function l(e){for(var t,n=[],r=e;r;)n.push("type:"+r.type+"&id:"+r.id),r.stickyType&&!t&&(t=r.stickyType),r=r.owner;return{chain:n,owner_type:e.type,owner_id:e.id,stickyType:t}}(r);a.owner_type=s.owner_type,a.owner_id=s.owner_id,a.owner_chain=s.chain,a.owner_sticky=Boolean(s.stickyType)}var u=f.hasPlugins()?"N/A":undefined;return a.pluginName=n.pluginName||u,a.pluginVersion=n.pluginVersion||u,a.pluginCaptureVersion=n.pluginCaptureVersion||u,a.capturePlatformVersion=n.capturePlatformVersion||u,a.platformVersion=n.platformVersion||u,a.customContext=n.customContext,a.pluginSubType=n.pluginSubType||u,a.pageResult=n.pageResult||u,a.features_list=g.obfArr(g.featuresMapping,function c(e){for(var t=[],n=0;n<h.length;n++)e.isFeatureEnabled(h[n])&&t.push(h[n]);return t}(d)),d.isFeatureEnabled("feresearch")&&(o.first=m(p,e,i)),o}}},function(e,t){e.exports={settingsMapping:{IsIdentifyByText:"b1",IsIgnoreText:"b2","IsIgnoreId:":"b3",IgnorePosition:"b4",IsIdentifyById:"b4",IgnoreShapeProportion:"b5",IgnoreClass:"b6",IgnoreStyle:"b7",IgnoreHref:"b8",IgnorePageIdentification:"b11",IsValidPageId:"b12",IsJquerySelector:"b14"},featuresMapping:{enableFEAllTypes:"a1",dw5:"a2",forceIgnorePosition:"a3",noAutoQuery:"a4",fe_no_xpath_cache:"a5",feStrengthCalc:"a6",disableDefaultFE:"a7",fe_no_session_cache:"a8",strongMtVisible:"a9",anyPointInteractable:"a10",nonVisibleIframe:"a11",visibleOpacity:"a12",ieAdaptVisibility:"a13","shadow-dom-use-cache":"a14",disableShadowjQueryWrapper:"a15","shadow-dom-no-cache":"a16",enablePerfLogs:"a17",fe_monitor_session:"a19"},obfArr:function i(e,t){for(var n=[],r=0;r<t.length;r++)e[t[r]]&&n.push(e[t[r]]);return n}}},function(e,t){e.exports=function n(){var i={same:1,diff:2,ignore:3,invalid:4};this.setPageResult=function(e,t){var n=i[e];n&&(t.pageResult?function r(e,t){t.pageResult>e&&(t.pageResult=e)}(n,t):t.pageResult=n)}}},function(e,t){function C(t){return function(e){return e[t]}}e.exports=function o(n,p,g,h){var r,i,m={MATCH:0,FOUND_WRONG_ELEMENT:1,ELEMENT_NOT_FOUND:2,FALSE_POSITIVE:3,SCORE_CLOSE_TO_THRESHOLD:4,SCORE_CLOSE_TO_FIRST_LOSER:5},v={NOT_A_SUSPECT:0,DROPPED_IN_SCREENING:1,SCORED:2},y={IdScreen:"a",XpathScreen:"b",ExactXpathScreen:"f",TextScreen:"e","AttributeScreen[src]":"d","AttributeScreen[name]":"c"},S={XpathScorer:"a","Multiple attributes":"b",TextScorer:"c",ShapeProportionScorer:"d","ComplexAttributeScorer : class":"e","ComplexAttributeScorer : style":"f","Attribute Scorer : href":"g",PositionScorer:"h",TagScorer:"i"};function E(e){return e.IsJquerySelector&&h.getBILogger().isEnabled()&&n.isFeatureManagerReady()&&n.isFeatureEnabled("fe_compare_jquery")&&function t(){r!==p.getSessionId()&&(i=Math.random()<.001,r=p.getSessionId());return i}()}function w(e,t,n,r,i){var o=t&&t.length&&t[0],a=n&&n.length&&n[0];!function s(e){h.getBILogger().send("feresearch",e)}(function l(e,t,n,r,i,o){var a,s={type:"fer",version:{fer:"1.0.0"},fe:{sId:p.getSessionId(),result:n},feb:{iid:i.instanceId,a:e&&e.length},fec:{iid:o,ts:r,a:t&&t.length}};try{a=h.getCommonEventAttributesProvider().get()}catch(u){a={}}return wmjQuery.extend(!0,{},a,s)}(t,n,function u(e,t,n,r){var i;if(t!==n)i=t?n?m.FOUND_WRONG_ELEMENT:m.ELEMENT_NOT_FOUND:m.FALSE_POSITIVE;else if(i=m.MATCH,n){var o=r.totalScore,a=h.getElementFinder().getThreshold(e.StepSensitivity)||0,s=(g.max(r.losers||[],C("totalScore"))||{}).totalScore||0;T(o,a)?i=m.SCORE_CLOSE_TO_THRESHOLD:T(o,s)&&(i=m.SCORE_CLOSE_TO_FIRST_LOSER)}return i}(e,o,a,r),function c(e,t,n){var r;if(e){var i=h.getElementFinder().getFindElementCore(),o=n.targetPhase;r=o===undefined||null===o?v.NOT_A_SUSPECT:o===i.ElementRecognition.MeasurePhase.Suspects?v.DROPPED_IN_SCREENING:v.SCORED}return r}(o,0,r),i,r.instanceId)),function d(e){for(var t=0;t<e.length;t++)h.getBILogger().send("fescores",e[t])}(function f(t,e,n){var r=[],i=function c(e,t){if(!e||!e.length)return;for(var n=e[0],r=t(n),i=1;i<e.length;i++){var o=t(e[i]);r<o&&(r=o,n=e[i])}return n}(n.losers||[],C("totalScore"));e&&r.push({type:"winner",screeners:n.screenerDetails,scorers:n.details,totalScore:n.totalScore,status:v.SCORED});if(t&&t!==e){var o=g.filterSpec(n.losers||[],function(e){return e.element[0]===t})[0];o&&r.push({type:"target",screeners:o.screenerDetails,scorers:o.details,totalScore:o.totalScore,status:v.SCORED})}i&&i.element&&i.element[0]!==t&&r.push({type:"firstLoser",screeners:i.screenerDetails,scorers:i.details,totalScore:i.totalScore,status:v.SCORED});for(var a=h.getEventCollectorWalkMeDataProvider().getWalkMeData(),s=[],u=0;u<r.length;u++){var l=r[u];s.push({type:"fes",version:{fes:"1.0.0"},wm:{uId:a.uId,euId:a.euId},fe:{sId:p.getSessionId(),iid:n.instanceId,sty:l.type,sta:l.status,sn:g.reduceSpec(l.screeners||[],function(e,t){return e[y[t.screenerName]]=t.result,e},{}),tot:l.totalScore,sc:g.reduceSpec(l.scorers||[],function(e,t){return e[S[t.scorerName]]=t.absoluteScore,e},{})}})}return s}(o,a,r))}function T(e,t){return Math.abs(e-t)<=.5}this.exec=function(e,t,n,r,i,o,a){var s=function f(e){return e&&e.JqueryIdentifySettings}(e);if(s&&E(e)){s.ElementDescription.target=o||wmjQuery();var u={},l=h.getElementFinder(),c=l.getFindElementCore().ElementRecognition.AlgorithmMode.NotSoEfficient,d=l.findElement(s,t,u,c,r,i);s.ElementDescription.target=undefined,w(s,o,d,u,a)}}}},function(e,r,t){(function(n){(function(){"use strict";r.__esModule=!0;var e=(t.prototype.setUiObject=function(e){this._uiObject=e},t.prototype.setSettings=function(e){this._settings=e},t.prototype.getOverlay=function(){if(this._canDisplayOverlay&&this._settings.overlay){var e=this._settings.overlay.opct,t=this._settings.overlay.color;return this._overlay=this._overlay||this._overlayManager.create(this._uiObject,e,t),this._overlay}},t.prototype.removeOverlay=function(){this._canDisplayOverlay&&this._overlay&&this._overlay.remove()},t);function t(){this._overlayManager=n.get("OverlayManager"),this._uiUtils=n.get("UiUtils"),this._canDisplayOverlay=this._uiUtils.canDisplayOverlay()}r.PopupUIUtil=e,n.register("PopupUIUtil").asCtor(e).asProto()}).call(window)}).call(this,t(2))},function(t,e,n){(function(){var e=n(662);t.exports=new e.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<div id="walkme-dev-mode-alert" class="walkme-to-remove" style="position: fixed !important;top: 3px !important;left: 30px !important;width: auto !important;max-width: 50px;height: 20px !important;padding: 4px !important;border: none !important;border-radius: 10px !important;margin: 0 !important;box-sizing: content-box !important;font-family: Verdana, sans-serif !important;font-size: 14px !important;line-height: 21px !important;opacity: 0.7;overflow: hidden !important;white-space: nowrap !important;cursor: pointer !important;transition: all 400ms !important;z-index:'),r.b(r.t(r.f("popupBalloonZindex",e,t,0))),r.b(" !important;background-color:"),r.b(r.t(r.f("backgroundColor",e,t,0))),r.b(" !important;"),r.b("\n"+n),r.b("    "),r.s(r.f("mobile",e,t,1),e,t,0,673,819,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-touch-callout: none;-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;")}),e.pop()),r.b('"><span id="walkme-env-wrapper" style="pointer-events: none !important;">'),r.b(r.t(r.f("env",e,t,0))),r.b('</span> <span id="walkme-message-wrapper" style="display: none !important; pointer-events: none !important;">-'),r.b(r.t(r.f("message",e,t,0))),r.b("</span></div>"),r.fl()},partials:{},subs:{}})}).call(window)},function(r,e,t){(function(n){(function(){"use strict";var t=(e.prototype.children=function(){return this._children},e.prototype.properties=function(e){return e&&this._propertiesGenerator.clearCache(),this._propertiesGenerator},e.prototype.type=function(){return this._type.toLowerCase()},e.prototype.typeId=function(){return this._typeId},e.prototype.name=function(){return this._name},e.prototype.id=function(){return this._id},e.prototype.description=function(){return this._description||""},e.prototype.keywords=function(){return this._keywords},e);function e(e){var t=e.id;this._type=e.type,this._typeId=e.typeId,this._id=t,this._description=e.description,this._children=e.childNodes,this._name=e.name,this._propertiesGenerator=e.propertiesGenerator,this._keywords=e.keywords?e.keywords:[];var n=e.activateFunction;this.activate=function(e){n(t,e)}}n.register("DeployableTreeNodeCreator").asInstance(function(e){return new t(e)}),r.exports=t}).call(window)}).call(this,t(2))},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var r,e=u(73),t=u(100),n=(r=t.DeployablesManager,o(i,r),i=a([e.Provide("ExperimentsManager",{dependencies:"Lib, Consts"})],i));function i(e,t){var n=r.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.AbExperiment})||this;return n._name="Experiments",n}s.ExperimentsManager=n}).call(window)}).call(this,u(1),u(72))},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var i,e=u(73),t=u(100),n=(i=t.DeployablesManager,o(r,i),r.prototype.getAllSegmented=function(){return this.segmentedProvidersUrls},r.prototype.setSegmentedProviders=function(){this.segmentedProvidersUrls=[];var e=this.getAll();if(0<e.length){var n=this._conditionCheckerFactory.createConditionChecker(e[0].Settings.DisplayCondition);this.segmentedProvidersUrls=wmjQuery(e).filter(function(e,t){return n.getCurrentEvaluationValueAndStopEvaluating(t.Settings.DisplayCondition)}).map(function(e,t){return t.Id}).toArray()}},r.STOP_CONDITIONS={Interacted:"interacted"},r=a([e.Provide("SearchProviderUrlsManager",{dependencies:"Lib, Consts, ConditionCheckerFactory"})],r));function r(e,t,n){var r=i.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.SearchProviderUrl})||this;return r._consts=t,r._conditionCheckerFactory=n,r._name="SearchProviderUrl",r.segmentedProvidersUrls=[],r}s.SearchProviderUrlsManager=n}).call(window)}).call(this,u(1),u(72))},function(e,l,c){(function(o,s,u){(function(){"use strict";l.__esModule=!0;var i,a,e=c(73),t=c(100),n=(i=t.DeployablesManager,o(r,i),(a=r).prototype.activateById=function(e,t){var n=this;if(this._resultsCache[e]!=undefined)return this._resultsCache[e];var r={elementName:"conditionBlock"+e},i=s.get("ConditionCheckerFactory").createOld(r);i.onValueChanged(function(e){t&&t(e)});var o=this.getById(e);return i.evaluateAsync(o.ConditionsTree),this._resultsCache[e]=i.getCachedValue(),i.cleanResources(),this.timerManager.libSetTimeout(function(){n._resultsCache[e]=undefined},a.RESULT_CACHE_TIME),this._resultsCache[e]},r.RESULT_CACHE_TIME=500,r=a=u([e.Provide("ConditionBlocksManager",{dependencies:"Lib,Consts,TimerManager"})],r));function r(e,t,n){var r=i.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.ConditionBlock})||this;return r.timerManager=n,r._resultsCache={},r}l.ConditionBlocksManager=n}).call(window)}).call(this,c(1),c(2),c(72))},function(e,a,s){(function(i,o){(function(){"use strict";a.__esModule=!0;var l,e=s(73),t=s(100),n=(l=t.DeployablesManager,i(r,l),r.prototype.injectTagsToDeployables=function(){var e=this.getAll();this.injectConditionsToDeployable(e)},r.prototype.injectConditionsToDeployable=function(e){var t=this.getCombinedDeployableTagsConditions(e,"Or");for(var n in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(n)){var r=this.consts.DEPLOYABLE_TYPE[n],i=this.deployablesManagerFactory.get(r);if(i)for(var o=i.getAll(),a=0;a<o.length;a++){var s=o[a],u=t[r]&&t[r][s.Id],l=this.tagsSegmentationProperties.properties[r];s.Settings||(s.Settings={});var c=u;l&&(c=this.tagsInjector.inject(s,u,l)),s.Settings.ASEnabled&&this.injectConditionTreeToDeployableAutostart(s,c,l,"And")}}},r.prototype.injectConditionTreeToDeployableAutostart=function(e,t,n,r){this.shouldInjectTagsIntoAutoStart(n)&&(n&&n.isNewConditions?e.ConditionTrees.ASCT=this.newConditionsCombiner.combine(r,t,e.ConditionTrees.ASCT):e.Settings.ASCT=this.oldConditionsCombiner.combine(r,t,e.Settings.ASCT)),e.Settings.ASCT&&(e.Settings.ASCTEnabled=1)},r.prototype.shouldInjectTagsIntoAutoStart=function(e){return!e||!e.dontInjectTagsIntoAutoStartFeature||!this.featuresManager.isFeatureEnabled(e.dontInjectTagsIntoAutoStartFeature)},r.prototype.getCombinedDeployableTagsConditions=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.Settings&&i.Settings.Condition)for(var o=i.LinkedDeployables.length-1;0<=o;o--){var a=i.LinkedDeployables[o],s=this.deployablesManagerFactory.get(a.DeployableType).getById(a.DeployableID);s&&this.updateTagsConditionDictionary(n,i,s,a.DeployableType,t)}}return n},r.prototype.updateTagsConditionDictionary=function(e,t,n,r,i){e[r]||(e[r]={});var o=e[r][n.Id];e[r][n.Id]=this.oldConditionsCombiner.combine(i,t.Settings.Condition,o)},r=o([e.Provide("TagsManager",{dependencies:"Lib, OldConditionsCombiner, TagsInjector, TagsSegmentationProperties, DeployablesManagerFactory, Consts, NewConditionsCombiner, FeaturesManager"})],r));function r(e,t,n,r,i,o,a,s){var u=l.call(this,{deployables:[],lib:e})||this;return u.oldConditionsCombiner=t,u.tagsInjector=n,u.tagsSegmentationProperties=r,u.deployablesManagerFactory=i,u.consts=o,u.newConditionsCombiner=a,u.featuresManager=s,u._name="Tag",u}a.TagsManager=n}).call(window)}).call(this,s(1),s(72))},function(e,a,t){(function(o,r){(function(){"use strict";a.__esModule=!0;var i,e=o.get("UIComponentsClasses").eventBasedObject,t=(r(n,i=e),n.prototype.setTopContainer=function(e){var t=o.get("CommonUtils").isValueTrue(e.isJquerySelector)?e.jquerySelector:undefined;this._topContainer=o.get("TransparentLayerProvider").tryGetWalkMeLayer(o.get("TopContainerProvider").getTopContainer(null,!1,t))},n.prototype.setUiObject=function(e){this._uiObject=e},n.prototype.getContainer=function(){return this._topWindow},n.prototype.append=function(e){this._topContainer.append(this._uiObject),e&&e()},n.prototype.prepend=function(e){this._topContainer.prepend(this._uiObject),e&&e()},n.prototype.remove=function(e){this._uiObject.remove(),this._isVisible=!1,e&&e()},n.prototype.show=function(e){this._uiObject.show(),this._isVisible=!0,e&&e()},n.prototype.hide=function(e){this._uiObject.hide(),this._isVisible=!1,e&&e()},n.prototype.isVisible=function(){return this._isVisible},n);function n(e){var t=i.call(this)||this;t._isVisible=!1;var n=o.get("Lib"),r=o.get("FramesetsUtils").shouldHandlePageAsFramesets()?o.get("BiggestFrameProvider").getBiggestFrame().contentWindow:window;return t._lib=n,t._topWindow=wmjQuery(r),t._settings=e,t.setTopContainer(e),t}a.DisplayerBase=t}).call(window)}).call(this,t(2),t(1))},function(e,l,c){(function(a,s,u){(function(){"use strict";l.__esModule=!0;var i,o,e=c(699),t=c(73),n=(i=e.DisplayerBase,a(r,i),(o=r).prototype.setUiObject=function(e){i.prototype.setUiObject.call(this,e),this._popupUtil.setUiObject(this._uiObject)},r.prototype.show=function(e){if(this._isVisible)e&&e();else{var t;this.unbindEvents(),t=this._settings["z-index"]?this._settings["z-index"]:this.DEFAULT_Z_INDEX,this._uiObject.css("z-index",t);var n=wmjQuery.proxy(function(){this._isVisible=!0,e&&e()},this);this.pop(n),this.setUiObjectPosition()}},r.prototype.setUiObjectPosition=function(){if(this._settings.isStickyCss)this._uiObject.css("position","sticky");else if(this.uiComponent){var e=this._designTemplates.getDesignTemplateById(this.uiComponent.DesignTemplateId);e&&e.categories&&-1!==wmjQuery.inArray(this._announcementBarCategory,e.categories)&&this._uiObject.css("position","relative")}},r.prototype.pop=function(e){var t=parseInt(this._settings.position,10);t==this._positions.Center?this.popCenter(e):this.popCorner(t,e)},r.prototype.handleOverlay=function(){var e=Number(this._uiObject[0].style.zIndex),t=this._popupUtil.getOverlay();t&&(e==this.DEFAULT_Z_INDEX&&this._uiObject.css("z-index",e+1),t.show())},r.prototype.popCorner=function(e,t){this._uiObject.css({position:"fixed"}),this.handleOverlay();var n=(this._settings.marginV||0)+"px",r=(this._settings.marginH||0)+"px";switch(e){case this._positions.Top:this._uiObject.addClass(o.POSITION_PREFIX+"top"),this._uiObject.css({top:0,left:"50%",marginLeft:-this._uiObject.outerWidth()/2,marginTop:n});break;case this._positions.Right:this._uiObject.addClass(o.POSITION_PREFIX+"right"),this._uiObject.css({right:0,top:"50%",marginTop:-this._uiObject.outerHeight()/2,marginRight:r});break;case this._positions.Bottom:this._uiObject.addClass(o.POSITION_PREFIX+"bottom"),this._uiObject.css({bottom:0,left:"50%",marginLeft:-this._uiObject.outerWidth()/2,marginBottom:n});break;case this._positions.Left:this._uiObject.addClass(o.POSITION_PREFIX+"left"),this._uiObject.css({left:0,top:"50%",marginTop:-this._uiObject.outerHeight()/2,marginLeft:r});break;case this._positions.TopLeft:this._uiObject.addClass(o.POSITION_PREFIX+"top-left"),this._uiObject.css({left:0,top:0,marginTop:n,marginLeft:r});break;case this._positions.TopRight:this._uiObject.addClass(o.POSITION_PREFIX+"top-right"),this._uiObject.css({right:0,top:0,marginTop:n,marginRight:r});break;case this._positions.BottomRight:this._uiObject.addClass(o.POSITION_PREFIX+"bottom-right"),this._uiObject.css({right:0,bottom:0,marginBottom:n,marginRight:r});break;case this._positions.BottomLeft:this._uiObject.addClass(o.POSITION_PREFIX+"bottom-left"),this._uiObject.css({left:0,bottom:0,marginBottom:n,marginLeft:r})}this.fadeIn(t)},r.prototype.popCenter=function(e){this._uiObject.addClass("wm-position-center"),this._lib.centerElementInPage(this._uiObject,!1),this.handleOverlay(),this.fadeIn(e),this._resizeHandler=wmjQuery.proxy(function(){this._uiObject.stop(!1,!0),this._lib.centerElementInPage(this._uiObject,!0)},this),this._topWindow.bind(o.MOVEMENT_EVENTS,this._resizeHandler)},r.prototype.fadeIn=function(e){var t=this;this.domSessionManager.mutate(function(){t._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,e)})},r.prototype.hide=function(e){this._popupUtil.removeOverlay(),this._isVisible?(this.unbindEvents(),this._uiObject.stop(!0,!1).css("opacity",1).show().fadeOut(200,wmjQuery.proxy(function(){this._isVisible=!1,e&&e()},this))):e&&e()},r.prototype.remove=function(e){this.hide(wmjQuery.proxy(function(){this._uiObject.remove(),e&&e()},this))},r.prototype.unbindEvents=function(){this._resizeHandler&&this._topWindow.unbind(o.MOVEMENT_EVENTS,this._resizeHandler),this._resizeHandler=null},r.EVENT_SUFFIX="walkmeDisplayer",r.MOVEMENT_EVENTS="scroll."+o.EVENT_SUFFIX+", resize."+o.EVENT_SUFFIX,r.POSITION_PREFIX="wm-position-",r=o=u([t.Provide("PopupDisplayer",{dependencies:"DOMSessionManager",platforms:[t.PLATFORM.Web,t.PLATFORM.Desktop],proto:!0})],r));function r(e,t,n){var r=i.call(this,t)||this;return r.domSessionManager=e,r.uiComponent=n,r.DEFAULT_Z_INDEX=2147483631,r._positions=s.get("Positions"),r._announcementBarCategory=0,r._popupUtil=s.get("PopupUIUtil"),r._popupUtil.setSettings(t),r._designTemplates=s.get("DesignTemplates"),r}l.PopupDisplayer=n}).call(window)}).call(this,c(1),c(2),c(72))},function(e,u,l){(function(o,a,s){(function(){"use strict";u.__esModule=!0;var n,e=l(700),t=l(73),r=(n=e.PopupDisplayer,o(i,n),i.prototype.append=function(e){this._uiObject.css("position","fixed"),0==wmjQuery("#walkme-mobile-css-old-version").length&&this._resourceManager.injectCss(this._css,"walkme-mobile-css-old-version"),n.prototype.append.call(this,e)},i.prototype.pop=function(e){this.handleOverlay(),this.fadeIn(e)},i.prototype.handleOverlay=function(){n.prototype.handleOverlay.call(this);var e=this._popupUtil.getOverlay(),t=e&&e.getOverlayElement();t&&t.on("click.walkme touchend.walkme",wmjQuery.proxy(function(){this.remove()},this))},i=s([t.Provide("PopupDisplayer",{dependencies:"DOMSessionManager",platforms:[t.PLATFORM.MobileWeb],proto:!0})],i));function i(){var e=null!==n&&n.apply(this,arguments)||this;return e._css="/* Template 4.3 Only Fallbacks */ /* All */ @media only screen and (max-width: 640px) {   .wm-template-light,   .wm-template-standout-title,   .wm-template-standout-actions {    min-width: 85% !important;   }    } /* Light */ @media only screen and (max-height: 400px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 400px; \t} }  /* Standout Title */ @media only screen and (max-height: 400px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 75px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }  /* Standout Action */ @media only screen and (max-height: 400px) { \t.wm-template-standout-actions .wm-template-text{ \t\tmax-height: 75px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-button { \t\tpadding-top: 8px; \t\tpadding-bottom: 8px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }",e._resourceManager=a.get("ResourceManager"),e}u.MobilePopupDisplayer=r}).call(window)}).call(this,l(1),l(2),l(72))},function(e,n){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.addResources=function(e,t,n,r,i){var o=this._uiTemplates.get(e,t).Css;this.loadVariationsFonts([o].concat(n),r,i)},t.prototype.get=function(e,t,n,r,i,o,a,s){var u=this._commonUtils.clone(this._uiTemplates.get(e,t)),l=r||{},c=this._designTemplateHtmlGetter.get(o);c&&(u.Html=u.Html.replace(/{{{templateHtml}}}/g,c),l.templateHtml=c);var d=this._commonUtils.createElementInDocument(this._mustache.to_html(u.Html,l),i||window.document);this._shoutOutPlaceholdersReplacer.replace(a,d,s),c&&a&&this._shoutOutActionPlaceholderClassesAdder.addClasses(d,a),this.addDefaultClasses(d),this.inheritProperties(d);var f=d.wrap("<div />").parent(),p=this,g=n&&this._arrayUtils.map(n,function(e,t){return p.runCssHandlerWithParams(i,f,e,0==t)});u.Css=this.handleDynamicFontSize(s,u.Css);var h=this.runCssHandlerWithParams(i,f,u.Css,!(n&&n.length)),m=this._arrayUtils.any(g,function(e){return!!e});if(m)for(var v=g.length-1;0<=v;v--){var y=g[v];y&&this.recursiveApplyStyle(f,y)}return h&&this.recursiveApplyStyle(f,h),(m||h)&&this.addResetCss(d),this.addStateHandler(d),d.unwrap(),d.addClass(r.designTemplateCssClass),d.hide()},t.prototype.handleDynamicFontSize=function(e,t){return e&&e._settings&&this._dynamicFontSizeService.shouldResetLineHeight(e._settings)?this._dynamicFontSizeService.resetLineHeight(t):t},t.prototype.runCssHandlerWithParams=function(e,t,n,r){return void 0===r&&(r=!1),this._additionalTemplatesHandlers.run(this.HANDLE_SHOUTOUT_CSS_EVENT,arguments,n)},t.prototype.loadVariationsFonts=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i].metaData&&e[i].metaData.fonts;if(o)for(var a=0;a<o.length;a++){var s=this._fontsData.get(o[a]);s&&r.push(s)}}this._resourceManager.fonts(r,n||null,t,t)},t.prototype.addDefaultClasses=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.addClass(this.CLASSES_PREFIX+t),e.addClass(this.CLASSES_PREFIX+this._hostData.browser.name.toLowerCase()),"IE"==this._hostData.browser.name&&e.addClass(this.CLASSES_PREFIX+"ie-"+this._hostData.browser.version)},t.prototype.inheritProperties=function(e){var r=this,i=e.allCss();e.children().each(function(e,t){var n=wmjQuery(t);n.cssReset(i),r.inheritProperties(n)})},t.prototype.addResetCss=function(e){},t.prototype.addStateHandler=function(e){var o=this;e.find("*").addBack().each(function(e,t){var n=(t=wmjQuery(t)).data(o.STATES_DATA_KEY);if(n){var r=n.hover;o.addHoverState(t,r);var i=n.click;o.addClickState(t,i),t.removeData(o.STATES_DATA_KEY)}})},t.prototype.addHoverState=function(e,t){if(t){var n=this,r=e.attr("style");e.hover(function(){e.css(t)},function(){n._domManager.setAttribute(e,"style",r)})}},t.prototype.addClickState=function(t,n){if(n){var e=this,r=t.attr("style");t.mousedown(function(e){t.css(n)}),t.bind("mouseup blur",function(){e._domManager.setAttribute(t,"style",r)})}},t.prototype.recursiveApplyStyle=function(e,t){if(t&&t.children)for(var n in this.changePropertyOrder(t,"*"),t.children)if(t.children.hasOwnProperty(n)){var r=n.split(":"),i=e.find(r[0]),o=t.children[n].attributes;for(var a in o)!o.hasOwnProperty(a)||this._commonUtils.isIe7or8()&&"-ms-filter"==a||this.handleCSS(i,a,o[a],r[1]);this.recursiveApplyStyle(i,t.children[n].children)}},t.prototype.changePropertyOrder=function(e,t){if(e.children[t]){var n=e.children[t];delete e.children[t],e.children[t]=n}},t.prototype.handleCSS=function(e,t,n,r){if(n instanceof Array)for(var i in n)this.appendCSS(e,t,n[i],r);else this.appendCSS(e,t,n,r)},t.prototype.appendCSS=function(e,t,n,r){r?(r=r.toLowerCase(),this.stateCss(r,e,t,n)):e.cssReset(t,n)},t.prototype.stateCss=function(e,t,n,r){var i=t.data(this.STATES_DATA_KEY)||{};i[e]||(i[e]={}),i[e][n]||(i[e][n]=r),t.data(this.STATES_DATA_KEY,i)},t);function t(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g){this.CLASSES_PREFIX="wm-",this.STATES_DATA_KEY="templatesFactoryStates",this.HANDLE_SHOUTOUT_CSS_EVENT="handleShoutOutCss",this._logger=e,this._mustache=t,this._uiTemplates=n,this._resourceManager=r,this._fontsData=i,this._siteConfigManager=o,this._hostData=a,this._commonUtils=s,this._designTemplateHtmlGetter=u,this._additionalTemplatesHandlers=l,this._shoutOutPlaceholdersReplacer=c,this._shoutOutActionPlaceholderClassesAdder=d,this._arrayUtils=f,this._dynamicFontSizeService=p,this._domManager=g}n.TemplatesFactory=e}).call(window)},function(e,u,l){(function(o,a,s){(function(){"use strict";u.__esModule=!0;var t,e=l(702),n=l(73),r=(t=e.TemplatesFactory,o(i,t),i.prototype.addResetCss=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.find("span,button,input,label,a,b,br,img,i,u").cssReset("display","inline"),e.find("li").cssReset("display","list-item"),e.find("ul").cssReset("padding-left","40px"),this.setTableElementsDefaultCss(e),e.find("*").addBack().cssReset(this._consts.CSS_RESET).cssReset("direction",t),e.find("video").css("width","").css("height","")},i.prototype.setTableElementsDefaultCss=function(e){e.find("table").cssReset({display:"table","border-collapse":"separate","border-spacing":"2px"}),e.find("thead").cssReset({display:"table-header-group","vertical-align":"middle"}),e.find("tbody").cssReset({display:"table-row-group","vertical-align":"middle"}),e.find("tfoot").cssReset({display:"table-footer-group","vertical-align":"middle"}),e.find("td,th").cssReset({display:"table-cell","vertical-align":"inherit",padding:"1px"}),e.find("tr").cssReset({display:"table-row","vertical-align":"inherit"})},i=s([n.Provide("TemplatesFactory",{dependencies:"Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, AdditionalTemplatesHandlers, ShoutOutPlaceholdersReplacer, ShoutOutActionPlaceholderClassesAdder, ArrayUtils, DynamicFontSizeService, DomManager",platforms:[n.PLATFORM.MobileWeb,n.PLATFORM.Web,n.PLATFORM.Desktop],proto:!0})],i));function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._consts=a.get("Consts"),e}u.TemplatesFactoryWeb=r}).call(window)}).call(this,l(1),l(2),l(72))},function(e,a,s){(function(i,o){(function(){"use strict";a.__esModule=!0;var t=s(705),e=s(73),u=s(116),n=(r.prototype.init=function(){var e=this;this._eventBase.one("WalkMeReady",function(){return e.start()})},r.prototype.destroy=function(){this._active&&(this._dataIntegrityKeeper.unbind(this._onViolation),this.stopBackgroundProcesses())},r.prototype.start=function(){this._biLogger=i.get("ThrottledBILogger"),this.isEnabled()&&(this._active=!0,this._dataIntegrityKeeper.onViolation(this._onViolation),this.next())},r.prototype.isEnabled=function(){return window===top&&this._raf&&this._caf&&this._dataIntegrityKeeper.isEnabled()&&this._biLogger.isEnabled()&&this._featuresManager.isFeatureEnabled("enablePerfLogs")},r.prototype.loop=function(){var e=this;this._fpsCalculator=new t.AvgFpsCalculator(this._win,this._raf,this._caf),this._fpsCalculator.start(),this._timeout=this._timerManager.setWalkmeTimeout(function(){e.report(e._fpsCalculator.stop()),e._index++,e.next()},2e3)},r.prototype.next=function(){var e=this;this._timeout=this._timerManager.setWalkmeTimeout(function(){e.loop()},2e3)},r.prototype.ignoreNextMeasure=function(){var e=this;this.stopBackgroundProcesses(),this._rafId=this._raf.call(this._win,function(){return e.next()})},r.prototype.stopBackgroundProcesses=function(){this._timeout&&this._timeout.clear(),this._rafId&&this._caf.call(this._win,this._rafId),this._fpsCalculator&&this._fpsCalculator.stop()},r.prototype.report=function(e){this._biLogger.send("feperf",{key:this._key,duration:Math.round(e),amount:this._index})},r=o([e.Provide("FpsDataSender",{dependencies:"WmInternals,PerformanceDataIntegrityKeeper,requestAnimationFrame,cancelAnimationFrame,win,TimerManager,FeaturesManager"})],r));function r(e,t,n,r,i,o,a){var s=this;this._eventBase=e,this._dataIntegrityKeeper=t,this._raf=n,this._caf=r,this._win=i,this._timerManager=o,this._featuresManager=a,this._key=u.MEASUREMENT_KEYS.FpsAfterWalkMeReady,this._active=!1,this._index=0,this._onViolation=function(){return s.ignoreNextMeasure()}}a.FpsDataSender=n}).call(window)}).call(this,s(2),s(72))},function(e,r,i){(function(){"use strict";r.__esModule=!0;var t=i(122),e=(n.prototype.start=function(){this._start=t.now(),this.animationFrameLoop()},n.prototype.stop=function(){this._rafId&&this.caf.call(this.win,this._rafId);var e=t.now()-this._start;return 1e3*this._framesCount/e},n.prototype.animationFrameLoop=function(){var e=this;this._rafId=this.raf.call(this.win,function(){e._framesCount++,e.animationFrameLoop()})},n);function n(e,t,n){this.win=e,this.raf=t,this.caf=n,this._framesCount=0}r.AvgFpsCalculator=e}).call(window)},function(e,t,a){(function(o){(function(){"use strict";t.__esModule=!0;var n=a(707);function r(t){function r(e){t.send("feperf",n.enrichPerformanceData(e))}this.measure=function i(e,t){var n=o.create("PerformanceStopwatch",[e,t]);return n.start().then(r),n}}function i(){this.measure=function(){return{stop:function(){}}}}o.register("PerformanceBILogger").asFunction(function(e,t,n){return n.isFeatureEnabled("enablePerfLogs")&&t.isEnabled()&&e.isEnabled()?new r(e):new i}).dependencies("ThrottledBILogger, PerformanceDataIntegrityKeeper, FeaturesManager")}).call(window)}).call(this,a(2))},function(e,r,i){(function(){"use strict";r.__esModule=!0;var t=i(708);r.enrichPerformanceData=function n(e){e.permutations=t.activePermutations}}).call(window)},function(e,o,n){(function(t){(function(){"use strict";o.__esModule=!0;var r=n(709),i=n(73);function e(e){var t=e;return t.experiment=function(e,t){var n=r.choosePermutation(t);o.activePermutations.push(e+"_"+n.id),i.internalProvide(e,this,n)(n.use)},t}o.activePermutations=[],o.enableAbTesting=e,o.abCtx=e(t)}).call(window)}).call(this,n(2))},function(e,t){(function(){"use strict";t.__esModule=!0,t.choosePermutation=function i(e){for(var t=Math.random(),n=0,r=0;r<e.length-1;r++)if(t<(n+=e[r].weight))return e[r];return e[e.length-1]}}).call(window)},function(e,i,o){(function(s,r){(function(){"use strict";i.__esModule=!0;var e=o(73),n=o(122);t.prototype.start=function(){var e=this;function t(){e.cleanResources()}return this._startTime=n.now(),this.eventBase.bind(this.consts.EVENTS.BeforeWalkmeRemoved,this._deferredPromise.reject),this.performanceDataIntegrityKeeper.onViolation(this._deferredPromise.reject),this._deferredPromise.promise.then(t,t),this._deferredPromise.promise},t.prototype.stop=function(){this._deferredPromise.resolve(this.jQuery.extend({key:this.key,duration:Math.round(n.now()-this._startTime)},this.options.extraData))},t.prototype.cancel=function(){this._deferredPromise.reject()},t.prototype.getPromise=function(){return this._deferredPromise.promise},t.prototype.cleanResources=function(){this.performanceDataIntegrityKeeper.unbind(this._deferredPromise.reject)},t=r([e.Provide("PerformanceStopwatch",{proto:!0,dependencies:"PerformanceDataIntegrityKeeper,Consts,WmInternals,wmjQuery"})],t);function t(e,t,n,r,i,o){var a=this;void 0===o&&(o={}),this.performanceDataIntegrityKeeper=e,this.consts=t,this.eventBase=n,this.jQuery=r,this.key=i,this.options=o,this._deferredPromise={},this._deferredPromise.promise=new s(function(e,t){a._deferredPromise.resolve=e,a._deferredPromise.reject=t})}}).call(window)}).call(this,o(29),o(72))},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var e=u(73),r=u(116),n=["widgetEndLoad","dataFileStartLoad","dataFileEndLoad","postLibStartLoad","walkmeReady","walkmeReadyEnd","loadWalkmeConfigStart","loadWalkmeConfigEnd","widgetStartLoad","widgetStartInit","widgetEndInit","debuggerStartInit","debuggerEndInit"],t=(i.prototype.destroy=function(){this._fpsDataSender.destroy()},i.prototype.measure=function(e,t){return-1<this.arrayUtils.inArray(e,n)?this.performanceTimestampAdder.addTimeStamp(e):this.getBiLogger().measure(e)},i.prototype.getBiLogger=function(){return this._biLogger||(this._biLogger=o.get("PerformanceBILogger")),this._biLogger},i.prototype.isEnabled=function(){},i.prototype.registerProfilerCallback=function(){},i.prototype.startProfile=function(){},i=a([e.Provide("PerformanceAPI",{dependencies:"PerformanceTimestampAdder,ArrayUtils,FpsDataSender"})],i));function i(e,t,n){this.performanceTimestampAdder=e,this.arrayUtils=t,this._fpsDataSender=n,this.keys=r.MEASUREMENT_KEYS,n.init()}s.PerformanceAPI=t}).call(window)}).call(this,u(2),u(72))},function(e,o,a){(function(i){(function(){"use strict";o.__esModule=!0;var e=a(713),t=a(73),n=(r.prototype.bind=function(e){this._handlers||(this.init(),this._handlers=[]),this._handlers.push(e)},r.prototype.cleanResources=function(){this._handlers=null,this._root&&(this._root.unbind(),this._root=null)},r.prototype.init=function(){var n=this;this._root=new e.MutationObserverWrapperNode(function(e,t){return n.notify(e,t)}),this.eventBase.bind(this.consts.EVENTS.BeforeWalkmeRemoved,function(){return n.cleanResources()})},r.prototype.notify=function(e,t){for(var n=0;n<this._handlers.length;n++)try{this._handlers[n](e,t)}catch(r){this._log("Mutation handler invocation failed with error: "+r)}},r=i([t.Provide("MutationObserverWrapper",{dependencies:"WmInternals, Consts, Logger"})],r));function r(e,t,n){this.eventBase=e,this.consts=t,this._log=n.wrapCustomerLog("MutationObserverWrapper")}o.MutationObserverWrapper=n}).call(window)}).call(this,a(72))},function(e,t){(function(){"use strict";var r={childList:t.__esModule=!0,attributes:!0,subtree:!0},n="load.wmMONode",e=(i.prototype.addChild=function(e){this.children.push(e)},i.prototype.setObserver=function(e){this.observer.disconnect(),this.observer=e},i.prototype.unbind=function(){try{this.observer&&this.observer.disconnect(),wmjQuery(this.frameElement).off(n)}catch(t){}for(var e=0;e<this.children.length;e++)this.children[e].unbind();this.children=[]},i.prototype.bindLoadEvent=function(){var e=this;this.frameElement&&wmjQuery(this.frameElement).on(n,function(){e.handler.apply(window),e.unbind(),e.init()})},i.prototype.init=function(){var e,t=this;this.bindLoadEvent();try{e=this.frameElement?this.frameElement.contentDocument:document}catch(n){return}e&&(this.observer=new MutationObserver(function(e){t.handleMutations(e)}),this.observer.observe(e,r),this.handleChildren(e))},i.prototype.handleChildren=function(e){var n=this;wmjQuery("iframe, frame",e).each(function(e,t){n.handleNewFrame(t)})},i.prototype.handleNewFrame=function(e){var t;try{t=e.contentDocument}catch(r){return}if(t){var n=new i(this.handler,e);this.children.push(n)}},i.prototype.handleRemovedFrame=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].frameElement==e)return this.children[t].unbind(),void this.children.splice(t,1)},i.prototype.handleMutations=function(e){var t=this;this.handler.apply(window,[this.win,e]),e.forEach(function(e){t.handleMutation(e)})},i.prototype.handleMutation=function(e){for(var t=0;t<e.addedNodes.length;t++)this.handleNewNode(e.addedNodes[t]);for(t=0;t<e.removedNodes.length;t++)this.handleRemovedNode(e.removedNodes[t])},i.prototype.handleNewNode=function(e){if(this.isFrame(e))this.handleNewFrame(e);else for(var t=this.getFramesFromNode(e),n=0;n<t.length;n++)this.handleNewFrame(t[n])},i.prototype.handleRemovedNode=function(e){if(this.isFrame(e))this.handleRemovedFrame(e);else for(var t=this.getFramesFromNode(e),n=0;n<t.length;n++)this.handleRemovedFrame(t[n])},i.prototype.isFrame=function(e){return"IFRAME"==e.nodeName||"FRAME"==e.nodeName},i.prototype.getFramesFromNode=function(e){return e instanceof Element?e.querySelectorAll("iframe, frame"):[]},i);function i(e,t){this.handler=e,this.children=[],this.frameElement=t,this.win=t?t.contentWindow:window,this.init()}t.MutationObserverWrapperNode=e}).call(window)},function(e,t,n){"use strict";t.__esModule=!0;var a=n(715),s=n(716);t.init=function u(e,t,n,r,i){var o=new s.PerformanceManager(e,t,n);o.init(function(){!function n(e,t){e.register("LoggerManager").asCtor(a.LoggerManager).dependencies("SettingsFile, Consts, WmInternals"),e.register("ProfilerAPI").asInstance(t)}(r,o.performanceAPI),i()})}},function(e,t,n){"use strict";t.__esModule=!0,t.LoggerManager=function c(t,e,n){var r="wmLogger.js",i="logger/"+r;function o(e,t){"walkmelogger"!=t.searchTerm||s()||a()}function a(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t.getPlayerRelatedPath()+i),document.getElementsByTagName("head")[0].appendChild(e)}function s(){return 0<wmjQuery("script[src*='"+r+"']").length}function u(){n.unbind(e.EVENTS.Widget.SearchTermChanged,o)}this.launchLogger=a,this.isLoggerActivated=s,function l(){n.bind(e.EVENTS.Widget.SearchTermChanged,o),n.bind("removeWalkMe",u)}.apply(null,arguments)}},function(e,i,o){"use strict";(function(e){i.__esModule=!0;var t="wm-perf-toolkit",n=(r.prototype.init=function(e){var t=this.getPermalinkSession();return t?this.loadAndStartSession(t).then(e):this.isEnabled()?this.loadToolkit().then(e):(this.createStub(),void(e&&e()))},r.prototype.getPermalinkSession=function(){var e=/[?&]walkmeProfilerSession=([^&]*)/.exec(window.location.href);if(e)return this.removeFromUrl(e[0]),decodeURI(e[1])},r.prototype.removeFromUrl=function(e){if(window.history.replaceState){var t=window.location.href.replace(e,"");window.history.replaceState({},document.title,t)}},r.prototype.loadToolkit=function(n){var r=this;return new e(function(t){o.e(26).then(function(){var e=[o(967)];(function(e){r.createApi(e,n),t()}).apply(null,e)})["catch"](o.oe)})},r.prototype.createApi=function(e,t){var n=wmjQuery(this.wmInternals),r=new e.PerformanceProfilerLib({on:function(e,t){return n.on(e,t)},once:function(e,t){return n.one(e,t)}});t&&r.initServices(),this.performanceAPI.profiler=r.getAPI()},r.prototype.createStub=function(){var n=this;this.performanceAPI.profiler={startSession:function(e,t){return(t=t||{}).reload===undefined&&(t.reload=!0),n.loadAndStartSession(e,t,!0)},measure:function(){return{end:function(){}}},measureFn:function(e){return e()},measureEnd:function(){}}},r.prototype.loadAndStartSession=function(e,t,n){var r=this;return this.enable(),this.loadToolkit(n).then(function(){r.performanceAPI.profiler.startSession(e,t)})},r.prototype.enable=function(){this.localStorage&&this.localStorage.setItem(t,this.jsonUtils.toJSON({started:(new Date).getTime()}))},r.prototype.isEnabled=function(){var e=this.localStorage&&this.localStorage.getItem(t);return!!e&&(e=this.jsonUtils.secureEvalJSON(e),(new Date).getTime()<e.started+36e5)},r);function r(e,t,n){void 0===n&&(n=window._walkmeInternals),this.localStorage=e,this.jsonUtils=t,this.wmInternals=n,this.performanceAPI={},n.performance=this.performanceAPI}i.PerformanceManager=n}).call(this,o(29))},function(e,s,u){(function(o,a){(function(){"use strict";s.__esModule=!0;var t,e=u(718),n=u(73),r=(t=e.PlatformsServiceBase,o(i,t),i.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=0;n<e.length;n++)e[n].Settings&&e[n].Settings.platform||t.push(e[n]);return t},i=a([n.Provide("PlatformsService",{dependencies:"ExternalWalkMeConfig",platforms:[n.PLATFORM.Web,n.PLATFORM.MobileWeb,n.PLATFORM.Desktop]})],i));function i(e){return t.call(this,e)||this}s.WebPlatformsService=r}).call(window)}).call(this,u(1),u(72))},function(e,n){(function(){"use strict";n.__esModule=!0;var e=(t.prototype.getCurrentPlatform=function(){return this._externalWalkMeConfig.get("platform")},t);function t(e){this._externalWalkMeConfig=e}n.PlatformsServiceBase=e}).call(window)}]);